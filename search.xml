<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>数据运用与分析</title>
    <url>/2024-06-06-data-utilization.html</url>
    <content><![CDATA[<h2 id="数据运用与分析01"><a href="#数据运用与分析01" class="headerlink" title="数据运用与分析01"></a>数据运用与分析01</h2><h3 id="2024-04-20饼图"><a href="#2024-04-20饼图" class="headerlink" title="2024.04.20饼图"></a>2024.04.20饼图</h3><p>In [3]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = &#x27;SimHei&#x27;</span><br><span class="line"></span><br><span class="line"># 准备数据</span><br><span class="line"></span><br><span class="line">data = np.array([20, 50, 10, 15, 30, 55])</span><br><span class="line">pie_labels = np.array([&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;, &#x27;E&#x27;, &#x27;F&#x27;])</span><br><span class="line"></span><br><span class="line"># startangle 设置饼图的起始角度 默认是3点钟方向</span><br><span class="line"># counterclock 设置旋转方向 默认是True</span><br><span class="line"># autopct 显示每一部分所占百分比</span><br><span class="line"># shadow 设置饼图的阴影 默认False</span><br><span class="line"># pctdistance 设置百分比值与饼图中心的距离 默认为0.6</span><br><span class="line"># labeldistance 设置标签与饼图中心的距离 默认为1.1</span><br><span class="line"># wedgeprops 设置圆环的宽度</span><br><span class="line">plt.pie(data, radius=1, labels=pie_labels, startangle=180, counterclock=False,</span><br><span class="line">        autopct=&#x27;%.2f%%&#x27;, shadow=True, pctdistance=0.8, labeldistance=1.2,</span><br><span class="line">        wedgeprops=&#123;&#x27;width&#x27;: 0.6&#125; )</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280910185.png" alt="image-20260128091024080"></p>
<h3 id="2024-04-20支付宝数据饼图"><a href="#2024-04-20支付宝数据饼图" class="headerlink" title="2024.04.20支付宝数据饼图"></a>2024.04.20支付宝数据饼图</h3><p>In [3]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = &#x27;SimHei&#x27;</span><br><span class="line"></span><br><span class="line"># 准备数据</span><br><span class="line"></span><br><span class="line">data = np.array([800, 100, 1000, 200, 300, 200, 200, 200])</span><br><span class="line">pie_labels = np.array([&#x27;购物&#x27;, &#x27;人情往来&#x27;, &#x27;餐饮美食&#x27;, &#x27;通讯物流&#x27;, &#x27;生活日用&#x27;, &#x27;交通出行&#x27;, &#x27;休闲娱乐&#x27;, &#x27;其他&#x27;])</span><br><span class="line">div = [0, 0, 0, 0, 0.2, 0, 0, 0.2]</span><br><span class="line"></span><br><span class="line"># startangle 设置饼图的起始角度 默认是3点钟方向</span><br><span class="line"># counterclock 设置旋转方向 默认是True</span><br><span class="line"># autopct 显示每一部分所占百分比</span><br><span class="line"># shadow 设置饼图的阴影 默认False</span><br><span class="line"># pctdistance 设置百分比值与饼图中心的距离 默认为0.6</span><br><span class="line"># labeldistance 设置标签与饼图中心的距离 默认为1.1</span><br><span class="line"># wedgeprops 设置圆环的宽度</span><br><span class="line">plt.pie(data, radius=1, labels=pie_labels, startangle=180, counterclock=False,</span><br><span class="line">        autopct=&#x27;%.2f%%&#x27;, shadow=True, pctdistance=0.8, labeldistance=1.1,</span><br><span class="line">        wedgeprops=&#123;&#x27;width&#x27;: 0.8&#125;, explode=div)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280910884.png" alt="image-20260128091047847"></p>
<h3 id="2024-04-20散点图"><a href="#2024-04-20散点图" class="headerlink" title="2024.04.20散点图"></a>2024.04.20散点图</h3><p>In [4]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = &#x27;SimHei&#x27;</span><br><span class="line"></span><br><span class="line"># 准备数据</span><br><span class="line">num = 100</span><br><span class="line"># 生成0-1的随机数</span><br><span class="line">x = np.random.rand(num)</span><br><span class="line">y = np.random.rand(num)</span><br><span class="line">y2 = np.random.rand(num)</span><br><span class="line"></span><br><span class="line">area = (10 * np.random.rand(num)) * 2</span><br><span class="line"></span><br><span class="line"># c 散点颜色</span><br><span class="line"># alpha 透明度</span><br><span class="line"># marker 设置散点的形状</span><br><span class="line"># linewidths 设置散点边框的宽度</span><br><span class="line"># edgecolors 设置边框颜色</span><br><span class="line"></span><br><span class="line">plt.scatter(x, y, c=&#x27;red&#x27;, alpha=0.5, s=area, linewidths=2, edgecolors=&#x27;g&#x27;)</span><br><span class="line">plt.scatter(x, y2, c=&#x27;yellow&#x27;, alpha=0.6, marker=&#x27;d&#x27;)</span><br><span class="line"># print(x)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280911351.png" alt="image-20260128091102318"></p>
<h3 id="2024-04-20汽车速度与制动距离散点图"><a href="#2024-04-20汽车速度与制动距离散点图" class="headerlink" title="2024.04.20汽车速度与制动距离散点图"></a>2024.04.20汽车速度与制动距离散点图</h3><p>In [5]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = &#x27;SimHei&#x27;</span><br><span class="line"># 准备数据</span><br><span class="line">num = 100</span><br><span class="line"># 生成0-1的随机数</span><br><span class="line">x = np.arange(10, 210, 10)</span><br><span class="line">y = np.array([0.5, 2.0, 4.4, 7.9, 12.3,</span><br><span class="line">              17.5, 24.1, 31.5, 39.9, 48.2,</span><br><span class="line">              59.5, 70.8, 83.1, 96.4, 110.7,</span><br><span class="line">              126.0, 142.2, 159.4, 177.6, 196.8])</span><br><span class="line"></span><br><span class="line">plt.scatter(x, y, c=&#x27;b&#x27;, marker=&#x27;s&#x27;, alpha=0.3, edgecolors=&#x27;y&#x27;)</span><br><span class="line">plt.title(&#x27;汽车速度与制定距离散点图&#x27;)</span><br><span class="line">plt.xlabel(&#x27;速度km/h&#x27;)</span><br><span class="line">plt.ylabel(&#x27;制动距离m&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280911193.png" alt="image-20260128091117159"></p>
<h3 id="2024-04-20坐标图图表"><a href="#2024-04-20坐标图图表" class="headerlink" title="2024.04.20坐标图图表"></a>2024.04.20坐标图图表</h3><p>In [6]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(20, 6), dpi=80)</span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = [&#x27;SimHei&#x27;]</span><br><span class="line">plt.rcParams[&#x27;axes.unicode_minus&#x27;] = False</span><br><span class="line"></span><br><span class="line">x = np.linspace(-np.pi, np.pi, 256, endpoint=True)</span><br><span class="line">y1, y2 = np.sin(x), np.cos(x)</span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line"># print(x)</span><br><span class="line"></span><br><span class="line"># 设置坐标轴标签</span><br><span class="line">plt.xlabel(&quot;x轴&quot;, labelpad=10)</span><br><span class="line">plt.ylabel(&quot;y轴&quot;)</span><br><span class="line"></span><br><span class="line">#  设置坐标轴刻度范围</span><br><span class="line">plt.xlim(x.min() * 1.5, x.max() * 1.5)</span><br><span class="line">plt.ylim(-1.5, 1.5)</span><br><span class="line"></span><br><span class="line"># 设置刻度标签</span><br><span class="line">plt.xticks([-np.pi, -np.pi/2, 0, np.pi/2, np.pi],</span><br><span class="line">           [r&#x27;$-\pi$&#x27;, r&#x27;$-\pi/2$&#x27;, 0, r&#x27;$\pi/2$&#x27;, r&#x27;$\pi$&#x27;],</span><br><span class="line">           rotation=45)</span><br><span class="line"></span><br><span class="line"># rotation=&#x27;vertical&#x27;</span><br><span class="line"># 添加标题</span><br><span class="line">plt.title(&quot;正弦曲线与余弦曲线&quot;, loc=&quot;center&quot;, pad=20)</span><br><span class="line"></span><br><span class="line"># 添加图例</span><br><span class="line">plt.legend([&#x27;正弦&#x27;, &#x27;余弦&#x27;], title=&#x27;图例&#x27;, loc=&#x27;upper left&#x27;,</span><br><span class="line">           shadow=True, fancybox=True, ncol=2)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280911548.png" alt="image-20260128091130503"></p>
<h3 id="2024-04-20中国电影排行榜"><a href="#2024-04-20中国电影排行榜" class="headerlink" title="2024.04.20中国电影排行榜"></a>2024.04.20中国电影排行榜</h3><p>In [7]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(20, 6), dpi=80)</span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = [&#x27;SimHei&#x27;]</span><br><span class="line">plt.rcParams[&#x27;axes.unicode_minus&#x27;] = False</span><br><span class="line"></span><br><span class="line">labels = [&quot;流浪地球&quot;, &quot;疯狂的外星人&quot;, &quot;飞驰人生&quot;, &quot;大黄蜂&quot;,</span><br><span class="line">          &quot;熊出没之原始时代&quot;, &quot;白蛇：缘起&quot;, &quot;新喜剧之王&quot;,&quot;死侍2&quot;,&quot;神探蒲松龄&quot;,&quot;密室逃生&quot;,</span><br><span class="line">          &quot;何以为家&quot;,&quot;绿皮书&quot;,&quot;小丑&quot;,&quot;寄生虫&quot;,&quot;波西米亚狂想曲&quot;]</span><br><span class="line"></span><br><span class="line">bar_width = [48.57, 46.18, 42.05, 21.83, 17.03, 16.70, 14.01, 13.83,</span><br><span class="line">             12.85, 11.38, 10.25, 9.46, 9.27, 8.88, 8.64]</span><br><span class="line"></span><br><span class="line">bar_height = 0.2</span><br><span class="line"></span><br><span class="line">plt.barh(range(len(labels)), bar_width, height=bar_height)</span><br><span class="line"></span><br><span class="line">plt.yticks(range(len(labels)), labels)</span><br><span class="line">plt.xlabel(&quot;总票房(亿元)&quot;)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280911722.png" alt="image-20260128091144682"></p>
<h3 id="2024-05-16正余弦曲线-py"><a href="#2024-05-16正余弦曲线-py" class="headerlink" title="2024.05.16正余弦曲线.py"></a>2024.05.16正余弦曲线.py</h3><p>In [1]:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"># 用窗体显示</span><br><span class="line"># import matplotlib</span><br><span class="line"># matplotlib.use(&#x27;TkAgg&#x27;)</span><br><span class="line"></span><br><span class="line">plt.rcParams[&#x27;font.sans-serif&#x27;] = [&#x27;SimHei&#x27;]</span><br><span class="line">plt.rcParams[&#x27;axes.unicode_minus&#x27;] = False</span><br><span class="line"></span><br><span class="line"># np.linspace() 创建等差数列</span><br><span class="line">x = np.linspace(-np.pi, np.pi, 256)</span><br><span class="line"># print(x)</span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line">plt.xlabel(&#x27;x轴&#x27;, labelpad=10)</span><br><span class="line">plt.ylabel(&#x27;y轴&#x27;)</span><br><span class="line"></span><br><span class="line"># 设置x轴与y轴的刻度范围</span><br><span class="line">plt.xlim(-1.5 * np.pi, 1.5 * np.pi)</span><br><span class="line">plt.ylim(-1.5, 1.5)</span><br><span class="line"></span><br><span class="line"># 设置刻度标签</span><br><span class="line">plt.xticks([-np.pi, -np.pi/2, 0, np.pi/2, np.pi], [r&#x27;$-\pi$&#x27;, r&#x27;$-\pi/2$&#x27;, r&#x27;$0$&#x27;, r&#x27;$\pi/2$&#x27;, r&#x27;$\pi$&#x27;])</span><br><span class="line"></span><br><span class="line"># 设置标题</span><br><span class="line">plt.title(&#x27;正余弦函数曲线&#x27;, pad=15, loc=&#x27;center&#x27;)</span><br><span class="line"></span><br><span class="line"># 设置图例</span><br><span class="line">plt.legend([&#x27;正弦函数&#x27;, &#x27;余弦函数&#x27;], ncol=2, loc=&#x27;upper right&#x27;)</span><br><span class="line"></span><br><span class="line"># 设置网格线 默认是both</span><br><span class="line"># plt.grid(b=True, axis=&#x27;y&#x27;)</span><br><span class="line">plt.grid(visible=True, axis=&#x27;y&#x27;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280911540.png" alt="image-20260128091156504"></p>
<h2 id="数据运用与分析02"><a href="#数据运用与分析02" class="headerlink" title="数据运用与分析02"></a>数据运用与分析02</h2><h3 id="2024-05-16正余弦曲线"><a href="#2024-05-16正余弦曲线" class="headerlink" title="2024.05.16正余弦曲线"></a>2024.05.16正余弦曲线</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># np.linspace() 创建等差数列</span></span><br><span class="line">x = np.linspace(-np.pi, np.pi, <span class="number">256</span>)</span><br><span class="line"><span class="comment"># print(x)</span></span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, labelpad=<span class="number">10</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴与y轴的刻度范围</span></span><br><span class="line">plt.xlim(-<span class="number">1.5</span> * np.pi, <span class="number">1.5</span> * np.pi)</span><br><span class="line">plt.ylim(-<span class="number">1.5</span>, <span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi], [<span class="string">r&#x27;$-\pi$&#x27;</span>, <span class="string">r&#x27;$-\pi/2$&#x27;</span>, <span class="string">r&#x27;$0$&#x27;</span>, <span class="string">r&#x27;$\pi/2$&#x27;</span>, <span class="string">r&#x27;$\pi$&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;正余弦函数曲线&#x27;</span>, pad=<span class="number">15</span>, loc=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;正弦函数&#x27;</span>, <span class="string">&#x27;余弦函数&#x27;</span>], ncol=<span class="number">2</span>, loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置网格线 默认是both</span></span><br><span class="line"><span class="comment"># plt.grid(b=True, axis=&#x27;y&#x27;)</span></span><br><span class="line">plt.grid(visible=<span class="literal">True</span>, axis=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280912654.png" alt="image-20260128091213615"><br>​    </p>
<h3 id="2024-05-16正余弦曲线-设置参考线与参考区域"><a href="#2024-05-16正余弦曲线-设置参考线与参考区域" class="headerlink" title="2024.05.16正余弦曲线(设置参考线与参考区域)"></a>2024.05.16正余弦曲线(设置参考线与参考区域)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># np.linspace() 创建等差数列</span></span><br><span class="line">x = np.linspace(-np.pi, np.pi, <span class="number">256</span>)</span><br><span class="line"><span class="comment"># print(x)</span></span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, labelpad=<span class="number">10</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴与y轴的刻度范围</span></span><br><span class="line">plt.xlim(-<span class="number">1.5</span> * np.pi, <span class="number">1.5</span> * np.pi)</span><br><span class="line">plt.ylim(-<span class="number">1.5</span>, <span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi], [<span class="string">r&#x27;$-\pi$&#x27;</span>, <span class="string">r&#x27;$-\pi/2$&#x27;</span>, <span class="string">r&#x27;$0$&#x27;</span>, <span class="string">r&#x27;$\pi/2$&#x27;</span>, <span class="string">r&#x27;$\pi$&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;正余弦函数曲线&#x27;</span>, pad=<span class="number">15</span>, loc=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;正弦函数&#x27;</span>, <span class="string">&#x27;余弦函数&#x27;</span>], ncol=<span class="number">2</span>, loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置网格线 默认是both</span></span><br><span class="line"><span class="comment"># plt.grid(b=True, axis=&#x27;y&#x27;)</span></span><br><span class="line">plt.grid(visible=<span class="literal">True</span>, axis=<span class="string">&#x27;both&#x27;</span>, linewidth=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加参考线</span></span><br><span class="line">plt.axhline(y=<span class="number">0</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.axvline(x=<span class="number">0</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加参考区域</span></span><br><span class="line">plt.axhspan(ymin=<span class="number">0.5</span>, ymax=<span class="number">1</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line">plt.axvspan(xmin=<span class="number">0</span>, xmax=np.pi/<span class="number">2</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280912226.png" alt="image-20260128091235183"><br>​    </p>
<h3 id="2024-05-16正余弦曲线-设置表格"><a href="#2024-05-16正余弦曲线-设置表格" class="headerlink" title="2024.05.16正余弦曲线(设置表格)"></a>2024.05.16正余弦曲线(设置表格)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># np.linspace() 创建等差数列</span></span><br><span class="line">x = np.linspace(-np.pi, np.pi, <span class="number">256</span>)</span><br><span class="line"><span class="comment"># print(x)</span></span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, labelpad=<span class="number">10</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴与y轴的刻度范围</span></span><br><span class="line">plt.xlim(-<span class="number">1.5</span> * np.pi, <span class="number">1.5</span> * np.pi)</span><br><span class="line">plt.ylim(-<span class="number">1.5</span>, <span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi], [<span class="string">r&#x27;$-\pi$&#x27;</span>, <span class="string">r&#x27;$-\pi/2$&#x27;</span>, <span class="string">r&#x27;$0$&#x27;</span>, <span class="string">r&#x27;$\pi/2$&#x27;</span>, <span class="string">r&#x27;$\pi$&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;正余弦函数曲线&#x27;</span>, pad=<span class="number">15</span>, loc=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;正弦函数&#x27;</span>, <span class="string">&#x27;余弦函数&#x27;</span>], ncol=<span class="number">2</span>, loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置网格线 默认是both</span></span><br><span class="line"><span class="comment"># plt.grid(b=True, axis=&#x27;y&#x27;)</span></span><br><span class="line">plt.grid(visible=<span class="literal">True</span>, axis=<span class="string">&#x27;both&#x27;</span>, linewidth=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加参考线</span></span><br><span class="line">plt.axhline(y=<span class="number">0</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line">plt.axvline(x=<span class="number">0</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加参考区域</span></span><br><span class="line">plt.axhspan(ymin=<span class="number">0.5</span>, ymax=<span class="number">1</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line">plt.axvspan(xmin=<span class="number">0</span>, xmax=np.pi/<span class="number">2</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加表格</span></span><br><span class="line">plt.table(cellText=[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>]],</span><br><span class="line">          cellLoc=<span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">          colWidths=[<span class="number">0.05</span>] * <span class="number">3</span>,</span><br><span class="line">          colColours=[<span class="string">&#x27;blue&#x27;</span>]*<span class="number">3</span>,</span><br><span class="line">          rowColours=[<span class="string">&#x27;red&#x27;</span>]*<span class="number">2</span>,</span><br><span class="line">          rowLabels=[<span class="string">&#x27;sinx&#x27;</span>, <span class="string">&#x27;cosx&#x27;</span>],</span><br><span class="line">          colLabels=[<span class="string">&#x27;0&#x27;</span>, <span class="string">r&#x27;$\pi/2$&#x27;</span>, <span class="string">r&#x27;$\pi$&#x27;</span>],</span><br><span class="line">          loc=<span class="string">&quot;lower right&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280912759.png" alt="image-20260128091243718"></p>
<h3 id="2024-05-16全校高二年级各班男生英语成绩评估"><a href="#2024-05-16全校高二年级各班男生英语成绩评估" class="headerlink" title="2024.05.16全校高二年级各班男生英语成绩评估"></a>2024.05.16全校高二年级各班男生英语成绩评估</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">men_means = (<span class="number">90.5</span>, <span class="number">89.5</span>, <span class="number">88.7</span>, <span class="number">88.5</span>, <span class="number">85.2</span>, <span class="number">86.6</span>)</span><br><span class="line">women_means = (<span class="number">92.7</span>, <span class="number">87.0</span>, <span class="number">90.5</span>, <span class="number">85.0</span>, <span class="number">89.5</span>, <span class="number">89.8</span>)</span><br><span class="line"></span><br><span class="line">ind = np.arange(<span class="built_in">len</span>(men_means))</span><br><span class="line">width = <span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">plt.bar(ind, men_means, width, label=<span class="string">&quot;男生的平均成绩&quot;</span>)</span><br><span class="line">plt.bar(ind+width, women_means, width, label=<span class="string">&quot;女生的平均成绩&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;高二各班男生女生英语的平均成绩&#x27;</span>)</span><br><span class="line">plt.xticks(ind, [<span class="string">&#x27;高二1班&#x27;</span>, <span class="string">&#x27;高二2班&#x27;</span>, <span class="string">&#x27;高二3班&#x27;</span>, <span class="string">&#x27;高二4班&#x27;</span>, <span class="string">&#x27;高二5班&#x27;</span>, <span class="string">&#x27;高二6班&#x27;</span>])</span><br><span class="line">plt.ylabel(<span class="string">&#x27;分数&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加水平参考线</span></span><br><span class="line">plt.axhline(<span class="number">88.5</span>, ls=<span class="string">&#x27;--&#x27;</span>, linewidth=<span class="number">1.0</span>, label=<span class="string">&#x27;全年级平均成绩&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.legend(loc=<span class="string">&quot;upper right&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280912678.png" alt="image-20260128091251639"><br>​    </p>
<h3 id="2024-05-16设置注释文本"><a href="#2024-05-16设置注释文本" class="headerlink" title="2024.05.16设置注释文本"></a>2024.05.16设置注释文本</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># np.linspace() 创建等差数列</span></span><br><span class="line">x = np.linspace(-np.pi, np.pi, <span class="number">256</span>)</span><br><span class="line"><span class="comment"># print(x)</span></span><br><span class="line">y1 = np.sin(x)</span><br><span class="line">y2 = np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.plot(x, y1, x, y2)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;x轴&#x27;</span>, labelpad=<span class="number">10</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y轴&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴与y轴的刻度范围</span></span><br><span class="line">plt.xlim(-<span class="number">1.5</span> * np.pi, <span class="number">1.5</span> * np.pi)</span><br><span class="line">plt.ylim(-<span class="number">1.5</span>, <span class="number">1.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度标签</span></span><br><span class="line">plt.xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi], [<span class="string">r&#x27;$-\pi$&#x27;</span>, <span class="string">r&#x27;$-\pi/2$&#x27;</span>, <span class="string">r&#x27;$0$&#x27;</span>, <span class="string">r&#x27;$\pi/2$&#x27;</span>, <span class="string">r&#x27;$\pi$&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;正余弦函数曲线&#x27;</span>, pad=<span class="number">15</span>, loc=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;正弦函数&#x27;</span>, <span class="string">&#x27;余弦函数&#x27;</span>], ncol=<span class="number">2</span>, loc=<span class="string">&#x27;upper right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置网格线 默认是both</span></span><br><span class="line"><span class="comment"># plt.grid(b=True, axis=&#x27;y&#x27;)</span></span><br><span class="line">plt.grid(visible=<span class="literal">True</span>, axis=<span class="string">&#x27;both&#x27;</span>, linewidth=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加指向性注释文本</span></span><br><span class="line">plt.annotate(<span class="string">&quot;最小值&quot;</span>, xy=(-np.pi/<span class="number">2</span>, -<span class="number">1.0</span>),</span><br><span class="line">             xytext=(-np.pi/<span class="number">2</span>, -<span class="number">0.5</span>),</span><br><span class="line">             arrowprops=<span class="built_in">dict</span>(arrowstyle=<span class="string">&quot;-|&gt;&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加无指向性注释文本</span></span><br><span class="line">plt.text(<span class="number">3.3</span>, <span class="number">0.1</span>, <span class="string">&quot;y=sin(x)&quot;</span>, bbox=<span class="built_in">dict</span>(alpha=<span class="number">0.5</span>))</span><br><span class="line">plt.text(<span class="number">3.3</span>, -<span class="number">0.9</span>, <span class="string">&quot;y=cos(x)&quot;</span>, bbox=<span class="built_in">dict</span>(alpha=<span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913647.png" alt="image-20260128091301607"><br>​    </p>
<h3 id="2024-05-16阿里巴巴平台成交额柱状图"><a href="#2024-05-16阿里巴巴平台成交额柱状图" class="headerlink" title="2024.05.16阿里巴巴平台成交额柱状图"></a>2024.05.16阿里巴巴平台成交额柱状图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">7</span>)</span><br><span class="line">y = [<span class="number">10770</span>, <span class="number">16780</span>, <span class="number">14440</span>, <span class="number">30920</span>, <span class="number">37670</span>, <span class="number">48200</span>, <span class="number">57270</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制柱状图</span></span><br><span class="line">bar_rects = plt.bar(x, y, tick_label=[<span class="string">&quot;FY2013&quot;</span>, <span class="string">&quot;FY2014&quot;</span>, <span class="string">&quot;FY2015&quot;</span>,</span><br><span class="line">                                      <span class="string">&quot;FY2016&quot;</span>, <span class="string">&quot;FY2017&quot;</span>, <span class="string">&quot;FY2018&quot;</span>, <span class="string">&quot;FY2019&quot;</span>], width=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加无指向性注释文本</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">autolabel</span>(<span class="params">rects</span>):</span><br><span class="line">    <span class="comment"># pass</span></span><br><span class="line">    <span class="keyword">for</span> rect <span class="keyword">in</span> rects:</span><br><span class="line">        height = rect.get_height()  <span class="comment"># 获取每个矩阵的高度</span></span><br><span class="line">        <span class="comment"># print(height)</span></span><br><span class="line">        plt.text(rect.get_x() + rect.get_width() / <span class="number">2</span>, height + <span class="number">300</span>,</span><br><span class="line">                 s=<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(height), ha=<span class="string">&quot;center&quot;</span>, va=<span class="string">&quot;bottom&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">autolabel(bar_rects)</span><br><span class="line"></span><br><span class="line">plt.ylabel(<span class="string">&#x27;GMV(亿元)&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913487.png" alt="image-20260128091309446"><br>​    </p>
<h3 id="2024-05-16果酱面包配料比例"><a href="#2024-05-16果酱面包配料比例" class="headerlink" title="2024.05.16果酱面包配料比例"></a>2024.05.16果酱面包配料比例</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">kinds = [<span class="string">&#x27;面粉&#x27;</span>, <span class="string">&#x27;全麦粉&#x27;</span>, <span class="string">&#x27;酵母&#x27;</span>, <span class="string">&#x27;苹果酱&#x27;</span>, <span class="string">&#x27;鸡蛋&#x27;</span>, <span class="string">&#x27;黄油&#x27;</span>, <span class="string">&#x27;盐&#x27;</span>, <span class="string">&#x27;白糖&#x27;</span>]</span><br><span class="line">weight = [<span class="number">250</span>, <span class="number">150</span>, <span class="number">4</span>, <span class="number">250</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">20</span>]</span><br><span class="line"></span><br><span class="line">plt.pie(weight, autopct=<span class="string">&#x27;%.1f%%&#x27;</span>)</span><br><span class="line">plt.legend(kinds, loc=<span class="string">&quot;upper right&quot;</span>, bbox_to_anchor=[<span class="number">1.3</span>, <span class="number">1.1</span>])</span><br><span class="line">plt.table(cellText=[weight], cellLoc=<span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">          rowLabels=[<span class="string">&#x27;重量(g)&#x27;</span>], colLabels=kinds,</span><br><span class="line">          loc=<span class="string">&#x27;lower center&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913429.png" alt="image-20260128091316392"><br>​    </p>
<h2 id="数据分析与运用03"><a href="#数据分析与运用03" class="headerlink" title="数据分析与运用03"></a>数据分析与运用03</h2><h3 id="2024-05-30设置颜色"><a href="#2024-05-30设置颜色" class="headerlink" title="2024.05.30设置颜色"></a>2024.05.30设置颜色</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, <span class="built_in">hex</span> <span class="keyword">in</span> matplotlib.colors.cnames.items():</span><br><span class="line">    <span class="built_in">print</span>(name, <span class="built_in">hex</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.plot([1, 2, 3], [4, 5, 6], color=&#x27;#9ACD32&#x27;)</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], color=(<span class="number">0.3</span>, <span class="number">0.4</span>, <span class="number">0.5</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>aliceblue #F0F8FF
antiquewhite #FAEBD7
aqua #00FFFF
aquamarine #7FFFD4
azure #F0FFFF
beige #F5F5DC
bisque #FFE4C4
black #000000
blanchedalmond #FFEBCD
blue #0000FF
blueviolet #8A2BE2
brown #A52A2A
burlywood #DEB887
cadetblue #5F9EA0
chartreuse #7FFF00
chocolate #D2691E
coral #FF7F50
cornflowerblue #6495ED
cornsilk #FFF8DC
crimson #DC143C
cyan #00FFFF
darkblue #00008B
darkcyan #008B8B
darkgoldenrod #B8860B
darkgray #A9A9A9
darkgreen #006400
darkgrey #A9A9A9
darkkhaki #BDB76B
darkmagenta #8B008B
darkolivegreen #556B2F
darkorange #FF8C00
darkorchid #9932CC
darkred #8B0000
darksalmon #E9967A
darkseagreen #8FBC8F
darkslateblue #483D8B
darkslategray #2F4F4F
darkslategrey #2F4F4F
darkturquoise #00CED1
darkviolet #9400D3
deeppink #FF1493
deepskyblue #00BFFF
dimgray #696969
dimgrey #696969
dodgerblue #1E90FF
firebrick #B22222
floralwhite #FFFAF0
forestgreen #228B22
fuchsia #FF00FF
gainsboro #DCDCDC
ghostwhite #F8F8FF
gold #FFD700
goldenrod #DAA520
gray #808080
green #008000
greenyellow #ADFF2F
grey #808080
honeydew #F0FFF0
hotpink #FF69B4
indianred #CD5C5C
indigo #4B0082
ivory #FFFFF0
khaki #F0E68C
lavender #E6E6FA
lavenderblush #FFF0F5
lawngreen #7CFC00
lemonchiffon #FFFACD
lightblue #ADD8E6
lightcoral #F08080
lightcyan #E0FFFF
lightgoldenrodyellow #FAFAD2
lightgray #D3D3D3
lightgreen #90EE90
lightgrey #D3D3D3
lightpink #FFB6C1
lightsalmon #FFA07A
lightseagreen #20B2AA
lightskyblue #87CEFA
lightslategray #778899
lightslategrey #778899
lightsteelblue #B0C4DE
lightyellow #FFFFE0
lime #00FF00
limegreen #32CD32
linen #FAF0E6
magenta #FF00FF
maroon #800000
mediumaquamarine #66CDAA
mediumblue #0000CD
mediumorchid #BA55D3
mediumpurple #9370DB
mediumseagreen #3CB371
mediumslateblue #7B68EE
mediumspringgreen #00FA9A
mediumturquoise #48D1CC
mediumvioletred #C71585
midnightblue #191970
mintcream #F5FFFA
mistyrose #FFE4E1
moccasin #FFE4B5
navajowhite #FFDEAD
navy #000080
oldlace #FDF5E6
olive #808000
olivedrab #6B8E23
orange #FFA500
orangered #FF4500
orchid #DA70D6
palegoldenrod #EEE8AA
palegreen #98FB98
paleturquoise #AFEEEE
palevioletred #DB7093
papayawhip #FFEFD5
peachpuff #FFDAB9
peru #CD853F
pink #FFC0CB
plum #DDA0DD
powderblue #B0E0E6
purple #800080
rebeccapurple #663399
red #FF0000
rosybrown #BC8F8F
royalblue #4169E1
saddlebrown #8B4513
salmon #FA8072
sandybrown #F4A460
seagreen #2E8B57
seashell #FFF5EE
sienna #A0522D
silver #C0C0C0
skyblue #87CEEB
slateblue #6A5ACD
slategray #708090
slategrey #708090
snow #FFFAFA
springgreen #00FF7F
steelblue #4682B4
tan #D2B48C
teal #008080
thistle #D8BFD8
tomato #FF6347
turquoise #40E0D0
violet #EE82EE
wheat #F5DEB3
white #FFFFFF
whitesmoke #F5F5F5
yellow #FFFF00
yellowgreen #9ACD32
</code></pre>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913821.png" alt="image-20260128091327783"></p>
<h3 id="2024-05-30图书案例-堆叠柱形图"><a href="#2024-05-30图书案例-堆叠柱形图" class="headerlink" title="2024.05.30图书案例(堆叠柱形图)"></a>2024.05.30图书案例(堆叠柱形图)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">5</span>)</span><br><span class="line">y1 = [<span class="number">1200</span>, <span class="number">2400</span>, <span class="number">1800</span>, <span class="number">2200</span>, <span class="number">1600</span>]</span><br><span class="line">y2 = [<span class="number">1050</span>, <span class="number">2100</span>, <span class="number">1300</span>, <span class="number">1600</span>, <span class="number">1340</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 柱形的宽度</span></span><br><span class="line">bar_width = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">tick_label = [<span class="string">&quot;家庭&quot;</span>, <span class="string">&quot;小说&quot;</span>, <span class="string">&quot;心里&quot;</span>, <span class="string">&quot;科技&quot;</span>, <span class="string">&quot;儿童&quot;</span>]</span><br><span class="line">plt.bar(x, y1, bar_width, color=<span class="string">&quot;#FFCC00&quot;</span>)</span><br><span class="line"><span class="comment"># bottom=y1 不覆盖，从y1开始堆叠</span></span><br><span class="line">plt.bar(x, y2, bar_width, color=<span class="string">&quot;#B0C4DE&quot;</span>, bottom=y1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 坐标注释</span></span><br><span class="line">plt.xticks(x, tick_label)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;图书的种类&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;图书的数量&#x27;</span>)</span><br><span class="line"><span class="comment"># 图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;地区1&#x27;</span>, <span class="string">&#x27;地区2&#x27;</span>])</span><br><span class="line"><span class="comment"># 标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;地区1地区2各类图书的采购数量&#x27;</span>)</span><br><span class="line"><span class="comment"># 网格线</span></span><br><span class="line">plt.grid(<span class="literal">True</span>, axis=<span class="string">&#x27;y&#x27;</span>, color=<span class="string">&quot;gray&quot;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913588.png" alt="image-20260128091336549"></p>
<h3 id="2024-05-30设置线型"><a href="#2024-05-30设置线型" class="headerlink" title="2024.05.30设置线型"></a>2024.05.30设置线型</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ls(linestyle) 设置线型 : -. -- -</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], color=<span class="string">&quot;r&quot;</span>, ls=<span class="string">&quot;-.&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913320.png" alt="image-20260128091344279"><br>​    </p>
<h3 id="2024-05-30汇率走势"><a href="#2024-05-30汇率走势" class="headerlink" title="2024.05.30汇率走势"></a>2024.05.30汇率走势</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line">eurcny_2017 = np.array([<span class="number">6.8007</span>, <span class="number">6.8007</span>, <span class="number">6.8015</span>, <span class="number">6.8015</span>, <span class="number">6.8060</span>, <span class="number">6.8060</span>,</span><br><span class="line">                        <span class="number">6.8060</span>, <span class="number">6.8036</span>, <span class="number">6.8025</span>, <span class="number">6.7877</span>, <span class="number">6.7835</span>, <span class="number">6.7758</span>,</span><br><span class="line">                        <span class="number">6.7700</span>, <span class="number">6.7463</span>, <span class="number">6.7519</span>, <span class="number">6.7511</span>, <span class="number">6.7511</span>, <span class="number">6.7539</span>, <span class="number">6.7265</span>])</span><br><span class="line">eurcny_2019 = np.array([<span class="number">6.8640</span>, <span class="number">6.8705</span>, <span class="number">6.8697</span>, <span class="number">6.8697</span>, <span class="number">6.8697</span>, <span class="number">6.8881</span>,</span><br><span class="line">                        <span class="number">6.8853</span>, <span class="number">6.8856</span>, <span class="number">6.8677</span>, <span class="number">6.8662</span>, <span class="number">6.8662</span>, <span class="number">6.8662</span>,</span><br><span class="line">                        <span class="number">6.8827</span>, <span class="number">6.8761</span>, <span class="number">6.8635</span>, <span class="number">6.8860</span>, <span class="number">6.8737</span>, <span class="number">6.8796</span>, <span class="number">6.8841</span>])</span><br><span class="line"></span><br><span class="line">data_x = np.array([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">31</span>])</span><br><span class="line"></span><br><span class="line">plt.plot(data_x, eurcny_2017, color=<span class="string">&quot;#006373&quot;</span>, linewidth=<span class="number">2</span>, ls=<span class="string">&quot;-&quot;</span>)</span><br><span class="line">plt.plot(data_x, eurcny_2019, color=<span class="string">&quot;#8A2E76&quot;</span>, linewidth=<span class="number">2</span>, ls=<span class="string">&quot;--&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&quot;日期&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;汇率&quot;</span>)</span><br><span class="line"><span class="comment"># 图例</span></span><br><span class="line">plt.legend([<span class="string">&#x27;2017年&#x27;</span>, <span class="string">&#x27;2019年&#x27;</span>])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280913117.png" alt="image-20260128091356077"></p>
<h3 id="2024-05-30设置数据标记"><a href="#2024-05-30设置数据标记" class="headerlink" title="2024.05.30设置数据标记"></a>2024.05.30设置数据标记</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># marker 设置标记的形状, markersize设置标记的尺寸, markerfacecolor 设置标记的填充色，</span></span><br><span class="line"><span class="comment"># markeredgecolor设置标记的边框颜色， markeredgewidth 设置标记的边框的宽度</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], color=<span class="string">&quot;r&quot;</span>, ls=<span class="string">&quot;-.&quot;</span>, marker=<span class="string">&#x27;^&#x27;</span>, markersize=<span class="number">5</span>,</span><br><span class="line">         markerfacecolor=<span class="string">&#x27;w&#x27;</span>, markeredgecolor=<span class="string">&#x27;g&#x27;</span>, markeredgewidth=<span class="number">2</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>​<br><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914089.png" alt="image-20260128091403045"><br>​    </p>
<h3 id="2024-05-30三款产品年销售额折线图"><a href="#2024-05-30三款产品年销售额折线图" class="headerlink" title="2024.05.30三款产品年销售额折线图"></a>2024.05.30三款产品年销售额折线图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据</span></span><br><span class="line">data_x = [<span class="string">&#x27;第1季度&#x27;</span>, <span class="string">&#x27;第2季度&#x27;</span>, <span class="string">&#x27;第3季度&#x27;</span>, <span class="string">&#x27;第4季度&#x27;</span>]</span><br><span class="line">A = [<span class="number">2144</span>, <span class="number">4617</span>, <span class="number">7674</span>, <span class="number">6666</span>]</span><br><span class="line">B = [<span class="number">853</span>, <span class="number">1214</span>, <span class="number">2414</span>, <span class="number">4409</span>]</span><br><span class="line">C = [<span class="number">153</span>, <span class="number">155</span>, <span class="number">292</span>, <span class="number">680</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画折线图</span></span><br><span class="line">plt.plot(data_x, A, ls=<span class="string">&#x27;-&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>, color=<span class="string">&#x27;b&#x27;</span>, label=<span class="string">&#x27;产品A&#x27;</span>)</span><br><span class="line">plt.plot(data_x, B, ls=<span class="string">&#x27;--&#x27;</span>, marker=<span class="string">&#x27;s&#x27;</span>, color=<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;产品B&#x27;</span>)</span><br><span class="line">plt.plot(data_x, C, ls=<span class="string">&#x27;:&#x27;</span>, marker=<span class="string">&#x27;x&#x27;</span>, color=<span class="string">&#x27;g&#x27;</span>, label=<span class="string">&#x27;产品C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置网格</span></span><br><span class="line">plt.grid(alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加图例</span></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和标签</span></span><br><span class="line">plt.title(<span class="string">&#x27;三款产品年销售额折线图&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;季度&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;销售额&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 39 40 41</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914070.png" alt="image-20260128091413029"></p>
<h3 id="2024-05-30设置颜色-1"><a href="#2024-05-30设置颜色-1" class="headerlink" title="2024.05.30设置颜色"></a>2024.05.30设置颜色</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, <span class="built_in">hex</span> <span class="keyword">in</span> matplotlib.colors.cnames.items():</span><br><span class="line">    <span class="built_in">print</span>(name, <span class="built_in">hex</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.plot([1, 2, 3], [4, 5, 6], color=&#x27;#9ACD32&#x27;)</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], color=(<span class="number">0.3</span>, <span class="number">0.4</span>, <span class="number">0.5</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>aliceblue #F0F8FF
antiquewhite #FAEBD7
aqua #00FFFF
aquamarine #7FFFD4
azure #F0FFFF
beige #F5F5DC
bisque #FFE4C4
black #000000
blanchedalmond #FFEBCD
blue #0000FF
blueviolet #8A2BE2
brown #A52A2A
burlywood #DEB887
cadetblue #5F9EA0
chartreuse #7FFF00
chocolate #D2691E
coral #FF7F50
cornflowerblue #6495ED
cornsilk #FFF8DC
crimson #DC143C
cyan #00FFFF
darkblue #00008B
darkcyan #008B8B
darkgoldenrod #B8860B
darkgray #A9A9A9
darkgreen #006400
darkgrey #A9A9A9
darkkhaki #BDB76B
darkmagenta #8B008B
darkolivegreen #556B2F
darkorange #FF8C00
darkorchid #9932CC
darkred #8B0000
darksalmon #E9967A
darkseagreen #8FBC8F
darkslateblue #483D8B
darkslategray #2F4F4F
darkslategrey #2F4F4F
darkturquoise #00CED1
darkviolet #9400D3
deeppink #FF1493
deepskyblue #00BFFF
dimgray #696969
dimgrey #696969
dodgerblue #1E90FF
firebrick #B22222
floralwhite #FFFAF0
forestgreen #228B22
fuchsia #FF00FF
gainsboro #DCDCDC
ghostwhite #F8F8FF
gold #FFD700
goldenrod #DAA520
gray #808080
green #008000
greenyellow #ADFF2F
grey #808080
honeydew #F0FFF0
hotpink #FF69B4
indianred #CD5C5C
indigo #4B0082
ivory #FFFFF0
khaki #F0E68C
lavender #E6E6FA
lavenderblush #FFF0F5
lawngreen #7CFC00
lemonchiffon #FFFACD
lightblue #ADD8E6
lightcoral #F08080
lightcyan #E0FFFF
lightgoldenrodyellow #FAFAD2
lightgray #D3D3D3
lightgreen #90EE90
lightgrey #D3D3D3
lightpink #FFB6C1
lightsalmon #FFA07A
lightseagreen #20B2AA
lightskyblue #87CEFA
lightslategray #778899
lightslategrey #778899
lightsteelblue #B0C4DE
lightyellow #FFFFE0
lime #00FF00
limegreen #32CD32
linen #FAF0E6
magenta #FF00FF
maroon #800000
mediumaquamarine #66CDAA
mediumblue #0000CD
mediumorchid #BA55D3
mediumpurple #9370DB
mediumseagreen #3CB371
mediumslateblue #7B68EE
mediumspringgreen #00FA9A
mediumturquoise #48D1CC
mediumvioletred #C71585
midnightblue #191970
mintcream #F5FFFA
mistyrose #FFE4E1
moccasin #FFE4B5
navajowhite #FFDEAD
navy #000080
oldlace #FDF5E6
olive #808000
olivedrab #6B8E23
orange #FFA500
orangered #FF4500
orchid #DA70D6
palegoldenrod #EEE8AA
palegreen #98FB98
paleturquoise #AFEEEE
palevioletred #DB7093
papayawhip #FFEFD5
peachpuff #FFDAB9
peru #CD853F
pink #FFC0CB
plum #DDA0DD
powderblue #B0E0E6
purple #800080
rebeccapurple #663399
red #FF0000
rosybrown #BC8F8F
royalblue #4169E1
saddlebrown #8B4513
salmon #FA8072
sandybrown #F4A460
seagreen #2E8B57
seashell #FFF5EE
sienna #A0522D
silver #C0C0C0
skyblue #87CEEB
slateblue #6A5ACD
slategray #708090
slategrey #708090
snow #FFFAFA
springgreen #00FF7F
steelblue #4682B4
tan #D2B48C
teal #008080
thistle #D8BFD8
tomato #FF6347
turquoise #40E0D0
violet #EE82EE
wheat #F5DEB3
white #FFFFFF
whitesmoke #F5F5F5
yellow #FFFF00
yellowgreen #9ACD32
</code></pre>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914169.png" alt="image-20260128091427125"></p>
<h3 id="2024-05-30未来15天最高和最低气温折线图"><a href="#2024-05-30未来15天最高和最低气温折线图" class="headerlink" title="2024.05.30未来15天最高和最低气温折线图"></a>2024.05.30未来15天最高和最低气温折线图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # figsize:指定figure的宽和高，单位为英寸;</span></span><br><span class="line"><span class="comment"># # dpi参数指定绘图对象的分辨率，即每英寸多少个像素，缺省值为80</span></span><br><span class="line"><span class="comment"># i英寸等于2.5cm,A4纸是 21*30cm的纸张</span></span><br><span class="line"><span class="comment"># facecolor:背景颜色</span></span><br><span class="line"><span class="comment"># edgecolor:边框颜色</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>, <span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line">plt.rcParams[<span class="string">&quot;font.sans-serif&quot;</span>] = [<span class="string">&quot;SimHei&quot;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&quot;axes.unicode_minus&quot;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">4</span>, <span class="number">19</span>)</span><br><span class="line">y_max = np.array([<span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">34</span>, <span class="number">33</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">29</span>, <span class="number">26</span>, <span class="number">23</span>, <span class="number">21</span>, <span class="number">25</span>, <span class="number">31</span>])</span><br><span class="line">y_min = np.array([<span class="number">19</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">16</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">plt.plot(x, y_max, marker=<span class="string">&#x27;o&#x27;</span>, label=<span class="string">&#x27;最高温度&#x27;</span>)</span><br><span class="line">plt.plot(x, y_min, marker=<span class="string">&#x27;s&#x27;</span>, label=<span class="string">&#x27;最低温度&#x27;</span>)</span><br><span class="line"></span><br><span class="line">x_temp = <span class="number">4</span></span><br><span class="line"><span class="keyword">for</span> y_h, y_l <span class="keyword">in</span> <span class="built_in">zip</span>(y_max, y_min):</span><br><span class="line">    plt.text(x_temp-<span class="number">0.1</span>, y_h+<span class="number">0.7</span>, y_h, family=<span class="string">&#x27;SimHei&#x27;</span>, fontsize=<span class="number">8</span>, fontstyle=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">    plt.text(x_temp-<span class="number">0.1</span>, y_l+<span class="number">0.7</span>, y_l, family=<span class="string">&#x27;SimHei&#x27;</span>, fontsize=<span class="number">8</span>, fontstyle=<span class="string">&#x27;normal&#x27;</span>)</span><br><span class="line">    x_temp += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&quot;日期&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;温度($^\circ$C)&quot;</span>)</span><br><span class="line">plt.ylim(<span class="number">0</span>, <span class="number">40</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914913.png" alt="image-20260128091434864"></p>
<h3 id="2024-05-30设置主题风格"><a href="#2024-05-30设置主题风格" class="headerlink" title="2024.05.30设置主题风格"></a>2024.05.30设置主题风格</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.style <span class="keyword">as</span> ms</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(ms.available)</span><br><span class="line">ms.use(<span class="string">&#x27;Solarize_Light2&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], marker=<span class="string">&#x27;*&#x27;</span>, ms=<span class="number">20</span>, mfc=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>[&#39;Solarize_Light2&#39;, &#39;_classic_test_patch&#39;, &#39;_mpl-gallery&#39;, &#39;_mpl-gallery-nogrid&#39;, &#39;bmh&#39;, &#39;classic&#39;, &#39;dark_background&#39;, &#39;fast&#39;, &#39;fivethirtyeight&#39;, &#39;ggplot&#39;, &#39;grayscale&#39;, &#39;seaborn&#39;, &#39;seaborn-bright&#39;, &#39;seaborn-colorblind&#39;, &#39;seaborn-dark&#39;, &#39;seaborn-dark-palette&#39;, &#39;seaborn-darkgrid&#39;, &#39;seaborn-deep&#39;, &#39;seaborn-muted&#39;, &#39;seaborn-notebook&#39;, &#39;seaborn-paper&#39;, &#39;seaborn-pastel&#39;, &#39;seaborn-poster&#39;, &#39;seaborn-talk&#39;, &#39;seaborn-ticks&#39;, &#39;seaborn-white&#39;, &#39;seaborn-whitegrid&#39;, &#39;tableau-colorblind10&#39;]
</code></pre>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914737.png" alt="image-20260128091442687"></p>
<h3 id="2024-05-30固定区域单子图绘制"><a href="#2024-05-30固定区域单子图绘制" class="headerlink" title="2024.05.30固定区域单子图绘制"></a>2024.05.30固定区域单子图绘制</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>, <span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">ax_one = plt.subplot(<span class="number">326</span>)</span><br><span class="line">ax_one.plot(np.arange(<span class="number">5</span>))</span><br><span class="line">ax_one.set_title(<span class="string">&#x27;子图1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax_two = plt.subplot(<span class="number">312</span>)</span><br><span class="line">ax_two.plot(np.arange(<span class="number">5</span>))</span><br><span class="line">ax_two.set_title(<span class="string">&#x27;子图2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914308.png" alt="image-20260128091452259"></p>
<h3 id="2024-05-30某工厂产品A与产品B去年的销售额分析"><a href="#2024-05-30某工厂产品A与产品B去年的销售额分析" class="headerlink" title="2024.05.30某工厂产品A与产品B去年的销售额分析"></a>2024.05.30某工厂产品A与产品B去年的销售额分析</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>, <span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">1</span>, <span class="number">13</span>)</span><br><span class="line">y1 = [<span class="number">20</span>, <span class="number">28</span>, <span class="number">23</span>, <span class="number">16</span>, <span class="number">29</span>, <span class="number">36</span>, <span class="number">39</span>, <span class="number">33</span>, <span class="number">31</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">25</span>]</span><br><span class="line">y2 = [<span class="number">17</span>, <span class="number">22</span>, <span class="number">39</span>, <span class="number">26</span>, <span class="number">35</span>, <span class="number">23</span>, <span class="number">25</span>, <span class="number">27</span>, <span class="number">29</span>, <span class="number">38</span>, <span class="number">28</span>, <span class="number">20</span>]</span><br><span class="line">labels = [<span class="string">&#x27;1月&#x27;</span>, <span class="string">&#x27;2月&#x27;</span>, <span class="string">&#x27;3月&#x27;</span>, <span class="string">&#x27;4月&#x27;</span>, <span class="string">&#x27;5月&#x27;</span>, <span class="string">&#x27;6月&#x27;</span>, <span class="string">&#x27;7月&#x27;</span>, <span class="string">&#x27;8月&#x27;</span>, <span class="string">&#x27;9月&#x27;</span>, <span class="string">&#x27;10月&#x27;</span>, <span class="string">&#x27;11月&#x27;</span>, <span class="string">&#x27;12月&#x27;</span>]</span><br><span class="line"></span><br><span class="line">ax1 = plt.subplot(<span class="number">211</span>)</span><br><span class="line">ax1.plot(x, y1, <span class="string">&#x27;m--o&#x27;</span>, lw=<span class="number">2</span>, ms=<span class="number">5</span>, label=<span class="string">&#x27;产品A&#x27;</span>)</span><br><span class="line">ax1.plot(x, y2, <span class="string">&#x27;g--o&#x27;</span>, lw=<span class="number">2</span>, ms=<span class="number">5</span>, label=<span class="string">&#x27;产品B&#x27;</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;月份&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;销售额（亿元）&#x27;</span>)</span><br><span class="line">ax1.set_title(<span class="string">&quot;产品A与产品B的销售额&quot;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line">ax1.set_ylim(<span class="number">10</span>, <span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> xy1 <span class="keyword">in</span> <span class="built_in">zip</span>(x, y1):</span><br><span class="line">    ax1.annotate(<span class="string">&quot;%s&quot;</span>% xy1[<span class="number">1</span>], xy=xy1, textcoords=<span class="string">&#x27;offset points&#x27;</span>, xytext=(-<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> xy2 <span class="keyword">in</span> <span class="built_in">zip</span>(x, y2):</span><br><span class="line">    ax1.annotate(<span class="string">&quot;%s&quot;</span>% xy2[<span class="number">1</span>], xy=xy2, textcoords=<span class="string">&#x27;offset points&#x27;</span>, xytext=(-<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">ax1.legend()</span><br><span class="line"></span><br><span class="line">ax2 = plt.subplot(<span class="number">223</span>)</span><br><span class="line">ax2.pie(y1, radius=<span class="number">1</span>, wedgeprops=&#123;<span class="string">&#x27;width&#x27;</span>: <span class="number">0.5</span>&#125;, labels=labels,</span><br><span class="line">        autopct=<span class="string">&#x27;%.1f%%&#x27;</span>, pctdistance=<span class="number">0.75</span>)</span><br><span class="line">ax2.set_title(<span class="string">&quot;产品A的销售额&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax3 = plt.subplot(<span class="number">224</span>)</span><br><span class="line">ax3.pie(y2, radius=<span class="number">1</span>, wedgeprops=&#123;<span class="string">&#x27;width&#x27;</span>: <span class="number">0.5</span>&#125;, labels=labels,</span><br><span class="line">        autopct=<span class="string">&#x27;%.1f%%&#x27;</span>, pctdistance=<span class="number">0.75</span>)</span><br><span class="line">ax3.set_title(<span class="string">&quot;产品B的销售额&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280914550.png" alt="image-20260128091457490"></p>
<h2 id="数据分析与运用04"><a href="#数据分析与运用04" class="headerlink" title="数据分析与运用04"></a>数据分析与运用04</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入Numpy库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入Numpy库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一维数组</span></span><br><span class="line">arr1 = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个二维数组</span></span><br><span class="line">arr2 = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],[<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>],[<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>]])</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数组的形状(维度)</span></span><br><span class="line"><span class="built_in">print</span>(arr2.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数组的元素个数</span></span><br><span class="line"><span class="built_in">print</span>(arr2.size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数组的元素类型</span></span><br><span class="line"><span class="built_in">print</span>(arr2.dtype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新设置数组的形状</span></span><br><span class="line">arr2.shape = <span class="number">6</span>, <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br></pre></td></tr></table></figure>

<pre><code>[1 2 3 4]
[[ 1  2  3  4]
 [ 5  6  7  8]
 [ 9 10 11 12]]
(3, 4)
12
int32
[[ 1  2]
 [ 3  4]
 [ 5  6]
 [ 7  8]
 [ 9 10]
 [11 12]]
</code></pre>
<h3 id="arange-函数"><a href="#arange-函数" class="headerlink" title="arange 函数"></a>arange 函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># arange(start,stop,step)</span></span><br><span class="line">np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.arange(<span class="number">1</span>,<span class="number">50</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([ 1,  6, 11, 16, 21, 26, 31, 36, 41, 46])
</code></pre>
<h3 id="linspace函数"><a href="#linspace函数" class="headerlink" title="linspace函数"></a>linspace函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.linspace(<span class="number">0</span>,<span class="number">1</span>,<span class="number">15</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([0.        , 0.07142857, 0.14285714, 0.21428571, 0.28571429,
       0.35714286, 0.42857143, 0.5       , 0.57142857, 0.64285714,
       0.71428571, 0.78571429, 0.85714286, 0.92857143, 1.        ])
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.linspace(<span class="number">1</span>,<span class="number">99</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([ 1.        ,  6.15789474, 11.31578947, 16.47368421, 21.63157895,
       26.78947368, 31.94736842, 37.10526316, 42.26315789, 47.42105263,
       52.57894737, 57.73684211, 62.89473684, 68.05263158, 73.21052632,
       78.36842105, 83.52631579, 88.68421053, 93.84210526, 99.        ])
</code></pre>
<h3 id="logspace函数"><a href="#logspace函数" class="headerlink" title="logspace函数"></a>logspace函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># logspace(start, stop, num) 以10为底数的</span></span><br><span class="line">np.logspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([  1.        ,   1.27427499,   1.62377674,   2.06913808,
         2.6366509 ,   3.35981829,   4.2813324 ,   5.45559478,
         6.95192796,   8.8586679 ,  11.28837892,  14.38449888,
        18.32980711,  23.35721469,  29.76351442,  37.92690191,
        48.32930239,  61.58482111,  78.47599704, 100.        ])
</code></pre>
<h3 id="zeros函数"><a href="#zeros函数" class="headerlink" title="zeros函数"></a>zeros函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.zeros((<span class="number">3</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>




<pre><code>array([[0., 0., 0.],
       [0., 0., 0.],
       [0., 0., 0.]])
</code></pre>
<h3 id="ones函数"><a href="#ones函数" class="headerlink" title="ones函数"></a>ones函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.ones((<span class="number">3</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>




<pre><code>array([[1., 1., 1.],
       [1., 1., 1.],
       [1., 1., 1.]])
</code></pre>
<h3 id="eye函数"><a href="#eye函数" class="headerlink" title="eye函数"></a>eye函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对角线是1的矩阵(单位矩阵)</span></span><br><span class="line">np.eye(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([[1., 0., 0., 0.],
       [0., 1., 0., 0.],
       [0., 0., 1., 0.],
       [0., 0., 0., 1.]])
</code></pre>
<h3 id="diag函数"><a href="#diag函数" class="headerlink" title="diag函数"></a>diag函数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 对角线是给定的数矩阵</span></span><br><span class="line">np.diag([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure>




<pre><code>array([[1, 0, 0, 0, 0],
       [0, 2, 0, 0, 0],
       [0, 0, 3, 0, 0],
       [0, 0, 0, 4, 0],
       [0, 0, 0, 0, 5]])
</code></pre>
<h3 id="Numpy数据类型"><a href="#Numpy数据类型" class="headerlink" title="Numpy数据类型"></a>Numpy数据类型</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># boolv(True False)</span></span><br><span class="line"><span class="comment"># int8 int16 int32 int64</span></span><br><span class="line"><span class="comment"># float16 float32 float64</span></span><br><span class="line"><span class="comment"># uint16 uint32 uint64  无负号数</span></span><br><span class="line"><span class="comment"># complex64 complex128   复数</span></span><br></pre></td></tr></table></figure>

<h3 id="数组的数据类型转换"><a href="#数组的数据类型转换" class="headerlink" title="数组的数据类型转换"></a>数组的数据类型转换</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 整数转换成浮点数</span></span><br><span class="line"><span class="built_in">print</span>(np.float64(<span class="number">42</span>))</span><br></pre></td></tr></table></figure>

<pre><code>42.0
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 浮点数转换成整数(只保留整数部分)</span></span><br><span class="line"><span class="built_in">print</span>(np.int8(<span class="number">42.7</span>))</span><br></pre></td></tr></table></figure>

<pre><code>42
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 整数转换成布尔类型(不为0就是True)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="number">42</span>))</span><br></pre></td></tr></table></figure>

<pre><code>True
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<pre><code>False
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 布尔类型转换成浮点数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="literal">True</span>))</span><br></pre></td></tr></table></figure>

<pre><code>1.0
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">float</span>(<span class="literal">False</span>))</span><br></pre></td></tr></table></figure>

<pre><code>0.0
</code></pre>
<h3 id="生成随机数"><a href="#生成随机数" class="headerlink" title="生成随机数"></a>生成随机数</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># random函数</span></span><br><span class="line"><span class="built_in">print</span>(np.random.random(<span class="number">50</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[0.59232633 0.6411107  0.97898929 0.97087818 0.67003048 0.28415536
 0.89445312 0.1846121  0.85321461 0.23154943 0.04957189 0.21285043
 0.872293   0.67200539 0.42790104 0.58703862 0.82047001 0.86142295
 0.15375558 0.10183155 0.39696772 0.19298618 0.31944434 0.26318058
 0.46526374 0.23245513 0.29115143 0.62654022 0.30740245 0.43103429
 0.12004474 0.07347149 0.42652956 0.22008496 0.42964808 0.48136023
 0.88608138 0.64089157 0.5597949  0.10002506 0.61452597 0.15090955
 0.41359357 0.86451418 0.7956261  0.25228129 0.20252272 0.12602809
 0.08028642 0.73315099]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 服从均匀分布的随机数</span></span><br><span class="line"><span class="built_in">print</span>(np.random.rand(<span class="number">10</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[[0.48605743 0.02788955 0.43162964 0.43513563 0.64833316]
 [0.56585512 0.04759614 0.41381475 0.06863375 0.81682306]
 [0.1860506  0.73255099 0.93522819 0.9325931  0.66704483]
 [0.54770451 0.13453971 0.8763998  0.50201713 0.22395692]
 [0.49932342 0.88922754 0.93717527 0.77217021 0.02917072]
 [0.1180286  0.47482095 0.16971992 0.0906512  0.77002346]
 [0.70222973 0.74629622 0.1330453  0.18641943 0.70758914]
 [0.87520014 0.35884683 0.13991008 0.97581861 0.77213821]
 [0.35218032 0.59927793 0.2687652  0.3136718  0.09065667]
 [0.20142969 0.91113678 0.0994763  0.21456229 0.63351802]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 服从正态分布的随机数</span></span><br><span class="line"><span class="built_in">print</span>(np.random.randn(<span class="number">10</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[[ 1.98843720e-01 -7.82082761e-01  1.07255075e+00 -1.15325253e+00
  -2.19557026e+00]
 [-8.99431827e-01  2.02099185e+00  1.94988756e+00 -2.65094608e-02
   1.35984532e+00]
 [ 3.94889801e-01  7.61017055e-01 -6.06915532e-01 -1.89712350e+00
  -1.36715888e+00]
 [ 1.26061930e+00 -2.84968250e-01  1.58989171e-01  6.40721631e-02
  -1.08572218e+00]
 [ 1.22593797e+00  1.75438505e+00 -5.13927487e-01  4.28192394e-01
  -1.76706086e+00]
 [-6.88507790e-01 -5.37639044e-01  3.11335716e-01 -1.76635091e-01
   4.27737397e-01]
 [ 5.41820856e-01 -1.41832314e-01  1.16090179e+00  1.37208675e+00
  -9.57200202e-01]
 [-1.50901932e+00  2.70189734e-01  1.35290223e-01  8.62887153e-01
  -1.98848629e-01]
 [-3.44205093e-02 -2.83798634e-04 -9.81579652e-01 -1.06813568e+00
   2.52478465e-01]
 [-1.74419041e-01 -2.31019485e+00  6.37876009e-01 -1.93424876e+00
   6.32421025e-01]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 生成指定范围的随机数</span></span><br><span class="line"><span class="built_in">print</span>(np.random.randint(<span class="number">50</span>,<span class="number">100</span>,size=[<span class="number">5</span>,<span class="number">5</span>]))</span><br></pre></td></tr></table></figure>

<pre><code>[[89 96 80 95 78]
 [85 91 96 56 90]
 [59 83 50 75 92]
 [94 86 57 82 58]
 [50 95 86 58 83]]
</code></pre>
<h3 id="索引访问数组元素"><a href="#索引访问数组元素" class="headerlink" title="索引访问数组元素"></a>索引访问数组元素</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一维数组的元素访问</span></span><br><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"></span><br><span class="line">arr[<span class="number">5</span>]  <span class="comment"># 索引是从0开始的</span></span><br></pre></td></tr></table></figure>

<pre><code>[0 1 2 3 4 5 6 7 8 9]





5
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切片操作   （取不到最后一个元素）</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">3</span>:<span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[3 4]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 取到第三位</span></span><br><span class="line"><span class="built_in">print</span>(arr[:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[0 1 2]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从3开始取</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">3</span>:])</span><br></pre></td></tr></table></figure>

<pre><code>[3 4 5 6 7 8 9]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 2是步长</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>:<span class="number">7</span>:<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[1 3 5]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改数组的元素</span></span><br><span class="line">arr[<span class="number">3</span>] = <span class="number">300</span></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure>

<pre><code>[  0   1   2 300   4   5   6   7   8   9]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr[<span class="number">4</span>:<span class="number">6</span>] = <span class="number">400</span>, <span class="number">500</span></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure>

<pre><code>[  0   1   2 300 400 500   6   7   8   9]
</code></pre>
<h3 id="多维数组元素访问"><a href="#多维数组元素访问" class="headerlink" title="多维数组元素访问"></a>多维数组元素访问</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>,<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>4
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>7
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切片操作</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">0</span>,<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[1 2]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>:<span class="number">3</span>,<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[[ 5  6]
 [ 9 10]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 取整行</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>,:])</span><br></pre></td></tr></table></figure>

<pre><code>[4 5 6 7]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 取整列</span></span><br><span class="line"><span class="built_in">print</span>(arr[:,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[ 3  7 11]
</code></pre>
<h3 id="数组的组合与分割"><a href="#数组的组合与分割" class="headerlink" title="数组的组合与分割"></a>数组的组合与分割</h3><h4 id="hstack-横向组合"><a href="#hstack-横向组合" class="headerlink" title="hstack()  横向组合"></a>hstack()  横向组合</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr2 = arr * <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  2  4  6]
 [ 8 10 12 14]
 [16 18 20 22]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.hstack((arr, arr2)))</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  1  2  3  0  2  4  6]
 [ 4  5  6  7  8 10 12 14]
 [ 8  9 10 11 16 18 20 22]]
</code></pre>
<h4 id="vstack-纵向组合"><a href="#vstack-纵向组合" class="headerlink" title="vstack()  纵向组合"></a>vstack()  纵向组合</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.vstack((arr, arr2)))</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]
 [ 0  2  4  6]
 [ 8 10 12 14]
 [16 18 20 22]]
</code></pre>
<h4 id="hsplit-横向分割"><a href="#hsplit-横向分割" class="headerlink" title="hsplit()  横向分割"></a>hsplit()  横向分割</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></table></figure>

<pre><code>[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.hsplit(arr,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[array([[0, 1],
       [4, 5],
       [8, 9]]), array([[ 2,  3],
       [ 6,  7],
       [10, 11]])]
</code></pre>
<h4 id="vsplit-纵向分割"><a href="#vsplit-纵向分割" class="headerlink" title="vsplit()  纵向分割"></a>vsplit()  纵向分割</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">16</span>).reshape(<span class="number">4</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(np.vsplit(arr,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[array([[0, 1, 2, 3],
       [4, 5, 6, 7]]), array([[ 8,  9, 10, 11],
       [12, 13, 14, 15]])]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.vsplit(arr,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[array([[0, 1, 2, 3],
       [4, 5, 6, 7]]), array([[ 8,  9, 10, 11],
       [12, 13, 14, 15]])]
</code></pre>
<h3 id="2024-06-06绘制棉棒图"><a href="#2024-06-06绘制棉棒图" class="headerlink" title="2024.06.06绘制棉棒图"></a>2024.06.06绘制棉棒图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">1</span>, <span class="number">16</span>)</span><br><span class="line">y = np.array([<span class="number">5.9</span>, <span class="number">6.2</span>, <span class="number">6.7</span>, <span class="number">7.0</span>, <span class="number">7.0</span>, <span class="number">7.1</span>, <span class="number">7.2</span>, <span class="number">7.4</span>,</span><br><span class="line">              <span class="number">7.5</span>, <span class="number">7.6</span>, <span class="number">7.7</span>, <span class="number">7.7</span>, <span class="number">7.7</span>, <span class="number">7.8</span>, <span class="number">7.9</span>])</span><br><span class="line"></span><br><span class="line">labels = np.array([<span class="string">&#x27;宝骏310&#x27;</span>, <span class="string">&#x27;宝马13&#x27;</span>, <span class="string">&#x27;致享&#x27;</span>, <span class="string">&#x27;焕驰&#x27;</span>, <span class="string">&#x27;力帆530&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;派力奥&#x27;</span>, <span class="string">&#x27;悦翔V3&#x27;</span>, <span class="string">&#x27;乐风RV&#x27;</span>, <span class="string">&#x27;奥迪A1&#x27;</span>, <span class="string">&#x27;威驰FS&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;夏利N7&#x27;</span>, <span class="string">&#x27;启辰R30&#x27;</span>, <span class="string">&#x27;和悦A13RS&#x27;</span>, <span class="string">&#x27;致炫&#x27;</span>, <span class="string">&#x27;赛欧&#x27;</span>])</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line">(markerline, stemline, baseline) = plt.stem(x, y, linefmt=<span class="string">&#x27;-&#x27;</span>, markerfmt=<span class="string">&#x27;o&#x27;</span>, use_line_collection=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.setp(markerline, color=<span class="string">&#x27;r&#x27;</span>, ms=<span class="number">10</span>)</span><br><span class="line">plt.setp(stemline, color=<span class="string">&#x27;g&#x27;</span>, lw=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;不同品牌轿车燃料销号量&#x27;</span>, fontdict=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">18</span>&#125;)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;燃料消耗量（L/km）&#x27;</span>)</span><br><span class="line">plt.xticks(x, labels, rotation=<span class="number">60</span>)</span><br><span class="line">plt.ylim([<span class="number">0</span>, <span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> temp_x, temp_y <span class="keyword">in</span> <span class="built_in">zip</span>(x, y):</span><br><span class="line">    plt.text(temp_x, temp_y+<span class="number">0.2</span>, s=<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(temp_y), ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;bottom&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280915381.png" alt="image-20260128091512289"></p>
<h3 id="2024-06-06绘制甘特图"><a href="#2024-06-06绘制甘特图" class="headerlink" title="2024.06.06绘制甘特图"></a>2024.06.06绘制甘特图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">ticks = np.array([<span class="string">&#x27;报告提交&#x27;</span>, <span class="string">&#x27;数据分析&#x27;</span>, <span class="string">&#x27;数据录入&#x27;</span>, <span class="string">&#x27;实地执行&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;问卷确定&#x27;</span>, <span class="string">&#x27;试访&#x27;</span>, <span class="string">&#x27;问卷设计&#x27;</span>, <span class="string">&#x27;项目确定&#x27;</span>])</span><br><span class="line"></span><br><span class="line">y_data = np.arange(<span class="number">1</span>, <span class="number">9</span>)</span><br><span class="line">x_data = np.array([<span class="number">0.5</span>, <span class="number">1.5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">ax = plt.axes((<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.8</span>, <span class="number">0.8</span>))</span><br><span class="line">plt.barh(y_data, x_data, tick_label=ticks, left=[<span class="number">7.5</span>, <span class="number">6</span>, <span class="number">5.5</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1.5</span>, <span class="number">0</span>],</span><br><span class="line">         color=<span class="string">&#x27;#cd5c5c&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;任务甘特图&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;日期&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.spines[<span class="string">&#x27;top&#x27;</span>].set_color(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">ax.spines[<span class="string">&#x27;right&#x27;</span>].set_color(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">plt.grid(axis=<span class="string">&#x27;x&#x27;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280915157.png" alt="image-20260128091520067"></p>
<h3 id="2024-06-06绘制人口金字塔图"><a href="#2024-06-06绘制人口金字塔图" class="headerlink" title="2024.06.06绘制人口金字塔图"></a>2024.06.06绘制人口金字塔图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">df = pd.read_excel(<span class="string">r&#x27;population.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment"># print(df)</span></span><br><span class="line"></span><br><span class="line">df_male = df.groupby(by=<span class="string">&#x27;Gender&#x27;</span>).get_group(<span class="string">&#x27;Male&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(df_male)</span><br><span class="line">list_male = df_male[<span class="string">&#x27;Number&#x27;</span>].values.tolist()</span><br><span class="line"><span class="built_in">print</span>(list_male)</span><br><span class="line"></span><br><span class="line">df_female = df.groupby(by=<span class="string">&#x27;Gender&#x27;</span>).get_group(<span class="string">&#x27;Female&#x27;</span>)</span><br><span class="line"><span class="comment"># print(df_male)</span></span><br><span class="line">list_female = df_female[<span class="string">&#x27;Number&#x27;</span>].values.tolist()</span><br><span class="line"><span class="built_in">print</span>(list_female)</span><br><span class="line"></span><br><span class="line">df_age = df.groupby(<span class="string">&#x27;AgeGroup&#x27;</span>).<span class="built_in">sum</span>()</span><br><span class="line"><span class="built_in">print</span>(df_age)</span><br><span class="line"></span><br><span class="line">labels = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(df_age.shape[<span class="number">0</span>]):</span><br><span class="line">    age = df_age.index[i]</span><br><span class="line">    labels.append(age)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(labels)</span><br><span class="line"></span><br><span class="line">y = np.arange(<span class="number">1</span>, <span class="number">11</span>)</span><br><span class="line">plt.barh(y, list_male, tick_label=labels, label=<span class="string">&#x27;男&#x27;</span>, color=<span class="string">&#x27;#6699FF&#x27;</span>)</span><br><span class="line">plt.barh(y, list_female, tick_label=labels, label=<span class="string">&#x27;女&#x27;</span>, color=<span class="string">&#x27;#CC6699&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;人数&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;年龄段(岁)&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;某城市人口金字塔&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>  AgeGroup Gender  Number
0      0-9   Male  -70812
1    10-19   Male  -64963
2    20-29   Male  -89947
3    30-39   Male  -86653
4    40-49   Male  -98391
5    50-59   Male  -79226
6    60-69   Male  -59308
7    70-79   Male  -26564
8    80-89   Male   -9418
9      90+   Male    -791
[-70812, -64963, -89947, -86653, -98391, -79226, -59308, -26564, -9418, -791]
[60814, 55015, 83940, 84858, 94798, 77357, 60288, 28578, 11897, 1628]
          Number
AgeGroup        
0-9        -9998
10-19      -9948
20-29      -6007
30-39      -1795
40-49      -3593
50-59      -1869
60-69        980
70-79       2014
80-89       2479
90+          837
[&#39;0-9&#39;, &#39;10-19&#39;, &#39;20-29&#39;, &#39;30-39&#39;, &#39;40-49&#39;, &#39;50-59&#39;, &#39;60-69&#39;, &#39;70-79&#39;, &#39;80-89&#39;, &#39;90+&#39;]
</code></pre>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280915960.png" alt="image-20260128091526858"></p>
<h3 id="2024-06-06绘制漏斗图"><a href="#2024-06-06绘制漏斗图" class="headerlink" title="2024.06.06绘制漏斗图"></a>2024.06.06绘制漏斗图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">y = np.linspace(<span class="number">4</span>, <span class="number">0</span>, num=<span class="number">5</span>)</span><br><span class="line">x1 = np.array([<span class="number">1000</span>, <span class="number">500</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">150</span>])</span><br><span class="line">x2 = np.array((x1.<span class="built_in">max</span>() - x1) / <span class="number">2</span>)</span><br><span class="line"><span class="comment"># print(x2)  [  0. 250. 350. 400. 425.]</span></span><br><span class="line">x3 = [i + j <span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">zip</span>(x1, x2)]</span><br><span class="line"><span class="comment"># print(x3)   [1000.0, 750.0, 650.0, 600.0, 575.0]</span></span><br><span class="line">labels = [<span class="string">&#x27;访问商品&#x27;</span>, <span class="string">&#x27;加购物车&#x27;</span>, <span class="string">&#x27;生成订单&#x27;</span>, <span class="string">&#x27;支付订单&#x27;</span>, <span class="string">&#x27;完成交易&#x27;</span>]</span><br><span class="line">ax = plt.axes((<span class="number">0.2</span>, <span class="number">0.1</span>, <span class="number">0.7</span>, <span class="number">0.8</span>))</span><br><span class="line">rect1 = plt.barh(y, x3, <span class="number">0.5</span>, tick_label=labels, color=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">rect2 = plt.barh(y, x2, <span class="number">0.5</span>, tick_label=labels, color=<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">plt.plot(x3, y, <span class="string">&#x27;black&#x27;</span>, alpha=<span class="number">0.6</span>)</span><br><span class="line">plt.plot(x2, y, <span class="string">&#x27;black&#x27;</span>, alpha=<span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line">notes = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(x1)):</span><br><span class="line">    notes.append(<span class="string">&#x27;%.2f%%&#x27;</span> % ((x1[i]) / x1[<span class="number">0</span>] * <span class="number">100</span>))</span><br><span class="line"><span class="comment"># print(notes)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> rect_one, rect_two, note <span class="keyword">in</span> <span class="built_in">zip</span>(rect1, rect2, notes):</span><br><span class="line">    text_x = rect_two.get_width() + (rect_one.get_width() - rect_two.get_width())/<span class="number">2</span></span><br><span class="line">    text_y = rect_one.get_y() + <span class="number">0.25</span></span><br><span class="line">    ax.text(text_x, text_y, note, ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;top&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.set_xticks([])</span><br><span class="line"><span class="keyword">for</span> direction <span class="keyword">in</span> [<span class="string">&#x27;top&#x27;</span>, <span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;right&#x27;</span>, <span class="string">&#x27;bottom&#x27;</span>]:</span><br><span class="line">    ax.spines[direction].set_color(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280915692.png" alt="image-20260128091534596"></p>
<h3 id="2024-06-06绘制桑基图"><a href="#2024-06-06绘制桑基图" class="headerlink" title="2024.06.06绘制桑基图"></a>2024.06.06绘制桑基图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.sankey <span class="keyword">import</span> Sankey</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 消费收入与支出数据</span></span><br><span class="line">flows = [<span class="number">0.7</span>, <span class="number">0.3</span>, -<span class="number">0.3</span>, -<span class="number">0.1</span>, -<span class="number">0.3</span>, -<span class="number">0.1</span>, -<span class="number">0.1</span>, -<span class="number">0.1</span>]</span><br><span class="line"><span class="comment"># 流的标签列表</span></span><br><span class="line">labels = [<span class="string">&quot;工资&quot;</span>, <span class="string">&quot;副业&quot;</span>, <span class="string">&quot;生活&quot;</span>, <span class="string">&quot;购物&quot;</span>, <span class="string">&quot;深造&quot;</span>, <span class="string">&quot;运动&quot;</span>, <span class="string">&quot;其它&quot;</span>, <span class="string">&quot;买书&quot;</span>]</span><br><span class="line"><span class="comment"># 流的方向</span></span><br><span class="line">orientations = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">sankey = Sankey()</span><br><span class="line">sankey.add(</span><br><span class="line">    flows=flows,</span><br><span class="line">    labels=labels,</span><br><span class="line">    orientations=orientations,</span><br><span class="line">    color=<span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">    fc=<span class="string">&#x27;lightgreen&#x27;</span>,</span><br><span class="line">    patchlabel=<span class="string">&#x27;生活消费&#x27;</span>,</span><br><span class="line">    alpha=<span class="number">0.7</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">diagrams = sankey.finish()</span><br><span class="line">diagrams[<span class="number">0</span>].text.set_fontsize(<span class="number">20</span>)</span><br><span class="line">diagrams[<span class="number">0</span>].text.set_fontweight(<span class="string">&quot;bold&quot;</span>)</span><br><span class="line">diagrams[<span class="number">0</span>].texts[<span class="number">4</span>].set_color(<span class="string">&quot;r&quot;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601280915840.png" alt="image-20260128091545752"></p>
<h3 id="2024-06-06绘制华夫饼图"><a href="#2024-06-06绘制华夫饼图" class="headerlink" title="2024.06.06绘制华夫饼图"></a>2024.06.06绘制华夫饼图</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pywaffle</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> pywaffle <span class="keyword">import</span> Waffle</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用窗体显示</span></span><br><span class="line"><span class="comment"># import matplotlib</span></span><br><span class="line"><span class="comment"># matplotlib.use(&#x27;TkAgg&#x27;)</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">4</span>, <span class="number">4</span>),</span><br><span class="line">           dpi=<span class="number">80</span>,</span><br><span class="line">           FigureClass=Waffle,</span><br><span class="line">           rows=<span class="number">10</span>,</span><br><span class="line">           columns=<span class="number">10</span>,</span><br><span class="line">           values=[<span class="number">10</span>, <span class="number">85</span>, <span class="number">5</span>],</span><br><span class="line">           colors=[<span class="string">&#x27;#FF0000&#x27;</span>, <span class="string">&#x27;#ff0000&#x27;</span>, <span class="string">&#x27;#20B2AA&#x27;</span>],</span><br><span class="line">           vertical=<span class="literal">True</span>,</span><br><span class="line">           title=&#123;<span class="string">&#x27;label&#x27;</span>: <span class="string">&#x27;&lt;&lt;少年的你&gt;&gt;上座率&#x27;</span>&#125;,</span><br><span class="line">           legend=&#123;<span class="string">&#x27;loc&#x27;</span>: <span class="string">&quot;upper right&quot;</span>, <span class="string">&#x27;labels&#x27;</span>: [<span class="string">&#x27;情侣座&#x27;</span>, <span class="string">&#x27;占座&#x27;</span>, <span class="string">&#x27;空座&#x27;</span>]&#125;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>matplotlib</tag>
        <tag>numpy</tag>
      </tags>
  </entry>
  <entry>
    <title>大数据技术</title>
    <url>/2024-09-12-big-data-development.html</url>
    <content><![CDATA[<h3 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h3><h4 id="大数据技术栈思维导图"><a href="#大数据技术栈思维导图" class="headerlink" title="大数据技术栈思维导图"></a>大数据技术栈思维导图</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727671.png" alt="大数据技术栈思维导图"></p>
<h4 id="大数据处理简化流程"><a href="#大数据处理简化流程" class="headerlink" title="大数据处理简化流程"></a>大数据处理简化流程</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727873.png" alt="大数据处理简化流程"></p>
<h4 id="yarn工作原理"><a href="#yarn工作原理" class="headerlink" title="yarn工作原理"></a>yarn工作原理</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727953.png" alt="yarn工作原理"></p>
<h4 id="yarn工作原理简图"><a href="#yarn工作原理简图" class="headerlink" title="yarn工作原理简图"></a>yarn工作原理简图</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271652662.png" alt="yarn工作原理简图"></p>
<p>谷歌浏览器长截图：</p>
<p>检查 —&gt;     Shift+Ctrl+p    —-&#x3D;&gt;    full</p>
<h3 id="hadoop完全分布式安装"><a href="#hadoop完全分布式安装" class="headerlink" title="hadoop完全分布式安装"></a>hadoop完全分布式安装</h3><h4 id="一、配置主机名"><a href="#一、配置主机名" class="headerlink" title="一、配置主机名"></a>一、配置主机名</h4><p>命令：hostnamectl set-hostname [主机名]</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改主机名</span></span><br><span class="line">[root@hadoop111 ~]# hostnamectl set-hostname hadoop111</span><br><span class="line"><span class="comment"># 查看主机名</span></span><br><span class="line">[root@hadoop111 ~]# hostname</span><br><span class="line">hadoop111</span><br></pre></td></tr></table></figure>

<h4 id="二、配置IP映射"><a href="#二、配置IP映射" class="headerlink" title="二、配置IP映射"></a>二、配置IP映射</h4><p>配置IP映射前,要明确当前虚拟机的IP和主机名</p>
<p>命令：vi &#x2F;etc&#x2F;hosts</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# vi /etc/hosts</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">localhost6.localdomain6</span><br><span class="line">192.168.137.133 hadoop111</span><br><span class="line">192.168.137.134 hadoop112</span><br><span class="line">192.168.137.135 hadoop113</span><br></pre></td></tr></table></figure>





<h4 id="三、网络参数配置"><a href="#三、网络参数配置" class="headerlink" title="三、网络参数配置"></a>三、网络参数配置</h4><p>前面,对虚拟机的主机名和IP映射进行了配置,而想要虚拟机能够正常使用,还需要进行网络参数配置。</p>
<p>(1) 查看网络是否连通</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ping www.baidu.com</span><br><span class="line">PING www.a.shifen.com (183.2.172.185) 56(84) bytes of data.</span><br><span class="line">64 bytes from 183.2.172.185 (183.2.172.185): icmp_seq=1 ttl=128 <span class="keyword">time</span>=29.5 ms</span><br><span class="line">^C</span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, <span class="keyword">time</span> 2012ms</span><br><span class="line">rtt min/avg/max/mdev = 29.135/29.298/29.500/0.151 ms</span><br><span class="line">[root@hadoop111 ~]#</span><br></pre></td></tr></table></figure>



<p>(2)查看MAC地址（enter后面）：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.137.133  netmask 255.255.255.0  broadcast 192.168.137.255</span><br><span class="line">        inet6 fe80::6594:415e:4d5:72b8  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:0c:29:32:bf:50  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1414  bytes 148232 (144.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 998  bytes 100435 (98.0 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">        ether 52:54:00:20:1a:75  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>

<p>（3）修改网络配置文件：</p>
<p>命令： vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p>
<ul>
<li>HWADDR:表示虚拟机 MAC地址,需要与当前虚拟机MAC地址一致;</li>
<li>IPADDR:表示虚拟机的IP地址,这里设置的IP地址要与前面IP映射配置时的IP地址一致,否则无法通过主机名找到对应IP;</li>
<li>GATEWAY:表示虚拟机网关,通常都是将IP地址最后一位改成2;</li>
<li>NETMASK:表示虚拟机子网掩码,通常都是255.255.255.0;</li>
<li>DNS1:表示域名解析器,此处采用Google提供的免费DNS服务器8.8.8.8(也可以设置为PC端电脑对应的DNS)。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure>

<p>修改内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;no&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;static&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6INIT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_AUTOCONF=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6_ADDR_GEN_MODE=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">UUID=<span class="string">&quot;7e054fea-e568-4406-8160-6b7c1d983be5&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">HWADDR=<span class="string">&quot;00:0c:29:32:bf:50&quot;</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.137.133&quot;</span></span><br><span class="line">GATEWAY=<span class="string">&quot;192.168.137.2&quot;</span></span><br><span class="line">NETMASK=<span class="string">&quot;255.255.255.0&quot;</span></span><br><span class="line">DNS1=<span class="string">&quot;8.8.8.8&quot;</span></span><br></pre></td></tr></table></figure>

<p>再ping一下网是否连通：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重启网络</span></span><br><span class="line">[root@hadoop111 ~]# systemctl restart network</span><br><span class="line"></span><br><span class="line">[root@hadoop111 ~]# ping www.baidu.com</span><br><span class="line">PING www.wshifen.com (104.193.88.123) 56(84) bytes of data.</span><br><span class="line">64 bytes from 104.193.88.123 (104.193.88.123): icmp_seq=1 ttl=128 <span class="keyword">time</span>=171 ms</span><br><span class="line">^C</span><br><span class="line">--- www.wshifen.com ping statistics ---</span><br><span class="line">2 packets transmitted, 1 received, 50% packet loss, <span class="keyword">time</span> 1002ms</span><br><span class="line">rtt min/avg/max/mdev = 171.776/171.776/171.776/0.000 ms</span><br><span class="line">[root@hadoop111 ~]#</span><br></pre></td></tr></table></figure>

<p>同样方法克隆两台虚拟机如上设置</p>
<h4 id="四、SSH免密"><a href="#四、SSH免密" class="headerlink" title="四、SSH免密"></a>四、SSH免密</h4><p>（1）防火墙的操作</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙状态</span></span><br><span class="line">[root@hadoop111 ~]# systemctl status firewalld.service</span><br><span class="line">● firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since 一 2023-12-04 14:37:22 CST; 10min ago</span><br><span class="line">     Docs: man:firewalld(1)</span><br><span class="line"> Main PID: 792 (firewalld)</span><br><span class="line">    Tasks: 2</span><br><span class="line">   CGroup: /system.slice/firewalld.service</span><br><span class="line">           └─792 /usr/bin/python2 -Es /usr/sbin/firewalld --nofork --nopid</span><br><span class="line"></span><br><span class="line">12月 04 14:37:20 hadoop111 systemd[1]: Starting firewalld - dynamic firewall daemon...</span><br><span class="line">12月 04 14:37:22 hadoop111 systemd[1]: Started firewalld - dynamic firewall daemon.</span><br><span class="line">12月 04 14:37:22 hadoop111 firewalld[792]: WARNING: AllowZoneDrifting is enabled. ...w.</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show <span class="keyword">in</span> full.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">[root@hadoop111 ~]# systemctl stop firewalld.service</span><br><span class="line"><span class="comment"># 关闭防火墙的自启动(永久关闭)</span></span><br><span class="line">[root@hadoop111 ~]# systemctl <span class="built_in">disable</span> firewalld.service</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span><br><span class="line">Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span><br><span class="line"><span class="comment"># 重启网络</span></span><br><span class="line">[root@hadoop111 ~]# systemctl restart network</span><br></pre></td></tr></table></figure>



<p>(2) 免密登录原理</p>
<img data-src="https://img-blog.csdnimg.cn/20210324224529347.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDEzMDY1,size_16,color_FFFFFF,t_70" alt="img"  />

<p>生成密钥文件:</p>
<p>命令：ssh-keygen -t rsa</p>
<p>连续按4次回车</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">&#x27;/root/.ssh&#x27;</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:6rzN1cbKCPaQmOxTVgK8+Mmz59fCMDY7i5dEAh2FvGw root@hadoop111</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|   +.+.          |</span></span><br><span class="line"><span class="string">|  . *            |</span></span><br><span class="line"><span class="string">|   + +           |</span></span><br><span class="line"><span class="string">|  . E o .        |</span></span><br><span class="line"><span class="string">|   + + oS        |</span></span><br><span class="line"><span class="string">|   .=oOo   o     |</span></span><br><span class="line"><span class="string">|    +B*B .. +    |</span></span><br><span class="line"><span class="string">|   .o=**++.o     |</span></span><br><span class="line"><span class="string">|    o=*==.o      |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>

<p>将本机公钥文件复制到其他虚ssh拟机上</p>
<p>命令：ssh-copy-id [主机名]</p>
<p>在hadoop200上执行，先输入yes，后输入对应主机的密码，三台虚拟机配置操作相同：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ssh-copy-id hadoop111</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;hadoop111 (192.168.137.133)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:Cj4xUYc6IsbQuoo7d+eu10SyayJ/Q1N0ZmlzjEmme/k.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:f3:ea:99:f7:71:c5:e5:4a:85:00:6f:8d:10:c9:42:0a.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any                                                                    that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now i                                                                   t is to install the new keys</span></span><br><span class="line"><span class="string">root@hadoop111&#x27;</span>s password:</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh &#x27;hadoop111&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">[root@hadoop111 ~]# ssh-copy-id hadoop112</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;hadoop112 (192.168.137.134)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:Cj4xUYc6IsbQuoo7d+eu10SyayJ/Q1N0ZmlzjEmme/k.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:f3:ea:99:f7:71:c5:e5:4a:85:00:6f:8d:10:c9:42:0a.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any                                                                    that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now i                                                                   t is to install the new keys</span></span><br><span class="line"><span class="string">root@hadoop112&#x27;</span>s password:</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh &#x27;hadoop112&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line"></span><br><span class="line">[root@hadoop111 ~]# ssh-copy-id hadoop113</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: <span class="string">&quot;/root/.ssh/id_rsa.pub&quot;</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;hadoop113 (192.168.137.135)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:Cj4xUYc6IsbQuoo7d+eu10SyayJ/Q1N0ZmlzjEmme/k.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:f3:ea:99:f7:71:c5:e5:4a:85:00:6f:8d:10:c9:42:0a.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any                                                                    that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now i                                                                   t is to install the new keys</span></span><br><span class="line"><span class="string">root@hadoop113&#x27;</span>s password:</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">&quot;ssh &#x27;hadoop113&#x27;&quot;</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure>

<p>验证是否免密成功</p>
<p>命令：ssh [主机名]</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ssh hadoop112</span><br><span class="line">Last login: Mon Dec  4 14:38:54 2023 from 192.168.137.1</span><br><span class="line">[root@hadoop112 ~]# <span class="built_in">exit</span></span><br><span class="line">登出</span><br><span class="line">Connection to hadoop112 closed.</span><br></pre></td></tr></table></figure>

<p>.ssh 文件夹下 （~&#x2F;.ssh ） 的文件功能解释</p>
<img data-src="https://img-blog.csdnimg.cn/20210324223910846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ2NDEzMDY1,size_16,color_FFFFFF,t_70" alt="img"  />



<h4 id="五、JDK-hadoop安装"><a href="#五、JDK-hadoop安装" class="headerlink" title="五、JDK&amp;hadoop安装"></a>五、JDK&amp;hadoop安装</h4><ol>
<li>查看系统自带的jdk</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# rpm -qa | grep -i java</span><br><span class="line">java-1.7.0-openjdk-headless-1.7.0.261-2.6.22.2.el7_8.x86_64</span><br><span class="line">python-javapackages-3.4.1-11.el7.noarch</span><br><span class="line">tzdata-java-2020a-1.el7.noarch</span><br><span class="line">java-1.8.0-openjdk-headless-1.8.0.262.b10-1.el7.x86_64</span><br><span class="line">java-1.8.0-openjdk-1.8.0.262.b10-1.el7.x86_64</span><br><span class="line">javapackages-tools-3.4.1-11.el7.noarch</span><br><span class="line">java-1.7.0-openjdk-1.7.0.261-2.6.22.2.el7_8.x86_64</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>如果之前没创的话，创建自己的新用户 ，并修改新用户用户的密码</li>
</ol>
<p>命令：useradd newname</p>
<p>​			passwd newname</p>
<ol start="3">
<li>配置 leokadia 用户具有 root 权限 ， 方便 后期 加 sudo 执行 root 权限的命令</li>
</ol>
<p>命令：vim &#x2F;etc&#x2F;sudoers</p>
<p>进入后，下翻，找到如下地方</p>
<p>在%wheel 这行下面添加一行，如下内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yun   ALL=(ALL)     NOPASSWD:ALL</span><br></pre></td></tr></table></figure>

<p>注意要输入 wq! 保存并退出</p>
<ol start="4">
<li>用 Xshell 传输工具将 JDK 导入到 opt 目录下面的 software 文件夹下面</li>
</ol>
<p>先在opt目录下创建software、module目录</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 opt]# <span class="built_in">mkdir</span> software module</span><br><span class="line">[root@hadoop111 opt]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 4 yun yun 31 11月 29 17:15 module</span><br><span class="line">drwxr-xr-x. 2 yun yun  6 10月 31 2018 rh</span><br><span class="line">drwxr-xr-x. 2 yun yun 67 11月 29 17:12 software</span><br></pre></td></tr></table></figure>

<p>先可以也提前将Hadoop的安装包也一起传来了</p>
<p> 在opt &#x2F;software目录中查看软件包是否导入成功</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 software]# ll</span><br><span class="line">总用量 515524</span><br><span class="line">-rw-r--r--. 1 yun yun 338075860 11月 29 17:13 hadoop-3.1.3.tar.gz</span><br><span class="line">-rw-r--r--. 1 yun yun 189815615 11月 29 17:12 jdk-8u162-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>解压 JDK&amp;hadoop 到&#x2F;opt&#x2F;module 目录cd下</li>
</ol>
<p>命令：tar -zxvf jdk-8u162-linux-x64.tar.gz -C &#x2F;opt&#x2F;module&#x2F;</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 software]# tar -zxvf jdk-8u162-linux-x64.tar.gz -C /opt/module/</span><br><span class="line">[root@hadoop111 software]# tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换会/opt/module目录，查看相关内容</span></span><br><span class="line">[root@hadoop111 opt]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 4 yun yun 31 11月 29 17:15 module</span><br><span class="line">drwxr-xr-x. 2 yun yun  6 10月 31 2018 rh</span><br><span class="line">drwxr-xr-x. 2 yun yun 67 11月 29 17:12 software</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>配置 JDK &amp;hadoop环境变量</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入 profile</span></span><br><span class="line">[root@hadoop111 etc]# vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># java环境配置</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk</span><br><span class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="comment"># hadoop环境配置</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/opt/module/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=.:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$PATH</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>source 一下&#x2F;etc&#x2F;profile 文件，让新的环境变量 PATH 生效</p>
<p>命令：source &#x2F;etc&#x2F;profile</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 etc]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>测试 JDK &amp;hadoop是否安装成功</li>
</ol>
<p>命令：java</p>
<p>命令：java -version</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 etc]# java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_162&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_162-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)</span><br></pre></td></tr></table></figure>

<p>命令：hadoop version</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 etc]# hadoop version</span><br><span class="line">Hadoop 3.1.3</span><br><span class="line">Source code repository https://gitbox.apache.org/repos/asf/hadoop.git -r ba631c436b806728f8ec2f54ab1e289526c90579</span><br><span class="line">Compiled by ztang on 2019-09-12T02:47Z</span><br><span class="line">Compiled with protoc 2.5.0</span><br><span class="line">From <span class="built_in">source</span> with checksum ec785077c385118ac91aadde5ec9799</span><br><span class="line">This <span class="built_in">command</span> was run using /opt/module/hadoop/share/hadoop/common/hadoop-common-3.1.3.jar</span><br></pre></td></tr></table></figure>



<h4 id="六、编写集群分发脚本-xsync"><a href="#六、编写集群分发脚本-xsync" class="headerlink" title="六、编写集群分发脚本 xsync"></a>六、编写集群分发脚本 xsync</h4><ol>
<li>在&#x2F;bin目录下创建 xsync 文件</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# <span class="built_in">cd</span> bin</span><br><span class="line">[root@hadoop111 bin]# vim xsync</span><br></pre></td></tr></table></figure>

<p>在该文件中编写如下内容</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1. 判断参数个数</span></span><br><span class="line"><span class="comment"># 判断参数是否小于1</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> Not Enough Arguement!</span><br><span class="line">    <span class="built_in">exit</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. 遍历集群所有机器</span></span><br><span class="line"><span class="comment"># 对111，112，113都进行分发</span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> hadoop111 hadoop112 hadoop113</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">echo</span> ====================  <span class="variable">$host</span>  ====================</span><br><span class="line">   <span class="comment">#3. 遍历所有目录，挨个发送</span></span><br><span class="line">   <span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line">   <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#4. 判断文件是否存在</span></span><br><span class="line">        <span class="keyword">if</span> [ -e <span class="variable">$file</span> ]</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                <span class="comment">#5. 获取父目录</span></span><br><span class="line">                pdir=$(<span class="built_in">cd</span> -P $(<span class="built_in">dirname</span> <span class="variable">$file</span>); <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment">#6. 获取当前文件的名称</span></span><br><span class="line">                fname=$(<span class="built_in">basename</span> <span class="variable">$file</span>)</span><br><span class="line">                ssh <span class="variable">$host</span> <span class="string">&quot;mkdir -p <span class="variable">$pdir</span>&quot;</span></span><br><span class="line">                rsync -av <span class="variable">$pdir</span>/<span class="variable">$fname</span> <span class="variable">$host</span>:<span class="variable">$pdir</span> </span><br><span class="line">            <span class="comment"># 如果不存在</span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                <span class="built_in">echo</span> <span class="variable">$file</span> does not exists! </span><br><span class="line">        <span class="keyword">fi</span> </span><br><span class="line">    <span class="keyword">done</span> </span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改脚本 xsync 具有执行权限</li>
</ol>
<p>命令：chmod +x xsync</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 bin]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 874 12月  4 15:37 xsync</span><br><span class="line">[root@hadoop111 bin]# <span class="built_in">chmod</span> +x xsync</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>测试脚本</li>
</ol>
<p>命令：xsync bin&#x2F;</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# xsync bin/</span><br><span class="line">==================== hadoop111 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 80 bytes  received 17 bytes  194.00 bytes/sec</span><br><span class="line">total size is 874  speedup is 9.01</span><br><span class="line">==================== hadoop112 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">bin/</span><br><span class="line">bin/xsync</span><br><span class="line"></span><br><span class="line">sent 1,000 bytes  received 39 bytes  2,078.00 bytes/sec</span><br><span class="line">total size is 874  speedup is 0.84</span><br><span class="line">==================== hadoop113 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">bin/</span><br><span class="line">bin/xsync</span><br><span class="line"></span><br><span class="line">sent 1,000 bytes  received 39 bytes  2,078.00 bytes/sec</span><br><span class="line">total size is 874  speedup is 0.84</span><br></pre></td></tr></table></figure>

<p>在hadoop112，hadoop113上验证，发现脚本传输成功</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# ll</span><br><span class="line">总用量 8</span><br><span class="line">-rw-------. 1 root root 1734 11月 25 18:14 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root   19 12月  4 15:37 bin</span><br><span class="line">-rw-r--r--. 1 root root 1782 11月 25 18:16 initial-setup-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 公共</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 模板</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 视频</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 图片</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 文档</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 下载</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 音乐</span><br><span class="line">drwxr-xr-x. 2 root root    6 11月 25 18:16 桌面</span><br></pre></td></tr></table></figure>

<p>………</p>
<h4 id="七、集群配置"><a href="#七、集群配置" class="headerlink" title="七、集群配置"></a>七、集群配置</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"> [hadmin@master hadoop]$ vim hadoop-env.sh </span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改下列内容，大概在55行左右 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk</span><br></pre></td></tr></table></figure>



<ol>
<li>核心配置文件</li>
</ol>
<p>配置 core-site.xml</p>
<p>命令：cd $HADOOP_HOME&#x2F;etc&#x2F;hadoop</p>
<p>命令：vim core-site.xml</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br><span class="line">[root@hadoop111 hadoop]# vim core-site.xml</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;!-- 指定 NameNode 的地址 --&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">       &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">       &lt;value&gt;hdfs://hadoop111:8020&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- 指定 hadoop 数据的存储目录 --&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">       &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">       &lt;value&gt;/opt/module/hadoop/data&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- 配置 HDFS 网页登录使用的静态用户为 atguigu --&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">       &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;</span><br><span class="line">       &lt;value&gt;atguigu&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>HDFS 配置文件</li>
</ol>
<p>命令：vim hdfs-site.xml</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# vim hdfs-site.xml</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;!-- NameNode web 端访问地址--&gt;</span><br><span class="line"> &lt;property&gt;</span><br><span class="line">       &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;</span><br><span class="line">       &lt;value&gt;hadoop111:9870&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line"> &lt;!-- SecondaryNameNode web 端访问地址--&gt;</span><br><span class="line">   &lt;property&gt;</span><br><span class="line">       &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class="line">       &lt;value&gt;hadoop113:9868&lt;/value&gt;</span><br><span class="line">   &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>YARN 配置文件</li>
</ol>
<p>命令：vim yarn-site.xml</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# vim yarn-site.xml</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;!-- 指定 MR 走 shuffle --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 指定 ResourceManager 的地址--&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hadoop112&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 环境变量的继承 --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">&lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>MapReduce 配置文件</li>
</ol>
<p>命令：vim mapred-site.xml</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# vim mapred-site.xml</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;!-- 指定 MapReduce 程序运行在 Yarn 上 --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;yarn&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>需要将这个配置文件分发给hadoop112，hadoop113</li>
</ol>
<p>在集群上分发配置好的 Hadoop 配置文件</p>
<p>命令：xsync &#x2F;opt&#x2F;module&#x2F;hadoop&#x2F;etc&#x2F;hadoop&#x2F;</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# xsync /opt/module/hadoop/etc/hadoop/</span><br><span class="line">==================== hadoop111 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 890 bytes  received 18 bytes  1,816.00 bytes/sec</span><br><span class="line">total size is 107,822  speedup is 118.75</span><br><span class="line">==================== hadoop112 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">hadoop/</span><br><span class="line">hadoop/core-site.xml</span><br><span class="line">hadoop/hdfs-site.xml</span><br><span class="line">hadoop/mapred-site.xml</span><br><span class="line">hadoop/yarn-site.xml</span><br><span class="line"></span><br><span class="line">sent 3,544 bytes  received 145 bytes  7,378.00 bytes/sec</span><br><span class="line">total size is 107,822  speedup is 29.23</span><br><span class="line">==================== hadoop113 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">hadoop/</span><br><span class="line">hadoop/core-site.xml</span><br><span class="line">hadoop/hdfs-site.xml</span><br><span class="line">hadoop/mapred-site.xml</span><br><span class="line">hadoop/yarn-site.xml</span><br><span class="line"></span><br><span class="line">sent 3,544 bytes  received 145 bytes  2,459.33 bytes/sec</span><br><span class="line">total size is 107,822  speedup is 29.23</span><br></pre></td></tr></table></figure>

<p>去112 和 113 上 查看文件分发情况</p>
<p>命令：cat &#x2F;opt&#x2F;module&#x2F;hadoop&#x2F;etc&#x2F;hadoop&#x2F;core-site.xml</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# <span class="built_in">cat</span> /opt/module/hadoop/etc/hadoop/core-site.xml</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;?xml-stylesheet <span class="built_in">type</span>=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">  Licensed under the Apache License, Version 2.0 (the <span class="string">&quot;License&quot;</span>);</span><br><span class="line">  you may not use this file except <span class="keyword">in</span> compliance with the License.</span><br><span class="line">  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">    http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">  Unless required by applicable law or agreed to <span class="keyword">in</span> writing, software</span><br><span class="line">  distributed under the License is distributed on an <span class="string">&quot;AS IS&quot;</span> BASIS,</span><br><span class="line">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line">  See the License <span class="keyword">for</span> the specific language governing permissions and</span><br><span class="line">  limitations under the License. See accompanying LICENSE file.</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Put site-specific property overrides <span class="keyword">in</span> this file. --&gt;</span><br><span class="line"></span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">   &lt;!-- 指定 NameNode 的地址 --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;hdfs://hadoop111:8020&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 指定 hadoop 数据的存储目录 --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/opt/module/hadoop/data&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 配置 HDFS 网页登录使用的静态用户为 atguigu --&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;atguigu&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>…….</p>
<ol start="6">
<li>配置 workers</li>
</ol>
<p>命令：cd $HADOOP_HOME&#x2F;etc&#x2F;hadoop</p>
<p>命令：vim &#x2F;opt&#x2F;module&#x2F;hadoop&#x2F;etc&#x2F;hadoop&#x2F;workers</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 ~]# <span class="built_in">cd</span> <span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br><span class="line">[root@hadoop111 hadoop]# vim /opt/module/hadoop/etc/hadoop/workers</span><br></pre></td></tr></table></figure>

<p>在该文件中增加如下内容：（有几个节点就配置几个主机名称）</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hadoop111</span><br><span class="line">hadoop112</span><br><span class="line">hadoop113</span><br></pre></td></tr></table></figure>

<p>同步所有节点配置文件</p>
<p>命令：xsync &#x2F;opt&#x2F;module&#x2F;hadoop&#x2F;etc</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# xsync /opt/module/hadoop/etc</span><br><span class="line">==================== hadoop111 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">etc/hadoop/</span><br><span class="line">etc/hadoop/workers</span><br><span class="line"></span><br><span class="line">sent 999 bytes  received 51 bytes  2,100.00 bytes/sec</span><br><span class="line">total size is 107,842  speedup is 102.71</span><br><span class="line">==================== hadoop112 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 919 bytes  received 19 bytes  625.33 bytes/sec</span><br><span class="line">total size is 107,842  speedup is 114.97</span><br><span class="line">==================== hadoop113 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">etc/hadoop/</span><br><span class="line">etc/hadoop/workers</span><br><span class="line"></span><br><span class="line">sent 999 bytes  received 51 bytes  700.00 bytes/sec</span><br><span class="line">total size is 107,842  speedup is 102.71</span><br></pre></td></tr></table></figure>

<p>分发配置，将三台节点配置完毕，回到家目录，准备启动集群</p>
<p>注意因为我使用的是root 用户需要配置profile变量</p>
<p>命令：vi &#x2F;etc&#x2F;profile</p>
<p>然后在最后添加如下内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HDFS_NAMENODE_USER=root</span><br><span class="line"><span class="built_in">export</span> HDFS_DATANODE_USER=root</span><br><span class="line"><span class="built_in">export</span> HDFS_SECONDARYNAMENODE_USER=root</span><br><span class="line"><span class="built_in">export</span> YARN_RESOURCEMANAGER_USER=root</span><br><span class="line"><span class="built_in">export</span> YARN_NODEMANAGER_USER=root</span><br></pre></td></tr></table></figure>

<p>最后使其生效</p>
<p>命令：source &#x2F;etc&#x2F;profile</p>
<ol start="7">
<li>启动集群</li>
</ol>
<p>初始化（注意：只有第一次的时候才需要）</p>
<p>如果集群是第一次启动，需要在 hadoop200 节点格式化 NameNode（注意：格式化 NameNode，会产生新的集群 id，导致 NameNode 和 DataNode 的集群 id 不一致，集群找不到已往数据。如果集群在运行过程中报错，需要重新格式化 NameNode 的话，一定要先停止 namenode 和 datanode 进程，并且要删除所有机器的 data 和 logs 目录，然后再进行格式化。）</p>
<p>命令：hdfs namenode -format</p>
<p>停止 namenode 和 datanode 进程:</p>
<p>hdfs –daemon stop namenode</p>
<p>hdfs –daemon stop datanode</p>
<ol start="8">
<li>启动 HDFS</li>
</ol>
<p>命令：sbin&#x2F;start-dfs.sh</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop111 hadoop]# sbin/start-dfs.sh</span><br></pre></td></tr></table></figure>

<p>在配置了 ResourceManager 的节点（hadoop112 ）启动 YARN</p>
<p>命令：sbin&#x2F;start-yarn.sh</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop112 hadoop]# sbin/start-yarn.sh</span><br></pre></td></tr></table></figure>

<ol start="9">
<li><p>Web 端查看 HDFS 的 NameNode </p>
<p>浏览器中输入：<code>http://hadoop200:9870</code></p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271703245.png" alt="image-20231127162838147"></p>
<ol start="10">
<li><p>Web 端查看 YARN 的 ResourceManager</p>
<p>浏览器中输入：<code>http://hadoop201:8088</code></p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727011.png" alt="image-20231127163034588"></p>
<h3 id="分布式文件系统HDFS"><a href="#分布式文件系统HDFS" class="headerlink" title="分布式文件系统HDFS"></a>分布式文件系统HDFS</h3><h4 id="一、HDFS-Shell命令格式"><a href="#一、HDFS-Shell命令格式" class="headerlink" title="一、HDFS Shell命令格式"></a>一、HDFS Shell命令格式</h4><p>基础命名格式</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hdfs dfs -操作命令 参数 具体文件或路径</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">hadoop fs -操作命令 参数 具体文件或路径</span><br></pre></td></tr></table></figure>



<h4 id="二、HDFS-Shell-常用操作命令"><a href="#二、HDFS-Shell-常用操作命令" class="headerlink" title="二、HDFS Shell 常用操作命令"></a>二、HDFS Shell 常用操作命令</h4><ol>
<li>帮助命令</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop200 ~]# hdfs dfs -<span class="built_in">help</span> <span class="built_in">touch</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>HDFS中创建目录和查看信息</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop200 ~]# hdfs dfs -<span class="built_in">mkdir</span> /test</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>HDFS中创建多层目录</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop200 ~]# hdfs dfs -<span class="built_in">mkdir</span> -p /inpot/log</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>上传相关素材 HDFS分布式文件系统素材.zip 并解压</li>
</ol>
<p>unzip 负责解压 *.zip格式文件</p>
<p>-od 参数</p>
<p>.&#x2F; 表示需要解压到哪里， .&#x2F; 的作用为：当前目录</p>
<p>HDFS分布式文件系统素材.zip 表示需要解压的文件</p>
<p>命令：unzip -od .&#x2F; HDFS分布式文件系统素材.zip</p>
<ol start="5">
<li>HDFS的上传命令</li>
</ol>
<p> 上传单个文件</p>
<p> 命令：hdfs dfs -put ~&#x2F;NumberData.csv[需要上传的文件路径] &#x2F;inpot[上传到HDFS 路径]</p>
<p> 多文件同时上传 </p>
<p>命令：hdfs dfs -put ~&#x2F;MI_StepCountData.csv ~&#x2F;inpot&#x2F;log</p>
<p>上传目录操作</p>
<p>命令：hdfs dfs -put ~&#x2F;inpot&#x2F; &#x2F;log</p>
<ol start="6">
<li>查看数据的相关内容</li>
</ol>
<p>-cat 查看文件的相关内容(全部)</p>
<p>命令：hdfs dfs -cat &#x2F;test&#x2F;User01.csv</p>
<p>-cat 查看文件的相关内容(全部)</p>
<p>命令：hdfs dfs -cat &#x2F;test&#x2F;User01.csv</p>
<p>如果想查看内容的后面N行数据</p>
<p>命令：hdfs dfs -cat &#x2F;test&#x2F;User01.csv | tail -5</p>
<p>如果我想知道当前文件的内容一共有多少行数据？ </p>
<p>添加管道符 | wc -l, wc -l 是3个单词组成：Word Count Lines </p>
<p>命令：hdfs dfs -cat &#x2F;test&#x2F;User01.csv | wc -l</p>
<ol start="7">
<li>查看文件大小和查找文件命令</li>
</ol>
<p> -du 查看指定目录每个文件的大小(单位为：字节(Byte)) </p>
<p>命令：hdfs dfs -du &#x2F;TemporaryData</p>
<p> -find 搜索相关文件， 在哪里搜索(路径) -name 搜索的文件名字 </p>
<p>命令：hdfs dfs -find &#x2F; -name U*</p>
<ol start="8">
<li>查看HDFS文件系统的磁盘使用情况</li>
</ol>
<p>命令：hdfs dfs -df</p>
<ol start="9">
<li>将HDFS中的数据下载到本地</li>
</ol>
<p>命令：hdfs dfs -get &#x2F;test&#x2F;User01.csv &#x2F;home&#x2F;yun&#x2F;MyData.csv</p>
<ol start="10">
<li>删除空目录</li>
</ol>
<p>命令：hdfs dfs -rmdir &#x2F;inpot&#x2F;log&#x2F;Log</p>
<ol start="11">
<li>删除文件和删除指定目录及其所有子目录与文件</li>
</ol>
<p>删除单个文件 </p>
<p>命令： hdfs dfs -rm &#x2F;test&#x2F;User01.csv Deleted &#x2F;test&#x2F;User01.csv </p>
<p> 删除目录及其子目录与文件 </p>
<p>命令：hdfs dfs -rm -r &#x2F;WriteOnlyDataSet Deleted &#x2F;WriteOnlyDataSet</p>
<h3 id="Scala基础"><a href="#Scala基础" class="headerlink" title="Scala基础"></a>Scala基础</h3><h4 id="一、scala类和对象"><a href="#一、scala类和对象" class="headerlink" title="一、scala类和对象"></a>一、scala类和对象</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Scala:</span></span><br><span class="line"><span class="comment"> * 1.Scala object相当于Java中的单列。object中定义的全是静态的。相当于Java的工具类。 Object不可以传参，(对象要传参，使用apply方法)</span></span><br><span class="line"><span class="comment"> * 2.Scala 中定义变量使用var，定义常量使用val，变量可变，常量不可变，变量和常量类型可以省略不写，会自动推断。</span></span><br><span class="line"><span class="comment"> * 3.Scala 中每行后面都会有分号自动推断机制，不用显示写出“;”</span></span><br><span class="line"><span class="comment"> * 4.建议在Scala中命名使用驼峰命名法。</span></span><br><span class="line"><span class="comment"> * 5.Scala 类中可以传参，传参一定要指定类型，有了参数就有了默认了构造。类中的属性默认有getter和setter方法</span></span><br><span class="line"><span class="comment"> * 6.类中重新构造是，构造中第一行必须先调用默认的构造 def this(....)&#123;....&#125;</span></span><br><span class="line"><span class="comment"> * 7.Scala 中当new class 时，类中除了方法不执行【除了构造方法】其他都执行</span></span><br><span class="line"><span class="comment"> * 8.在同一个Scala文件中，class名称和Object名称一样时，这个类叫做这个对象的伴生类，这个对象叫做这个对象的伴生对象。他们之间可以相互访问私有变量</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="params">xname :<span class="type">String</span>, xage: <span class="type">Int</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name = xname</span><br><span class="line">  <span class="keyword">var</span> age = xage</span><br><span class="line">  <span class="keyword">var</span> gender = &#x27;<span class="type">M</span>&#x27;</span><br><span class="line"></span><br><span class="line">  println(<span class="string">&quot;***** Persion Class *****&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">this</span></span>(yname:<span class="type">String</span>, yage:<span class="type">Int</span>, ygender:<span class="type">Char</span>)&#123;</span><br><span class="line">    <span class="keyword">this</span>(yname, yage)</span><br><span class="line">    <span class="keyword">this</span>.gender = ygender</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sayName</span></span>():<span class="type">Unit</span> = &#123;</span><br><span class="line">    println(<span class="string">&quot;hello world....&quot;</span> + <span class="type">Lesson_ClassAndObj</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  println(<span class="string">&quot;=======Persion Class======&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Lesson_ClassAndObj</span> </span>&#123;</span><br><span class="line">  println(<span class="string">&quot;#####Lesson_ClassAndObj######&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> name = <span class="string">&quot;wangwu&quot;</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p = <span class="keyword">new</span> <span class="type">Person</span>(xname = <span class="string">&quot;zhangsan&quot;</span>, xage = <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    println(p.gender)</span></span><br><span class="line"><span class="comment">//    val p1 = new Person(&quot;libai&quot;,18,&#x27;F&#x27;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    println(p1.gender)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    p.age = 200</span></span><br><span class="line"><span class="comment">//    println(p.name)</span></span><br><span class="line"><span class="comment">//    println(p.age)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    p.sayName()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//println(&quot;hello world&quot;)</span></span><br><span class="line"><span class="comment">//    val a = 100</span></span><br><span class="line">    <span class="comment">////    var b = 200</span></span><br><span class="line">    <span class="comment">////    b = 300</span></span><br><span class="line">    <span class="comment">////    println(b)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="二、scala简单语法"><a href="#二、scala简单语法" class="headerlink" title="二、scala简单语法"></a>二、scala简单语法</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合01</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(array:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span>=&#123;</span><br><span class="line">    <span class="keyword">val</span> s = <span class="string">&quot;bjsxt&quot;</span></span><br><span class="line">    <span class="keyword">val</span> s1 = <span class="string">&quot;BJSXT&quot;</span></span><br><span class="line"></span><br><span class="line">    println(s.indexOf(<span class="number">98</span>))    <span class="comment">// 97:a  65:A  返回下标 没有为-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    println(s.equals(s1))</span></span><br><span class="line"><span class="comment">//    println(s.equalsIgnoreCase(s1))</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="三、scala字符串-集合"><a href="#三、scala字符串-集合" class="headerlink" title="三、scala字符串&amp;集合"></a>三、scala字符串&amp;集合</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合02</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>[<span class="type">String</span>]( <span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="comment">//    arr.foreach(println)  //1.</span></span><br><span class="line"><span class="comment">//    arr.foreach(s=&gt;println(s))  //2.</span></span><br><span class="line"><span class="comment">//    for (i&lt;-arr)&#123;   //3.</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val arr1 = new Array[Int](3)</span></span><br><span class="line"><span class="comment">//    arr1(0) = 100</span></span><br><span class="line"><span class="comment">//    arr1(1) = 200</span></span><br><span class="line"><span class="comment">//    arr1(2) = 300</span></span><br><span class="line"><span class="comment">//    arr1.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val array = new Array[Array[Int]](3)</span></span><br><span class="line"><span class="comment">//    array(0) = Array[Int](1,2,3)</span></span><br><span class="line"><span class="comment">//    array(1) = Array[Int](4,5,6)</span></span><br><span class="line"><span class="comment">//    array(2) = Array[Int](7,8,9)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line"><span class="comment">//    for(i&lt;-array)&#123;</span></span><br><span class="line"><span class="comment">//      for(j&lt;-i)&#123;</span></span><br><span class="line"><span class="comment">//        println(j)</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line"><span class="comment">//    for (i&lt;-array; j&lt;-i)&#123;</span></span><br><span class="line"><span class="comment">//        println(j)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line"><span class="comment">//    array.foreach(arr=&gt;&#123;arr.foreach(println)&#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val arr3 = Array[String](&quot;q&quot;,&quot;w&quot;,&quot;e&quot;,&quot;r&quot;)</span></span><br><span class="line"><span class="comment">//    val arr4 = Array[String](&quot;t&quot;,&quot;y&quot;,&quot;u&quot;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    val arrays: Array[String] = Array.concat(arr3,arr4)</span></span><br><span class="line"><span class="comment">//    arrays.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val array: Array[String] = Array.fill(5)(&quot;hello&quot;)</span></span><br><span class="line"><span class="comment">//    array.foreach(println)</span></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合03</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> arr =<span class="type">ArrayBuffer</span>[<span class="type">Int</span>](<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    arr.+=(<span class="number">4</span>)</span><br><span class="line">    arr.+=:(<span class="number">100</span>)</span><br><span class="line">    arr.append(<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line">    arr.foreach(println)</span><br><span class="line"></span><br><span class="line"><span class="comment">//    import scala.collection.mutable.ArrayBuffer</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合04</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">//    val list = List[Int](1,2,3)</span></span><br><span class="line"><span class="comment">//    list.foreach(println)  //1.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(i &lt;- list)&#123;    //2.</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">List</span>[<span class="type">String</span>](<span class="string">&quot;hello scala&quot;</span>,<span class="string">&quot;hello java&quot;</span>,<span class="string">&quot;hello python&quot;</span>)</span><br><span class="line">    list.map()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="四、scala循环"><a href="#四、scala循环" class="headerlink" title="四、scala循环"></a>四、scala循环</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_循环</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args:<span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * if...else...</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val age = 88</span></span><br><span class="line"><span class="comment">//    if(age&lt;=20)&#123;</span></span><br><span class="line"><span class="comment">//      println(&quot;age&lt;20&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;else if(age&gt;20&amp;&amp;age&lt;=30)&#123;</span></span><br><span class="line"><span class="comment">//      println(&quot;20&lt;age&lt;=30&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;else&#123;</span></span><br><span class="line"><span class="comment">//      println(&quot;age&gt;30&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * for</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 to (10, 2)</span></span><br><span class="line">    <span class="keyword">val</span> r = <span class="number">1.</span>to(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">    println(r)</span><br><span class="line"><span class="comment">//    // 1 until 10</span></span><br><span class="line"><span class="comment">//    val r1 = 1 until 10</span></span><br><span class="line"><span class="comment">//    println(r1)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    for (i &lt;- 1.to(10,2))&#123;</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小九九</span></span><br><span class="line"><span class="comment">//    for (i &lt;- 1 until 10)&#123;</span></span><br><span class="line"><span class="comment">//      for(j &lt;- 1 until 10)&#123;</span></span><br><span class="line"><span class="comment">//        if(i&gt;=j)&#123;</span></span><br><span class="line"><span class="comment">//          print(i+&quot;*&quot;+j+&quot;=&quot;+i*j+&quot;\t&quot;)</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        if(i==j)&#123;</span></span><br><span class="line"><span class="comment">//          println()</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(i &lt;- 1 until 10; j &lt;- 1 until 10)&#123;</span></span><br><span class="line"><span class="comment">//      if(i&gt;=j)&#123;</span></span><br><span class="line"><span class="comment">//        print(i+&quot;*&quot;+j+&quot;=&quot;+i*j+&quot;\t&quot;)</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//      if(i==j)&#123;</span></span><br><span class="line"><span class="comment">//        println()</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(i &lt;- 1 to 100; if(i &gt; 50); if(i%5==0))&#123;</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result = for(i &lt;- 1 to 100; if(i &gt; 50); if(i%5==0)) yield i</span></span><br><span class="line"><span class="comment">//    println(result)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * while</span></span><br><span class="line"><span class="comment">  * do...while...</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">//    var i = 0</span></span><br><span class="line"><span class="comment">//    while(i&lt;10)&#123;</span></span><br><span class="line"><span class="comment">//      println(s&quot;第 $i 次求婚。。。。&quot;)</span></span><br><span class="line"><span class="comment">//      i += 1</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">      println(<span class="string">&quot;第&quot;</span>+y+<span class="string">&quot;次求婚！！！！&quot;</span>)</span><br><span class="line">      y += <span class="number">1</span></span><br><span class="line">    &#125;<span class="keyword">while</span>(y&lt;<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="五、scala方法的定义"><a href="#五、scala方法的定义" class="headerlink" title="五、scala方法的定义"></a>五、scala方法的定义</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_方法的定义</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.方法定义：</span></span><br><span class="line"><span class="comment">     *  1).方法体中最后返回值可以使用return,如果使用了return,那么方法体的返回值类型一定要指定</span></span><br><span class="line"><span class="comment">     *  2).如果方法体中没有return,默认将方法体中最后一行计算的结果当做返回值返回。方法体的返回值类型可以省略，会自动推断返回值类型</span></span><br><span class="line"><span class="comment">     *  3).定义方法传入的参数一定要指定类型</span></span><br><span class="line"><span class="comment">     *  4).方法的方法体如果可以一行搞定，那么方法的”&#123;...&#125;“可以省略</span></span><br><span class="line"><span class="comment">     *  5).如果定义方法时，省略了方法名称和方法体之间的”=“，那么无论方法体最后一行计算的结果是什么，都会被丢弃，返回Unit</span></span><br><span class="line"><span class="comment">     *  6).def 定义方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def max(a:Int, b:Int): Int = &#123;</span></span><br><span class="line"><span class="comment">//      if(a&gt;b)&#123;</span></span><br><span class="line"><span class="comment">//         return a</span></span><br><span class="line"><span class="comment">//      &#125;else&#123;</span></span><br><span class="line"><span class="comment">//         return b</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max</span></span>(a:<span class="type">Int</span>, b:<span class="type">Int</span>): <span class="type">Int</span> = <span class="keyword">if</span>(a&gt;b) a <span class="keyword">else</span> b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> result: <span class="type">Int</span> = max(<span class="number">100</span>, <span class="number">20</span>)</span><br><span class="line">    println(result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="六、scala递归"><a href="#六、scala递归" class="headerlink" title="六、scala递归"></a>六、scala递归</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Date</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_递归方法</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(array: <span class="type">Array</span>[<span class="type">String</span>]) : <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 1.递归方法</span></span><br><span class="line"><span class="comment">   *  递归方法要显示的声明函数的返回值类型</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun(num:Int):Int=&#123;</span></span><br><span class="line"><span class="comment">//      if(num==1)&#123;</span></span><br><span class="line"><span class="comment">//        1</span></span><br><span class="line"><span class="comment">//      &#125;else&#123;</span></span><br><span class="line"><span class="comment">//        num*fun(num-1)</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun(5))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 2.参数有默认值得方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun(a:Int=10,b:Int=20)=&#123;</span></span><br><span class="line"><span class="comment">//      a+b</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">////    println(fun(100,200))</span></span><br><span class="line"><span class="comment">////    println(fun(100))</span></span><br><span class="line"><span class="comment">//    println(fun(b=100))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 3.可变长参数的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    def fun(s:String*)=&#123;</span></span><br><span class="line"><span class="comment">//      // =&gt; 匿名函数</span></span><br><span class="line"><span class="comment">//      s.foreach(i=&gt;&#123;println(i)&#125;)</span></span><br><span class="line"><span class="comment">////      for(i&lt;-s)&#123;</span></span><br><span class="line"><span class="comment">////        println(i)</span></span><br><span class="line"><span class="comment">////      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun(s:String*)=&#123;</span></span><br><span class="line"><span class="comment">//      s.foreach(println)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    fun(&quot;hello&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * 4.匿名函数</span></span><br><span class="line"><span class="comment">     * ”=&gt;“ 就是匿名函数，多用于方法的参数是函数时，常用匿名函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun1(a:Int,b:Int)=&#123;</span></span><br><span class="line"><span class="comment">//      a+b</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun = (a:Int,b:Int)=&gt;&#123;</span></span><br><span class="line"><span class="comment">//      a+b</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun(2,3))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 5.嵌套方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    def fun(num:Int)=&#123;</span></span><br><span class="line"><span class="comment">//      def fun1(a:Int):Int=&#123;</span></span><br><span class="line"><span class="comment">//        if(a==1)&#123;</span></span><br><span class="line"><span class="comment">//          1</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//          a*fun1(a-1)</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//      fun1(num)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun(5))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 6.偏应用函数</span></span><br><span class="line"><span class="comment">   *  某些情况下，方法中参数非常多，调用这个方法非常频繁，每次条用只有固定的某个变化，可以定义偏应用来实现</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="comment">//    def showLog(date:Date,log:String)=&#123;</span></span><br><span class="line"><span class="comment">//      println(s&quot;date is $date   , log is $log&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    val date = new Date()</span></span><br><span class="line"><span class="comment">//    showLog(date, &quot;a&quot;)</span></span><br><span class="line"><span class="comment">//    showLog(date, &quot;b&quot;)</span></span><br><span class="line"><span class="comment">//    showLog(date, &quot;c&quot;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    def fun = showLog(date,_:String)</span></span><br><span class="line"><span class="comment">//    fun(&quot;aaa&quot;)</span></span><br><span class="line"><span class="comment">//    fun(&quot;bbb&quot;)</span></span><br><span class="line"><span class="comment">//    fun(&quot;ccc&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 7.高阶函数</span></span><br><span class="line"><span class="comment">     *  1).方法的参数是函数</span></span><br><span class="line"><span class="comment">     *  2).方法的返回是函数  &lt;必须要显示的写出方法的返回值类型&gt;,加 _ 就可以不显示的声明方法的返回值类型</span></span><br><span class="line"><span class="comment">     *  3).方法的参数和返回都是函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.方法的参数是函数</span></span><br><span class="line"><span class="comment">//    def fun(a:Int,b:Int):Int=&#123;</span></span><br><span class="line"><span class="comment">//      a+b</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    def fun1(f:(Int,Int)=&gt;Int,s:String)=&#123;</span></span><br><span class="line"><span class="comment">//      val i: Int = f(100,200)</span></span><br><span class="line"><span class="comment">//      i+&quot;#&quot;+s</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    val result = fun1(fun,&quot;scala&quot;)</span></span><br><span class="line"><span class="comment">//    println(result)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    def fun1(f:(Int,Int)=&gt;Int,s:String)=&#123;</span></span><br><span class="line"><span class="comment">//      val i: Int = f(100,200)</span></span><br><span class="line"><span class="comment">//      i+&quot;#&quot;+s</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    val result = fun1((a:Int,b:Int)=&gt;&#123;a*b&#125;,&quot;scala&quot;)</span></span><br><span class="line"><span class="comment">//    println(result)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.方法的返回是函数</span></span><br><span class="line"><span class="comment">//    def fun(s:String):(String,String)=&gt;String = &#123;</span></span><br><span class="line"><span class="comment">//      def fun1(s1:String, s2:String): String= &#123;</span></span><br><span class="line"><span class="comment">//        s1 + &quot;&amp;&quot;+s2+&quot;#&quot;+s</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//      fun1</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun(&quot;a&quot;)(&quot;b&quot;,&quot;c&quot;))</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//3.方法的参数和返回值都是函数</span></span><br><span class="line"><span class="comment">//    def fun(f:(Int,Int)=&gt;Int):(String,String)=&gt;String = &#123;</span></span><br><span class="line"><span class="comment">//      val i: Int = f(1,2)</span></span><br><span class="line"><span class="comment">//      def fun1(s1:String,s2:String):String = &#123;</span></span><br><span class="line"><span class="comment">//        s1+&quot;@&quot;+s2+&quot;*&quot;+i</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//      fun1</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun((a,b)=&gt;&#123;a+b&#125;)(&quot;hello&quot;,&quot;world&quot;))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 8.柯里化函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    def fun(a:Int,b:Int)(c:Int,d:Int)=&#123;</span></span><br><span class="line"><span class="comment">//      a+b+c+d</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    println(fun(1,2)(3,4))</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="七、字符串-集合"><a href="#七、字符串-集合" class="headerlink" title="七、字符串&amp;集合"></a>七、字符串&amp;集合</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合01</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(array:<span class="type">Array</span>[<span class="type">String</span>]):<span class="type">Unit</span>=&#123;</span><br><span class="line">    <span class="keyword">val</span> s = <span class="string">&quot;bjsxt&quot;</span></span><br><span class="line">    <span class="keyword">val</span> s1 = <span class="string">&quot;BJSXT&quot;</span></span><br><span class="line"></span><br><span class="line">    println(s.indexOf(<span class="number">98</span>))    <span class="comment">// 97:a  65:A  返回下标 没有为-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    println(s.equals(s1))</span></span><br><span class="line"><span class="comment">//    println(s.equalsIgnoreCase(s1))</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合02</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> arr = <span class="type">Array</span>[<span class="type">String</span>]( <span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>)</span><br><span class="line"><span class="comment">//    arr.foreach(println)  //1.</span></span><br><span class="line"><span class="comment">//    arr.foreach(s=&gt;println(s))  //2.</span></span><br><span class="line"><span class="comment">//    for (i&lt;-arr)&#123;   //3.</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val arr1 = new Array[Int](3)</span></span><br><span class="line"><span class="comment">//    arr1(0) = 100</span></span><br><span class="line"><span class="comment">//    arr1(1) = 200</span></span><br><span class="line"><span class="comment">//    arr1(2) = 300</span></span><br><span class="line"><span class="comment">//    arr1.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val array = new Array[Array[Int]](3)</span></span><br><span class="line"><span class="comment">//    array(0) = Array[Int](1,2,3)</span></span><br><span class="line"><span class="comment">//    array(1) = Array[Int](4,5,6)</span></span><br><span class="line"><span class="comment">//    array(2) = Array[Int](7,8,9)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line"><span class="comment">//    for(i&lt;-array)&#123;</span></span><br><span class="line"><span class="comment">//      for(j&lt;-i)&#123;</span></span><br><span class="line"><span class="comment">//        println(j)</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.</span></span><br><span class="line"><span class="comment">//    for (i&lt;-array; j&lt;-i)&#123;</span></span><br><span class="line"><span class="comment">//        println(j)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line"><span class="comment">//    array.foreach(arr=&gt;&#123;arr.foreach(println)&#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val arr3 = Array[String](&quot;q&quot;,&quot;w&quot;,&quot;e&quot;,&quot;r&quot;)</span></span><br><span class="line"><span class="comment">//    val arr4 = Array[String](&quot;t&quot;,&quot;y&quot;,&quot;u&quot;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    val arrays: Array[String] = Array.concat(arr3,arr4)</span></span><br><span class="line"><span class="comment">//    arrays.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val array: Array[String] = Array.fill(5)(&quot;hello&quot;)</span></span><br><span class="line"><span class="comment">//    array.foreach(println)</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ArrayBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_字符串和集合03</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> arr =<span class="type">ArrayBuffer</span>[<span class="type">Int</span>](<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    arr.+=(<span class="number">4</span>)</span><br><span class="line">    arr.+=:(<span class="number">100</span>)</span><br><span class="line">    arr.append(<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line">    arr.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    import scala.collection.mutable.ArrayBuffer</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>List</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">ListBuffer</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_List</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">//    val list = List[Int](1,2,3)</span></span><br><span class="line"><span class="comment">//    list.foreach(println)  //1.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(i &lt;- list)&#123;    //2.</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val list = List[String](&quot;hello scala&quot;, &quot;hello java&quot;, &quot;hello python&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result: List[Array[String]] = list.map(s =&gt; &#123;</span></span><br><span class="line"><span class="comment">//      s.split(&quot; &quot;)</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val i: Int = list.count(s=&gt; &#123;</span></span><br><span class="line"><span class="comment">//      s.length &lt; 4</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line"><span class="comment">//    println(i)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result: List[String] = list.flatMap(s=&gt;(s.split(&quot;  &quot;)))</span></span><br><span class="line"><span class="comment">//    result.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    result.foreach(arr =&gt; &#123;</span></span><br><span class="line"><span class="comment">//      println(&quot;新的数组&quot;)</span></span><br><span class="line"><span class="comment">//      arr.foreach(println)</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> list = <span class="type">ListBuffer</span>[<span class="type">Int</span>](<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    list.append(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)  <span class="comment">// 追加</span></span><br><span class="line">    list.+=:(<span class="number">100</span>)   <span class="comment">// 加到头部</span></span><br><span class="line">    list.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Set</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable.<span class="type">Set</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Set</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">//    val set = Set[Int](1,2,3,4)</span></span><br><span class="line"><span class="comment">//    val set1 = Set[Int](3,4,5,6,7)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result: Set[Int] = set.intersect(set1)  // 取相交的</span></span><br><span class="line"><span class="comment">//    result.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result: Set[Int] = set1.diff(set)   // 取相差的</span></span><br><span class="line"><span class="comment">//    result.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result = set &amp; set1</span></span><br><span class="line"><span class="comment">//    result.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val result = set &amp; set1</span></span><br><span class="line"><span class="comment">//    result.foreach(println)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val ints: Set[Int] = set.filter(i =&gt; &#123;</span></span><br><span class="line"><span class="comment">//      i &gt;= 2</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line"><span class="comment">//    ints.foreach(println)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历1</span></span><br><span class="line"><span class="comment">//    for(i&lt;-set)&#123;</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">// 遍历2</span></span><br><span class="line"><span class="comment">//    set.foreach(println)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可变长的set</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> set = <span class="type">Set</span>[<span class="type">Int</span>](<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="comment">//    val ints: mutable.Set[Int] = set.+=(100)</span></span><br><span class="line">    set.+=(<span class="number">100</span>)</span><br><span class="line">    set.foreach(println)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">import</span> scala.collection.immutable</span><br><span class="line">    <span class="keyword">val</span> set1 = <span class="type">Set</span>[<span class="type">String</span>](<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Map</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scala.collection.mutable</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Map</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 不可变map</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line"><span class="comment">//    val map = Map[String,Int](&quot;a&quot;-&gt;100,&quot;b&quot;-&gt;200,(&quot;c&quot;,300),(&quot;c&quot;,400))  // 会去重</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val x: Option[Int] = map.get(&quot;a&quot;)</span></span><br><span class="line"><span class="comment">//    println(x)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    val y: Int = map.get(&quot;b&quot;).get</span></span><br><span class="line"><span class="comment">//    println(y)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    val z = map.get(&quot;aa&quot;).getOrElse(&quot;没有对应的值&quot;)</span></span><br><span class="line"><span class="comment">//    println(z)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val keys: Iterable[String] = map.keys</span></span><br><span class="line"><span class="comment">//    keys.foreach(key=&gt;&#123;</span></span><br><span class="line"><span class="comment">//      val value = map.get(key).get</span></span><br><span class="line"><span class="comment">//      println(s&quot;key= $key, value = $value&quot;)</span></span><br><span class="line"><span class="comment">//    &#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val values: Iterable[Int] = map.values</span></span><br><span class="line"><span class="comment">//    values.foreach(println)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    println(map)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历1</span></span><br><span class="line"><span class="comment">//    map.foreach(println)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历2</span></span><br><span class="line"><span class="comment">//    for (i &lt;- map)&#123;</span></span><br><span class="line"><span class="comment">//      println(i)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val map1 = Map[String,Int]((&quot;a&quot;,1),(&quot;b&quot;,2),(&quot;c&quot;,3),(&quot;d&quot;,4))</span></span><br><span class="line"><span class="comment">//    val map2= Map[String,Int]((&quot;a&quot;,100),(&quot;b&quot;,2),(&quot;c&quot;,300),(&quot;e&quot;,500))</span></span><br><span class="line"><span class="comment">//    val x: Map[String, Int] = map1.++(map2)  //map2替换map1</span></span><br><span class="line"><span class="comment">//    x.foreach(println)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    println(&quot;==================&quot;)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    val y: Map[String, Int] = map1.++:(map2)  //map1替换map2</span></span><br><span class="line"><span class="comment">//    y.foreach(println)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变map</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">import</span> scala.collection.mutable.<span class="type">Map</span></span><br><span class="line">    <span class="keyword">val</span> map = <span class="type">Map</span>[<span class="type">String</span>,<span class="type">Int</span>]()</span><br><span class="line">    map.put(<span class="string">&quot;a&quot;</span>,<span class="number">100</span>)</span><br><span class="line">    map.put(<span class="string">&quot;b&quot;</span>,<span class="number">200</span>)</span><br><span class="line"><span class="comment">//    map.foreach(println)</span></span><br><span class="line">    <span class="keyword">val</span> result: mutable.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">Int</span>] = map.filter(tp=&gt;&#123;</span><br><span class="line">      <span class="keyword">val</span> key = tp._1</span><br><span class="line">      <span class="keyword">val</span> value = tp._2</span><br><span class="line">      value == <span class="number">200</span></span><br><span class="line">    &#125;)</span><br><span class="line">    result.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Tuple_元组</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 元组最多支持22个元素</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Tuple_元组</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> tuple1: <span class="type">Tuple1</span>[<span class="type">String</span>] = <span class="keyword">new</span> <span class="type">Tuple1</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> tuple2: (<span class="type">String</span>, <span class="type">Int</span>) = <span class="keyword">new</span> <span class="type">Tuple2</span>(<span class="string">&quot;a&quot;</span>,<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">val</span> tuple3: (<span class="type">Int</span>, <span class="type">Boolean</span>, <span class="type">Char</span>) = <span class="keyword">new</span> <span class="type">Tuple3</span>(<span class="number">1</span>,<span class="literal">true</span>,&#x27;<span class="type">C</span>&#x27;)</span><br><span class="line">    <span class="keyword">val</span> tuple4: (<span class="type">Int</span>, <span class="type">Double</span>, <span class="type">String</span>, <span class="type">Boolean</span>) = <span class="keyword">new</span> <span class="type">Tuple4</span>(<span class="number">1</span>,<span class="number">3.4</span>,<span class="string">&quot;abc&quot;</span>,<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">val</span> tuple6: (<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">Int</span>,<span class="type">String</span>) = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> tuple22 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="string">&quot;abc&quot;</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">22</span>)</span><br><span class="line">    <span class="keyword">val</span> x: <span class="type">String</span> = tuple22._13</span><br><span class="line"><span class="comment">//    println(x)</span></span><br><span class="line"></span><br><span class="line">    println(tuple2.swap)  <span class="comment">//反转 只有tuple2有</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    println(tuple4)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val iter: Iterator[Any] = tuple6.productIterator</span></span><br><span class="line"><span class="comment">////    iter.foreach(println)  // 1</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">////    while (iter.hasNext)&#123;  // 2</span></span><br><span class="line"><span class="comment">////      println(iter.next())</span></span><br><span class="line"><span class="comment">////    &#125;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Trait</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 一个继承多个trait时，第一个关键字使用extends，之后使用with</span></span><br><span class="line"><span class="comment"> * trait 不可以传参</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Read</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">read</span></span>(name:<span class="type">String</span>)=&#123;</span><br><span class="line">    println(<span class="string">s&quot;<span class="subst">$name</span> is reading...&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Listen</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">listen</span></span>(name:<span class="type">String</span>) =&#123;</span><br><span class="line">    println(<span class="string">s&quot;<span class="subst">$name</span> is listening...&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承 第一个用extends，后面的都用with</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>(<span class="params"></span>) <span class="keyword">extends</span> <span class="title">Read</span> <span class="keyword">with</span> <span class="title">Listen</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Trait1</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> h = <span class="keyword">new</span> <span class="type">Human</span>()</span><br><span class="line">    h.read(<span class="string">&quot;张三&quot;</span>)</span><br><span class="line">    h.listen(<span class="string">&quot;李四&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Trait中可以有方法体的实现或者方法体的不实现，类继承了Trait要实现Trait中没有实现的发放</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">IsEquale</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">isEqu</span></span>(o:<span class="type">Any</span>):<span class="type">Boolean</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">isNotEqu</span></span>(o:<span class="type">Any</span>):<span class="type">Boolean</span> = !isEqu(o)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>(<span class="params">xx:<span class="type">Int</span>,xy:<span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">IsEquale</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> x = xx</span><br><span class="line">  <span class="keyword">val</span> y = xy</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">isEqu</span></span>(o: <span class="type">Any</span>): <span class="type">Boolean</span> = &#123;</span><br><span class="line">    o.isInstanceOf[<span class="type">Point</span>] &amp;&amp; o.asInstanceOf[<span class="type">Point</span>].x==<span class="keyword">this</span>.x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Trait2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p1 = <span class="keyword">new</span> <span class="type">Point</span>(xx = <span class="number">1</span>, xy = <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Point</span>(xx = <span class="number">1</span>, xy = <span class="number">3</span>)</span><br><span class="line"><span class="comment">//    println(p1.isEqu(p2))</span></span><br><span class="line">    println(p1.isNotEqu(p2))</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Match模式匹配</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Match 模式匹配</span></span><br><span class="line"><span class="comment"> *  1. case _ 什么都匹配不上匹配，放在最后</span></span><br><span class="line"><span class="comment"> *  2. match 可以匹配值还可以批判类型</span></span><br><span class="line"><span class="comment"> *  3. 匹配过程中会有数值的转换</span></span><br><span class="line"><span class="comment"> *  4. 从上往下匹配，匹配之后会自动终止</span></span><br><span class="line"><span class="comment"> *  5.模式匹配外部的“&#123;...&#125;”可以省略</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_Match模式匹配</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">   <span class="keyword">val</span> tp = (<span class="number">1</span>,<span class="number">1.2</span>,<span class="string">&quot;abc&quot;</span>,&#x27;a&#x27;,<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">val</span> iter: <span class="type">Iterator</span>[<span class="type">Any</span>] = tp.productIterator</span><br><span class="line">    iter.foreach(<span class="type">MatchTest</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">MatchTest</span></span>(o:<span class="type">Any</span>) =&#123;</span><br><span class="line">      o <span class="keyword">match</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>=&gt; println(<span class="string">&quot;value is 1&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> i:<span class="type">Int</span> =&gt; println(<span class="string">s&quot;type is Int, value = <span class="subst">$i</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> d:<span class="type">Double</span> =&gt; println(<span class="string">s&quot;type is Int, value = <span class="subst">$d</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> s:<span class="type">String</span>=&gt; println(<span class="string">s&quot;type is Int, value = <span class="subst">$s</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> &#x27;a&#x27; =&gt; println(<span class="string">&quot;value is c&quot;</span>)</span><br><span class="line">        <span class="keyword">case</span> _=&gt; &#123;println(<span class="string">&quot;no match...&quot;</span>)&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>PartiaFun模式匹配_偏函数</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 偏函数，只能匹配一个值，匹配上了放回某个值</span></span><br><span class="line"><span class="comment"> * PartialFunction[A,B] A是匹配的类型，B是匹配上返回的类型</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_PartiaFun模式匹配_偏函数</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">MyTest</span></span>: <span class="type">PartialFunction</span>[<span class="type">String</span>,<span class="type">Int</span>] =&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;abc&quot;</span>=&gt;<span class="number">2</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;a&quot;</span>=&gt;<span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;b&quot;</span>=&gt;<span class="number">2</span></span><br><span class="line">    <span class="keyword">case</span> _=&gt;<span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"><span class="comment">//    val result: Int = MyTest(&quot;abc&quot;)</span></span><br><span class="line"><span class="comment">//    println(result)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> result: <span class="type">Int</span> = <span class="type">MyTest</span>(<span class="string">&quot;abcb&quot;</span>)</span><br><span class="line">    println(result)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>CaseClass_样例类</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Personl</span>(<span class="params">var name:<span class="type">String</span>, age:<span class="type">Int</span></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_CaseClass_样例类</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> p1 = <span class="keyword">new</span> <span class="type">Personl</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">val</span> p2 = <span class="keyword">new</span> <span class="type">Personl</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">18</span>)</span><br><span class="line">    println(p1.equals(p2))</span><br><span class="line">    println(p1)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="八、隐式转换"><a href="#八、隐式转换" class="headerlink" title="八、隐式转换"></a>八、隐式转换</h4><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_ImlicitTrans_隐式函数</span> </span>&#123;</span><br><span class="line"><span class="comment">//  def sayName(implicit name:String)=&#123;</span></span><br><span class="line"><span class="comment">//    println(s&quot;$name is a student....&quot;)</span></span><br><span class="line"><span class="comment">//  &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayName</span></span>(age:<span class="type">Int</span>)(<span class="keyword">implicit</span> name:<span class="type">String</span>)=&#123;</span><br><span class="line">      println(<span class="string">s&quot;<span class="subst">$name</span> is a student, age = <span class="subst">$age</span>....&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> name:<span class="type">String</span> = <span class="string">&quot;张三&quot;</span></span><br><span class="line"><span class="comment">//    sayName(&quot;李四&quot;)</span></span><br><span class="line"><span class="comment">//    sayName</span></span><br><span class="line"></span><br><span class="line">    sayName(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">name:<span class="type">String</span></span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">canFiy</span></span>()=&#123;</span><br><span class="line">    println(<span class="string">s&quot;<span class="subst">$name</span> can fly...&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rabbit</span>(<span class="params">xname:<span class="type">String</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name = xname</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_ImlicitTrans_隐式函数1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">RabbitToAnimal</span></span>(r:<span class="type">Rabbit</span>):<span class="type">Animal</span> =&#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="type">Animal</span>(r.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  implicit def RTOA(r:Rabbit):Animal =&#123;  // 不能出现相同类型</span></span><br><span class="line">  <span class="comment">//    new Animal(r.name)</span></span><br><span class="line">  <span class="comment">//  &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> rabbit = <span class="keyword">new</span> <span class="type">Rabbit</span>(<span class="string">&quot;rabbit&quot;</span>)</span><br><span class="line">    rabbit.canFly()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt.scala</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rabbit1</span>(<span class="params">xname:<span class="type">String</span></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">val</span> name = xname</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">scala_ImlicitTrans_隐式函数2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal1</span>(<span class="params">r:<span class="type">Rabbit1</span></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">showName</span></span>()=&#123;</span><br><span class="line">      println(<span class="string">s&quot;<span class="subst">$&#123;r.name&#125;</span> is Rabbit ...&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> rabbit = <span class="keyword">new</span> <span class="type">Rabbit1</span>(<span class="string">&quot;RABBIT&quot;</span>)</span><br><span class="line">    rabbit.showName()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="九、复习"><a href="#九、复习" class="headerlink" title="九、复习"></a>九、复习</h4><p><strong>Scala是基于JVM的语言。</strong></p>
<p><strong>六大特征：</strong></p>
<ol>
<li>与java无缝整合</li>
<li>类型推断</li>
<li>支持分别是和并发Actor</li>
<li>Trait特质特性</li>
<li>模式匹配match</li>
<li>高阶函数</li>
</ol>
<p><strong>类和对象</strong></p>
<ul>
<li>当new类时，类中除了方法不执行其它都执行</li>
<li>object相当于java中的单列，定义的都是静态的</li>
<li>class可以传参，传参就有默认的构造</li>
<li>重写构造时，第一行要先调用默认的构造</li>
<li>object 不可以传参，apply()方法</li>
<li>伴生类和伴生对象</li>
<li>for……<ol>
<li>1 to 10</li>
<li>1 until 10</li>
<li>for(i&lt;- 1 to 10)</li>
</ol>
</li>
<li>while…..    do … while…<ol>
<li>i +&#x3D;1    i -&#x3D; 1</li>
</ol>
</li>
<li>if…else…..</li>
</ul>
<p><strong>方法和函数</strong></p>
<ol>
<li>方法的定义<ul>
<li>def方法定义</li>
<li>方法中传参要指定类型</li>
<li>方法自己可以推断返回类型，默认将方法体中最后一行计算的结果当作返回值返回</li>
<li>如果要写return返回值，要显示的说明方法体的返回值类型</li>
<li>如何方法体可以一行搞定，可以将方法体“{}”去掉</li>
<li>如果方法名称和方法体之间没有“&#x3D;”无论方法体返回说明值都会被丢弃，返回Uit</li>
</ul>
</li>
<li>递归方法<ul>
<li>要显示写出返回值类型</li>
</ul>
</li>
<li>参数有默认值的方法<ul>
<li>def fun(x:Int&#x3D;100)</li>
</ul>
</li>
<li>可变长参数的方法<ul>
<li>def fun(x:String*)</li>
</ul>
</li>
<li>匿名函数<ul>
<li>()&#x3D;&gt;{…}</li>
<li>可以赋值给一个变量，下次调用变量就是使用的这个匿名函数</li>
</ul>
</li>
<li>偏应用函数</li>
<li>嵌套方法</li>
<li>高阶函数<ul>
<li>函数的参数是函数</li>
<li>函数的返回时函数</li>
<li>函数的参数和返回都是函数</li>
</ul>
</li>
<li>柯里化函数<ul>
<li>高阶函数的简化</li>
</ul>
</li>
</ol>
<p><strong>String</strong>	</p>
<p>就是java中的String</p>
<p><strong>集合</strong></p>
<ol>
<li>Array</li>
<li>ArrayBuffer</li>
<li>List<ul>
<li>val list &#x3D; List[String]（…..)</li>
</ul>
</li>
<li>ListBuffer</li>
<li>Set<ul>
<li>可变，不可变</li>
</ul>
</li>
<li>Map<ul>
<li>可变，不可变</li>
<li>map中的元素就是一个个的二元组</li>
<li>val value &#x3D; map.get(key)</li>
<li>val value &#x3D; map.get(key).getOrElse(…)</li>
<li>map.keys</li>
<li>map.values</li>
</ul>
</li>
<li>Tuple<ul>
<li>元组</li>
<li>元组取值 tuple._xx</li>
<li>最多支持22个元素</li>
<li>val iter &#x3D; tuple.prducelterator</li>
<li>二元组中有个swap翻转</li>
</ul>
</li>
</ol>
<p><strong>Trait</strong></p>
<ol>
<li>相当于java中的接口和抽象类结合</li>
<li>可以在Trait中定义方法实现与不 实现，变量和常量都可以</li>
<li>Trait 不可以传参</li>
<li>类继承trait第一个关键字使用extends，之后使用with</li>
</ol>
<p><strong>模式匹配</strong></p>
<ol>
<li>math….case….</li>
<li>模式匹配中既可以匹配值，也可以匹配类型<ul>
<li>case 123&#x3D;&gt;{…}</li>
<li>case i:Int&#x3D;&gt;{…}</li>
</ul>
</li>
<li>模式匹配中，从上往下匹配，匹配上了就自动终止</li>
<li>模式匹配过程中会有值转换</li>
<li>case _&#x3D;{…} 什么都匹配不上最后匹配，要写到最后</li>
<li>模式匹配 match …case… 相当于一大行</li>
</ol>
<p><strong>样例类</strong></p>
<ol>
<li>case class</li>
<li>样例类可以new 也可以不new </li>
<li>样李类中参数，默认有getter setter方法，对外可见</li>
</ol>
<p><strong>偏函数</strong></p>
<ol>
<li>PartialFunction[匹配的类型，匹配上传出的类型]</li>
<li>偏函数相当于java中的switch…case…,只能匹配相同类型</li>
</ol>
<p><strong>隐式转换</strong></p>
<p><strong>Actor模式</strong></p>
<h3 id="Hive基本概念"><a href="#Hive基本概念" class="headerlink" title="Hive基本概念"></a>Hive基本概念</h3><h4 id="一、什么是Hive"><a href="#一、什么是Hive" class="headerlink" title="一、什么是Hive"></a>一、什么是Hive</h4><ul>
<li>Hive简介</li>
</ul>
<p>Hive：由FaceBook开源用于解决海量结构化日志的数据统计工具</p>
<p>Hive：基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张表，并提供类SQL的查询功能。</p>
<ul>
<li>Hive本质</li>
</ul>
<p>将HSQL转化成MapReduce程序</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Hive处理的数据存储在HDFS</span><br><span class="line">Hive分析数据底层实现的是MR</span><br><span class="line">执行程序运行在Yarn上</span><br></pre></td></tr></table></figure>



<h4 id="二、Hive的优缺点"><a href="#二、Hive的优缺点" class="headerlink" title="二、Hive的优缺点"></a>二、Hive的优缺点</h4><p>（1）优点</p>
<ul>
<li>接口采用类SQL语法，提供快速开发的能力</li>
<li>避免了去写MR程序，减少开发人员的学习成本</li>
<li>Hive的执行延迟比较高，因此Hive常用于数据分析，对实时性要求不高的场合</li>
<li>Hive的优势在于处理大数据，对于处理小数据没有优势，因为Hive的执行延迟比较高</li>
<li>Hive支持自定义函数，用户可以根据自己的需求来实现自己的函数</li>
</ul>
<p>（2）缺点</p>
<ul>
<li>Hive的HSQL表达能力有限 <ul>
<li>迭代算法无法表达 </li>
<li>数据挖掘方面不擅长，由于MR数据处理流程的限制，效率更高的算法却无法实现</li>
</ul>
</li>
<li>Hive的效率 比较低 <ul>
<li>Hive自动生成的MR作业，通常情况下不够智能化 </li>
<li>Hive调优比较困难，粒度较粗</li>
</ul>
</li>
</ul>
<p>（3）Hive运行机制</p>
<p>Hive通过用户提供的一系列交互接口，接收到用户的指令（SQL），使用自己的Driver，结合元数据（Metastore），将这些指令翻译 成MR，提交到Hadoop中执行，最后，将执行返回的结果输出到用户交互接口。</p>
<p>（4）Hive和数据库比较</p>
<p>由于Hive采用类似SQL的查询语言HQL，因此很容易将Hive理解为数据库。其实从结构来看，Hive 和数据库除了用于类似的查询语言， 再无类似之处。</p>
<p>（5）数据更新</p>
<p>由于Hive是针对数据仓库应用设计的，而数据仓库的内容是读多写少。因此，Hive中不建议对数据的改写，所有数据都是在加载的时候<br>确定好的。而数据库中的数据通常是需要进行修改的，因此可以采用insert into … values添加数据，使用update … set修改数据</p>
<p>（6）执行延迟</p>
<p>Hive在查询数据的时候，由于没有索引，需要扫描整个表。因此延迟较高。由于Hive底层使用的MR框架，而MR本身具有较高的延迟，因此 在利用MR执行Hive查询的时候，也有较高的延迟。</p>
<p>（7）数据规模</p>
<p>由于Hive简历在集群上可以利用MR进行并行计算，因此可以支持很大规模的数据。对应的，数据库可以支持的数据规模较小。</p>
<h4 id="三、Hive架构"><a href="#三、Hive架构" class="headerlink" title="三、Hive架构"></a>三、Hive架构</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271704024.png" alt="image-20231207093230761"></p>
<h4 id="四、Hive安装-启动"><a href="#四、Hive安装-启动" class="headerlink" title="四、Hive安装&amp;启动"></a>四、Hive安装&amp;启动</h4><p>（1）上传压缩包，解压</p>
<p>………..</p>
<p>（2）配置环境变量</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop101 hive]# <span class="built_in">pwd</span></span><br><span class="line">/opt/module/hive</span><br><span class="line">[root@hadoop101 hive]# vim /etc/profile</span><br></pre></td></tr></table></figure>

<p>配置内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hive环境配置</span></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=/opt/module/hive</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HIVE_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>

<p>使其生效：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop101 hive]# <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>



<p>（3）解决日志Jar包冲突</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 lib]# <span class="built_in">mv</span> log4j-slf4j-impl-2.10.0.jar log4j-slf4j-impl-2.10.0.bak</span><br></pre></td></tr></table></figure>



<p>（4）初始化元数据库</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/schematool -dbType derby -initSchema </span><br></pre></td></tr></table></figure>



<p><strong>[注意]</strong></p>
<p>问题1：hive初始化报错</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">【bigdata@master hive】bin/schematool -dbType derby -initSchema</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLjava/lang/String;Ljava/lang/Object;)</span><br></pre></td></tr></table></figure>

<p>处理办法：<br>原因：hadoop和hive的两个guava.jar版本不一致<br>两个位置分别位于下面两个目录：<br>- &#x2F;opt&#x2F;module&#x2F;hive&#x2F;lib&#x2F;<br>- &#x2F;opt&#x2F;module&#x2F;hadoop-3.1.3&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;lib<br>删除低版本的那个，将高版本的复制到低版本目录下	</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">【bigdata@master hive】 <span class="built_in">ls</span> -l /opt/module/hadoop/share/hadoop/common/lib | grep guava*</span><br><span class="line">【bigdata@master hive】 <span class="built_in">ls</span> -l /opt/module/hive/lib/ | grep guava*</span><br><span class="line">【bigdata@master hive】 <span class="built_in">mv</span> /opt/module/hive/lib/guava-19.0.jar /opt/module/hive/lib/guava-19.0.bak</span><br><span class="line">【bigdata@master hive】 <span class="built_in">cp</span> /opt/module/hadoop/share/hadoop/common/lib/guava-27.0-jre.jar /opt/module/hive/lib/guava-27.0-jre.jar</span><br></pre></td></tr></table></figure>



<p>重新初始化</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/schematool -dbType derby -initSchema                 SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Metastore connection URL:        jdbc:derby:;databaseName=metastore_db;create=<span class="literal">true</span></span><br><span class="line">Metastore Connection Driver :    org.apache.derby.jdbc.EmbeddedDriver</span><br><span class="line">Metastore connection User:       APP</span><br><span class="line">Starting metastore schema initialization to 3.1.0</span><br><span class="line">Initialization script hive-schema-3.1.0.derby.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Initialization script completed</span><br><span class="line">schemaTool completed</span><br></pre></td></tr></table></figure>



<p>（5）启动hadoop</p>
<p>等待退出安全模式</p>
<p>（6）使用hive</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin:/opt/module/jdk/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 3851be03-5678-4023-bd3f-fd2401ffd5b0</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/opt/module/hive/lib/hive-common-3.1.2.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive-on-MR is deprecated <span class="keyword">in</span> Hive 2 and may not be available <span class="keyword">in</span> the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Hive Session ID = 448043f3-3f9a-466b-9eb9-90da56da6924</span><br><span class="line">hive&gt; show databases;</span><br><span class="line">OK</span><br><span class="line">default</span><br><span class="line">Time taken: 1.256 seconds, Fetched: 1 row(s)</span><br><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.077 seconds</span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure>



<h4 id="五、Hive元数据配置MySQL"><a href="#五、Hive元数据配置MySQL" class="headerlink" title="五、Hive元数据配置MySQL"></a>五、Hive元数据配置MySQL</h4><p>（1）拷贝驱动</p>
<p>将MySQL的JDBC驱动拷贝到Hive的lib目录下</p>
<p>Ctrl + C 退出hive</p>
<p>（2）配置文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# <span class="built_in">cd</span> conf/</span><br><span class="line">[root@hadoop301 conf]# ll</span><br><span class="line">总用量 332</span><br><span class="line">-rw-r--r--. 1 root root   1596 8月  23 2019 beeline-log4j2.properties.template</span><br><span class="line">-rw-r--r--. 1 root root 300482 8月  23 2019 hive-default.xml.template</span><br><span class="line">-rw-r--r--. 1 root root   2365 8月  23 2019 hive-env.sh.template</span><br><span class="line">-rw-r--r--. 1 root root   2274 8月  23 2019 hive-exec-log4j2.properties.template</span><br><span class="line">-rw-r--r--. 1 root root   3086 8月  23 2019 hive-log4j2.properties.template</span><br><span class="line">-rw-r--r--. 1 root root   2060 8月  23 2019 ivysettings.xml</span><br><span class="line">-rw-r--r--. 1 root root   3558 8月  23 2019 llap-cli-log4j2.properties.template</span><br><span class="line">-rw-r--r--. 1 root root   7163 8月  23 2019 llap-daemon-log4j2.properties.templa        te</span><br><span class="line">-rw-r--r--. 1 root root   2662 8月  23 2019 parquet-logging.properties</span><br><span class="line">[root@hadoop301 conf]# vim hive-site.xml</span><br></pre></td></tr></table></figure>

<p>配置内容如下：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的URL --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://hadoop301:3306/metastore?useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的Driver --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的username --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- jdbc连接的password --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- hive 元数据存储版本的验证 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.schema.verification<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 元数据存储授权 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.event.db.notification.api.auth<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- hive 默认在HDFS的工作目录 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>（3）安装配置MySQL</p>
<p>参考：<a href="https://blog.csdn.net/li1325169021/article/details/121515102#SnippetTab">https://blog.csdn.net/li1325169021/article/details/121515102#SnippetTab</a></p>
<p>或B站：<a href="https://www.bilibili.com/video/BV1EZ4y1G7iL?p=17&vd_source=f0e29db1fb2c27102c4aaaab8ed9c6a7">https://www.bilibili.com/video/BV1EZ4y1G7iL?p=17&amp;vd_source=f0e29db1fb2c27102c4aaaab8ed9c6a7</a></p>
<p>省略….</p>
<p>（4）登录MySQL</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# mysql -uroot -p123456</span><br><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 75</span><br><span class="line">Server version: 5.7.33 MySQL Community Server (GPL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test_mata          |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<p>（5）新建Hive元数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; create database metastore;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| metastore          |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| test_mata          |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; exit;</span><br></pre></td></tr></table></figure>



<p>（6）初始化Hive元数据</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# schematool -initSchema -dbType mysql -verbose</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Metastore connection URL:        jdbc:mysql://hadoop301:3306/metastore?useSSL=<span class="literal">false</span></span><br><span class="line">Metastore Connection Driver :    com.mysql.jdbc.Driver</span><br><span class="line">Metastore connection User:       root</span><br><span class="line">Starting metastore schema initialization to 3.1.0</span><br><span class="line">Initialization script hive-schema-3.1.0.mysql.sql</span><br><span class="line">Connecting to jdbc:mysql://hadoop301:3306/metastore?useSSL=<span class="literal">false</span></span><br><span class="line">Connected to: MySQL (version 5.7.33)</span><br><span class="line">Driver: MySQL Connector Java (version mysql-connector-java-5.1.38 ( Revision: fe541c166cec739c74cc727c5da96c1028b4834a ))</span><br><span class="line"></span><br><span class="line">.......</span><br><span class="line"></span><br><span class="line">No rows affected (0.002 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; /*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span><br><span class="line">No rows affected (0.001 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span><br><span class="line">No rows affected (0.001 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span><br><span class="line">No rows affected (0.001 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span><br><span class="line">No rows affected (0.001 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span><br><span class="line">No rows affected (0.001 seconds)</span><br><span class="line">0: jdbc:mysql://hadoop301:3306/metastore&gt; !closeall</span><br><span class="line">Closing: 0: jdbc:mysql://hadoop301:3306/metastore?useSSL=<span class="literal">false</span></span><br><span class="line">beeline&gt;</span><br><span class="line">beeline&gt; Initialization script completed</span><br><span class="line">schemaTool completed</span><br></pre></td></tr></table></figure>



<p>（7）进入Hive</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 669e2e36-4d63-43e3-ad90-f33bbba9bbb1</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/opt/module/hive/lib/hive-common-3.1.2.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive-on-MR is deprecated <span class="keyword">in</span> Hive 2 and may not be available <span class="keyword">in</span> the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Hive Session ID = 2f6c4cb6-3df7-437a-94e8-195585806755</span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.365 seconetds</span><br><span class="line">hive&gt; create table <span class="built_in">test</span>(<span class="built_in">id</span> string);</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.733 seconds</span><br><span class="line">hive&gt; <span class="keyword">select</span> * from <span class="built_in">test</span>;</span><br><span class="line">OK</span><br><span class="line">Time taken: 2.034 seconds</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# vim id.txt</span><br><span class="line">[root@hadoop301 hive]# hdfs dfs -put id.txt /user/hive/warehouse/test</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive&gt; <span class="keyword">select</span> * from <span class="built_in">test</span>;</span><br><span class="line">OK</span><br><span class="line">11111</span><br><span class="line">22222</span><br><span class="line">Time taken: 0.269 seconds, Fetched: 2 row(s)</span><br></pre></td></tr></table></figure>



<p>（8）使用元数据服务的方式访问Hive</p>
<ol>
<li>在hive-site.xml文件中添加如下配置信息</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定存储元数据要连接的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://hadoop301:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>启动metastore</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive --service metastore</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">2023-12-18 15:15:38: Starting Hive Metastore Server</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意会一直被占用，重新启一个服务（关不了）</strong></p>
<ol start="3">
<li>启动hive</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = d0213e7d-8440-4529-b3ba-205f134b1b4a</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/opt/module/hive/lib/hive-common-3.1.2.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive-on-MR is deprecated <span class="keyword">in</span> Hive 2 and may not be available <span class="keyword">in</span> the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Hive Session ID = 481bcaf4-8c0b-4987-a06d-e712c13a5806</span><br><span class="line">hive&gt; show tables;</span><br><span class="line">OK</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">Time taken: 0.756 seconds, Fetched: 1 row(s)</span><br><span class="line">hive&gt; <span class="keyword">select</span> * from <span class="built_in">test</span>;</span><br><span class="line">OK</span><br><span class="line">11111</span><br><span class="line">22222</span><br><span class="line">Time taken: 2.806 seconds, Fetched: 2 row(s)</span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure>



<p>（9）使用JDBC方式访问Hive</p>
<ol>
<li>在hive-site.xml文件中添加如下配置信息</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定hiveserver2连接的host --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.bind.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop301<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定hiveserver2连接的端口号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">value</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>并启动元数据访问</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive --service metastore</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">2023-12-18 15:31:24: Starting Hive Metastore Server</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>启动hiveserver2</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive --service hiveserver2</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">2023-12-18 15:34:32: Starting HiveServer2</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 1d56762d-4a28-47e4-9670-3683eb9c6d36</span><br><span class="line">Hive Session ID = 62b32922-487b-4668-9d0e-6a59ff053a51</span><br><span class="line">Hive Session ID = cb9695dd-0015-4128-8308-50e1a05706f4</span><br><span class="line">Hive Session ID = f2a8784b-1f9b-444d-919a-dac2bda3d454</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意会一直被占用，重新启一个服务（关不了）</strong></p>
<ol start="3">
<li>启动beeline客户端（需要多等待一会）</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/beeline -u jdbc:hive2://hadoop301:10000 -n atguigu</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Connecting to jdbc:hive2://hadoop301:10000</span><br><span class="line">Connected to: Apache Hive (version 3.1.2)</span><br><span class="line">Driver: Hive JDBC (version 3.1.2)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">Beeline version 3.1.2 by Apache Hive</span><br><span class="line">0: jdbc:hive2://hadoop301:10000&gt; show tables;</span><br><span class="line">+-----------+</span><br><span class="line">| tab_name  |</span><br><span class="line">+-----------+</span><br><span class="line">| <span class="built_in">test</span>      |</span><br><span class="line">+-----------+</span><br><span class="line">1 row selected (1.815 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop301:10000&gt; Closing: 0: jdbc:hive2://hadoop301:10000</span><br></pre></td></tr></table></figure>

<p><strong>注意如果报错参考：<a href="https://blog.csdn.net/u011495642/article/details/84305944">https://blog.csdn.net/u011495642/article/details/84305944</a></strong></p>
<p>可以使用nohup hive –service metastore 2&gt;&amp;1 &amp;但不建议</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# <span class="built_in">nohup</span> hive --service metastore 2&gt;&amp;1 &amp;</span><br><span class="line">[1] 5532</span><br><span class="line">[root@hadoop301 hive]# <span class="built_in">nohup</span>: 忽略输入并把输出追加到<span class="string">&quot;nohup.out&quot;</span></span><br><span class="line"></span><br><span class="line">[root@hadoop301 hive]# jps</span><br><span class="line">2643 DataNode</span><br><span class="line">2485 NameNode</span><br><span class="line">5654 Jps</span><br><span class="line">5111 RunJar</span><br><span class="line">5532 RunJar</span><br><span class="line">2991 NodeManager</span><br><span class="line">[root@hadoop301 hive]# <span class="built_in">kill</span> -9 5111</span><br><span class="line">[root@hadoop301 hive]# <span class="built_in">kill</span> -9 5532</span><br><span class="line">[root@hadoop301 hive]# jps</span><br><span class="line">2643 DataNode</span><br><span class="line">2485 NameNode</span><br><span class="line">5673 Jps</span><br><span class="line">2991 NodeManager</span><br><span class="line">[1]+  已杀死               <span class="built_in">nohup</span> hive --service metastore 2&gt;&amp;1</span><br></pre></td></tr></table></figure>





<p>（10）元数据服务(脚本封装)</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">HIVE_LOG_DIR=<span class="variable">$HIVE_HOME</span>/logs</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HIVE_LOG_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检查进程是否运行正常，参数1为进程名，参数2为进程端口</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">check_process</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    pid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i <span class="variable">$1</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line">    ppid=$(netstat -nltp 2&gt;/dev/null | grep <span class="variable">$2</span> | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span> | <span class="built_in">cut</span> -d <span class="string">&#x27;/&#x27;</span> -f 1)</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$pid</span></span><br><span class="line">    [[ <span class="string">&quot;<span class="variable">$pid</span>&quot;</span> =~ <span class="string">&quot;<span class="variable">$ppid</span>&quot;</span> ]] &amp;&amp; [ <span class="string">&quot;<span class="variable">$ppid</span>&quot;</span> ] &amp;&amp; <span class="built_in">return</span> 0 || <span class="built_in">return</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">hive_start</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    metapid=$(check_process HiveMetastore 9083)</span><br><span class="line">    cmd=<span class="string">&quot;nohup hive --service metastore &gt;<span class="variable">$HIVE_LOG_DIR</span>/metastore.log 2&gt;&amp;1 &amp;&quot;</span></span><br><span class="line">    cmd=<span class="variable">$cmd</span><span class="string">&quot; sleep 4; hdfs dfsadmin -safemode wait &gt;/dev/null 2&gt;&amp;1&quot;</span></span><br><span class="line">    [ -z <span class="string">&quot;<span class="variable">$metapid</span>&quot;</span> ] &amp;&amp; <span class="built_in">eval</span> <span class="variable">$cmd</span> || <span class="built_in">echo</span> <span class="string">&quot;Metastroe服务已启动&quot;</span></span><br><span class="line">    server2pid=$(check_process HiveServer2 10000)</span><br><span class="line">    cmd=<span class="string">&quot;nohup hive --service hiveserver2 &gt;<span class="variable">$HIVE_LOG_DIR</span>/hiveServer2.log 2&gt;&amp;1 &amp;&quot;</span></span><br><span class="line">    [ -z <span class="string">&quot;<span class="variable">$server2pid</span>&quot;</span> ] &amp;&amp; <span class="built_in">eval</span> <span class="variable">$cmd</span> || <span class="built_in">echo</span> <span class="string">&quot;HiveServer2服务已启动&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">hive_stop</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    metapid=$(check_process HiveMetastore 9083)</span><br><span class="line">    [ <span class="string">&quot;<span class="variable">$metapid</span>&quot;</span> ] &amp;&amp; <span class="built_in">kill</span> <span class="variable">$metapid</span> || <span class="built_in">echo</span> <span class="string">&quot;Metastore服务未启动&quot;</span></span><br><span class="line">    server2pid=$(check_process HiveServer2 10000)</span><br><span class="line">    [ <span class="string">&quot;<span class="variable">$server2pid</span>&quot;</span> ] &amp;&amp; <span class="built_in">kill</span> <span class="variable">$server2pid</span> || <span class="built_in">echo</span> <span class="string">&quot;HiveServer2服务未启动&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">&quot;start&quot;</span>)</span><br><span class="line">    hive_start</span><br><span class="line">    ;;</span><br><span class="line"><span class="string">&quot;stop&quot;</span>)</span><br><span class="line">    hive_stop</span><br><span class="line">    ;;</span><br><span class="line"><span class="string">&quot;restart&quot;</span>)</span><br><span class="line">    hive_stop</span><br><span class="line">    <span class="built_in">sleep</span> 2</span><br><span class="line">    hive_start</span><br><span class="line">    ;;</span><br><span class="line"><span class="string">&quot;status&quot;</span>)</span><br><span class="line">    check_process HiveMetastore 9083 &gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Metastore服务运行正常&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;Metastore服务运行异常&quot;</span></span><br><span class="line">    check_process HiveServer2 10000 &gt;/dev/null &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;HiveServer2服务运行正常&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;HiveServer2服务运行异常&quot;</span></span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    <span class="built_in">echo</span> Invalid Args!</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Usage: &#x27;</span>$(<span class="built_in">basename</span> <span class="variable">$0</span>)<span class="string">&#x27; start|stop|restart|status&#x27;</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>



<p>（11）<strong>启动脚本(启动元数据服务)</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh start</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh start</span><br><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh status</span><br><span class="line">Metastore服务运行正常</span><br><span class="line">HiveServer2服务运行异常</span><br><span class="line"><span class="comment"># 需要等一下</span></span><br><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh status</span><br><span class="line">Metastore服务运行正常</span><br><span class="line">HiveServer2服务运行正常</span><br></pre></td></tr></table></figure>



<p>关闭服务命令</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh stop</span><br><span class="line">[root@hadoop301 hive]# bin/hiveservice.sh status</span><br><span class="line">Metastore服务运行异常</span><br><span class="line">HiveServer2服务运行异常</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>（12）启动beeline客户端</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/beeline -u jdbc:hive2://hadoop301:10000 -n atguigu</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Connecting to jdbc:hive2://hadoop301:10000</span><br><span class="line">Connected to: Apache Hive (version 3.1.2)</span><br><span class="line">Driver: Hive JDBC (version 3.1.2)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">Beeline version 3.1.2 by Apache Hive</span><br><span class="line">0: jdbc:hive2://hadoop301:10000&gt;</span><br></pre></td></tr></table></figure>



<p>（13）其它交互方式</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive -<span class="built_in">help</span></span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 44da0620-5c90-4a71-be68-bfdcf1f45544</span><br><span class="line">usage: hive</span><br><span class="line"> -d,--define &lt;key=value&gt;          Variable substitution to apply to Hive</span><br><span class="line">                                  commands. e.g. -d A=B or --define A=B</span><br><span class="line">    --database &lt;databasename&gt;     Specify the database to use</span><br><span class="line"> -e &lt;quoted-query-string&gt;         SQL from <span class="built_in">command</span> line</span><br><span class="line"> -f &lt;filename&gt;                    SQL from files</span><br><span class="line"> -H,--<span class="built_in">help</span>                        Print <span class="built_in">help</span> information</span><br><span class="line">    --hiveconf &lt;property=value&gt;   Use value <span class="keyword">for</span> given property</span><br><span class="line">    --hivevar &lt;key=value&gt;         Variable substitution to apply to Hive</span><br><span class="line">                                  commands. e.g. --hivevar A=B</span><br><span class="line"> -i &lt;filename&gt;                    Initialization SQL file</span><br><span class="line"> -S,--silent                      Silent mode <span class="keyword">in</span> interactive shell</span><br><span class="line"> -v,--verbose                     Verbose mode (<span class="built_in">echo</span> executed SQL to the</span><br><span class="line">                                  console)</span><br></pre></td></tr></table></figure>

<ol>
<li>直接运行sql语句</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive -e <span class="string">&quot;select * from test;&quot;</span></span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 11a55c47-83d9-4809-bc09-d81c721bbdfb</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/opt/module/hive/lib/hive-common-3.1.2.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive Session ID = 0abd3b57-c0f6-484c-a169-3271c79c0bcb</span><br><span class="line">OK</span><br><span class="line">11111</span><br><span class="line">22222</span><br><span class="line">Time taken: 9.479 seconds, Fetched: 2 row(s)</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>运行sql脚本</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# vim hive.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内容如下：</span></span><br><span class="line"><span class="keyword">select</span> * from <span class="built_in">test</span>;</span><br><span class="line"><span class="keyword">select</span> count(*) from <span class="built_in">test</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive -f hive.sql</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 2ff25f8f-403f-4488-b67d-9d1c196859bd</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/opt/module/hive/lib/hive-common-3.1.2.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive Session ID = eb7a9115-42b4-449d-821b-77a64d3c8bac</span><br><span class="line">OK</span><br><span class="line">11111</span><br><span class="line">22222</span><br><span class="line">Time taken: 6.07 seconds, Fetched: 2 row(s)</span><br><span class="line">OK</span><br><span class="line">0</span><br><span class="line">Time taken: 2.232 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>在hive cli 命令窗口中如何查看hdfs 文件系统</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/beeline -u jdbc:hive2://hadoop301:10000 -n atguigu</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Connecting to jdbc:hive2://hadoop301:10000</span><br><span class="line">Connected to: Apache Hive (version 3.1.2)</span><br><span class="line">Driver: Hive JDBC (version 3.1.2)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">Beeline version 3.1.2 by Apache Hive</span><br><span class="line">0: jdbc:hive2://hadoop301:10000&gt; dfs -<span class="built_in">ls</span> /;</span><br><span class="line">+----------------------------------------------------+</span><br><span class="line">|                     DFS Output                     |</span><br><span class="line">+----------------------------------------------------+</span><br><span class="line">| Found 4 items                                      |</span><br><span class="line">| drwxr-xr-x   - root supergroup          0 2023-12-13 16:50 /directory |</span><br><span class="line">| drwxrwxrwx   - root supergroup          0 2023-12-07 11:17 /tem |</span><br><span class="line">| drwx-wx-wx   - root supergroup          0 2023-12-18 11:01 /tmp |</span><br><span class="line">| drwxr-xr-x   - root supergroup          0 2023-12-13 16:19 /user |</span><br><span class="line">+----------------------------------------------------+</span><br><span class="line">5 rows selected (0.34 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop301:10000&gt;</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>查看在hive中输入的所有历史命令</li>
</ol>
<p>(1)进入到当前用户的根目录 &#x2F;root  或&#x2F;home&#x2F;arguigu</p>
<p>(2)查看 .hivehistory 文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 ~]# <span class="built_in">cat</span> .hivehistory</span><br></pre></td></tr></table></figure>





<p>（14）Hive 运行日志信息配置</p>
<ol>
<li>hive 的默认存放在：&#x2F;tmp&#x2F;root&#x2F;hive.log 目录下</li>
<li>修改hive的log存放日志到&#x2F;opt&#x2F;module&#x2F;hive&#x2F;logs</li>
</ol>
<p>修改 &#x2F;opt&#x2F;module&#x2F;hive&#x2F;conf&#x2F;hive-log4j2.properties.template 文件名称为 hive-log4j2.properties</p>
<p>在hive-log4j2.properties 文件中修改log存放的位置</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">property.hive.log.dir</span> = <span class="string">/opt/module/hive/logs</span></span><br></pre></td></tr></table></figure>



<p>（15）打印当前库和表头</p>
<p>在hive-site.xml中加入如下两个配置:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.header<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.current.db<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = 1e735514-8f8f-4818-9eaf-21f3a578506d</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> file:/opt/module/hive/conf/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive-on-MR is deprecated <span class="keyword">in</span> Hive 2 and may not be available <span class="keyword">in</span> the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Hive Session ID = 5e438f4b-5779-4a91-88f7-1cf59ed04714</span><br><span class="line">hive (default)&gt; use hive;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.597 seconds</span><br><span class="line">hive (hive)&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271704738.png" alt="image-20231218200007233"></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; <span class="keyword">select</span> * from <span class="built_in">test</span>;</span><br><span class="line">OK</span><br><span class="line">test.id</span><br><span class="line">11111</span><br><span class="line">22222</span><br><span class="line">Time taken: 2.576 seconds, Fetched: 2 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271705087.png" alt="image-20231218200220774"></p>
<p>（16）配置信息位置</p>
<ol>
<li>查看当前所有的配置信息</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">system:sun.management.compiler=HotSpot 64-Bit Tiered Compilers</span><br><span class="line">system:sun.os.patch.level=unknown</span><br><span class="line">system:user.country=CN</span><br><span class="line">system:user.dir=/opt/module/hive</span><br><span class="line">system:user.home=/root</span><br><span class="line">system:user.language=zh</span><br><span class="line">system:user.name=root</span><br><span class="line">system:user.timezone=Asia/Shanghai</span><br><span class="line">system:yarn.home.dir=/opt/module/hadoop</span><br><span class="line">system:yarn.log.dir=/opt/module/hadoop/logs</span><br><span class="line">system:yarn.log.file=hadoop.log</span><br><span class="line">system:yarn.root.logger=INFO,console</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>参数的配置三种方式</li>
</ol>
<p>1)配置文件方式</p>
<p>默认配置文件：hive-default.xml</p>
<p>用户自定义配置文件: hive-site.xmI</p>
<p>注意:用户自定义配置会覆盖默认配置。另外，Hive也会读入Hadoop的配置，因为Hive是作为Hadoop的客户端启动的，Hive的配置会覆盖Hadoop 的配置。配置文件的设定对本机启动的所有Hive进程都有效。</p>
<p>2)命令行参数方式</p>
<p>启动Hive时，可以在命令行添加 -hiveconf param&#x3D;value 来设置参数。</p>
<p>例如</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive -hiveconf hive.cli.print.current.db=<span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p><strong>注意：仅对本次hive启动有效</strong></p>
<p>查看参数设置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; set mapred.reduce.tasks;</span><br><span class="line">mapred.reduce.tasks=-1</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>



<p>3)参数声明方式</p>
<p>可以在HQL中使用SET关键字设定参数</p>
<p>例如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">set</span> mapred.reduce.tasks<span class="operator">=</span><span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<p><strong>注意：仅对本次hive启动有效</strong></p>
<p>查看参数设置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; set mapred.reduce.tasks;</span><br><span class="line">mapred.reduce.tasks=100</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>

<pre><code>	上述三种设定方式的优先级依次递增。即配置文件&lt;命令行参数&lt;参数声明。注意某些系统级的参数，例如 log4j相关的设定，必须用前两种方式设定，因为那些参数的读取在会话建立以前已经完成了。
</code></pre>
<h4 id="六、Hive-数据类型"><a href="#六、Hive-数据类型" class="headerlink" title="六、Hive 数据类型"></a>六、Hive 数据类型</h4><p>(1) 基本数据类型</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271705840.png" alt="image-20231219094620683"></p>
<p>（2）集合数据类型</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727159.png" alt="image-20231219094821621"></p>
<h4 id="七、DDL数据定义"><a href="#七、DDL数据定义" class="headerlink" title="七、DDL数据定义"></a>七、DDL数据定义</h4><p>（1）创建数据库</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create table</span> test;</span><br><span class="line">OK</span><br><span class="line">createtab_stmt</span><br><span class="line"><span class="keyword">CREATE TABLE</span> `test`(</span><br><span class="line">  `id` string)</span><br><span class="line"><span class="type">ROW</span> FORMAT SERDE</span><br><span class="line">  <span class="string">&#x27;org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&#x27;</span></span><br><span class="line">STORED <span class="keyword">AS</span> INPUTFORMAT</span><br><span class="line">  <span class="string">&#x27;org.apache.hadoop.mapred.TextInputFormat&#x27;</span></span><br><span class="line">OUTPUTFORMAT</span><br><span class="line">  <span class="string">&#x27;org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat&#x27;</span></span><br><span class="line">LOCATION</span><br><span class="line">  <span class="string">&#x27;hdfs://hadoop301:8020/user/hive/warehouse/test&#x27;</span></span><br><span class="line">TBLPROPERTIES (</span><br><span class="line">  <span class="string">&#x27;bucketing_version&#x27;</span><span class="operator">=</span><span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;transient_lastDdlTime&#x27;</span><span class="operator">=</span><span class="string">&#x27;1702881754&#x27;</span>)</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.125</span> seconds, Fetched: <span class="number">13</span> <span class="type">row</span>(s)</span><br><span class="line"></span><br><span class="line"># 创建数据库</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> hive;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.425</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（2）创建一个数据库，指定数据库在HDFS上存放的位置</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> db_hive2 location <span class="string">&#x27;/db_hive2.db&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.106</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271705881.png" alt="image-20231219111137096"></p>
<p>（3）查询数据库</p>
<ol>
<li>显示数据库</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> databases;</span><br><span class="line">OK</span><br><span class="line">database_name</span><br><span class="line">db_hive</span><br><span class="line">db_hive2</span><br><span class="line">db_hive3</span><br><span class="line"><span class="keyword">default</span></span><br><span class="line">hive</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.107</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>过滤显示查询的数据库</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> databases <span class="keyword">like</span> <span class="string">&#x27;db_hive*&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">database_name</span><br><span class="line">db_hive</span><br><span class="line">db_hive2</span><br><span class="line">db_hive3</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.095</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（4）查看数据库详情</p>
<ol>
<li>显示数据库信息</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (hive)<span class="operator">&gt;</span> <span class="keyword">desc</span> database hive;</span><br><span class="line">OK</span><br><span class="line">db_name comment location        owner_name      owner_type      parameters</span><br><span class="line">hive            hdfs:<span class="operator">/</span><span class="operator">/</span>hadoop301:<span class="number">8020</span><span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>hive.db       root    <span class="keyword">USER</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.062</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (hive)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>显示数据库详细信息，extended</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (hive)<span class="operator">&gt;</span> <span class="keyword">desc</span> database extended hive;</span><br><span class="line">OK</span><br><span class="line">db_name comment location        owner_name      owner_type      parameters</span><br><span class="line">hive            hdfs:<span class="operator">/</span><span class="operator">/</span>hadoop301:<span class="number">8020</span><span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>hive.db       root    <span class="keyword">USER</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.053</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (hive)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（5）切换当前数据库</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (hive)<span class="operator">&gt;</span> use db_hive;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.048</span> seconds</span><br><span class="line">hive (db_hive)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（6）修改数据库</p>
<p>​		用户可以使用ALTER DATABASE 命令为某个数据库的DBPROPERTIES设置键-值对属性值，来描述这个数据库的属性信息。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter</span> database hive <span class="keyword">set</span> dbproperties(&quot;createTime&quot;<span class="operator">=</span>&quot;2023-12-19&quot;);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.14</span> seconds</span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> database extended hive;</span><br><span class="line">OK</span><br><span class="line">db_name comment location        owner_name      owner_type      parameters</span><br><span class="line">hive            hdfs:<span class="operator">/</span><span class="operator">/</span>hadoop301:<span class="number">8020</span><span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>hive.db       root    <span class="keyword">USER</span>    &#123;createTime<span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span>&#125;</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.044</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（7）修改数据库</p>
<ol>
<li>删除空数据库</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">drop</span> database db_hive3;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.227</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>如果删除的数据库不存在，最好采用 if exists 判断数据库是否存在</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">drop</span> database db_hive3;</span><br><span class="line">FAILED: SemanticException [Error <span class="number">10072</span>]: Database does <span class="keyword">not</span> exist: db_hive3</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">drop</span> database if <span class="keyword">exists</span> db_hive3;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.019</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果数据库不为空，可以采用 cascade 命令，强制删除</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (db_hive)<span class="operator">&gt;</span> <span class="keyword">drop</span> database db_hive cascade;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.301</span> seconds</span><br><span class="line">hive (db_hive)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（8）创建表</p>
<ol>
<li>创建语法</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">EXTERNAL</span>] <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] table_name</span><br><span class="line">[(col_name data_type [COMMENT col_comment], ...)]</span><br><span class="line">[COMMENT table_comment]</span><br><span class="line">[PARTITIONED <span class="keyword">BY</span> (col_name data_type [COMMENT col_comment], ...)]</span><br><span class="line">[CLUSTERED <span class="keyword">BY</span> (col_name, col_name, ...</span><br><span class="line">[SORTED <span class="keyword">BY</span> (col_name [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>], ...)] <span class="keyword">INTO</span> num_buckets BUCKETS]</span><br><span class="line">[<span class="type">ROW</span> FORMAT row_format]</span><br><span class="line">[STORED <span class="keyword">AS</span> file_format]</span><br><span class="line">[LOCATION hdfs_path]</span><br><span class="line">[TBLPROPERTIES (property_name<span class="operator">=</span>property_valu, ....)]</span><br><span class="line">[<span class="keyword">AS</span> select_statement]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>字段解释说明</li>
</ol>
<p>1）[EXTERNAL] ：外部的  –&gt; Hive中的表会有内外之分</p>
<p>2）PARTITIONED BY ：分区表</p>
<p>3）CLUSTERED BY ：分桶表</p>
<p>4）[SORTED BY (col_name [ASC|DESC], …)] INTO num_buckets BUCKETS] ：分桶表</p>
<p>5）[ROW FORMAT row_format] ：定义行的格式</p>
<p>6）[STORED AS file_format] ：指定文件格式</p>
<p>7）[LOCATION hdfs_path] ：指定表的位置信息</p>
<p>8）[TBLPROPERTIES (property_name&#x3D;property_valu, ….)] ：额外属性</p>
<p>9）[AS select_statement] ：</p>
<p>（9）管理表</p>
<ol>
<li>理论</li>
</ol>
<p>​		默认创建的表都是所谓的管理表，有时也被称为内部表。因为这种表，Hive 会(或多或少地）控制着数据的生命周期。Hive 默认情况下会将这些表的数据存储在由配置hive.metastore.warehouse.dir(例如，&#x2F;user&#x2F;hive&#x2F;warehouse)所定义的目录的子目录下。<br>当我们删除一个管理表时，Hive也会删除这个表中的数据。管理表不适合和其他工具共享数据。</p>
<p>（10）管理表与外部表的相互转换</p>
<ol>
<li>查询表的类型</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> formatted test;</span><br><span class="line">.....</span><br><span class="line"><span class="keyword">Table</span> Type:             MANAGED_TABLE</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改内部表为外部表</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> test <span class="keyword">set</span> tblproperties(<span class="string">&#x27;EXTERNAL&#x27;</span><span class="operator">=</span><span class="string">&#x27;TRUE&#x27;</span>);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.262</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> formatted test;</span><br><span class="line">.....</span><br><span class="line"><span class="keyword">Table</span> Type:             EXTERNAL_TABLE</span><br><span class="line">.....</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>EXTERNAL’&#x3D;’TRUE : 外部表</p>
<p>EXTERNAL’&#x3D;’FALSE : 内部表</p>
<p><strong>注意：(EXTERNAL’&#x3D;’TRUE )和(EXTERNAL’&#x3D;’FALSE) 为固定写法，区分大小写！</strong></p>
<p>（11）建表时指定字段分隔符</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table test6(id int,age int)</span><br><span class="line">row format delimited</span><br><span class="line">fields terminated by &#x27;,&#x27;;</span><br></pre></td></tr></table></figure>



<p>（12）重命名表名</p>
<p>语法：ALTER TABLE table_name RENAME TO new_table_name;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">test</span><br><span class="line">test2</span><br><span class="line">test3</span><br><span class="line">test4</span><br><span class="line">test5</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.052</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> test rename <span class="keyword">to</span> test1;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.641</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">test1</span><br><span class="line">test2</span><br><span class="line">test3</span><br><span class="line">test4</span><br><span class="line">test5</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.042</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（13）增加&#x2F;修改&#x2F;替换列信息</p>
<ol>
<li>语法</li>
</ol>
<p>1）更新列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> table_name CHANGE [<span class="keyword">COLUMN</span>] clo_old_name col_new_name</span><br><span class="line">column_type [COMMENT col_comment] [<span class="keyword">FIRST</span><span class="operator">|</span>AFTER column_name]</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test6;</span><br><span class="line">OK</span><br><span class="line">test6.id        test6.age</span><br><span class="line"><span class="number">112</span>     <span class="number">12</span></span><br><span class="line"><span class="number">113</span>     <span class="number">13</span></span><br><span class="line"><span class="number">114</span>     <span class="number">14</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.198</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> test6;</span><br><span class="line">OK</span><br><span class="line">col_name        data_type       comment</span><br><span class="line">id                      <span class="type">int</span></span><br><span class="line">age                     <span class="type">int</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.084</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> test6 change id stu_id string;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.284</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test6;</span><br><span class="line">OK</span><br><span class="line">test6.stu_id    test6.age</span><br><span class="line"><span class="number">112</span>     <span class="number">12</span></span><br><span class="line"><span class="number">113</span>     <span class="number">13</span></span><br><span class="line"><span class="number">114</span>     <span class="number">14</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.158</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>2)增加和替换列</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> table_name <span class="keyword">ADD</span><span class="operator">|</span>REPLACE COLUMNS (col_name data_type [COMMENT col_comment], ...)</span><br></pre></td></tr></table></figure>

<p>注：ADD是代表新增一字段，字段位置在所有列后面(partition 列明)，</p>
<p>REPLACE 则是表示替换表中所有字段</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 添加列</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> test6 <span class="keyword">add</span> columns (name string);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.164</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> test6;</span><br><span class="line">OK</span><br><span class="line">col_name        data_type       comment</span><br><span class="line">stu_id                  string</span><br><span class="line">age                     <span class="type">int</span></span><br><span class="line">name                    string</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.046</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test6;</span><br><span class="line">OK</span><br><span class="line">test6.stu_id    test6.age       test6.name</span><br><span class="line"><span class="number">112</span>     <span class="number">12</span>      <span class="keyword">NULL</span></span><br><span class="line"><span class="number">113</span>     <span class="number">13</span>      <span class="keyword">NULL</span></span><br><span class="line"><span class="number">114</span>     <span class="number">14</span>      <span class="keyword">NULL</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.194</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 替换列（可以当删除用）</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> test6 replace columns (stu_id  string, age <span class="type">int</span>);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.148</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test6;</span><br><span class="line">OK</span><br><span class="line">test6.stu_id    test6.age</span><br><span class="line"><span class="number">112</span>     <span class="number">12</span></span><br><span class="line"><span class="number">113</span>     <span class="number">13</span></span><br><span class="line"><span class="number">114</span>     <span class="number">14</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.144</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（14）删除表</p>
<p>语法：drop table dept;</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">test1</span><br><span class="line">test2</span><br><span class="line">test5</span><br><span class="line">test6</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.024</span> seconds, Fetched: <span class="number">4</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">table</span> test2;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.19</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">test1</span><br><span class="line">test5</span><br><span class="line">test6</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.022</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="八、DML数据操作"><a href="#八、DML数据操作" class="headerlink" title="八、DML数据操作"></a>八、DML数据操作</h4><p>（1）向表中装载数据（Load）</p>
<ol>
<li>语法： load data [local] inpath ‘数据的path’ [overwrite] into table student [partition (partcoll&#x3D;vall, …)];</li>
</ol>
<p>1）load data : 代表加载数据</p>
<p>2）local : 表示从本地加载数据到hive表，否则从HDFS加载数据到hive表</p>
<p>3）inpath : 表示加载数据的路径</p>
<p>4）overwrite : 表示覆盖表中已有数据，否则表示追加</p>
<p>5）into table : 表示加载到哪张表</p>
<p>6）student : 表示具体的表</p>
<p>7）partition : 表示上传到指定分区</p>
<ol start="2">
<li>创建一张student表</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> student(id string, name string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.094</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/hive/student.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> student;</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.student</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.348</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line">OK</span><br><span class="line">student.id      student.name</span><br><span class="line"><span class="number">20220001</span>         张三</span><br><span class="line"><span class="number">20220002</span>         李四</span><br><span class="line"><span class="number">20220003</span>         王五</span><br><span class="line"><span class="number">20220004</span>         马六</span><br><span class="line"><span class="number">20220005</span>         李八</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.136</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（2）通过查询语句向表中插入数据（Insert）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student1;</span><br><span class="line">OK</span><br><span class="line">student1.id     student1.name</span><br><span class="line"><span class="number">20220006</span>         周莒</span><br><span class="line"><span class="number">20220007</span>         宋交</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.121</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">insert into</span> student</span><br><span class="line">              <span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student1;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231219195754_6d187e86<span class="number">-1528</span><span class="number">-4</span>ce0<span class="operator">-</span>a748<span class="number">-1</span>b6daf9508c9</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">3</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1702967178714_0003, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1702967178714_0003</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">20</span>,<span class="number">182</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">56</span>,<span class="number">139</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span></span><br><span class="line">Ended Job <span class="operator">=</span> job_1702967178714_0003 <span class="keyword">with</span> errors</span><br><span class="line">Error during job, obtaining debugging information...</span><br><span class="line">Examining task ID: task_1702967178714_0003_m_000000 (<span class="keyword">and</span> more) <span class="keyword">from</span> job job_1702967178714_0003</span><br><span class="line"></span><br><span class="line">Task <span class="keyword">with</span> the most failures(<span class="number">4</span>):</span><br><span class="line"><span class="comment">-----</span></span><br><span class="line">Task ID:</span><br><span class="line">  task_1702967178714_0003_m_000000</span><br><span class="line"></span><br><span class="line">URL:</span><br><span class="line">  http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>taskdetails.jsp?jobid<span class="operator">=</span>job_1702967178714_0003<span class="operator">&amp;</span>tipid<span class="operator">=</span>task_1702967178714_0003_m_000000</span><br><span class="line"><span class="comment">-----</span></span><br><span class="line">Diagnostic Messages <span class="keyword">for</span> this Task:</span><br><span class="line">[<span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">54.547</span>]Container [pid<span class="operator">=</span><span class="number">7087</span>,containerID<span class="operator">=</span>container_1702967178714_0003_01_000005] <span class="keyword">is</span> <span class="keyword">running</span> <span class="number">268880384</span>B beyond the <span class="string">&#x27;VIRTUAL&#x27;</span> memory limit. <span class="keyword">Current</span> usage: <span class="number">175.9</span> MB <span class="keyword">of</span> <span class="number">1</span> GB physical memory used; <span class="number">2.4</span> GB <span class="keyword">of</span> <span class="number">2.1</span> GB virtual memory used. Killing container.</span><br><span class="line">Dump <span class="keyword">of</span> the process<span class="operator">-</span>tree <span class="keyword">for</span> container_1702967178714_0003_01_000005 :</span><br><span class="line">        <span class="operator">|</span><span class="operator">-</span> PID PPID PGRPID SESSID CMD_NAME USER_MODE_TIME(MILLIS) <span class="built_in">SYSTEM_TIME</span>(MILLIS) VMEM_USAGE(BYTES) RSSMEM_USAGE(PAGES) FULL_CMD_LINE</span><br><span class="line">        <span class="operator">|</span><span class="operator">-</span> <span class="number">7099</span> <span class="number">7087</span> <span class="number">7087</span> <span class="number">7087</span> (java) <span class="number">466</span> <span class="number">85</span> <span class="number">2513940480</span> <span class="number">44743</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>jdk<span class="operator">/</span>bin<span class="operator">/</span>java <span class="operator">-</span>Djava.net.preferIPv4Stack<span class="operator">=</span><span class="literal">true</span> <span class="operator">-</span>Dhadoop.metrics.log.level<span class="operator">=</span>WARN <span class="operator">-</span>Xmx820m <span class="operator">-</span>Djava.io.tmpdir<span class="operator">=</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>data<span class="operator">/</span>nm<span class="operator">-</span><span class="keyword">local</span><span class="operator">-</span>dir<span class="operator">/</span>usercache<span class="operator">/</span>root<span class="operator">/</span>appcache<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005<span class="operator">/</span>tmp <span class="operator">-</span>Dlog4j.configuration<span class="operator">=</span>container<span class="operator">-</span>log4j.properties <span class="operator">-</span>Dyarn.app.container.log.dir<span class="operator">=</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>logs<span class="operator">/</span>userlogs<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005 <span class="operator">-</span>Dyarn.app.container.log.filesize<span class="operator">=</span><span class="number">0</span> <span class="operator">-</span>Dhadoop.root.logger<span class="operator">=</span>INFO,CLA <span class="operator">-</span>Dhadoop.root.logfile<span class="operator">=</span>syslog org.apache.hadoop.mapred.YarnChild <span class="number">192.168</span><span class="number">.137</span><span class="number">.138</span> <span class="number">46636</span> attempt_1702967178714_0003_m_000000_3 <span class="number">5</span></span><br><span class="line">        <span class="operator">|</span><span class="operator">-</span> <span class="number">7087</span> <span class="number">7086</span> <span class="number">7087</span> <span class="number">7087</span> (bash) <span class="number">0</span> <span class="number">0</span> <span class="number">9797632</span> <span class="number">287</span> <span class="operator">/</span>bin<span class="operator">/</span>bash <span class="operator">-</span>c <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>jdk<span class="operator">/</span>bin<span class="operator">/</span>java <span class="operator">-</span>Djava.net.preferIPv4Stack<span class="operator">=</span><span class="literal">true</span> <span class="operator">-</span>Dhadoop.metrics.log.level<span class="operator">=</span>WARN   <span class="operator">-</span>Xmx820m <span class="operator">-</span>Djava.io.tmpdir<span class="operator">=</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>data<span class="operator">/</span>nm<span class="operator">-</span><span class="keyword">local</span><span class="operator">-</span>dir<span class="operator">/</span>usercache<span class="operator">/</span>root<span class="operator">/</span>appcache<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005<span class="operator">/</span>tmp <span class="operator">-</span>Dlog4j.configuration<span class="operator">=</span>container<span class="operator">-</span>log4j.properties <span class="operator">-</span>Dyarn.app.container.log.dir<span class="operator">=</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>logs<span class="operator">/</span>userlogs<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005 <span class="operator">-</span>Dyarn.app.container.log.filesize<span class="operator">=</span><span class="number">0</span> <span class="operator">-</span>Dhadoop.root.logger<span class="operator">=</span>INFO,CLA <span class="operator">-</span>Dhadoop.root.logfile<span class="operator">=</span>syslog org.apache.hadoop.mapred.YarnChild <span class="number">192.168</span><span class="number">.137</span><span class="number">.138</span> <span class="number">46636</span> attempt_1702967178714_0003_m_000000_3 <span class="number">5</span> <span class="number">1</span><span class="operator">&gt;</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>logs<span class="operator">/</span>userlogs<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005<span class="operator">/</span>stdout <span class="number">2</span><span class="operator">&gt;</span><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>logs<span class="operator">/</span>userlogs<span class="operator">/</span>application_1702967178714_0003<span class="operator">/</span>container_1702967178714_0003_01_000005<span class="operator">/</span>stderr</span><br><span class="line"></span><br><span class="line">[<span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">54.712</span>]Container killed <span class="keyword">on</span> request. Exit code <span class="keyword">is</span> <span class="number">143</span></span><br><span class="line">[<span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">58</span>:<span class="number">54.716</span>]Container exited <span class="keyword">with</span> a non<span class="operator">-</span>zero exit code <span class="number">143.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">FAILED: Execution Error, <span class="keyword">return</span> code <span class="number">2</span> <span class="keyword">from</span> org.apache.hadoop.hive.ql.exec.mr.MapRedTask</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   HDFS Read: <span class="number">0</span> HDFS Write: <span class="number">0</span> FAIL</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">0</span> msec</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">insert into</span> student <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student1;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231219195923_1cf00028<span class="number">-0</span>c40<span class="number">-4e3</span>f<span class="operator">-</span>a18b<span class="number">-06210</span>d725967</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">3</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1702967178714_0004, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1702967178714_0004<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1702967178714_0004</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">59</span>:<span class="number">34</span>,<span class="number">533</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">59</span>:<span class="number">48</span>,<span class="number">078</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">1.23</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-19</span> <span class="number">19</span>:<span class="number">59</span>:<span class="number">55</span>,<span class="number">415</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.9</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">2</span> seconds <span class="number">900</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1702967178714_0004</span><br><span class="line">Stage<span class="number">-4</span> <span class="keyword">is</span> selected <span class="keyword">by</span> <span class="keyword">condition</span> resolver.</span><br><span class="line">Stage<span class="number">-3</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> <span class="keyword">by</span> <span class="keyword">condition</span> resolver.</span><br><span class="line">Stage<span class="number">-5</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> <span class="keyword">by</span> <span class="keyword">condition</span> resolver.</span><br><span class="line">Moving data <span class="keyword">to</span> directory hdfs:<span class="operator">/</span><span class="operator">/</span>hadoop301:<span class="number">8020</span><span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>student<span class="operator">/</span>.hive<span class="operator">-</span>staging_hive_2023<span class="number">-12</span><span class="number">-19</span>_19<span class="number">-59</span><span class="number">-23</span>_302_4974531779442527462<span class="number">-1</span><span class="operator">/</span><span class="operator">-</span>ext<span class="number">-10000</span></span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.student</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">2.9</span> sec   HDFS Read: <span class="number">12982</span> HDFS Write: <span class="number">280</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">2</span> seconds <span class="number">900</span> msec</span><br><span class="line">OK</span><br><span class="line">student1.id     student1.name</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">33.929</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line">OK</span><br><span class="line">student.id      student.name</span><br><span class="line"><span class="number">20220006</span>         周莒</span><br><span class="line"><span class="number">20220007</span>         宋交</span><br><span class="line"><span class="number">20220001</span>         张三</span><br><span class="line"><span class="number">20220002</span>         李四</span><br><span class="line"><span class="number">20220003</span>         王五</span><br><span class="line"><span class="number">20220004</span>         马六</span><br><span class="line"><span class="number">20220005</span>         李八</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.108</span> seconds, Fetched: <span class="number">7</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（3）查询语句中创建表并加载数据（As Select）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; create table student6</span><br><span class="line">              &gt; as</span><br><span class="line">              &gt; select id, name from student;</span><br><span class="line">Query ID = root_20231220151817_d4429601-40a2-49e5-b96e-fe607118c492</span><br><span class="line">Total jobs = 3</span><br><span class="line">Launching Job 1 out of 3</span><br><span class="line">Number of reduce tasks is set to 0 since there&#x27;s no reduce operator</span><br><span class="line">Starting Job = job_1703052903664_0001, Tracking URL = http://hadoop302:8088/proxy/application_1703052903664_0001/</span><br><span class="line">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703052903664_0001</span><br><span class="line">Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0</span><br><span class="line">2023-12-20 15:18:42,953 Stage-1 map = 0%,  reduce = 0%</span><br><span class="line">2023-12-20 15:19:04,039 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.15 sec</span><br><span class="line">MapReduce Total cumulative CPU time: 2 seconds 150 msec</span><br><span class="line">Ended Job = job_1703052903664_0001</span><br><span class="line">Stage-4 is selected by condition resolver.</span><br><span class="line">Stage-3 is filtered out by condition resolver.</span><br><span class="line">Stage-5 is filtered out by condition resolver.</span><br><span class="line">Moving data to directory hdfs://hadoop301:8020/user/hive/warehouse/.hive-staging_hive_2023-12-20_15-18-17_297_1964929230240087285-1/-ext-10002</span><br><span class="line">Moving data to directory hdfs://hadoop301:8020/user/hive/warehouse/student6</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage-Stage-1: Map: 1   Cumulative CPU: 2.15 sec   HDFS Read: 4883 HDFS Write: 192 SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: 2 seconds 150 msec</span><br><span class="line">OK</span><br><span class="line">id      name</span><br><span class="line">Time taken: 52.991 seconds</span><br><span class="line">student6.id     student6.name</span><br><span class="line">20220006         周莒</span><br><span class="line">20220007         宋交</span><br><span class="line">20220001         张三</span><br><span class="line">20220002         李四</span><br><span class="line">20220003         王五</span><br><span class="line">20220004         马六</span><br><span class="line">20220005         李八</span><br><span class="line">Time taken: 0.16 seconds, Fetched: 7 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>



<p>（4）创建表是通过Location指定加载数据路径</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# hdfs dfs -<span class="built_in">mkdir</span> /student22</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root@hadoop301 hive]# hdfs dfs -put student.txt /student22</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root@hadoop301 hive]#</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> student22(id string, name string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span> location <span class="string">&#x27;/student22&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.239</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student22;</span><br><span class="line">OK</span><br><span class="line">student22.id    student22.name</span><br><span class="line"><span class="number">20220001</span>         张三</span><br><span class="line"><span class="number">20220002</span>         李四</span><br><span class="line"><span class="number">20220003</span>         王五</span><br><span class="line"><span class="number">20220004</span>         马六</span><br><span class="line"><span class="number">20220005</span>         李八</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.24</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（5）数据导出</p>
<ol>
<li>Insert 导出</li>
</ol>
<p>1）将查询的结果导出到本地</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">insert</span> overwrite <span class="keyword">local</span> directory <span class="string">&#x27;/opt/module/hive/student&#x27;</span></span><br><span class="line"> 			  <span class="operator">&gt;</span> <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">              <span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student6;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>Hadoop 命令导出到本地</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> dfs <span class="operator">-</span><span class="keyword">get</span> <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>student22<span class="operator">/</span>student.txt</span><br><span class="line"><span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hive<span class="operator">/</span>student<span class="operator">/</span>student.txt;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>Hive Shell 命令导出</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 hive]# bin/hive -e <span class="string">&#x27;select * from default.student6;&#x27;</span> &gt; /opt/module/hive/student/student4.txt;</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="built_in">which</span>: no hbase <span class="keyword">in</span> (/opt/module/hive/bin:.:/opt/module/mysql/bin:.:/opt/module/hadoop/bin:/opt/module/hadoop/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/module/jdk/bin:/root/bin)</span><br><span class="line">SLF4J: Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line">SLF4J: Defaulting to no-operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">Hive Session ID = abafbe66-a1bb-420e-b01a-cc99e4ff61d2</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> file:/opt/module/hive/conf/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive Session ID = 0fc9fe17-2e7e-4791-acff-a2d8f2cc0433</span><br><span class="line">OK</span><br><span class="line">Time taken: 8.49 seconds, Fetched: 7 row(s)</span><br><span class="line">[root@hadoop301 hive]# <span class="built_in">cd</span> student/</span><br><span class="line">[root@hadoop301 student]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 145 12月 20 16:20 student4.txt</span><br><span class="line">[root@hadoop301 student]# <span class="built_in">cat</span> student4.txt</span><br><span class="line">student6.id     student6.name</span><br><span class="line">20220006         周莒</span><br><span class="line">20220007         宋交</span><br><span class="line">20220001         张三</span><br><span class="line">20220002         李四</span><br><span class="line">20220003         王五</span><br><span class="line">20220004         马六</span><br><span class="line">20220005         李八</span><br><span class="line">[root@hadoop301 student]#</span><br></pre></td></tr></table></figure>



<p>（6）清空表中的数据（Truncate）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">truncate</span> <span class="keyword">table</span> student;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">2.108</span> seconds</span><br><span class="line">hive(<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：Truncate 只能删除管理表，不能删除外部表中数据</p>
<h4 id="九、查询"><a href="#九、查询" class="headerlink" title="九、查询"></a>九、查询</h4><p>（1）数据准备：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 module]# <span class="built_in">cd</span> data/</span><br><span class="line">[root@hadoop301 data]# vim dept.txt</span><br><span class="line">[root@hadoop301 data]# <span class="built_in">cat</span> dept.txt</span><br><span class="line">10      ACCOUNTING      1700</span><br><span class="line">20      RESEARCH        1800</span><br><span class="line">30      SALES   1900</span><br><span class="line">40      OPERATIONS      1700</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@hadoop301 data]# vim emp.txt</span><br><span class="line">[root@hadoop301 data]# <span class="built_in">cat</span> emp.txt</span><br><span class="line">7369    SMITH   CLERK   7902    1980-12-17      800.00          20</span><br><span class="line">7499    ALLEN   SALESMAN        7689    1981-2-20       1600.00 300.00  30</span><br><span class="line">7521    WARD    SALESMAN        7698    1981-2-22       1250.00 500.00  30</span><br><span class="line">7566    JONES   MANAGER 7839    1981-4-2        2975.00         20</span><br><span class="line">7654    MARTIN  SALESMAN        7689    1981-8-28       1250.00 1400.00 30</span><br><span class="line">7698    BLAKE   MANAGER 7839    1981-5-1        2850.00         30</span><br><span class="line">7782    CLARK   MANARER 7829    1981-6-9        2450.00         10</span><br><span class="line">7788    SCOTT   ANALYST 7566    1987-4-19       3000.00         20</span><br><span class="line">7839    KING    PRESIDENT       1981-11-17      5000.00                 10</span><br><span class="line">7844    TURNER  SALESMAN        7698    1981-9-8        1500.00 0.00    30</span><br><span class="line">7876    ADAMS   CLERK   7788    1987-5-23       1100.00         20</span><br><span class="line">7900    JAMES   CLERK   7698    1981-12-3       950.00          30</span><br><span class="line">7902    FORD    ANALYST 7566    1981-12-3       3000.00         20</span><br><span class="line">79934   MILLER  CLERK   7782    1982-1-23       1300.00         10</span><br><span class="line">[root@hadoop301 data]#</span><br></pre></td></tr></table></figure>

<ol>
<li>创建表名表</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept(deptno <span class="type">int</span>, dname string, loc <span class="type">int</span>) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.837</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建员工表</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp(empno <span class="type">int</span>, ename string, job string, mgr <span class="type">int</span>, hiredate string, sal <span class="keyword">double</span>, comm <span class="keyword">double</span>, deptno <span class="type">int</span>) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.106</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>导入数据</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept;</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.036</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept;</span><br><span class="line">OK</span><br><span class="line">dept.deptno     dept.dname      dept.loc</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">2.971</span> seconds, Fetched: <span class="number">4</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/emp.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> emp;</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.emp</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.646</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7369</span>    SMITH   CLERK   <span class="number">7902</span>    <span class="number">1980</span><span class="number">-12</span><span class="number">-17</span>      <span class="number">800.0</span>   <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7566</span>    JONES   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-4</span><span class="number">-2</span>        <span class="number">2975.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7788</span>    SCOTT   ANALYST <span class="number">7566</span>    <span class="number">1987</span><span class="number">-4</span><span class="number">-19</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">5000.00</span> <span class="keyword">NULL</span>    <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7902</span>    FORD    ANALYST <span class="number">7566</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">79934</span>   MILLER  CLERK   <span class="number">7782</span>    <span class="number">1982</span><span class="number">-1</span><span class="number">-23</span>       <span class="number">1300.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.238</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（2）全表查询</p>
<p>略……..</p>
<p>（3）列取别名</p>
<p>略……..</p>
<p>（4）算术运算符</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271727322.png" alt="image-20231220190659770"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> ename, sal <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">from</span> emp;</span><br><span class="line">OK</span><br><span class="line">ename   _c1</span><br><span class="line">SMITH   <span class="number">1800.0</span></span><br><span class="line">ALLEN   <span class="number">2600.0</span></span><br><span class="line">WARD    <span class="number">2250.0</span></span><br><span class="line">JONES   <span class="number">3975.0</span></span><br><span class="line">MARTIN  <span class="number">2250.0</span></span><br><span class="line">BLAKE   <span class="number">3850.0</span></span><br><span class="line">CLARK   <span class="number">3450.0</span></span><br><span class="line">SCOTT   <span class="number">4000.0</span></span><br><span class="line">KING    <span class="keyword">NULL</span></span><br><span class="line">TURNER  <span class="number">2500.0</span></span><br><span class="line">ADAMS   <span class="number">2100.0</span></span><br><span class="line">JAMES   <span class="number">1950.0</span></span><br><span class="line">FORD    <span class="number">4000.0</span></span><br><span class="line">MILLER  <span class="number">2300.0</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.909</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（5）常用函数</p>
<ol>
<li>求总行数（count）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>求工资的最大值（max）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>求工资的最小值（min）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">min</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>求工资的总和（sum）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>求工资的平均值（avg）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>



<p>（6）Limit 语句</p>
<p>略………</p>
<p>（7）Where语句</p>
<p>略………</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271705040.png" alt="image-20231220192059045"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271706806.png" alt="image-20231220192256820"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271706861.png" alt="image-20231220192416279"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;ALLEN&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">6.775</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">800</span> <span class="keyword">and</span> <span class="number">1100</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7369</span>    SMITH   CLERK   <span class="number">7902</span>    <span class="number">1980</span><span class="number">-12</span><span class="number">-17</span>      <span class="number">800.0</span>   <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.359</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7369</span>    SMITH   CLERK   <span class="number">7902</span>    <span class="number">1980</span><span class="number">-12</span><span class="number">-17</span>      <span class="number">800.0</span>   <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7566</span>    JONES   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-4</span><span class="number">-2</span>        <span class="number">2975.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7788</span>    SCOTT   ANALYST <span class="number">7566</span>    <span class="number">1987</span><span class="number">-4</span><span class="number">-19</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">5000.00</span> <span class="keyword">NULL</span>    <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7902</span>    FORD    ANALYST <span class="number">7566</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">79934</span>   MILLER  CLERK   <span class="number">7782</span>    <span class="number">1982</span><span class="number">-1</span><span class="number">-23</span>       <span class="number">1300.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.25</span> seconds, Fetched: <span class="number">10</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">in</span> (<span class="number">1500</span>, <span class="number">5000</span>);</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">1981</span><span class="number">-11</span><span class="number">-17</span>      <span class="number">5000.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.319</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">=</span><span class="number">1500</span> <span class="keyword">or</span> sal <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">1981</span><span class="number">-11</span><span class="number">-17</span>      <span class="number">5000.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.275</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>





<p>（8）Like 和 RLike</p>
<ol>
<li>使用LIKE 运算选择类似的值</li>
<li>选择条件可以包含字符或数字</li>
</ol>
<p>“%” 代表零个或多个字符（任意个字符）</p>
<p>“_”   代表一个字符</p>
<ol start="3">
<li>RLIKE子句</li>
</ol>
<p>RLIKE 子句是Hive中这个功能的一个扩展，其可以通过Java的正则表达式这个更强大的语言来指定匹配条件。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 查询名字以A开头的员工信息</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;A%&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.258</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line"></span><br><span class="line"># 查询名字中第二个字母为A的员工信息</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;_A%&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.266</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line"></span><br><span class="line"># 查询名字中带有A的员工信息 法一</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename rlike <span class="string">&#x27;[A]&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.187</span> seconds, Fetched: <span class="number">7</span> <span class="type">row</span>(s)</span><br><span class="line"></span><br><span class="line"># 查询名字中带有A的员工信息 法二</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%A%&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.183</span> seconds, Fetched: <span class="number">7</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（9）逻辑运算符（And&#x2F;Or&#x2F;Not）</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271706429.png" alt="image-20231220195301873"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">and</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.265</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not null</span>;</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.227</span> seconds, Fetched: <span class="number">4</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">30</span>, <span class="number">20</span>);</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">1981</span><span class="number">-11</span><span class="number">-17</span>      <span class="number">5000.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">79934</span>   MILLER  CLERK   <span class="number">7782</span>    <span class="number">1982</span><span class="number">-1</span><span class="number">-23</span>       <span class="number">1300.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.191</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（10）分组</p>
<ol>
<li>Group By 语句</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> t.deptno, <span class="built_in">avg</span>(t.sal) avg_sal <span class="keyword">from</span> emp t <span class="keyword">group</span> <span class="keyword">by</span> t.deptno;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221094038_4bd1d586<span class="number">-20</span>f4<span class="number">-412</span>d<span class="number">-868</span>d<span class="number">-1</span>df0701852f4</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703122484268_0002, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703122484268_0002<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703122484268_0002</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">09</span>:<span class="number">40</span>:<span class="number">50</span>,<span class="number">899</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">09</span>:<span class="number">41</span>:<span class="number">13</span>,<span class="number">491</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">3.29</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">09</span>:<span class="number">41</span>:<span class="number">20</span>,<span class="number">737</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">7.97</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">7</span> seconds <span class="number">970</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703122484268_0002</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">7.97</span> sec   HDFS Read: <span class="number">16441</span> HDFS Write: <span class="number">177</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">7</span> seconds <span class="number">970</span> msec</span><br><span class="line">OK</span><br><span class="line">t.deptno        avg_sal</span><br><span class="line"><span class="number">10</span>      <span class="number">2916.6666666666665</span></span><br><span class="line"><span class="number">20</span>      <span class="number">2175.0</span></span><br><span class="line"><span class="number">30</span>      <span class="number">1566.6666666666667</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">43.428</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>略……….</p>
<p>（11）Join 语句</p>
<ol>
<li>内连接</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> e.empno, e.ename, d.dname <span class="keyword">from</span> emp e <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221093825_108b61bc<span class="number">-4</span>c2c<span class="number">-4644</span><span class="number">-9</span>f77<span class="number">-069</span>eae03a65f</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">0</span> since there<span class="string">&#x27;s no reduce operator</span></span><br><span class="line"><span class="string">Starting Job = job_1703122484268_0001, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0001/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0001</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-3: number of mappers: 1; number of reducers: 0</span></span><br><span class="line"><span class="string">2023-12-21 09:38:59,833 Stage-3 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 09:39:15,516 Stage-3 map = 100%,  reduce = 0%, Cumulative CPU 4.99 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 4 seconds 990 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703122484268_0001</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-3: Map: 1   Cumulative CPU: 4.99 sec   HDFS Read: 10241 HDFS Write: 524 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 4 seconds 990 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">e.empno e.ename d.dname</span></span><br><span class="line"><span class="string">7369    SMITH   RESEARCH</span></span><br><span class="line"><span class="string">7499    ALLEN   SALES</span></span><br><span class="line"><span class="string">7521    WARD    SALES</span></span><br><span class="line"><span class="string">7566    JONES   RESEARCH</span></span><br><span class="line"><span class="string">7654    MARTIN  SALES</span></span><br><span class="line"><span class="string">7698    BLAKE   SALES</span></span><br><span class="line"><span class="string">7782    CLARK   ACCOUNTING</span></span><br><span class="line"><span class="string">7788    SCOTT   RESEARCH</span></span><br><span class="line"><span class="string">7839    KING    ACCOUNTING</span></span><br><span class="line"><span class="string">7844    TURNER  SALES</span></span><br><span class="line"><span class="string">7876    ADAMS   RESEARCH</span></span><br><span class="line"><span class="string">7900    JAMES   SALES</span></span><br><span class="line"><span class="string">7902    FORD    RESEARCH</span></span><br><span class="line"><span class="string">79934   MILLER  ACCOUNTING</span></span><br><span class="line"><span class="string">Time taken: 52.22 seconds, Fetched: 14 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>左外连接</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> 根据员工表和部门表中的部门编号相等，查询员工编号、员工名称、部门编号和部门名称：</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> 如果没有部门名称则补充<span class="keyword">NULL</span></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> e.empno, e.ename, e.deptno, d.dname <span class="keyword">from</span> emp e <span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221095305_d026527e<span class="number">-0</span>b87<span class="number">-4136</span><span class="number">-8</span>d4f<span class="operator">-</span>f93c90fd78fa</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">0</span> since there<span class="string">&#x27;s no reduce operator</span></span><br><span class="line"><span class="string">Starting Job = job_1703122484268_0004, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0004/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0004</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-3: number of mappers: 1; number of reducers: 0</span></span><br><span class="line"><span class="string">2023-12-21 09:53:28,779 Stage-3 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 09:53:37,005 Stage-3 map = 100%,  reduce = 0%, Cumulative CPU 3.59 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 3 seconds 590 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703122484268_0004</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-3: Map: 1   Cumulative CPU: 3.59 sec   HDFS Read: 9822 HDFS Write: 566 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 3 seconds 590 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">e.empno e.ename e.deptno        d.dname</span></span><br><span class="line"><span class="string">7369    SMITH   20      RESEARCH</span></span><br><span class="line"><span class="string">7499    ALLEN   30      SALES</span></span><br><span class="line"><span class="string">7521    WARD    30      SALES</span></span><br><span class="line"><span class="string">7566    JONES   20      RESEARCH</span></span><br><span class="line"><span class="string">7654    MARTIN  30      SALES</span></span><br><span class="line"><span class="string">7698    BLAKE   30      SALES</span></span><br><span class="line"><span class="string">7782    CLARK   10      ACCOUNTING</span></span><br><span class="line"><span class="string">7788    SCOTT   20      RESEARCH</span></span><br><span class="line"><span class="string">7839    KING    10      ACCOUNTING</span></span><br><span class="line"><span class="string">7844    TURNER  30      SALES</span></span><br><span class="line"><span class="string">7876    ADAMS   20      RESEARCH</span></span><br><span class="line"><span class="string">7900    JAMES   30      SALES</span></span><br><span class="line"><span class="string">7902    FORD    20      RESEARCH</span></span><br><span class="line"><span class="string">79934   MILLER  10      ACCOUNTING</span></span><br><span class="line"><span class="string">Time taken: 33.29 seconds, Fetched: 14 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>右外连接</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; select e.empno, e.ename, e.deptno, d.dname from emp e right join dept d on e.deptno = d.deptno;</span><br><span class="line">Query ID = root_20231221095544_5e8e0e94-6706-4503-b33c-fa98d6e75ada</span><br><span class="line">Total jobs = 1</span><br><span class="line">SLF4J: Failed to load class &quot;org.slf4j.impl.StaticMDCBinder&quot;.</span><br><span class="line">SLF4J: Defaulting to no-operation MDCAdapter implementation.</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#no_static_mdc_binder for further details.</span><br><span class="line">2023-12-21 09:55:59     Starting to launch local task to process map join;      maximum memory = 239075328</span><br><span class="line">2023-12-21 09:56:01     Dump the side-table for tag: 0 with group count: 3 into file: file:/tmp/root/52bffc3a-4871-43d6-b430-9fac03092d41/hive_2023-12-21_09-55-44_863_5586462525119549729-1/-local-10004/HashTable-Stage-3/MapJoin-mapfile30--.hashtable</span><br><span class="line">2023-12-21 09:56:01     Uploaded 1 File to: file:/tmp/root/52bffc3a-4871-43d6-b430-9fac03092d41/hive_2023-12-21_09-55-44_863_5586462525119549729-1/-local-10004/HashTable-Stage-3/MapJoin-mapfile30--.hashtable (499 bytes)</span><br><span class="line">2023-12-21 09:56:01     End of local task; Time Taken: 1.689 sec.</span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job 1 out of 1</span><br><span class="line">Number of reduce tasks is set to 0 since there&#x27;s no reduce operator</span><br><span class="line">Starting Job = job_1703122484268_0005, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0005/</span><br><span class="line">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0005</span><br><span class="line">Hadoop job information for Stage-3: number of mappers: 1; number of reducers: 0</span><br><span class="line">2023-12-21 09:56:12,596 Stage-3 map = 0%,  reduce = 0%</span><br><span class="line">2023-12-21 09:56:20,909 Stage-3 map = 100%,  reduce = 0%, Cumulative CPU 4.05 sec</span><br><span class="line">MapReduce Total cumulative CPU time: 4 seconds 50 msec</span><br><span class="line">Ended Job = job_1703122484268_0005</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage-Stage-3: Map: 1   Cumulative CPU: 4.05 sec   HDFS Read: 8794 HDFS Write: 598 SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: 4 seconds 50 msec</span><br><span class="line">OK</span><br><span class="line">e.empno e.ename e.deptno        d.dname</span><br><span class="line">7782    CLARK   10      ACCOUNTING</span><br><span class="line">7839    KING    10      ACCOUNTING</span><br><span class="line">79934   MILLER  10      ACCOUNTING</span><br><span class="line">7369    SMITH   20      RESEARCH</span><br><span class="line">7566    JONES   20      RESEARCH</span><br><span class="line">7788    SCOTT   20      RESEARCH</span><br><span class="line">7876    ADAMS   20      RESEARCH</span><br><span class="line">7902    FORD    20      RESEARCH</span><br><span class="line">7499    ALLEN   30      SALES</span><br><span class="line">7521    WARD    30      SALES</span><br><span class="line">7654    MARTIN  30      SALES</span><br><span class="line">7698    BLAKE   30      SALES</span><br><span class="line">7844    TURNER  30      SALES</span><br><span class="line">7900    JAMES   30      SALES</span><br><span class="line">NULL    NULL    NULL    OPERATIONS</span><br><span class="line">Time taken: 37.219 seconds, Fetched: 15 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>

<p>4. </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">  <span class="operator">/</span><span class="operator">/</span> 查询所有员工信息以及所有部门信息</span><br><span class="line">  hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> e.empno, e.ename, d.deptno, d.dname <span class="keyword">from</span> emp e <span class="keyword">full</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221101601_1bee9494<span class="number">-012</span>c<span class="number">-4</span>df2<span class="number">-991</span>e<span class="operator">-</span>a20af78fcf58</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703122484268_0007, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703122484268_0007<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703122484268_0007</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">2</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">10</span>:<span class="number">16</span>:<span class="number">12</span>,<span class="number">295</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">10</span>:<span class="number">16</span>:<span class="number">27</span>,<span class="number">940</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">50</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.81</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">10</span>:<span class="number">16</span>:<span class="number">28</span>,<span class="number">974</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.38</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">10</span>:<span class="number">16</span>:<span class="number">34</span>,<span class="number">175</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">9.15</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">9</span> seconds <span class="number">150</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703122484268_0007</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">2</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">9.15</span> sec   HDFS Read: <span class="number">17623</span> HDFS Write: <span class="number">598</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">9</span> seconds <span class="number">150</span> msec</span><br><span class="line">OK</span><br><span class="line">e.empno e.ename d.deptno        d.dname</span><br><span class="line"><span class="number">79934</span>   MILLER  <span class="number">10</span>      ACCOUNTING</span><br><span class="line"><span class="number">7839</span>    KING    <span class="number">10</span>      ACCOUNTING</span><br><span class="line"><span class="number">7782</span>    CLARK   <span class="number">10</span>      ACCOUNTING</span><br><span class="line"><span class="number">7876</span>    ADAMS   <span class="number">20</span>      RESEARCH</span><br><span class="line"><span class="number">7788</span>    SCOTT   <span class="number">20</span>      RESEARCH</span><br><span class="line"><span class="number">7369</span>    SMITH   <span class="number">20</span>      RESEARCH</span><br><span class="line"><span class="number">7566</span>    JONES   <span class="number">20</span>      RESEARCH</span><br><span class="line"><span class="number">7902</span>    FORD    <span class="number">20</span>      RESEARCH</span><br><span class="line"><span class="number">7844</span>    TURNER  <span class="number">30</span>      SALES</span><br><span class="line"><span class="number">7499</span>    ALLEN   <span class="number">30</span>      SALES</span><br><span class="line"><span class="number">7698</span>    BLAKE   <span class="number">30</span>      SALES</span><br><span class="line"><span class="number">7654</span>    MARTIN  <span class="number">30</span>      SALES</span><br><span class="line"><span class="number">7521</span>    WARD    <span class="number">30</span>      SALES</span><br><span class="line"><span class="number">7900</span>    JAMES   <span class="number">30</span>      SALES</span><br><span class="line"><span class="keyword">NULL</span>    <span class="keyword">NULL</span>    <span class="number">40</span>      OPERATIONS</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">35.046</span> seconds, Fetched: <span class="number">15</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="operator">/</span><span class="operator">/</span> 查询所有员工信息所在部门信息为<span class="keyword">NULL</span></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> e.empno, e.ename, d.deptno, d.dname <span class="keyword">from</span> emp e <span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno <span class="keyword">where</span> d.deptno <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221103812_fee8a1db<span class="number">-5</span>a16<span class="number">-414</span>e<span class="operator">-</span>b09d<span class="number">-76536</span>a276019</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">0</span> since there<span class="string">&#x27;s no reduce operator</span></span><br><span class="line"><span class="string">Starting Job = job_1703122484268_0008, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0008/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0008</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-3: number of mappers: 1; number of reducers: 0</span></span><br><span class="line"><span class="string">2023-12-21 10:38:35,993 Stage-3 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 10:39:02,913 Stage-3 map = 100%,  reduce = 0%, Cumulative CPU 5.12 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 5 seconds 120 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703122484268_0008</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-3: Map: 1   Cumulative CPU: 5.12 sec   HDFS Read: 10507 HDFS Write: 87 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 5 seconds 120 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">e.empno e.ename d.deptno        d.dname</span></span><br><span class="line"><span class="string">Time taken: 51.322 seconds</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：</span></span><br><span class="line"><span class="string">union ：去重</span></span><br><span class="line"><span class="string">union all ：不去重</span></span><br><span class="line"><span class="string">如果需求本身不存在重复数据，使用union,和union all 效果相同，使用union sll 性能高</span></span><br></pre></td></tr></table></figure>



<ol start="5">
<li>多表连接</li>
</ol>
<p>数据准备</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">1700    Beijing</span><br><span class="line">1800    London</span><br><span class="line">1900    Tokyo</span><br></pre></td></tr></table></figure>

<p>1）创建表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> location(loc <span class="type">int</span>, loc_name string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.453</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>2）导入数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/loc.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> location;</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.location</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.418</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> location;</span><br><span class="line">OK</span><br><span class="line">location.loc    location.loc_name</span><br><span class="line"><span class="number">1700</span>    Beijing</span><br><span class="line"><span class="number">1800</span>    London</span><br><span class="line"><span class="number">1900</span>    Tokyo</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.147</span> seconds, Fetched: <span class="number">3</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>3）多表连接查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> 查询员工姓名、部门名称、以及部门所在城市名称</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> e.ename, d.dname, l.loc_name <span class="keyword">from</span> emp e <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno <span class="keyword">join</span> location l <span class="keyword">on</span> d.loc <span class="operator">=</span> l.loc;</span><br><span class="line"><span class="keyword">No</span> Stats <span class="keyword">for</span> <span class="keyword">default</span><span class="variable">@emp</span>, Columns: ename, deptno</span><br><span class="line"><span class="keyword">No</span> Stats <span class="keyword">for</span> <span class="keyword">default</span><span class="variable">@dept</span>, Columns: loc, dname, deptno</span><br><span class="line"><span class="keyword">No</span> Stats <span class="keyword">for</span> <span class="keyword">default</span><span class="variable">@location</span>, Columns: loc, loc_name</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221112134_0bf5d559<span class="operator">-</span>c3bd<span class="number">-4e61</span><span class="number">-9386</span><span class="operator">-</span>deb92bd4f883</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">0</span> since there<span class="string">&#x27;s no reduce operator</span></span><br><span class="line"><span class="string">Starting Job = job_1703122484268_0014, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0014/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0014</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-5: number of mappers: 1; number of reducers: 0</span></span><br><span class="line"><span class="string">2023-12-21 11:21:54,820 Stage-5 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 11:22:03,166 Stage-5 map = 100%,  reduce = 0%, Cumulative CPU 4.78 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 4 seconds 780 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703122484268_0014</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-5: Map: 1   Cumulative CPU: 4.78 sec   HDFS Read: 12121 HDFS Write: 548 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 4 seconds 780 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">e.ename d.dname l.loc_name</span></span><br><span class="line"><span class="string">SMITH   RESEARCH        London</span></span><br><span class="line"><span class="string">ALLEN   SALES   Tokyo</span></span><br><span class="line"><span class="string">WARD    SALES   Tokyo</span></span><br><span class="line"><span class="string">JONES   RESEARCH        London</span></span><br><span class="line"><span class="string">MARTIN  SALES   Tokyo</span></span><br><span class="line"><span class="string">BLAKE   SALES   Tokyo</span></span><br><span class="line"><span class="string">CLARK   ACCOUNTING      Beijing</span></span><br><span class="line"><span class="string">SCOTT   RESEARCH        London</span></span><br><span class="line"><span class="string">KING    ACCOUNTING      Beijing</span></span><br><span class="line"><span class="string">TURNER  SALES   Tokyo</span></span><br><span class="line"><span class="string">ADAMS   RESEARCH        London</span></span><br><span class="line"><span class="string">JAMES   SALES   Tokyo</span></span><br><span class="line"><span class="string">FORD    RESEARCH        London</span></span><br><span class="line"><span class="string">MILLER  ACCOUNTING      Beijing</span></span><br><span class="line"><span class="string">Time taken: 30.331 seconds, Fetched: 14 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="6">
<li>笛卡儿积</li>
</ol>
<ul>
<li>省略连接条件</li>
<li>连接条件无效</li>
<li>所有表中的所有行互相连接</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> empno, dname <span class="keyword">from</span> emp, dept;</span><br><span class="line">Warning: Map <span class="keyword">Join</span> MAPJOIN[<span class="number">9</span>][bigTable<span class="operator">=</span>?] <span class="keyword">in</span> task <span class="string">&#x27;Stage-3:MAPRED&#x27;</span> <span class="keyword">is</span> a <span class="keyword">cross</span> product</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221112554_2ceb7bb1<span class="number">-86</span>df<span class="number">-4</span>b96<span class="operator">-</span>bd83<span class="operator">-</span>b96a7faceec1</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticMDCBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation MDCAdapter implementation.</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#no_static_mdc_binder <span class="keyword">for</span> further details.</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">26</span>:<span class="number">03</span>     Starting <span class="keyword">to</span> launch <span class="keyword">local</span> task <span class="keyword">to</span> process map <span class="keyword">join</span>;      maximum memory <span class="operator">=</span> <span class="number">239075328</span></span><br><span class="line">Execution completed successfully</span><br><span class="line">MapredLocal task succeeded</span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> <span class="number">0</span> since there<span class="string">&#x27;s no reduce operator</span></span><br><span class="line"><span class="string">Starting Job = job_1703122484268_0015, Tracking URL = http://hadoop302:8088/proxy/application_1703122484268_0015/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703122484268_0015</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-3: number of mappers: 1; number of reducers: 0</span></span><br><span class="line"><span class="string">2023-12-21 11:26:15,583 Stage-3 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 11:26:30,060 Stage-3 map = 100%,  reduce = 0%, Cumulative CPU 3.97 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 3 seconds 970 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703122484268_0015</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-3: Map: 1   Cumulative CPU: 3.97 sec   HDFS Read: 9231 HDFS Write: 1561 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 3 seconds 970 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">empno   dname</span></span><br><span class="line"><span class="string">7369    ACCOUNTING</span></span><br><span class="line"><span class="string">7369    RESEARCH</span></span><br><span class="line"><span class="string">7369    SALES</span></span><br><span class="line"><span class="string">7369    OPERATIONS</span></span><br><span class="line"><span class="string">7499    ACCOUNTING</span></span><br><span class="line"><span class="string">7499    RESEARCH</span></span><br><span class="line"><span class="string">7499    SALES</span></span><br><span class="line"><span class="string">7499    OPERATIONS</span></span><br><span class="line"><span class="string">7521    ACCOUNTING</span></span><br><span class="line"><span class="string">7521    RESEARCH</span></span><br><span class="line"><span class="string">7521    SALES</span></span><br><span class="line"><span class="string">7521    OPERATIONS</span></span><br><span class="line"><span class="string">7566    ACCOUNTING</span></span><br><span class="line"><span class="string">7566    RESEARCH</span></span><br><span class="line"><span class="string">7566    SALES</span></span><br><span class="line"><span class="string">7566    OPERATIONS</span></span><br><span class="line"><span class="string">7654    ACCOUNTING</span></span><br><span class="line"><span class="string">7654    RESEARCH</span></span><br><span class="line"><span class="string">7654    SALES</span></span><br><span class="line"><span class="string">7654    OPERATIONS</span></span><br><span class="line"><span class="string">7698    ACCOUNTING</span></span><br><span class="line"><span class="string">7698    RESEARCH</span></span><br><span class="line"><span class="string">7698    SALES</span></span><br><span class="line"><span class="string">7698    OPERATIONS</span></span><br><span class="line"><span class="string">7782    ACCOUNTING</span></span><br><span class="line"><span class="string">7782    RESEARCH</span></span><br><span class="line"><span class="string">7782    SALES</span></span><br><span class="line"><span class="string">7782    OPERATIONS</span></span><br><span class="line"><span class="string">7788    ACCOUNTING</span></span><br><span class="line"><span class="string">7788    RESEARCH</span></span><br><span class="line"><span class="string">7788    SALES</span></span><br><span class="line"><span class="string">7788    OPERATIONS</span></span><br><span class="line"><span class="string">7839    ACCOUNTING</span></span><br><span class="line"><span class="string">7839    RESEARCH</span></span><br><span class="line"><span class="string">7839    SALES</span></span><br><span class="line"><span class="string">7839    OPERATIONS</span></span><br><span class="line"><span class="string">7844    ACCOUNTING</span></span><br><span class="line"><span class="string">7844    RESEARCH</span></span><br><span class="line"><span class="string">7844    SALES</span></span><br><span class="line"><span class="string">7844    OPERATIONS</span></span><br><span class="line"><span class="string">7876    ACCOUNTING</span></span><br><span class="line"><span class="string">7876    RESEARCH</span></span><br><span class="line"><span class="string">7876    SALES</span></span><br><span class="line"><span class="string">7876    OPERATIONS</span></span><br><span class="line"><span class="string">7900    ACCOUNTING</span></span><br><span class="line"><span class="string">7900    RESEARCH</span></span><br><span class="line"><span class="string">7900    SALES</span></span><br><span class="line"><span class="string">7900    OPERATIONS</span></span><br><span class="line"><span class="string">7902    ACCOUNTING</span></span><br><span class="line"><span class="string">7902    RESEARCH</span></span><br><span class="line"><span class="string">7902    SALES</span></span><br><span class="line"><span class="string">7902    OPERATIONS</span></span><br><span class="line"><span class="string">79934   ACCOUNTING</span></span><br><span class="line"><span class="string">79934   RESEARCH</span></span><br><span class="line"><span class="string">79934   SALES</span></span><br><span class="line"><span class="string">79934   OPERATIONS</span></span><br><span class="line"><span class="string">Time taken: 37.56 seconds, Fetched: 56 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">或</span></span><br><span class="line"><span class="string">hive (default)&gt; select e.ename, d.dname from emp e join dept d;</span></span><br><span class="line"><span class="string">Warning: Map Join MAPJOIN[9][bigTable=?] in task &#x27;</span>Stage<span class="number">-3</span>:MAPRED<span class="string">&#x27; is a cross product</span></span><br><span class="line"><span class="string">Query ID = root_20231221112743_0d68351b-3889-44cc-86bf-c5b63c9fcdcb</span></span><br><span class="line"><span class="string">Total jobs = 1</span></span><br><span class="line"><span class="string">Execution completed successfully</span></span><br><span class="line"><span class="string">MapredLocal task succeeded</span></span><br><span class="line"><span class="string">Launching Job 1 out of 1</span></span><br><span class="line"><span class="string">Number of reduce tasks is set to 0 since there&#x27;</span>s <span class="keyword">no</span> reduce operator</span><br><span class="line">Starting Job <span class="operator">=</span> job_1703122484268_0016, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703122484268_0016<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703122484268_0016</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-3</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">0</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">28</span>:<span class="number">04</span>,<span class="number">841</span> Stage<span class="number">-3</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">28</span>:<span class="number">21</span>,<span class="number">429</span> Stage<span class="number">-3</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">3.25</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">3</span> seconds <span class="number">250</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703122484268_0016</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-3</span>: Map: <span class="number">1</span>   Cumulative CPU: <span class="number">3.25</span> sec   HDFS Read: <span class="number">9253</span> HDFS Write: <span class="number">1613</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">3</span> seconds <span class="number">250</span> msec</span><br><span class="line">OK</span><br><span class="line">e.ename d.dname</span><br><span class="line">SMITH   ACCOUNTING</span><br><span class="line">SMITH   RESEARCH</span><br><span class="line">SMITH   SALES</span><br><span class="line">SMITH   OPERATIONS</span><br><span class="line">ALLEN   ACCOUNTING</span><br><span class="line">ALLEN   RESEARCH</span><br><span class="line">ALLEN   SALES</span><br><span class="line">ALLEN   OPERATIONS</span><br><span class="line">WARD    ACCOUNTING</span><br><span class="line">WARD    RESEARCH</span><br><span class="line">WARD    SALES</span><br><span class="line">WARD    OPERATIONS</span><br><span class="line">JONES   ACCOUNTING</span><br><span class="line">JONES   RESEARCH</span><br><span class="line">JONES   SALES</span><br><span class="line">JONES   OPERATIONS</span><br><span class="line">MARTIN  ACCOUNTING</span><br><span class="line">MARTIN  RESEARCH</span><br><span class="line">MARTIN  SALES</span><br><span class="line">MARTIN  OPERATIONS</span><br><span class="line">BLAKE   ACCOUNTING</span><br><span class="line">BLAKE   RESEARCH</span><br><span class="line">BLAKE   SALES</span><br><span class="line">BLAKE   OPERATIONS</span><br><span class="line">CLARK   ACCOUNTING</span><br><span class="line">CLARK   RESEARCH</span><br><span class="line">CLARK   SALES</span><br><span class="line">CLARK   OPERATIONS</span><br><span class="line">SCOTT   ACCOUNTING</span><br><span class="line">SCOTT   RESEARCH</span><br><span class="line">SCOTT   SALES</span><br><span class="line">SCOTT   OPERATIONS</span><br><span class="line">KING    ACCOUNTING</span><br><span class="line">KING    RESEARCH</span><br><span class="line">KING    SALES</span><br><span class="line">KING    OPERATIONS</span><br><span class="line">TURNER  ACCOUNTING</span><br><span class="line">TURNER  RESEARCH</span><br><span class="line">TURNER  SALES</span><br><span class="line">TURNER  OPERATIONS</span><br><span class="line">ADAMS   ACCOUNTING</span><br><span class="line">ADAMS   RESEARCH</span><br><span class="line">ADAMS   SALES</span><br><span class="line">ADAMS   OPERATIONS</span><br><span class="line">JAMES   ACCOUNTING</span><br><span class="line">JAMES   RESEARCH</span><br><span class="line">JAMES   SALES</span><br><span class="line">JAMES   OPERATIONS</span><br><span class="line">FORD    ACCOUNTING</span><br><span class="line">FORD    RESEARCH</span><br><span class="line">FORD    SALES</span><br><span class="line">FORD    OPERATIONS</span><br><span class="line">MILLER  ACCOUNTING</span><br><span class="line">MILLER  RESEARCH</span><br><span class="line">MILLER  SALES</span><br><span class="line">MILLER  OPERATIONS</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">40.03</span> seconds, Fetched: <span class="number">56</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="7">
<li>排序</li>
</ol>
<p>1）全局排序（Order By）</p>
<ul>
<li>ASC  : 升序</li>
<li>DESC  ：降序</li>
</ul>
<p>ORDER BY 子句在SELSCT 语句的结尾</p>
<p>2）按工资排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221113310_c6b5e678<span class="number">-3</span>d3d<span class="number">-4</span>d5e<span class="number">-860</span>c<span class="number">-083</span>bdcca9b07</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703122484268_0017, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703122484268_0017<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703122484268_0017</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">33</span>:<span class="number">18</span>,<span class="number">533</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">33</span>:<span class="number">31</span>,<span class="number">884</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.21</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">33</span>:<span class="number">48</span>,<span class="number">378</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">8.28</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">8</span> seconds <span class="number">280</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703122484268_0017</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">8.28</span> sec   HDFS Read: <span class="number">11488</span> HDFS Write: <span class="number">435</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">8</span> seconds <span class="number">280</span> msec</span><br><span class="line">OK</span><br><span class="line">ename   sal</span><br><span class="line">SMITH   <span class="number">800.0</span></span><br><span class="line">JAMES   <span class="number">950.0</span></span><br><span class="line">ADAMS   <span class="number">1100.0</span></span><br><span class="line">WARD    <span class="number">1250.0</span></span><br><span class="line">MARTIN  <span class="number">1250.0</span></span><br><span class="line">MILLER  <span class="number">1300.0</span></span><br><span class="line">TURNER  <span class="number">1500.0</span></span><br><span class="line">ALLEN   <span class="number">1600.0</span></span><br><span class="line">CLARK   <span class="number">2450.0</span></span><br><span class="line">BLAKE   <span class="number">2850.0</span></span><br><span class="line">JONES   <span class="number">2975.0</span></span><br><span class="line">SCOTT   <span class="number">3000.0</span></span><br><span class="line">FORD    <span class="number">3000.0</span></span><br><span class="line">KING    <span class="number">5000.0</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">39.481</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>3）多个列排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> ename, deptno, sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno, sal;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221114159_267adbc8<span class="number">-316</span>c<span class="number">-4708</span><span class="number">-8</span>fe2<span class="number">-5e65399</span>b1e5d</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703122484268_0019, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703122484268_0019<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703122484268_0019</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">42</span>:<span class="number">07</span>,<span class="number">778</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">42</span>:<span class="number">15</span>,<span class="number">008</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">1.83</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">11</span>:<span class="number">42</span>:<span class="number">22</span>,<span class="number">272</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.94</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">4</span> seconds <span class="number">940</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703122484268_0019</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">4.94</span> sec   HDFS Read: <span class="number">11911</span> HDFS Write: <span class="number">477</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">4</span> seconds <span class="number">940</span> msec</span><br><span class="line">OK</span><br><span class="line">ename   deptno  sal</span><br><span class="line">MILLER  <span class="number">10</span>      <span class="number">1300.0</span></span><br><span class="line">CLARK   <span class="number">10</span>      <span class="number">2450.0</span></span><br><span class="line">KING    <span class="number">10</span>      <span class="number">5000.0</span></span><br><span class="line">SMITH   <span class="number">20</span>      <span class="number">800.0</span></span><br><span class="line">ADAMS   <span class="number">20</span>      <span class="number">1100.0</span></span><br><span class="line">JONES   <span class="number">20</span>      <span class="number">2975.0</span></span><br><span class="line">SCOTT   <span class="number">20</span>      <span class="number">3000.0</span></span><br><span class="line">FORD    <span class="number">20</span>      <span class="number">3000.0</span></span><br><span class="line">JAMES   <span class="number">30</span>      <span class="number">950.0</span></span><br><span class="line">MARTIN  <span class="number">30</span>      <span class="number">1250.0</span></span><br><span class="line">WARD    <span class="number">30</span>      <span class="number">1250.0</span></span><br><span class="line">TURNER  <span class="number">30</span>      <span class="number">1500.0</span></span><br><span class="line">ALLEN   <span class="number">30</span>      <span class="number">1600.0</span></span><br><span class="line">BLAKE   <span class="number">30</span>      <span class="number">2850.0</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">23.79</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>4）每个Reduce 内部排序（Sort By）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp sort <span class="keyword">by</span> deptno <span class="keyword">desc</span>;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221145510_2ebee977<span class="number">-01</span>d5<span class="number">-4</span>eb1<span class="number">-96</span>ca<span class="operator">-</span>d2f882654636</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0001, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_0001<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0001</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">55</span>:<span class="number">30</span>,<span class="number">224</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">55</span>:<span class="number">44</span>,<span class="number">794</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.25</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">56</span>:<span class="number">16</span>,<span class="number">855</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">8.12</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">8</span> seconds <span class="number">120</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0001</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">8.12</span> sec   HDFS Read: <span class="number">13337</span> HDFS Write: <span class="number">917</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">8</span> seconds <span class="number">120</span> msec</span><br><span class="line">OK</span><br><span class="line">emp.empno       emp.ename       emp.job emp.mgr emp.hiredate    emp.sal emp.comm        emp.deptno</span><br><span class="line"><span class="number">7521</span>    WARD    SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-22</span>       <span class="number">1250.0</span>  <span class="number">500.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7499</span>    ALLEN   SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-2</span><span class="number">-20</span>       <span class="number">1600.0</span>  <span class="number">300.0</span>   <span class="number">30</span></span><br><span class="line"><span class="number">7900</span>    JAMES   CLERK   <span class="number">7698</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">950.0</span>   <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7844</span>    TURNER  SALESMAN        <span class="number">7698</span>    <span class="number">1981</span><span class="number">-9</span><span class="number">-8</span>        <span class="number">1500.0</span>  <span class="number">0.0</span>     <span class="number">30</span></span><br><span class="line"><span class="number">7698</span>    BLAKE   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-5</span><span class="number">-1</span>        <span class="number">2850.0</span>  <span class="keyword">NULL</span>    <span class="number">30</span></span><br><span class="line"><span class="number">7654</span>    MARTIN  SALESMAN        <span class="number">7689</span>    <span class="number">1981</span><span class="number">-8</span><span class="number">-28</span>       <span class="number">1250.0</span>  <span class="number">1400.0</span>  <span class="number">30</span></span><br><span class="line"><span class="number">7876</span>    ADAMS   CLERK   <span class="number">7788</span>    <span class="number">1987</span><span class="number">-5</span><span class="number">-23</span>       <span class="number">1100.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7902</span>    FORD    ANALYST <span class="number">7566</span>    <span class="number">1981</span><span class="number">-12</span><span class="number">-3</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7788</span>    SCOTT   ANALYST <span class="number">7566</span>    <span class="number">1987</span><span class="number">-4</span><span class="number">-19</span>       <span class="number">3000.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7369</span>    SMITH   CLERK   <span class="number">7902</span>    <span class="number">1980</span><span class="number">-12</span><span class="number">-17</span>      <span class="number">800.0</span>   <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">7566</span>    JONES   MANAGER <span class="number">7839</span>    <span class="number">1981</span><span class="number">-4</span><span class="number">-2</span>        <span class="number">2975.0</span>  <span class="keyword">NULL</span>    <span class="number">20</span></span><br><span class="line"><span class="number">79934</span>   MILLER  CLERK   <span class="number">7782</span>    <span class="number">1982</span><span class="number">-1</span><span class="number">-23</span>       <span class="number">1300.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7839</span>    KING    PRESIDENT       <span class="keyword">NULL</span>    <span class="number">1981</span><span class="number">-11</span><span class="number">-17</span>      <span class="number">5000.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="number">7782</span>    CLARK   MANARER <span class="number">7829</span>    <span class="number">1981</span><span class="number">-6</span><span class="number">-9</span>        <span class="number">2450.0</span>  <span class="keyword">NULL</span>    <span class="number">10</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">68.678</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> ename, deptno <span class="keyword">from</span> emp sort <span class="keyword">by</span> deptno <span class="keyword">desc</span>;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221145709_3e9d4a83<span class="number">-8821</span><span class="number">-445</span>b<span class="number">-88</span>ea<span class="number">-3</span>b3c28006b39</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0002, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_0002<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0002</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">20</span>,<span class="number">783</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">49</span>,<span class="number">894</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.4</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">56</span>,<span class="number">118</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.37</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">6</span> seconds <span class="number">370</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0002</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">6.37</span> sec   HDFS Read: <span class="number">11552</span> HDFS Write: <span class="number">381</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">6</span> seconds <span class="number">370</span> msec</span><br><span class="line">OK</span><br><span class="line">ename   deptno</span><br><span class="line">WARD    <span class="number">30</span></span><br><span class="line">ALLEN   <span class="number">30</span></span><br><span class="line">JAMES   <span class="number">30</span></span><br><span class="line">TURNER  <span class="number">30</span></span><br><span class="line">BLAKE   <span class="number">30</span></span><br><span class="line">MARTIN  <span class="number">30</span></span><br><span class="line">ADAMS   <span class="number">20</span></span><br><span class="line">FORD    <span class="number">20</span></span><br><span class="line">SCOTT   <span class="number">20</span></span><br><span class="line">SMITH   <span class="number">20</span></span><br><span class="line">JONES   <span class="number">20</span></span><br><span class="line">MILLER  <span class="number">10</span></span><br><span class="line">KING    <span class="number">10</span></span><br><span class="line">CLARK   <span class="number">10</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">48.494</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">insert</span> overwrite <span class="keyword">local</span> directory <span class="string">&#x27;./sort-by&#x27;</span> <span class="keyword">select</span> ename, deptno <span class="keyword">from</span> emp sort <span class="keyword">by</span> deptno <span class="keyword">desc</span></span><br><span class="line">Query ID <span class="operator">=</span> root_20231221150201_252fecc3<span class="number">-3392</span><span class="number">-4406</span><span class="number">-86</span>a9<span class="number">-16862118760</span>c</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0003, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_00</span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0003</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">09</span>,<span class="number">624</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">16</span>,<span class="number">872</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.31</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">02</span>:<span class="number">32</span>,<span class="number">538</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.96</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">6</span> seconds <span class="number">960</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0003</span><br><span class="line">Moving data <span class="keyword">to</span> <span class="keyword">local</span> directory sort<span class="operator">-</span><span class="keyword">by</span></span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">6.96</span> sec   HDFS Read: <span class="number">11130</span> HDFS Write: <span class="number">126</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">6</span> seconds <span class="number">960</span> msec</span><br><span class="line">OK</span><br><span class="line">ename   deptno</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">32.725</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> </span><br><span class="line"></span><br><span class="line">[root<span class="variable">@hadoop301</span> sort<span class="operator">-</span><span class="keyword">by</span>]# cat <span class="number">000000</span>_1</span><br><span class="line">WARD30</span><br><span class="line">ALLEN30</span><br><span class="line">JAMES30</span><br><span class="line">TURNER30</span><br><span class="line">BLAKE30</span><br><span class="line">MARTIN30</span><br><span class="line">ADAMS20</span><br><span class="line">FORD20</span><br><span class="line">SCOTT20</span><br><span class="line">SMITH20</span><br><span class="line">JONES20</span><br><span class="line">MILLER10</span><br><span class="line">KING10</span><br><span class="line">CLARK10</span><br></pre></td></tr></table></figure>



<p>5）分区（Distribute By）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> deptno, ename, sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno, sal;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221151421_b2584182<span class="number">-0</span>f82<span class="number">-49</span>ae<span class="operator">-</span>a8fe<span class="number">-0</span>a7d5703fb17</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0005, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_0005<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0005</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">30</span>,<span class="number">435</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">37</span>,<span class="number">677</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.73</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">53</span>,<span class="number">130</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">5.72</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">5</span> seconds <span class="number">720</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0005</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">5.72</span> sec   HDFS Read: <span class="number">11918</span> HDFS Write: <span class="number">477</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">5</span> seconds <span class="number">720</span> msec</span><br><span class="line">OK</span><br><span class="line">deptno  ename   sal</span><br><span class="line"><span class="number">10</span>      MILLER  <span class="number">1300.0</span></span><br><span class="line"><span class="number">10</span>      CLARK   <span class="number">2450.0</span></span><br><span class="line"><span class="number">10</span>      KING    <span class="number">5000.0</span></span><br><span class="line"><span class="number">20</span>      SMITH   <span class="number">800.0</span></span><br><span class="line"><span class="number">20</span>      ADAMS   <span class="number">1100.0</span></span><br><span class="line"><span class="number">20</span>      JONES   <span class="number">2975.0</span></span><br><span class="line"><span class="number">20</span>      SCOTT   <span class="number">3000.0</span></span><br><span class="line"><span class="number">20</span>      FORD    <span class="number">3000.0</span></span><br><span class="line"><span class="number">30</span>      JAMES   <span class="number">950.0</span></span><br><span class="line"><span class="number">30</span>      MARTIN  <span class="number">1250.0</span></span><br><span class="line"><span class="number">30</span>      WARD    <span class="number">1250.0</span></span><br><span class="line"><span class="number">30</span>      TURNER  <span class="number">1500.0</span></span><br><span class="line"><span class="number">30</span>      ALLEN   <span class="number">1600.0</span></span><br><span class="line"><span class="number">30</span>      BLAKE   <span class="number">2850.0</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">33.702</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="number">4</span>;</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> deptno, ename, sal <span class="keyword">from</span> emp distribute <span class="keyword">by</span> deptno sort <span class="keyword">by</span> sal;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221151653_41be6520<span class="operator">-</span>c6b1<span class="number">-4</span>bf1<span class="number">-9174</span><span class="operator">-</span>e526b9e2e37b</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Defaulting <span class="keyword">to</span> jobconf <span class="keyword">value</span> <span class="keyword">of</span>: <span class="number">4</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0006, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_0006<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0006</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">4</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">02</span>,<span class="number">248</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">19</span>,<span class="number">881</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">1.67</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">27</span>,<span class="number">204</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">25</span><span class="operator">%</span>, Cumulative CPU <span class="number">1.67</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">34</span>,<span class="number">546</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">75</span><span class="operator">%</span>, Cumulative CPU <span class="number">14.58</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">37</span>,<span class="number">660</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">14.58</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">38</span>,<span class="number">687</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">75</span><span class="operator">%</span>, Cumulative CPU <span class="number">14.58</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">17</span>:<span class="number">44</span>,<span class="number">917</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">17.78</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">17</span> seconds <span class="number">780</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0006</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">4</span>   Cumulative CPU: <span class="number">17.78</span> sec   HDFS Read: <span class="number">28696</span> HDFS Write: <span class="number">738</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">17</span> seconds <span class="number">780</span> msec</span><br><span class="line">OK</span><br><span class="line">deptno  ename   sal</span><br><span class="line"><span class="number">20</span>      SMITH   <span class="number">800.0</span></span><br><span class="line"><span class="number">20</span>      ADAMS   <span class="number">1100.0</span></span><br><span class="line"><span class="number">20</span>      JONES   <span class="number">2975.0</span></span><br><span class="line"><span class="number">20</span>      FORD    <span class="number">3000.0</span></span><br><span class="line"><span class="number">20</span>      SCOTT   <span class="number">3000.0</span></span><br><span class="line"><span class="number">30</span>      JAMES   <span class="number">950.0</span></span><br><span class="line"><span class="number">30</span>      MARTIN  <span class="number">1250.0</span></span><br><span class="line"><span class="number">30</span>      WARD    <span class="number">1250.0</span></span><br><span class="line"><span class="number">10</span>      MILLER  <span class="number">1300.0</span></span><br><span class="line"><span class="number">30</span>      TURNER  <span class="number">1500.0</span></span><br><span class="line"><span class="number">30</span>      ALLEN   <span class="number">1600.0</span></span><br><span class="line"><span class="number">10</span>      CLARK   <span class="number">2450.0</span></span><br><span class="line"><span class="number">30</span>      BLAKE   <span class="number">2850.0</span></span><br><span class="line"><span class="number">10</span>      KING    <span class="number">5000.0</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">53.548</span> seconds, Fetched: <span class="number">14</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 查看具体分区情况：</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">insert</span> overwrite <span class="keyword">local</span> directory <span class="string">&#x27;./distribute-by&#x27;</span> <span class="keyword">select</span> deptno, ename, sal <span class="keyword">from</span> emp distribute <span class="keyword">by</span> deptno sort <span class="keyword">by</span> sal;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231221151945_ecf1bbf7<span class="number">-0841</span><span class="number">-418</span>d<span class="number">-83</span>dc<span class="number">-8</span>aaa891e488c</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Defaulting <span class="keyword">to</span> jobconf <span class="keyword">value</span> <span class="keyword">of</span>: <span class="number">4</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703140954122_0007, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703140954122_0007<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703140954122_0007</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">4</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">19</span>:<span class="number">53</span>,<span class="number">619</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">20</span>:<span class="number">10</span>,<span class="number">196</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.9</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">20</span>:<span class="number">35</span>,<span class="number">519</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">25</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.78</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span> <span class="number">15</span>:<span class="number">20</span>:<span class="number">43</span>,<span class="number">914</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">14.8</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">14</span> seconds <span class="number">800</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703140954122_0007</span><br><span class="line">Moving data <span class="keyword">to</span> <span class="keyword">local</span> directory distribute<span class="operator">-</span><span class="keyword">by</span></span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">4</span>   Cumulative CPU: <span class="number">14.8</span> sec   HDFS Read: <span class="number">27060</span> HDFS Write: <span class="number">222</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">14</span> seconds <span class="number">800</span> msec</span><br><span class="line">OK</span><br><span class="line">deptno  ename   sal</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">60.688</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 分了<span class="number">4</span>个区，其中有两个是空的</span><br><span class="line">[root<span class="variable">@hadoop301</span> distribute<span class="operator">-</span><span class="keyword">by</span>]# ll</span><br><span class="line">总用量 <span class="number">8</span></span><br><span class="line"><span class="operator">-</span>rw<span class="operator">-</span>r<span class="comment">--r--. 1 root root  78 12月 21 15:20 000000_3</span></span><br><span class="line"><span class="operator">-</span>rw<span class="operator">-</span>r<span class="comment">--r--. 1 root root   0 12月 21 15:20 000001_3</span></span><br><span class="line"><span class="operator">-</span>rw<span class="operator">-</span>r<span class="comment">--r--. 1 root root 144 12月 21 15:20 000002_3</span></span><br><span class="line"><span class="operator">-</span>rw<span class="operator">-</span>r<span class="comment">--r--. 1 root root   0 12月 21 15:20 000003_2</span></span><br><span class="line">[root<span class="variable">@hadoop301</span> distribute<span class="operator">-</span><span class="keyword">by</span>]# cat <span class="number">000000</span>_3</span><br><span class="line"><span class="number">20</span>SMITH800<span class="number">.0</span></span><br><span class="line"><span class="number">20</span>ADAMS1100<span class="number">.0</span></span><br><span class="line"><span class="number">20</span>JONES2975<span class="number">.0</span></span><br><span class="line"><span class="number">20</span>FORD3000<span class="number">.0</span></span><br><span class="line"><span class="number">20</span>SCOTT3000<span class="number">.0</span></span><br><span class="line">[root<span class="variable">@hadoop301</span> distribute<span class="operator">-</span><span class="keyword">by</span>]# cat <span class="number">000002</span>_3</span><br><span class="line"><span class="number">30</span>JAMES950<span class="number">.0</span></span><br><span class="line"><span class="number">30</span>MARTIN1250<span class="number">.0</span></span><br><span class="line"><span class="number">30</span>WARD1250<span class="number">.0</span></span><br><span class="line"><span class="number">10</span>MILLER1300<span class="number">.0</span></span><br><span class="line"><span class="number">30</span>TURNER1500<span class="number">.0</span></span><br><span class="line"><span class="number">30</span>ALLEN1600<span class="number">.0</span></span><br><span class="line"><span class="number">10</span>CLARK2450<span class="number">.0</span></span><br><span class="line"><span class="number">30</span>BLAKE2850<span class="number">.0</span></span><br><span class="line"><span class="number">10</span>KING5000<span class="number">.0</span></span><br><span class="line">[root<span class="variable">@hadoop301</span> distribute<span class="operator">-</span><span class="keyword">by</span>]#</span><br></pre></td></tr></table></figure>



<p>6）Cluster By</p>
<p>当distribute by和 sorts by字段相同时，可以使用cluster by方式。</p>
<p>cluster by除了具有distribute by的功能外还兼具sort by的功能。但是排序只能是升序排序，不能指定排序规则为ASC 或者DESC。</p>
<h4 id="十、分区表"><a href="#十、分区表" class="headerlink" title="十、分区表"></a>十、分区表</h4><p>（1）分区表</p>
<p>​		分区表实际上就是对应一个HDFS文件系统上的独立的文件夹，该文件夹下是该分区所有的数据文件。<strong>Hive中的分区就是分目录</strong>，把一个大的数据集根据业务需要分割成小的数据集。在查询时通过 WHERE子句中的表达式选择查询所需要的指定的分区，这样的查询效率会提高很多。</p>
<p>（2）分区表基本操作</p>
<ol>
<li>引入分区表（需要根据日期对日志进行管理，通过部门信息模拟</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 创建dept_par表</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept_par(deptno <span class="type">int</span>, dname string, loc string) partitioned <span class="keyword">by</span> (<span class="keyword">day</span> string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.87</span> seconds</span><br><span class="line"></span><br><span class="line"># 分别导入分区数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept1.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-21&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.348</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept2.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-22&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.096</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept3.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-23&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.539</span> seconds</span><br><span class="line"></span><br><span class="line"># 查看数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.678</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par <span class="keyword">where</span> <span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-22&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.853</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par <span class="keyword">where</span> deptno<span class="operator">=</span><span class="number">10</span> <span class="keyword">or</span> deptno<span class="operator">=</span><span class="number">20</span>;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.194</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 创建dept_par表</span><br><span class="line">hive (default)&gt; create table if not exists dept_par(deptno int, dname string, loc string) partitioned by (day string) row format delimited fields terminated by &#x27;\t&#x27;;</span><br><span class="line"></span><br><span class="line"># 增加分区</span><br><span class="line">hive (default)&gt; alter table dept_par add partition(day=&#x27;2023-12-24&#x27;) partition(day=&#x27;2023-12-25&#x27;) partition(day=&#x27;2023-12-26&#x27;);</span><br></pre></td></tr></table></figure>





<ol start="2">
<li>增加分区</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> dept_par <span class="keyword">add</span> <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-24&#x27;</span>) <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-25&#x27;</span>) <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-26&#x27;</span>);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.232</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231221163927708.png" alt="image-20231221163927708"></p>
<ol start="3">
<li>删除分区</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> dept_par <span class="keyword">drop</span> <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-26&#x27;</span>), <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-25&#x27;</span>);</span><br><span class="line">Dropped the <span class="keyword">partition</span> <span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line">Dropped the <span class="keyword">partition</span> <span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.312</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：添多个分区中间用空格，删除多个分区中间用‘，’逗号</strong></p>
<ol start="4">
<li>查看分区有多少个</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.141</span> seconds, Fetched: <span class="number">4</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="5">
<li>查看分区表结构</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">desc</span> formatted dept_par;</span><br><span class="line">OK</span><br><span class="line">col_name        data_type       comment</span><br><span class="line"># col_name              data_type               comment</span><br><span class="line">deptno                  <span class="type">int</span></span><br><span class="line">dname                   string</span><br><span class="line">loc                     string</span><br><span class="line"></span><br><span class="line"># <span class="keyword">Partition</span> Information</span><br><span class="line"># col_name              data_type               comment</span><br><span class="line"><span class="keyword">day</span>                     string</span><br><span class="line"></span><br><span class="line"># Detailed <span class="keyword">Table</span> Information</span><br><span class="line">Database:               <span class="keyword">default</span></span><br><span class="line">OwnerType:              <span class="keyword">USER</span></span><br><span class="line">Owner:                  root</span><br><span class="line">CreateTime:             Thu <span class="type">Dec</span> <span class="number">21</span> <span class="number">16</span>:<span class="number">23</span>:<span class="number">41</span> CST <span class="number">2023</span></span><br><span class="line">LastAccessTime:         <span class="literal">UNKNOWN</span></span><br><span class="line">Retention:              <span class="number">0</span></span><br><span class="line">Location:               hdfs:<span class="operator">/</span><span class="operator">/</span>hadoop301:<span class="number">8020</span><span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par</span><br><span class="line"><span class="keyword">Table</span> Type:             MANAGED_TABLE</span><br><span class="line"><span class="keyword">Table</span> Parameters:</span><br><span class="line">        bucketing_version       <span class="number">2</span></span><br><span class="line">        numFiles                <span class="number">3</span></span><br><span class="line">        numPartitions           <span class="number">4</span></span><br><span class="line">        numRows                 <span class="number">0</span></span><br><span class="line">        rawDataSize             <span class="number">0</span></span><br><span class="line">        totalSize               <span class="number">94</span></span><br><span class="line">        transient_lastDdlTime   <span class="number">1703147021</span></span><br><span class="line"></span><br><span class="line"># Storage Information</span><br><span class="line">SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe</span><br><span class="line">InputFormat:            org.apache.hadoop.mapred.TextInputFormat</span><br><span class="line">OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat</span><br><span class="line">Compressed:             <span class="keyword">No</span></span><br><span class="line">Num Buckets:            <span class="number">-1</span></span><br><span class="line">Bucket Columns:         []</span><br><span class="line">Sort Columns:           []</span><br><span class="line">Storage <span class="keyword">Desc</span> Params:</span><br><span class="line">        field.delim             \t</span><br><span class="line">        serialization.format    \t</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.178</span> seconds, Fetched: <span class="number">38</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（3）创建二级分区表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 创建二级分区表</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> dept_par2(deptno <span class="type">int</span>, dname string, loc string) partitioned <span class="keyword">by</span> (<span class="keyword">day</span> string, <span class="keyword">hour</span> string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.132</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 分别导入数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept1.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par2 <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-21&#x27;</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="string">&#x27;11&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par2 <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="number">11</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.551</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept2.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par2 <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-22&#x27;</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="string">&#x27;12&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par2 <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="number">12</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.546</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept3.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par2 <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-23&#x27;</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="string">&#x27;13&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par2 <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span>, <span class="keyword">hour</span><span class="operator">=</span><span class="number">13</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.558</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 查看数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par2;</span><br><span class="line">OK</span><br><span class="line">dept_par2.deptno        dept_par2.dname dept_par2.loc   dept_par2.day   dept_par2.hour</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span>      <span class="number">11</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span>      <span class="number">11</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span>      <span class="number">13</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span>      <span class="number">13</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.169</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par2 <span class="keyword">where</span> <span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-22&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">dept_par2.deptno        dept_par2.dname dept_par2.loc   dept_par2.day   dept_par2.hour</span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.253</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par2 <span class="keyword">where</span> <span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-22&#x27;</span> <span class="keyword">and</span> <span class="keyword">hour</span><span class="operator">=</span><span class="string">&#x27;12&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line">dept_par2.deptno        dept_par2.dname dept_par2.loc   dept_par2.day   dept_par2.hour</span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span>      <span class="number">12</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.151</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<ol>
<li>把数据直接上传到分区目录上，让分区表和数据产生关联的三种方式</li>
</ol>
<p>1）方式一：上传数据后修复</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 上传数据</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]# hdfs dfs <span class="operator">-</span>mkdir <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par<span class="operator">/</span><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]# hdfs dfs <span class="operator">-</span>put dept1.txt <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par<span class="operator">/</span><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]#</span><br><span class="line"></span><br><span class="line"># 查看数据发现没有刚上传的数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.307</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 也没有看见刚上传的分区</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.17</span> seconds, Fetched: <span class="number">4</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 执行修复命令</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> msck repair <span class="keyword">table</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">Partitions <span class="keyword">not</span> <span class="keyword">in</span> metastore:    dept_par:<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line">Repair: Added <span class="keyword">partition</span> <span class="keyword">to</span> metastore dept_par:<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.182</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line"></span><br><span class="line"># 再次查看数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.142</span> seconds, Fetched: <span class="number">8</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.091</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271707163.png" alt="image-20231221172309210"></p>
<p>2）上传后添加分区</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 上传数据</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]# hdfs dfs <span class="operator">-</span>put dept1.txt <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par<span class="operator">/</span><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]# hdfs dfs <span class="operator">-</span>put dept1.txt <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par<span class="operator">/</span><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]#</span><br><span class="line"></span><br><span class="line"># 查看数据发现没有刚上传的数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.201</span> seconds, Fetched: <span class="number">8</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.088</span> seconds, Fetched: <span class="number">5</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 添加分区</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">alter table</span> dept_par <span class="keyword">add</span> <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-26&#x27;</span>);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.11</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 查看数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.2</span> seconds, Fetched: <span class="number">10</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.109</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>3）创建文件夹后 load 数据到分区</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 创建目录</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]# hdfs dfs <span class="operator">-</span>mkdir <span class="operator">/</span><span class="keyword">user</span><span class="operator">/</span>hive<span class="operator">/</span>warehouse<span class="operator">/</span>dept_par<span class="operator">/</span><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-27</span></span><br><span class="line">SLF4J: Failed <span class="keyword">to</span> load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.</span><br><span class="line">SLF4J: Defaulting <span class="keyword">to</span> <span class="keyword">no</span><span class="operator">-</span>operation (NOP) logger implementation</span><br><span class="line">SLF4J: See http:<span class="operator">/</span><span class="operator">/</span>www.slf4j.org<span class="operator">/</span>codes.html#StaticLoggerBinder <span class="keyword">for</span> further details.</span><br><span class="line">[root<span class="variable">@hadoop301</span> data]#</span><br><span class="line"></span><br><span class="line">#上传数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/dept1.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> dept_par <span class="keyword">partition</span>(<span class="keyword">day</span><span class="operator">=</span><span class="string">&#x27;2023-12-27&#x27;</span>);</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.dept_par <span class="keyword">partition</span> (<span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-27</span>)</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.849</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># 查看数据</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept_par;</span><br><span class="line">OK</span><br><span class="line">dept_par.deptno dept_par.dname  dept_par.loc    dept_par.day</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="number">50</span>      TEST    <span class="number">2000</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">60</span>      DEV     <span class="number">1900</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-27</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span>    <span class="number">2023</span><span class="number">-12</span><span class="number">-27</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.209</span> seconds, Fetched: <span class="number">12</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> partitions dept_par;</span><br><span class="line">OK</span><br><span class="line"><span class="keyword">partition</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-21</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-23</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-24</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-25</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-26</span></span><br><span class="line"><span class="keyword">day</span><span class="operator">=</span><span class="number">2023</span><span class="number">-12</span><span class="number">-27</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.104</span> seconds, Fetched: <span class="number">7</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（4）动态分区</p>
<ol>
<li>开启动态分区参数设置</li>
</ol>
<p>1）开启动态分区功能（默认 true ，开启）</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive.exec.dynamic.partition=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>2）设置为非严格模式（动态分区的模式，默认strict，表示必须指定至少一个分区为静态分区，nonstrict模式表示允许所有的分区字段都可以使用动态分区。)</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> hive.exec.dynamic.partition.mode=nonstrict;</span><br></pre></td></tr></table></figure>

<p>3）在所有执行MR的节点上，最大一共可以创建多少个动态分区。默认1000</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive.exec.max.dynamic.partitions=1000</span><br></pre></td></tr></table></figure>

<p>4）**在每个执行MR的节点上，最大可以创建多少个动态分区。**该参数需要根据实际的数据来设定。比如:源数据中包含了一年的数据，即 day字段有365 个值，那么该参数就需要设置成大于365，如果使用默认值100，则会报错。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive.exec.max.dynamic.partitions.pernode=100</span><br></pre></td></tr></table></figure>

<p>5）整个MR Job 中，最大可以创建多少个HDFS 文件。默认100000</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive.exec.max.created.files=100000</span><br></pre></td></tr></table></figure>

<p>6）当有空分区生成时，是否抛出异常。一般不需要设置。默认falsee</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive.error.on.empty.partition=<span class="literal">false</span></span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这个为静态分区</span></span><br><span class="line">hive (default)&gt; create table dept_no_par(dname string, loc string) partitioned by (deptno int) row format delimited fieldt<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">Time taken: 0.256 seconds</span></span><br><span class="line"><span class="string">hive (default)&gt; insert into table dept_no_par partition(deptno=&#x27;</span>70<span class="string">&#x27;) select dname, loc from dept;</span></span><br><span class="line"><span class="string">Query ID = root_20231221180145_d095d411-7a37-4871-b5d8-84bf6c2e3d31</span></span><br><span class="line"><span class="string">Total jobs = 3</span></span><br><span class="line"><span class="string">Launching Job 1 out of 3</span></span><br><span class="line"><span class="string">Number of reduce tasks not specified. Estimated from input data size: 1</span></span><br><span class="line"><span class="string">In order to change the average load for a reducer (in bytes):</span></span><br><span class="line"><span class="string">  set hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span></span><br><span class="line"><span class="string">In order to limit the maximum number of reducers:</span></span><br><span class="line"><span class="string">  set hive.exec.reducers.max=&lt;number&gt;</span></span><br><span class="line"><span class="string">In order to set a constant number of reducers:</span></span><br><span class="line"><span class="string">  set mapreduce.job.reduces=&lt;number&gt;</span></span><br><span class="line"><span class="string">Starting Job = job_1703140954122_0012, Tracking URL = http://hadoop302:8088/proxy/application_1703140954122_0012/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703140954122_0012</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1</span></span><br><span class="line"><span class="string">2023-12-21 18:01:56,356 Stage-1 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 18:02:18,082 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 4.26 sec</span></span><br><span class="line"><span class="string">2023-12-21 18:02:27,368 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 7.6 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 7 seconds 600 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703140954122_0012</span></span><br><span class="line"><span class="string">Stage-4 is selected by condition resolver.</span></span><br><span class="line"><span class="string">Stage-3 is filtered out by condition resolver.</span></span><br><span class="line"><span class="string">Stage-5 is filtered out by condition resolver.</span></span><br><span class="line"><span class="string">Moving data to directory hdfs://hadoop301:8020/user/hive/warehouse/dept_no_par/deptno=70/.hive-staging_hive_2023-12-21_18-01-45_026_4413549038787609633-1/-ext-10000</span></span><br><span class="line"><span class="string">Loading data to table default.dept_no_par partition (deptno=70)</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-1: Map: 1  Reduce: 1   Cumulative CPU: 7.6 sec   HDFS Read: 14309 HDFS Write: 346 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 7 seconds 600 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">_col0   _col1</span></span><br><span class="line"><span class="string">Time taken: 45.237 seconds</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string">hive (default)&gt; select * from dept_no_par;</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">dept_no_par.dname       dept_no_par.loc dept_no_par.deptno</span></span><br><span class="line"><span class="string">ACCOUNTING      1700    70</span></span><br><span class="line"><span class="string">RESEARCH        1800    70</span></span><br><span class="line"><span class="string">SALES   1900    70</span></span><br><span class="line"><span class="string">OPERATIONS      1700    70</span></span><br><span class="line"><span class="string">Time taken: 0.24 seconds, Fetched: 4 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 改为动态分区</span></span><br><span class="line"><span class="string">hive (default)&gt; insert into table dept_no_par partition(deptno) select dname, loc, deptno from dept;</span></span><br><span class="line"><span class="string">FAILED: SemanticException [Error 10096]: Dynamic partition strict mode requires at least one static partition column. To turn this off set hive.exec.dynamic.partition.mode=nonstrict</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 修改退出严格模式</span></span><br><span class="line"><span class="string">hive (default)&gt; set hive.exec.dynamic.partition.mode=nonstrict;</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 修改成动态分区</span></span><br><span class="line"><span class="string">hive (default)&gt; insert into table dept_no_par partition(deptno) select dname, loc, deptno from dept;</span></span><br><span class="line"><span class="string">Query ID = root_20231221181339_5eb7bd8a-3cd3-4051-92a9-426ba8c2470c</span></span><br><span class="line"><span class="string">Total jobs = 3</span></span><br><span class="line"><span class="string">Launching Job 1 out of 3</span></span><br><span class="line"><span class="string">Number of reduce tasks not specified. Estimated from input data size: 1</span></span><br><span class="line"><span class="string">In order to change the average load for a reducer (in bytes):</span></span><br><span class="line"><span class="string">  set hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span></span><br><span class="line"><span class="string">In order to limit the maximum number of reducers:</span></span><br><span class="line"><span class="string">  set hive.exec.reducers.max=&lt;number&gt;</span></span><br><span class="line"><span class="string">In order to set a constant number of reducers:</span></span><br><span class="line"><span class="string">  set mapreduce.job.reduces=&lt;number&gt;</span></span><br><span class="line"><span class="string">Starting Job = job_1703140954122_0015, Tracking URL = http://hadoop302:8088/proxy/application_1703140954122_0015/</span></span><br><span class="line"><span class="string">Kill Command = /opt/module/hadoop/bin/mapred job  -kill job_1703140954122_0015</span></span><br><span class="line"><span class="string">Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1</span></span><br><span class="line"><span class="string">2023-12-21 18:13:47,757 Stage-1 map = 0%,  reduce = 0%</span></span><br><span class="line"><span class="string">2023-12-21 18:14:09,609 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 5.41 sec</span></span><br><span class="line"><span class="string">2023-12-21 18:14:23,024 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 8.48 sec</span></span><br><span class="line"><span class="string">MapReduce Total cumulative CPU time: 8 seconds 480 msec</span></span><br><span class="line"><span class="string">Ended Job = job_1703140954122_0015</span></span><br><span class="line"><span class="string">Stage-4 is selected by condition resolver.</span></span><br><span class="line"><span class="string">Stage-3 is filtered out by condition resolver.</span></span><br><span class="line"><span class="string">Stage-5 is filtered out by condition resolver.</span></span><br><span class="line"><span class="string">Moving data to directory hdfs://hadoop301:8020/user/hive/warehouse/dept_no_par/.hive-staging_hive_2023-12-21_18-13-39_151_1212070029676765042-1/-ext-10000</span></span><br><span class="line"><span class="string">Loading data to table default.dept_no_par partition (deptno=null)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         Time taken to load dynamic partitions: 0.574 seconds</span></span><br><span class="line"><span class="string">         Time taken for adding to write entity : 0.0 seconds</span></span><br><span class="line"><span class="string">MapReduce Jobs Launched:</span></span><br><span class="line"><span class="string">Stage-Stage-1: Map: 1  Reduce: 1   Cumulative CPU: 8.48 sec   HDFS Read: 14744 HDFS Write: 781 SUCCESS</span></span><br><span class="line"><span class="string">Total MapReduce CPU Time Spent: 8 seconds 480 msec</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">_col0   _col1   _col2</span></span><br><span class="line"><span class="string">Time taken: 46.932 seconds</span></span><br><span class="line"><span class="string">hive (default)&gt; select * from dept_no_par;</span></span><br><span class="line"><span class="string">OK</span></span><br><span class="line"><span class="string">dept_no_par.dname       dept_no_par.loc dept_no_par.deptno</span></span><br><span class="line"><span class="string">ACCOUNTING      1700    10</span></span><br><span class="line"><span class="string">RESEARCH        1800    20</span></span><br><span class="line"><span class="string">SALES   1900    30</span></span><br><span class="line"><span class="string">OPERATIONS      1700    40</span></span><br><span class="line"><span class="string">ACCOUNTING      1700    70</span></span><br><span class="line"><span class="string">RESEARCH        1800    70</span></span><br><span class="line"><span class="string">SALES   1900    70</span></span><br><span class="line"><span class="string">OPERATIONS      1700    70</span></span><br><span class="line"><span class="string">Time taken: 0.149 seconds, Fetched: 8 row(s)</span></span><br><span class="line"><span class="string">hive (default)&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="十一、分桶表"><a href="#十一、分桶表" class="headerlink" title="十一、分桶表"></a>十一、分桶表</h4><p>​		分区提供一个隔离数据和优化查询的便利方式。不过，并非所有的数据集都可形成合理的分区。对于一张表或者分区，Hive可以进一步组织成桶，也就是更为细粒度的数据范围划分。</p>
<ul>
<li>分桶是将数据集分解成更容易管理的若干部分的另一个技术。</li>
<li><strong>分区针对的是数据的存储路径;分桶针对的是数据文件。</strong></li>
</ul>
<p>（1）准备数据并分发</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 data]# vim stu.txt</span><br><span class="line">[root@hadoop301 data]# <span class="built_in">cat</span> stu.txt</span><br><span class="line">1001    ss1</span><br><span class="line">1002    ss2</span><br><span class="line">1003    ss3</span><br><span class="line">1004    ss4</span><br><span class="line">1005    ss5</span><br><span class="line">1006    ss6</span><br><span class="line">1007    ss7</span><br><span class="line">1008    ss8</span><br><span class="line">1009    ss9</span><br><span class="line">10010   ss10</span><br><span class="line">10011   ss11</span><br><span class="line">10012   ss12</span><br><span class="line">10013   ss13</span><br><span class="line">10014   ss14</span><br><span class="line">10015   ss15</span><br><span class="line">10016   ss16</span><br><span class="line">[root@hadoop301 data]# xsync stu.txt</span><br><span class="line">==================== hadoop301 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 46 bytes  received 12 bytes  38.67 bytes/sec</span><br><span class="line">total size is 158  speedup is 2.72</span><br><span class="line">==================== hadoop302 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">stu.txt</span><br><span class="line"></span><br><span class="line">sent 251 bytes  received 35 bytes  572.00 bytes/sec</span><br><span class="line">total size is 158  speedup is 0.55</span><br><span class="line">==================== hadoop303 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">stu.txt</span><br><span class="line"></span><br><span class="line">sent 251 bytes  received 35 bytes  572.00 bytes/sec</span><br><span class="line">total size is 158  speedup is 0.55</span><br><span class="line">[root@hadoop301 data]#</span><br></pre></td></tr></table></figure>



<p>（2）创建分桶表</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; CREATE EXTERNAL TABLE stu_buck(<span class="built_in">id</span> int, name string) CLUSTERED BY(<span class="built_in">id</span>) INTO 4 BUCKETS ROW FORMAT DELIMITED FIELDS TERMINATED BY <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">OK</span><br><span class="line">Time taken: 0.085 seconds</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>





<p>（3）查看表结构</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; desc formatted stu_buck;</span><br><span class="line">OK</span><br><span class="line">col_name        data_type       comment</span><br><span class="line"><span class="comment"># col_name              data_type               comment</span></span><br><span class="line"><span class="built_in">id</span>                      int</span><br><span class="line">name                    string</span><br><span class="line"></span><br><span class="line"><span class="comment"># Detailed Table Information</span></span><br><span class="line">Database:               default</span><br><span class="line">OwnerType:              USER</span><br><span class="line">Owner:                  root</span><br><span class="line">CreateTime:             Fri Dec 22 11:12:34 CST 2023</span><br><span class="line">LastAccessTime:         UNKNOWN</span><br><span class="line">Retention:              0</span><br><span class="line">Location:               hdfs://hadoop301:8020/user/hive/warehouse/stu_buck</span><br><span class="line">Table Type:             EXTERNAL_TABLE</span><br><span class="line">Table Parameters:</span><br><span class="line">        COLUMN_STATS_ACCURATE   &#123;\&quot;BASIC_STATS\&quot;:\&quot;<span class="literal">true</span>\&quot;,\&quot;COLUMN_STATS\&quot;:&#123;\&quot;<span class="built_in">id</span>\&quot;:\&quot;<span class="literal">true</span>\&quot;,\&quot;name\&quot;:\&quot;<span class="literal">true</span>\&quot;&#125;&#125;</span><br><span class="line">        EXTERNAL                TRUE</span><br><span class="line">        bucketing_version       2</span><br><span class="line">        numFiles                4</span><br><span class="line">        numRows                 16</span><br><span class="line">        rawDataSize             142</span><br><span class="line">        totalSize               158</span><br><span class="line">        transient_lastDdlTime   1703214861</span><br><span class="line"></span><br><span class="line"><span class="comment"># Storage Information</span></span><br><span class="line">SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe</span><br><span class="line">InputFormat:            org.apache.hadoop.mapred.TextInputFormat</span><br><span class="line">OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat</span><br><span class="line">Compressed:             No</span><br><span class="line">Num Buckets:            4</span><br><span class="line">Bucket Columns:         [<span class="built_in">id</span>]</span><br><span class="line">Sort Columns:           []</span><br><span class="line">Storage Desc Params:</span><br><span class="line">        field.delim             \t</span><br><span class="line">        serialization.format    \t</span><br><span class="line">Time taken: 0.063 seconds, Fetched: 34 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>





<p>（4）导入数据到分桶表中， </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">INSERT INTO</span> <span class="keyword">TABLE</span> stu_buck <span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> stu_buck1;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231222111312_0e72dc21<span class="operator">-</span>d1c4<span class="number">-4851</span><span class="number">-9</span>b10<span class="number">-372374</span>bbbf1a</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">2</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">4</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703212836900_0007, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703212836900_0007<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703212836900_0007</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">4</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">21</span>,<span class="number">931</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">28</span>,<span class="number">115</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.43</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">36</span>,<span class="number">457</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">25</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.46</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">43</span>,<span class="number">659</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">50</span><span class="operator">%</span>, Cumulative CPU <span class="number">10.55</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">49</span>,<span class="number">819</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">75</span><span class="operator">%</span>, Cumulative CPU <span class="number">10.55</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">13</span>:<span class="number">51</span>,<span class="number">892</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">13.79</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">13</span> seconds <span class="number">790</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703212836900_0007</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.stu_buck</span><br><span class="line">Launching Job <span class="number">2</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">2</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703212836900_0008, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703212836900_0008<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703212836900_0008</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-3</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">14</span>:<span class="number">06</span>,<span class="number">479</span> Stage<span class="number">-3</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">14</span>:<span class="number">12</span>,<span class="number">736</span> Stage<span class="number">-3</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.81</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">11</span>:<span class="number">14</span>:<span class="number">18</span>,<span class="number">947</span> Stage<span class="number">-3</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">7.8</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">7</span> seconds <span class="number">800</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703212836900_0008</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">4</span>   Cumulative CPU: <span class="number">13.79</span> sec   HDFS Read: <span class="number">32975</span> HDFS Write: <span class="number">1232</span> SUCCESS</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-3</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">7.8</span> sec   HDFS Read: <span class="number">12152</span> HDFS Write: <span class="number">336</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">21</span> seconds <span class="number">590</span> msec</span><br><span class="line">OK</span><br><span class="line">stu_buck1.id    stu_buck1.name</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">68.992</span> seconds</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601271707600.png" alt="image-20231222111925911"></p>
<p>（5）分桶表操作需要注意的事项</p>
<ol>
<li><p>reduce的个数设置为-1,让Job自行决定需要用多少个reduce或者将reduce 的个数设置为大于等于分桶表的桶数</p>
</li>
<li><p>从hdfs中 load数据到分桶表中，避免本地文件找不到问题</p>
</li>
<li><p>不要使用本地模式</p>
</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">load data <span class="built_in">local</span> inpath <span class="string">&#x27;/opt/module/data/stu.txt&#x27;</span> into table stu_buck1;</span><br></pre></td></tr></table></figure>



<p>（6）抽样查询</p>
<p>对于非常大的数据集,有时用户需要使用的是一个具有代表性的查询结果而不是全部结果。Hive可以通过对表进行抽样来满足这个需求。</p>
<p>语法:TABLESAMPLE(BUCKET x OUT OF y)</p>
<p>查询表 stu_buck 中的数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu_buck <span class="keyword">tablesample</span>(bucket <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">4</span> <span class="keyword">on</span> id);</span><br><span class="line">OK</span><br><span class="line">stu_buck.id     stu_buck.name</span><br><span class="line"><span class="number">1004</span>    ss4</span><br><span class="line"><span class="number">1009</span>    ss9</span><br><span class="line"><span class="number">10010</span>   ss10</span><br><span class="line"><span class="number">1002</span>    ss2</span><br><span class="line"><span class="number">1003</span>    ss3</span><br><span class="line"><span class="number">10015</span>   ss15</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.207</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意:x的值必须小于等于y的值</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu_buck <span class="keyword">tablesample</span>(bucket <span class="number">4</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span> <span class="keyword">on</span> id);</span><br><span class="line">FAILED: SemanticException [Error <span class="number">10061</span>]: Numerator should <span class="keyword">not</span> be bigger than denominator <span class="keyword">in</span> sample clause <span class="keyword">for</span> <span class="keyword">table</span> stu_buck</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="十二、函数"><a href="#十二、函数" class="headerlink" title="十二、函数"></a>十二、函数</h4><p>（1）系统内置函数</p>
<ol>
<li>查看系统自带的函数</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">show</span> functions;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line"><span class="operator">!</span></span><br><span class="line"><span class="operator">!=</span></span><br><span class="line">$sum0</span><br><span class="line"><span class="operator">%</span></span><br><span class="line"><span class="operator">&amp;</span></span><br><span class="line"><span class="operator">*</span></span><br><span class="line"><span class="operator">+</span></span><br><span class="line"><span class="operator">-</span></span><br><span class="line"><span class="operator">/</span></span><br><span class="line"><span class="operator">&lt;</span></span><br><span class="line"><span class="operator">&lt;=</span></span><br><span class="line"><span class="operator">&lt;=&gt;</span></span><br><span class="line"><span class="operator">&lt;&gt;</span></span><br><span class="line"><span class="operator">=</span></span><br><span class="line"><span class="operator">=</span><span class="operator">=</span></span><br><span class="line"><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&gt;=</span></span><br><span class="line"><span class="operator">^</span></span><br><span class="line">abs</span><br><span class="line">acos</span><br><span class="line">add_months</span><br><span class="line">aes_decrypt</span><br><span class="line">aes_encrypt</span><br><span class="line"><span class="keyword">and</span></span><br><span class="line"><span class="keyword">array</span></span><br><span class="line">array_contains</span><br><span class="line">ascii</span><br><span class="line">asin</span><br><span class="line">assert_true</span><br><span class="line">assert_true_oom</span><br><span class="line">atan</span><br><span class="line">avg</span><br><span class="line">base64</span><br><span class="line"><span class="keyword">between</span></span><br><span class="line">bin</span><br><span class="line">bloom_filter</span><br><span class="line">bround</span><br><span class="line">cardinality_violation</span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">cbrt</span><br><span class="line">ceil</span><br><span class="line">ceiling</span><br><span class="line"><span class="keyword">char_length</span></span><br><span class="line"><span class="keyword">character_length</span></span><br><span class="line">chr</span><br><span class="line">coalesce</span><br><span class="line">collect_list</span><br><span class="line">collect_set</span><br><span class="line">compute_stats</span><br><span class="line">concat</span><br><span class="line">concat_ws</span><br><span class="line">context_ngrams</span><br><span class="line">conv</span><br><span class="line">corr</span><br><span class="line">cos</span><br><span class="line">count</span><br><span class="line">covar_pop</span><br><span class="line">covar_samp</span><br><span class="line">crc32</span><br><span class="line">create_union</span><br><span class="line">cume_dist</span><br><span class="line">current_authorizer</span><br><span class="line">current_database</span><br><span class="line"><span class="built_in">current_date</span></span><br><span class="line">current_groups</span><br><span class="line"><span class="built_in">current_timestamp</span></span><br><span class="line"><span class="built_in">current_user</span></span><br><span class="line">date_add</span><br><span class="line">date_format</span><br><span class="line">date_sub</span><br><span class="line">datediff</span><br><span class="line"><span class="keyword">day</span></span><br><span class="line">dayofmonth</span><br><span class="line">dayofweek</span><br><span class="line">decode</span><br><span class="line">degrees</span><br><span class="line">dense_rank</span><br><span class="line">div</span><br><span class="line">e</span><br><span class="line">elt</span><br><span class="line">encode</span><br><span class="line">enforce_constraint</span><br><span class="line">exp</span><br><span class="line">explode</span><br><span class="line">extract_union</span><br><span class="line">factorial</span><br><span class="line">field</span><br><span class="line">find_in_set</span><br><span class="line">first_value</span><br><span class="line">floor</span><br><span class="line">floor_day</span><br><span class="line">floor_hour</span><br><span class="line">floor_minute</span><br><span class="line">floor_month</span><br><span class="line">floor_quarter</span><br><span class="line">floor_second</span><br><span class="line">floor_week</span><br><span class="line">floor_year</span><br><span class="line">format_number</span><br><span class="line">from_unixtime</span><br><span class="line">from_utc_timestamp</span><br><span class="line">get_json_object</span><br><span class="line">get_splits</span><br><span class="line">greatest</span><br><span class="line"><span class="keyword">grouping</span></span><br><span class="line">hash</span><br><span class="line">hex</span><br><span class="line">histogram_numeric</span><br><span class="line"><span class="keyword">hour</span></span><br><span class="line">if</span><br><span class="line"><span class="keyword">in</span></span><br><span class="line">in_bloom_filter</span><br><span class="line">in_file</span><br><span class="line">index</span><br><span class="line">initcap</span><br><span class="line">inline</span><br><span class="line">instr</span><br><span class="line">internal_interval</span><br><span class="line">isfalse</span><br><span class="line">isnotfalse</span><br><span class="line">isnotnull</span><br><span class="line">isnottrue</span><br><span class="line">isnull</span><br><span class="line">istrue</span><br><span class="line">java_method</span><br><span class="line">json_tuple</span><br><span class="line">lag</span><br><span class="line">last_day</span><br><span class="line">last_value</span><br><span class="line">lcase</span><br><span class="line">lead</span><br><span class="line">least</span><br><span class="line">length</span><br><span class="line">levenshtein</span><br><span class="line"><span class="keyword">like</span></span><br><span class="line">likeall</span><br><span class="line">likeany</span><br><span class="line">ln</span><br><span class="line">locate</span><br><span class="line">log</span><br><span class="line">log10</span><br><span class="line">log2</span><br><span class="line">logged_in_user</span><br><span class="line">lower</span><br><span class="line">lpad</span><br><span class="line">ltrim</span><br><span class="line">map</span><br><span class="line">map_keys</span><br><span class="line">map_values</span><br><span class="line">mask</span><br><span class="line">mask_first_n</span><br><span class="line">mask_hash</span><br><span class="line">mask_last_n</span><br><span class="line">mask_show_first_n</span><br><span class="line">mask_show_last_n</span><br><span class="line">matchpath</span><br><span class="line">max</span><br><span class="line">md5</span><br><span class="line">min</span><br><span class="line"><span class="keyword">minute</span></span><br><span class="line">mod</span><br><span class="line"><span class="keyword">month</span></span><br><span class="line">months_between</span><br><span class="line">murmur_hash</span><br><span class="line">named_struct</span><br><span class="line">negative</span><br><span class="line">next_day</span><br><span class="line">ngrams</span><br><span class="line">noop</span><br><span class="line">noopstreaming</span><br><span class="line">noopwithmap</span><br><span class="line">noopwithmapstreaming</span><br><span class="line"><span class="keyword">not</span></span><br><span class="line">ntile</span><br><span class="line">nullif</span><br><span class="line">nvl</span><br><span class="line"><span class="keyword">octet_length</span></span><br><span class="line"><span class="keyword">or</span></span><br><span class="line">parse_url</span><br><span class="line">parse_url_tuple</span><br><span class="line">percent_rank</span><br><span class="line">percentile</span><br><span class="line">percentile_approx</span><br><span class="line">pi</span><br><span class="line">pmod</span><br><span class="line">posexplode</span><br><span class="line">positive</span><br><span class="line">pow</span><br><span class="line">power</span><br><span class="line">printf</span><br><span class="line">quarter</span><br><span class="line">radians</span><br><span class="line">rand</span><br><span class="line">rank</span><br><span class="line">reflect</span><br><span class="line">reflect2</span><br><span class="line">regexp</span><br><span class="line">regexp_extract</span><br><span class="line">regexp_replace</span><br><span class="line">regr_avgx</span><br><span class="line">regr_avgy</span><br><span class="line">regr_count</span><br><span class="line">regr_intercept</span><br><span class="line">regr_r2</span><br><span class="line">regr_slope</span><br><span class="line">regr_sxx</span><br><span class="line">regr_sxy</span><br><span class="line">regr_syy</span><br><span class="line">repeat</span><br><span class="line">replace</span><br><span class="line">replicate_rows</span><br><span class="line">restrict_information_schema</span><br><span class="line">reverse</span><br><span class="line">rlike</span><br><span class="line">round</span><br><span class="line">row_number</span><br><span class="line">rpad</span><br><span class="line">rtrim</span><br><span class="line"><span class="keyword">second</span></span><br><span class="line">sentences</span><br><span class="line">sha</span><br><span class="line">sha1</span><br><span class="line">sha2</span><br><span class="line">shiftleft</span><br><span class="line">shiftright</span><br><span class="line">shiftrightunsigned</span><br><span class="line">sign</span><br><span class="line">sin</span><br><span class="line">size</span><br><span class="line">sort_array</span><br><span class="line">sort_array_by</span><br><span class="line">soundex</span><br><span class="line">space</span><br><span class="line">split</span><br><span class="line">sq_count_check</span><br><span class="line">sqrt</span><br><span class="line">stack</span><br><span class="line">std</span><br><span class="line">stddev</span><br><span class="line">stddev_pop</span><br><span class="line">stddev_samp</span><br><span class="line">str_to_map</span><br><span class="line">struct</span><br><span class="line">substr</span><br><span class="line">substring</span><br><span class="line">substring_index</span><br><span class="line">sum</span><br><span class="line">tan</span><br><span class="line">to_date</span><br><span class="line">to_epoch_milli</span><br><span class="line">to_unix_timestamp</span><br><span class="line">to_utc_timestamp</span><br><span class="line">translate</span><br><span class="line">trim</span><br><span class="line">trunc</span><br><span class="line">ucase</span><br><span class="line">udftoboolean</span><br><span class="line">udftobyte</span><br><span class="line">udftodouble</span><br><span class="line">udftofloat</span><br><span class="line">udftointeger</span><br><span class="line">udftolong</span><br><span class="line">udftoshort</span><br><span class="line">udftostring</span><br><span class="line">unbase64</span><br><span class="line">unhex</span><br><span class="line">unix_timestamp</span><br><span class="line">upper</span><br><span class="line">uuid</span><br><span class="line">var_pop</span><br><span class="line">var_samp</span><br><span class="line">variance</span><br><span class="line">version</span><br><span class="line">weekofyear</span><br><span class="line"><span class="keyword">when</span></span><br><span class="line">width_bucket</span><br><span class="line">windowingtablefunction</span><br><span class="line">xpath</span><br><span class="line">xpath_boolean</span><br><span class="line">xpath_double</span><br><span class="line">xpath_float</span><br><span class="line">xpath_int</span><br><span class="line">xpath_long</span><br><span class="line">xpath_number</span><br><span class="line">xpath_short</span><br><span class="line">xpath_string</span><br><span class="line"><span class="keyword">year</span></span><br><span class="line"><span class="operator">|</span></span><br><span class="line"><span class="operator">~</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.678</span> seconds, Fetched: <span class="number">289</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>显示自带函数的用法</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; desc <span class="keyword">function</span> upper;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">upper(str) - Returns str with all characters changed to uppercase</span><br><span class="line">Time taken: 0.024 seconds, Fetched: 1 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>详细显示自带函数的用法</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive (default)&gt; desc <span class="keyword">function</span> extended upper;</span><br><span class="line">OK</span><br><span class="line">tab_name</span><br><span class="line">upper(str) - Returns str with all characters changed to uppercase</span><br><span class="line">Synonyms: ucase</span><br><span class="line">Example:</span><br><span class="line">  &gt; SELECT upper(<span class="string">&#x27;Facebook&#x27;</span>) FROM src LIMIT 1;</span><br><span class="line">  <span class="string">&#x27;FACEBOOK&#x27;</span></span><br><span class="line">Function class:org.apache.hadoop.hive.ql.udf.generic.GenericUDFUpper</span><br><span class="line">Function <span class="built_in">type</span>:BUILTIN</span><br><span class="line">Time taken: 0.019 seconds, Fetched: 7 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>

<p>UDF: 一进一出</p>
<p>UDAF: 多近一出</p>
<p>UDTF:一进多出</p>
<p>“一”  代表的是输入数据的行数</p>
<p>（2）常见的函数</p>
<ol>
<li>空字段赋值</li>
</ol>
<p>1）函数说明</p>
<p>​		NVL:给值为NULL的数据赋值，它的格式是NVL( value，default_value)。它的功能是如果value为NULL，则NVL函数返回default_value的值，否则返回value的值，如果两个参数都为NULL ，则返回NULL。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果员工的comm 为NULL，则用-1代替</span></span><br><span class="line">hive (default)&gt; <span class="keyword">select</span> <span class="built_in">comm</span>, nvl(<span class="built_in">comm</span>, -1) from emp;</span><br><span class="line">OK</span><br><span class="line"><span class="built_in">comm</span>    _c1</span><br><span class="line">NULL    -1.0</span><br><span class="line">300.0   300.0</span><br><span class="line">500.0   500.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">1400.0  1400.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">0.0     0.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">NULL    -1.0</span><br><span class="line">Time taken: 2.696 seconds, Fetched: 14 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果员工的 comm NULL, 则用领导id代替</span></span><br><span class="line">hive (default)&gt; <span class="keyword">select</span> <span class="built_in">comm</span>, nvl(<span class="built_in">comm</span>, mgr) from emp;</span><br><span class="line">OK</span><br><span class="line"><span class="built_in">comm</span>    _c1</span><br><span class="line">NULL    7902.0</span><br><span class="line">300.0   300.0</span><br><span class="line">500.0   500.0</span><br><span class="line">NULL    7839.0</span><br><span class="line">1400.0  1400.0</span><br><span class="line">NULL    7839.0</span><br><span class="line">NULL    7829.0</span><br><span class="line">NULL    7566.0</span><br><span class="line">NULL    NULL</span><br><span class="line">0.0     0.0</span><br><span class="line">NULL    7788.0</span><br><span class="line">NULL    7698.0</span><br><span class="line">NULL    7566.0</span><br><span class="line">NULL    7782.0</span><br><span class="line">Time taken: 0.223 seconds, Fetched: 14 row(s)</span><br><span class="line">hive (default)&gt;</span><br></pre></td></tr></table></figure>



<p>（3）CASE WHEN THEN ELSEEND</p>
<p>1）数据准备</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 data]# vim emp_sex.txt</span><br><span class="line">[root@hadoop301 data]# <span class="built_in">cat</span> emp_sex.txt</span><br><span class="line">悟空    A       男</span><br><span class="line">大海    A       男</span><br><span class="line">宋宋    B       男</span><br><span class="line">凤姐    A       女</span><br><span class="line">婷姐    B       女</span><br><span class="line">婷婷    B       女</span><br><span class="line">[root@hadoop301 data]#</span><br></pre></td></tr></table></figure>



<p>2）创建emp_sex并导入数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">create table</span> emp_sex(name string, dept_id string, sex string) <span class="type">row</span> format delimited fields terminated <span class="keyword">by</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.527</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> load data <span class="keyword">local</span> inpath <span class="string">&#x27;/opt/module/data/emp_sex.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> emp_sex;</span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> default.emp_sex</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">1.516</span> seconds</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp_sex;</span><br><span class="line">OK</span><br><span class="line">emp_sex.name    emp_sex.dept_id emp_sex.sex</span><br><span class="line">悟空    A       男</span><br><span class="line">大海    A       男</span><br><span class="line">宋宋    B       男</span><br><span class="line">凤姐    A       女</span><br><span class="line">婷姐    B       女</span><br><span class="line">婷婷    B       女</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.195</span> seconds, Fetched: <span class="number">6</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 需求：求出不同部门男女个多少人？</span><br><span class="line"></span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> dept_id, <span class="built_in">sum</span>(<span class="keyword">case</span> sex <span class="keyword">when</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> maleCount, <span class="built_in">sum</span>(<span class="keyword">case</span> sex <span class="keyword">when</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>) <span class="keyword">as</span> femaleCount <span class="keyword">from</span> emp_sex <span class="keyword">group</span> <span class="keyword">by</span> dept_id;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231222152543_f463696b<span class="number">-9</span>ff4<span class="number">-4</span>cf9<span class="number">-99</span>ed<span class="operator">-</span>fb838f761082</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703225841549_0002, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703225841549_0002<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703225841549_0002</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">25</span>:<span class="number">53</span>,<span class="number">860</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">08</span>,<span class="number">376</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.67</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">26</span>:<span class="number">15</span>,<span class="number">666</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">8.19</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">8</span> seconds <span class="number">190</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703225841549_0002</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">8.19</span> sec   HDFS Read: <span class="number">15186</span> HDFS Write: <span class="number">123</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">8</span> seconds <span class="number">190</span> msec</span><br><span class="line">OK</span><br><span class="line">dept_id malecount       femalecount</span><br><span class="line">A       <span class="number">2</span>       <span class="number">1</span></span><br><span class="line">B       <span class="number">1</span>       <span class="number">2</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">32.891</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">或</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> dept_id, <span class="built_in">sum</span>(if(sex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>,<span class="number">1</span>,<span class="number">0</span>)) <span class="keyword">as</span> maleCount, <span class="built_in">sum</span>(if(sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>,<span class="number">1</span>,<span class="number">0</span>)) <span class="keyword">as</span> femaleCount <span class="keyword">from</span> emp_sex <span class="keyword">group</span> byept_id;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231222152953_a484d6e6<span class="number">-0</span>f57<span class="number">-49</span>f9<span class="number">-98</span>c8<span class="operator">-</span>c04acab2c9f0</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks <span class="keyword">not</span> specified. Estimated <span class="keyword">from</span> input data size: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703225841549_0003, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703225841549_0003<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703225841549_0003</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">30</span>:<span class="number">02</span>,<span class="number">661</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">30</span>:<span class="number">10</span>,<span class="number">897</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.88</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">30</span>:<span class="number">18</span>,<span class="number">105</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.88</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">30</span>:<span class="number">19</span>,<span class="number">125</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">2.88</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">15</span>:<span class="number">30</span>:<span class="number">26</span>,<span class="number">347</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.37</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">6</span> seconds <span class="number">370</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703225841549_0003</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">6.37</span> sec   HDFS Read: <span class="number">15182</span> HDFS Write: <span class="number">123</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">6</span> seconds <span class="number">370</span> msec</span><br><span class="line">OK</span><br><span class="line">dept_id malecount       femalecount</span><br><span class="line">A       <span class="number">2</span>       <span class="number">1</span></span><br><span class="line">B       <span class="number">1</span>       <span class="number">2</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">33.667</span> seconds, Fetched: <span class="number">2</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<p>（4）行转列</p>
<p>​		CONCAT(string A&#x2F;col, string B&#x2F;col…):  返回输入字符串连接后的结果，支持任意个输入字符串;</p>
<p>​		CONCAT_ws(separator, str1, str2..):它是一个特殊形式的 CONCAT()。第一个参数剩余参数间的分隔符。分隔符可以是与剩余参数一样的字符串。如果分隔符是NULL，返回值也将为NULL。这个函数会跳过分隔符参数后的任何NULL 和空字符串。分隔符将被加到被连接的字符串之间；</p>
<p>​		注意:CONCAT_Ws must be “string or array<string><br>​		COLLECT_SET(col):函数只接受基本数据类型，它的主要作用是将某字段的值进行去重汇总，产生Array类型字段。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># concat函数：</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> concat(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">OK</span><br><span class="line">_c0</span><br><span class="line">a<span class="operator">-</span>b<span class="operator">-</span>c</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.635</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept;</span><br><span class="line">OK</span><br><span class="line">dept.deptno     dept.dname      dept.loc</span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span></span><br><span class="line"><span class="number">10</span>      ACCOUNTING      <span class="number">1700</span></span><br><span class="line"><span class="number">20</span>      RESEARCH        <span class="number">1800</span></span><br><span class="line"><span class="number">30</span>      SALES   <span class="number">1900</span></span><br><span class="line"><span class="number">40</span>      OPERATIONS      <span class="number">1700</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.258</span> seconds, Fetched: <span class="number">8</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> concat(deptno,<span class="string">&#x27;-&#x27;</span>,dname) <span class="keyword">from</span> dept;</span><br><span class="line">OK</span><br><span class="line">_c0</span><br><span class="line"><span class="number">10</span><span class="operator">-</span>ACCOUNTING</span><br><span class="line"><span class="number">20</span><span class="operator">-</span>RESEARCH</span><br><span class="line"><span class="number">30</span><span class="operator">-</span>SALES</span><br><span class="line"><span class="number">40</span><span class="operator">-</span>OPERATIONS</span><br><span class="line"><span class="number">10</span><span class="operator">-</span>ACCOUNTING</span><br><span class="line"><span class="number">20</span><span class="operator">-</span>RESEARCH</span><br><span class="line"><span class="number">30</span><span class="operator">-</span>SALES</span><br><span class="line"><span class="number">40</span><span class="operator">-</span>OPERATIONS</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.144</span> seconds, Fetched: <span class="number">8</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># concat_ws函数：</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> concat_ws(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">OK</span><br><span class="line">_c0</span><br><span class="line">a<span class="operator">-</span>b<span class="operator">-</span>c</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.218</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"># COLLECT_LIST函数：</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student6;</span><br><span class="line">OK</span><br><span class="line">student6.id     student6.name</span><br><span class="line"><span class="number">20220006</span>         周莒</span><br><span class="line"><span class="number">20220007</span>         宋交</span><br><span class="line"><span class="number">20220001</span>         张三</span><br><span class="line"><span class="number">20220002</span>         李四</span><br><span class="line"><span class="number">20220003</span>         王五</span><br><span class="line"><span class="number">20220004</span>         马六</span><br><span class="line"><span class="number">20220005</span>         李八</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.161</span> seconds, Fetched: <span class="number">7</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> collect_list(id) <span class="keyword">from</span> student22;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231222163113_2817259e<span class="number">-26</span>ea<span class="number">-466</span>b<span class="number">-900</span>c<span class="number">-46</span>ed3e423271</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703225841549_0004, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703225841549_0004<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703225841549_0004</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">31</span>:<span class="number">27</span>,<span class="number">577</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">31</span>:<span class="number">35</span>,<span class="number">931</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">3.49</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">31</span>:<span class="number">49</span>,<span class="number">475</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">6.06</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">6</span> seconds <span class="number">60</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703225841549_0004</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">6.06</span> sec   HDFS Read: <span class="number">8276</span> HDFS Write: <span class="number">144</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">6</span> seconds <span class="number">60</span> msec</span><br><span class="line">OK</span><br><span class="line">_c0</span><br><span class="line">[&quot;20220001&quot;,&quot;20220002&quot;,&quot;20220003&quot;,&quot;20220004&quot;,&quot;20220005&quot;]</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">37.643</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># COLLECT_SET函数：</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span> <span class="keyword">select</span> collect_set(id) <span class="keyword">from</span> student22;</span><br><span class="line">Query ID <span class="operator">=</span> root_20231222163320_8b3d8e9f<span class="number">-358</span>b<span class="number">-46</span>fe<span class="number">-8</span>d97<span class="number">-39</span>d7e8ee4dc8</span><br><span class="line">Total jobs <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="number">1</span></span><br><span class="line">Number <span class="keyword">of</span> reduce tasks determined <span class="keyword">at</span> compile <span class="type">time</span>: <span class="number">1</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> limit the maximum number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a constant number <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces<span class="operator">=</span><span class="operator">&lt;</span>number<span class="operator">&gt;</span></span><br><span class="line">Starting Job <span class="operator">=</span> job_1703225841549_0005, Tracking URL <span class="operator">=</span> http:<span class="operator">/</span><span class="operator">/</span>hadoop302:<span class="number">8088</span><span class="operator">/</span>proxy<span class="operator">/</span>application_1703225841549_0005<span class="operator">/</span></span><br><span class="line">Kill Command <span class="operator">=</span> <span class="operator">/</span>opt<span class="operator">/</span><span class="keyword">module</span><span class="operator">/</span>hadoop<span class="operator">/</span>bin<span class="operator">/</span>mapred job  <span class="operator">-</span>kill job_1703225841549_0005</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number <span class="keyword">of</span> mappers: <span class="number">1</span>; number <span class="keyword">of</span> reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">33</span>:<span class="number">31</span>,<span class="number">475</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span></span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">33</span>:<span class="number">38</span>,<span class="number">879</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">0</span><span class="operator">%</span>, Cumulative CPU <span class="number">1.65</span> sec</span><br><span class="line"><span class="number">2023</span><span class="number">-12</span><span class="number">-22</span> <span class="number">16</span>:<span class="number">33</span>:<span class="number">56</span>,<span class="number">388</span> Stage<span class="number">-1</span> map <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>,  reduce <span class="operator">=</span> <span class="number">100</span><span class="operator">%</span>, Cumulative CPU <span class="number">4.81</span> sec</span><br><span class="line">MapReduce Total cumulative CPU <span class="type">time</span>: <span class="number">4</span> seconds <span class="number">810</span> msec</span><br><span class="line">Ended Job <span class="operator">=</span> job_1703225841549_0005</span><br><span class="line">MapReduce Jobs Launched:</span><br><span class="line">Stage<span class="operator">-</span>Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   Cumulative CPU: <span class="number">4.81</span> sec   HDFS Read: <span class="number">8348</span> HDFS Write: <span class="number">144</span> SUCCESS</span><br><span class="line">Total MapReduce CPU <span class="type">Time</span> Spent: <span class="number">4</span> seconds <span class="number">810</span> msec</span><br><span class="line">OK</span><br><span class="line">_c0</span><br><span class="line">[&quot;20220001&quot;,&quot;20220002&quot;,&quot;20220003&quot;,&quot;20220004&quot;,&quot;20220005&quot;]</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">37.72</span> seconds, Fetched: <span class="number">1</span> <span class="type">row</span>(s)</span><br><span class="line">hive (<span class="keyword">default</span>)<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



























































<p>五、HIveCLL命令的基本使用</p>
<ol>
<li>Help</li>
</ol>
<p>使用 <code>hive -H</code> 或者 <code>hive --help</code> 命令可以查看所有命令的帮助</p>
<ol start="2">
<li>交互式命令行</li>
</ol>
<p>直接使用 <code>Hive</code> 命令，不加任何参数，即可进入交互式命令行</p>
<ol start="3">
<li>执行SQL命令</li>
</ol>
<p>在不进入交互式命令行的情况下，可以使用 <code>hive -e </code> 执行 SQL 命令</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive -e <span class="string">&#x27;select * from emp&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>用于执行的 sql 脚本可以在本地文件系统，也可以在 HDFS 上</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 本地文件系统</span></span><br><span class="line">hive -f /usr/file/simple.sql;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HDFS文件系统</span></span><br><span class="line">hive -f hdfs://hadoop001:8020/tmp/simple.sql;</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>配置Hive变量</li>
</ol>
<p>可以使用 <code>--hiveconf</code> 设置 Hive 运行时的变量</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive -e <span class="string">&#x27;select * from emp&#x27;</span> \</span><br><span class="line">--hiveconf hive.exec.scratchdir=/tmp/hive_scratch  \</span><br><span class="line">--hiveconf mapred.reduce.tasks=4;</span><br></pre></td></tr></table></figure>



<ol start="5">
<li>配置文件启动</li>
</ol>
<p>使用 <code>-i</code> 可以在进入交互模式之前运行初始化脚本，相当于指定配置文件启动</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive -i /usr/file/hive-init.conf;</span><br></pre></td></tr></table></figure>

<p><code>hive-init.conf</code> 的内容如下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> hive.exec.mode.local.auto = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>用户自定义变量</li>
</ol>
<p><code>--define &lt;key=value&gt; </code> 和 <code>--hivevar &lt;key=value&gt;  </code> 在功能上是等价的，都是用来实现自定义变量</p>
<p>定义变量：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive  --define  n=ename --hiveconf  --hivevar j=job;</span><br></pre></td></tr></table></figure>

<p>在查询中引用自定义变量：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以下两条语句等价</span></span><br><span class="line">hive &gt; <span class="keyword">select</span> <span class="variable">$&#123;n&#125;</span> from emp;</span><br><span class="line">hive &gt;  <span class="keyword">select</span> <span class="variable">$&#123;hivevar:n&#125;</span> from emp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下两条语句等价</span></span><br><span class="line">hive &gt; <span class="keyword">select</span> <span class="variable">$&#123;j&#125;</span> from emp;</span><br><span class="line">hive &gt;  <span class="keyword">select</span> <span class="variable">$&#123;hivevar:j&#125;</span> from emp;</span><br></pre></td></tr></table></figure>





<p>六、Beeline命令的基本使用</p>
<ol>
<li>Beeline</li>
</ol>
<p>Beeline 拥有更多可使用参数，可以使用 <code>beeline --help</code> 查看</p>
<ol start="2">
<li>常用参数</li>
</ol>
<p>在 Hive CLI 中支持的参数，Beeline 都支持，常用的参数如下：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>-u <database URL></strong></td>
<td>数据库地址</td>
</tr>
<tr>
<td><strong>-n <username></strong></td>
<td>用户名</td>
</tr>
<tr>
<td><strong>-p <password></strong></td>
<td>密码</td>
</tr>
<tr>
<td><strong>-d <driver class></strong></td>
<td>驱动 (可选)</td>
</tr>
<tr>
<td><strong>-e <query></strong></td>
<td>执行 SQL 命令</td>
</tr>
<tr>
<td><strong>-f <file></strong></td>
<td>执行 SQL 脚本</td>
</tr>
<tr>
<td><strong>-i (or)–init <file or files></strong></td>
<td>在进入交互模式之前运行初始化脚本</td>
</tr>
<tr>
<td><strong>–property-file <file></strong></td>
<td>指定配置文件</td>
</tr>
<tr>
<td><strong>–hiveconf</strong> <em>property</em>*&#x3D;*<em>value</em></td>
<td>指定配置属性</td>
</tr>
<tr>
<td><strong>–hivevar</strong> <em>name</em>*&#x3D;*<em>value</em></td>
<td>用户自定义属性，在会话级别有效</td>
</tr>
</tbody></table>
<p>使用用户名和密码连接 Hive</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ beeline -u jdbc:hive2://localhost:10000  -n username -p password </span><br></pre></td></tr></table></figure>



<ol start="3">
<li>Hive配置</li>
</ol>
<p>可以通过三种方式对 Hive 的相关属性进行配置</p>
<p>1).配置文件</p>
<p>方式一为使用配置文件，使用配置文件指定的配置是永久有效的。Hive 有以下三个可选的配置文件：</p>
<ul>
<li>hive-site.xml ：Hive 的主要配置文件；</li>
<li>hivemetastore-site.xml： 关于元数据的配置；</li>
<li>hiveserver2-site.xml：关于 HiveServer2 的配置。</li>
</ul>
<p>示例如下,在 hive-site.xml 配置 <code>hive.exec.scratchdir</code>：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">   &lt;name&gt;hive.exec.scratchdir&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;/tmp/mydir&lt;/value&gt;</span><br><span class="line">   &lt;description&gt;Scratch space <span class="keyword">for</span> Hive <span class="built_in">jobs</span>&lt;/description&gt;</span><br><span class="line"> &lt;/property&gt;</span><br></pre></td></tr></table></figure>



<p>2).hiveconf</p>
<p>方式二为在启动命令行 (Hive CLI &#x2F; Beeline) 的时候使用 <code>--hiveconf</code> 指定配置，这种方式指定的配置作用于整个 Session。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">hive --hiveconf hive.exec.scratchdir=/tmp/mydir</span><br></pre></td></tr></table></figure>



<p>3).set</p>
<p>方式三为在交互式环境下 (Hive CLI &#x2F; Beeline)，使用 set 命令指定。这种设置的作用范围也是 Session 级别的，配置对于执行该命令后的所有命令生效。set 兼具设置参数和查看参数的功能。如下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">0: jdbc:hive2://hadoop001:10000&gt; <span class="built_in">set</span> hive.exec.scratchdir=/tmp/mydir;</span><br><span class="line">No rows affected (0.025 seconds)</span><br><span class="line">0: jdbc:hive2://hadoop001:10000&gt; <span class="built_in">set</span> hive.exec.scratchdir;</span><br><span class="line">+----------------------------------+--+</span><br><span class="line">|               <span class="built_in">set</span>                |</span><br><span class="line">+----------------------------------+--+</span><br><span class="line">| hive.exec.scratchdir=/tmp/mydir  |</span><br><span class="line">+---------------------------</span><br></pre></td></tr></table></figure>









<h3 id="Spark-基础"><a href="#Spark-基础" class="headerlink" title="Spark 基础"></a>Spark 基础</h3><h4 id="一、WordCount-功能实现"><a href="#一、WordCount-功能实现" class="headerlink" title="一、WordCount 功能实现"></a>一、WordCount 功能实现</h4><p>提前在pom.xml添加如下配置</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;3.0.0&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.wc</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">demo01</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Application</span></span><br><span class="line">    <span class="comment">//Spark框架</span></span><br><span class="line">    <span class="comment">//TODO 建立和Spark框架的连接</span></span><br><span class="line">    <span class="comment">//JDBC：Connection</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sparConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local&quot;</span>).setAppName(<span class="string">&quot;WordCount&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparConf)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 执行业务操作</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 读取文件，获取一行一行的数据</span></span><br><span class="line">    <span class="comment">//    hello   world</span></span><br><span class="line">    <span class="keyword">val</span> lines: <span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">&quot;datas&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 将一行数据进行拆分，形成一个一个的单词（分词）</span></span><br><span class="line">    <span class="comment">//  扁平化：将整个拆分成个体的操作</span></span><br><span class="line">    <span class="comment">//    &quot;hello world&quot; =&gt; hello, world, hello, world</span></span><br><span class="line">    <span class="keyword">val</span> words: <span class="type">RDD</span>[<span class="type">String</span>] = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 将数据根据单词进行分组，便于统计</span></span><br><span class="line">    <span class="comment">//    (hello, hello, hello),  (world, world)</span></span><br><span class="line">    <span class="keyword">val</span> wordGroup: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Iterable</span>[<span class="type">String</span>])] = words.groupBy(word=&gt;word)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 对分组后的数据进行转换</span></span><br><span class="line">    <span class="comment">//    (hello, hello, hello),  (world, world)</span></span><br><span class="line">    <span class="comment">//    (hello, 3),  (world, 2)</span></span><br><span class="line">    <span class="keyword">val</span> wordToCount: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordGroup.map &#123;</span><br><span class="line">      <span class="keyword">case</span> (word, list) =&gt;&#123;</span><br><span class="line">        (word, list.size)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. 将转换的结果采集到控制台打印出来</span></span><br><span class="line">    <span class="keyword">val</span> array: <span class="type">Array</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordToCount.collect()</span><br><span class="line">    array.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭连接</span></span><br><span class="line">    sc.stop()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.wc</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">demo02</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//TODO 建立和Spark框架的连接</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sparConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local&quot;</span>).setAppName(<span class="string">&quot;WordCount&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparConf)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 执行业务操作</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> lines: <span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">&quot;datas&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> words: <span class="type">RDD</span>[<span class="type">String</span>] = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> wordToOne = words.map(</span><br><span class="line">      word =&gt; (word, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> wordGroup: <span class="type">RDD</span>[(<span class="type">String</span>, <span class="type">Iterable</span>[(<span class="type">String</span>, <span class="type">Int</span>)])] = wordToOne.groupBy(</span><br><span class="line">      t =&gt; t._1</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> wordToCount = wordGroup.map &#123;</span><br><span class="line">      <span class="keyword">case</span> (word, list) =&gt;&#123;</span><br><span class="line">        list.reduce(</span><br><span class="line">          (t1, t2) =&gt; &#123;</span><br><span class="line">            (t1._1, t1._2 + t2._2)</span><br><span class="line">          &#125;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> array: <span class="type">Array</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordToCount.collect()</span><br><span class="line">    array.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭连接</span></span><br><span class="line">    sc.stop()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.wc</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">demo03</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//TODO 建立和Spark框架的连接</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sparConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local&quot;</span>).setAppName(<span class="string">&quot;WordCount&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparConf)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 执行业务操作</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> lines: <span class="type">RDD</span>[<span class="type">String</span>] = sc.textFile(<span class="string">&quot;datas&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> words: <span class="type">RDD</span>[<span class="type">String</span>] = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> wordToOne = words.map(</span><br><span class="line">      word =&gt; (word, <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Spark 框架提供了更多的功能，可以将分组和聚合使用一个方法实现</span></span><br><span class="line">    <span class="comment">// reduceByKey : 相同的Key的数据，可以对Value进行reduce聚合</span></span><br><span class="line"><span class="comment">//    wordToOne.reduceByKey((x, y) =&gt; &#123;x + y&#125;)</span></span><br><span class="line"><span class="comment">//    wordToOne.reduceByKey((x, y) =&gt; x + y)</span></span><br><span class="line">    <span class="keyword">val</span> wordToCount = wordToOne.reduceByKey(_+_)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> array: <span class="type">Array</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = wordToCount.collect()</span><br><span class="line">    array.foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭连接</span></span><br><span class="line">    sc.stop()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="二、本地部署模式"><a href="#二、本地部署模式" class="headerlink" title="二、本地部署模式"></a>二、本地部署模式</h4><p>1). 上传相应spark压缩包并解压到对应目录</p>
<p>2). 重命名方便后面使用</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 module]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 11 yun   yun   173 12月  7 10:31 hadoop</span><br><span class="line">drwxr-xr-x. 11 root  root  221 12月 11 15:04 hive</span><br><span class="line">drwxr-xr-x.  8 yun   yun   255 12月 20 2017 jdk</span><br><span class="line">drwxr-xr-x. 10 mysql mysql 141 12月  6 15:49 mysql</span><br><span class="line">drwxr-xr-x. 13 yun   yun   211 12月 12 09:12 spark</span><br></pre></td></tr></table></figure>

<p>3). 在 spark&#x2F;data&#x2F;下新建一个word.txt文件，并添加如下内容</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Hello Scala</span><br><span class="line">Hello Spark</span><br><span class="line">Hello Scala</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 data]# ll</span><br><span class="line">总用量 8</span><br><span class="line">drwxr-xr-x. 2 yun  yun    44 2月  22 2021 graphx</span><br><span class="line">drwxr-xr-x. 5 yun  yun  4096 2月  22 2021 mllib</span><br><span class="line">drwxr-xr-x. 2 yun  yun    27 2月  22 2021 streaming</span><br><span class="line">-rw-r--r--. 1 root root   37 12月 12 09:16 word.txt</span><br></pre></td></tr></table></figure>

<p>4). 进入spark</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">[root<span class="meta">@hadoop</span>301 spark]# bin/spark-shell</span><br><span class="line"><span class="number">23</span>/<span class="number">12</span>/<span class="number">12</span> <span class="number">09</span>:<span class="number">35</span>:<span class="number">18</span> <span class="type">WARN</span> <span class="type">NativeCodeLoader</span>: <span class="type">Unable</span> to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes where applicable</span><br><span class="line"><span class="type">Using</span> <span class="type">Spark</span>&#x27;s <span class="keyword">default</span> log4j profile: org/apache/spark/log4j-defaults.properties</span><br><span class="line"><span class="type">Setting</span> <span class="keyword">default</span> log level to <span class="string">&quot;WARN&quot;</span>.</span><br><span class="line"><span class="type">To</span> adjust logging level use sc.setLogLevel(newLevel). <span class="type">For</span> <span class="type">SparkR</span>, use setLogLevel(newLevel).</span><br><span class="line"><span class="number">23</span>/<span class="number">12</span>/<span class="number">12</span> <span class="number">09</span>:<span class="number">35</span>:<span class="number">32</span> <span class="type">WARN</span> <span class="type">Utils</span>: <span class="type">Service</span> &#x27;<span class="type">SparkUI</span>&#x27; could not bind on port <span class="number">4040.</span> <span class="type">Attempting</span> port <span class="number">4041.</span></span><br><span class="line"><span class="type">Spark</span> context <span class="type">Web</span> <span class="type">UI</span> available at http:<span class="comment">//hadoop301:4041</span></span><br><span class="line"><span class="type">Spark</span> context available as &#x27;sc&#x27; (master = local[*], app id = local<span class="number">-1702344932584</span>).</span><br><span class="line"><span class="type">Spark</span> session available as &#x27;spark&#x27;.</span><br><span class="line"><span class="type">Welcome</span> to</span><br><span class="line">      ____              __</span><br><span class="line">     / __/__  ___ _____/ /__</span><br><span class="line">    _\ \/ _ \/ _ `/ __/  &#x27;_/</span><br><span class="line">   /___/ .__/\_,_/_/ /_/\_\   version <span class="number">3.1</span><span class="number">.1</span></span><br><span class="line">      /_/</span><br><span class="line"></span><br><span class="line"><span class="type">Using</span> <span class="type">Scala</span> version <span class="number">2.12</span><span class="number">.10</span> (<span class="type">Java</span> <span class="type">HotSpot</span>(<span class="type">TM</span>) <span class="number">64</span>-<span class="type">Bit</span> <span class="type">Server</span> <span class="type">VM</span>, <span class="type">Java</span> <span class="number">1.8</span><span class="number">.0</span>_162)</span><br><span class="line"><span class="type">Type</span> in expressions to have them evaluated.</span><br><span class="line"><span class="type">Type</span> :help <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure>

<p>5). 简单测试一下</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; sc.textFile(<span class="string">&quot;data/word.txt&quot;</span>).flatMap(_.split(<span class="string">&quot; &quot;</span>)).map((_,<span class="number">1</span>)).reduceByKey(_+_).col</span><br><span class="line">res0: <span class="type">Array</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = <span class="type">Array</span>((<span class="type">Spark</span>,<span class="number">1</span>), (<span class="type">Hello</span>,<span class="number">3</span>), (<span class="type">Scala</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<p>6). 运行提交应用程序</p>
<p>内容如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--<span class="class"><span class="keyword">class</span> <span class="title">org</span>.<span class="title">apache</span>.<span class="title">spark</span>.<span class="title">examples</span>.<span class="title">SparkPi</span> <span class="title">\</span></span></span><br><span class="line">--master local[<span class="number">2</span>] \</span><br><span class="line">./examples/jars/spark-examples_2<span class="number">.12</span><span class="number">-3.1</span><span class="number">.1</span>.jar \</span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark]# bin/spark-submit \</span><br><span class="line">&gt; --class org.apache.spark.examples.SparkPi \</span><br><span class="line">&gt; --master <span class="built_in">local</span>[2] \</span><br><span class="line">&gt; ./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">&gt; 10</span><br><span class="line">23/12/12 09:50:26 WARN NativeCodeLoader: Unable to load native-hadoop library                                                                   <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Using Spark<span class="string">&#x27;s default log4j profile: org/apache/spark/log4j-defaults.properti                                                                  es</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO SparkContext: Running Spark version 3.1.1</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO ResourceUtils: =======================================                                                                  =======================</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO ResourceUtils: No custom resources configured for spar                                                                  k.driver.</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO ResourceUtils: =======================================                                                                  =======================</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO SparkContext: Submitted application: Spark Pi</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO ResourceProfile: Default ResourceProfile created, exec                                                                  utor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memo                                                                  ry -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHea                                                                  p, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, am                                                                  ount: 1.0)</span></span><br><span class="line"><span class="string">23/12/12 09:50:26 INFO ResourceProfile: Limiting resource is cpu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:                                                                  38, took 1.886176 s</span></span><br><span class="line"><span class="string">Pi is roughly 3.141411141411141</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO SparkUI: Stopped Spark web UI at http://hadoop301:4041</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMaster                                                                  Endpoint stopped!</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO MemoryStore: MemoryStore cleared</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO BlockManager: BlockManager stopped</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO BlockManagerMaster: BlockManagerMaster stopped</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoin                                                                  t: OutputCommitCoordinator stopped!</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO SparkContext: Successfully stopped SparkContext</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO ShutdownHookManager: Shutdown hook called</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO ShutdownHookManager: Deleting directory /tmp/spark-eaf                                                                  94632-dc33-48e3-9ce3-e86e591dcc24</span></span><br><span class="line"><span class="string">23/12/12 09:50:33 INFO ShutdownHookManager: Deleting directory /tmp/spark-630                                                                  537e8-aaf6-4e4b-8a77-4c73e457244c</span></span><br></pre></td></tr></table></figure>



<h4 id="三、独立部署模式-spark-standalone"><a href="#三、独立部署模式-spark-standalone" class="headerlink" title="三、独立部署模式(spark-standalone)"></a>三、独立部署模式(spark-standalone)</h4><p>1). 解压文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 software]# tar -zxvf spark-3.1.1-bin-hadoop3.2.tgz -C /opt/module</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 module]# <span class="built_in">mv</span> spark-3.1.1-bin-hadoop3.2/ spark-standalone</span><br><span class="line">[root@hadoop301 module]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 11 yun   yun   173 12月  7 10:31 hadoop</span><br><span class="line">drwxr-xr-x. 11 root  root  221 12月 11 15:04 hive</span><br><span class="line">drwxr-xr-x.  8 yun   yun   255 12月 20 2017 jdk</span><br><span class="line">drwxr-xr-x. 10 mysql mysql 141 12月  6 15:49 mysql</span><br><span class="line">drwxr-xr-x. 13 yun   yun   211 12月 12 09:12 spark</span><br><span class="line">drwxr-xr-x. 13 yun   yun   211 2月  22 2021 spark-standalone</span><br></pre></td></tr></table></figure>



<p>2). 将 &#x2F;spark-standalone&#x2F;conf&#x2F; 的这个文件workers.template 重命名为slaves</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 module]# <span class="built_in">cd</span> spark-standalone/conf/</span><br><span class="line">[root@hadoop301 conf]# ll</span><br><span class="line">总用量 36</span><br><span class="line">-rw-r--r--. 1 yun yun 1105 2月  22 2021 fairscheduler.xml.template</span><br><span class="line">-rw-r--r--. 1 yun yun 2023 2月  22 2021 log4j.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 9141 2月  22 2021 metrics.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun  865 2月  22 2021 slaves</span><br><span class="line">-rw-r--r--. 1 yun yun 1292 2月  22 2021 spark-defaults.conf.template</span><br><span class="line">-rwxr-xr-x. 1 yun yun 4428 2月  22 2021 spark-env.sh.template</span><br></pre></td></tr></table></figure>

<p>3). 修改slaves文件，添加work节点</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hadoop301</span><br><span class="line">hadoop302</span><br><span class="line">hadoop303</span><br></pre></td></tr></table></figure>

<p>4). 修改spark-env.sh.template文件名为spark-env.sh</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# <span class="built_in">mv</span> spark-env.sh.template spark-env.sh</span><br><span class="line">[root@hadoop301 conf]# ll</span><br><span class="line">总用量 36</span><br><span class="line">-rw-r--r--. 1 yun yun 1105 2月  22 2021 fairscheduler.xml.template</span><br><span class="line">-rw-r--r--. 1 yun yun 2023 2月  22 2021 log4j.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 9141 2月  22 2021 metrics.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun  886 12月 12 10:02 slaves</span><br><span class="line">-rw-r--r--. 1 yun yun 1292 2月  22 2021 spark-defaults.conf.template</span><br><span class="line">-rwxr-xr-x. 1 yun yun 4428 2月  22 2021 spark-env.sh</span><br></pre></td></tr></table></figure>

<p>添加如下内容：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# vim spark-env.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk</span><br><span class="line">SPARK_MASTER_HOST=hadoop301</span><br><span class="line">SPARK_MASTER_PORT=7077</span><br></pre></td></tr></table></figure>



<p>4). 分发给hadoop302、hadoop303</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 module]# xsync spark-standalone/</span><br><span class="line">==================== hadoop301 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 39,530 bytes  received 167 bytes  79,394.00 bytes/sec</span><br><span class="line">total size is 254,312,335  speedup is 6,406.34</span><br><span class="line">==================== hadoop302 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">spark-standalone/</span><br><span class="line">spark-standalone/LICENSE</span><br><span class="line">spark-standalone/NOTICE</span><br><span class="line">spark-standalone/README.md</span><br><span class="line">spark-standalone/RELEASE</span><br><span class="line"></span><br><span class="line">.......</span><br></pre></td></tr></table></figure>



<p>5). 启动集群</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# sbin/start-all.sh</span><br><span class="line">starting org.apache.spark.deploy.master.Master, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.master.Master-1-hadoop301.out</span><br><span class="line">hadoop303: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop303.out</span><br><span class="line">hadoop302: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop302.out</span><br><span class="line">hadoop301: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop301.out</span><br></pre></td></tr></table></figure>



<p>6). 查看三台服务器运行进程</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# jps</span><br><span class="line">2754 DataNode</span><br><span class="line">6035 Worker</span><br><span class="line">2596 NameNode</span><br><span class="line">5972 Master</span><br><span class="line">3097 NodeManager</span><br><span class="line">6155 Jps</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop302 conf]# jps</span><br><span class="line">3232 Worker</span><br><span class="line">3335 Jps</span><br><span class="line">2520 NodeManager</span><br><span class="line">2362 ResourceManager</span><br><span class="line">2159 DataNode</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop303 conf]# jps</span><br><span class="line">2272 SecondaryNameNode</span><br><span class="line">2864 Worker</span><br><span class="line">2967 Jps</span><br><span class="line">2153 DataNode</span><br><span class="line">2364 NodeManager</span><br></pre></td></tr></table></figure>



<p>7). 查看Master资源监控Web UI 界面 http&#x2F;&#x2F;hadoop301:8080</p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231212110957048.png" alt="image-20231212110957048"></p>
<p>8). 提交应用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master spark://hadoop301:7077 \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# bin/spark-submit \</span><br><span class="line">&gt; --class org.apache.spark.examples.SparkPi \</span><br><span class="line">&gt; --master spark://hadoop301:7077 \</span><br><span class="line">&gt; ./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">&gt; 10</span><br><span class="line">23/12/12 11:11:42 WARN NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Using Spark<span class="string">&#x27;s default log4j profile: org/apache/spark/log4j-defaults.properties</span></span><br><span class="line"><span class="string">23/12/12 11:11:42 INFO SparkContext: Running Spark version 3.1.1</span></span><br><span class="line"><span class="string">23/12/12 11:11:42 INFO ResourceUtils: ==============================================================</span></span><br><span class="line"><span class="string">23/12/12 11:11:42 INFO ResourceUtils: No custom resources configured for spark.driver.</span></span><br><span class="line"><span class="string">23/12/12 11:11:42 INFO ResourceUtils: ==============================================================</span></span><br><span class="line"><span class="string">23/12/12 11:11:42 INFO SparkContext: Submitted application: Spark Pi</span></span><br><span class="line"><span class="string">23/12/12 11:11:43 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)</span></span><br><span class="line"><span class="string">23/12/12 11:11:43 INFO ResourceProfile: Limiting resource is cpu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO TaskSchedulerImpl: Killing all running tasks in stage 0: Stage finished</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 4.014818 s</span></span><br><span class="line"><span class="string">Pi is roughly 3.1443471443471442</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO SparkUI: Stopped Spark web UI at http://hadoop301:4040</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO StandaloneSchedulerBackend: Shutting down all executors</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO CoarseGrainedSchedulerBackend$DriverEndpoint: Asking each executor to shut down</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO MemoryStore: MemoryStore cleared</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO BlockManager: BlockManager stopped</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO BlockManagerMaster: BlockManagerMaster stopped</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO SparkContext: Successfully stopped SparkContext</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO ShutdownHookManager: Shutdown hook called</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO ShutdownHookManager: Deleting directory /tmp/spark-03a8ac52-5651-4ac8-b21c-8e7dce714d76</span></span><br><span class="line"><span class="string">23/12/12 11:11:52 INFO ShutdownHookManager: Deleting directory /tmp/spark-cdcd1f1b-8c00-4911-ba0c-79a07391394d</span></span><br></pre></td></tr></table></figure>





<p>修改spark-defaults.conf.template文件名为spark-defaults.conf</p>
<p>修改spark-defaults.conf文件，配置日志存储路径</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">spark.eventLog.enabled            <span class="literal">true</span></span><br><span class="line">spark.eventLog.<span class="built_in">dir</span>                hdfs://hadoop301:8020/directory</span><br></pre></td></tr></table></figure>

<p>注意：需要启动hadoop集群，<strong>HDFS上的directory目录需要提前存在</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# hdfs dfs -<span class="built_in">mkdir</span> /directory</span><br></pre></td></tr></table></figure>



<p>修改spark-env.sh文件，添加日志配置</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> SPARK_HISTORY_OPTS=<span class="string">&quot;  </span></span><br><span class="line"><span class="string">-Dspark.history.ui.port=18080</span></span><br><span class="line"><span class="string">-Dspark.history.fs.logDirectory=hdfs://hadoop301:8020/directory</span></span><br><span class="line"><span class="string">-Dspark.history.retainedApplications=30&quot;</span></span><br></pre></td></tr></table></figure>



<p>分发配置文件</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# xsync conf</span><br><span class="line">==================== hadoop301 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 252 bytes  received 17 bytes  179.33 bytes/sec</span><br><span class="line">total size is 19,229  speedup is 71.48</span><br><span class="line">==================== hadoop302 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">conf/</span><br><span class="line">conf/spark-defaults.conf</span><br><span class="line">conf/spark-env.sh</span><br><span class="line"></span><br><span class="line">sent 2,239 bytes  received 100 bytes  1,559.33 bytes/sec</span><br><span class="line">total size is 19,229  speedup is 8.22</span><br><span class="line">==================== hadoop303 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">conf/</span><br><span class="line">conf/spark-defaults.conf</span><br><span class="line">conf/spark-env.sh</span><br><span class="line"></span><br><span class="line">sent 2,239 bytes  received 100 bytes  4,678.00 bytes/sec</span><br><span class="line">total size is 19,229  speedup is 8.22</span><br></pre></td></tr></table></figure>



<p>重写启动集群和历史服务</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sbin/start-all.sh</span><br><span class="line">sbin/start-history-server.sh</span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# sbin/start-all.sh</span><br><span class="line">starting org.apache.spark.deploy.master.Master, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.master.Master-1-hadoop301.out</span><br><span class="line">hadoop303: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop303.out</span><br><span class="line">hadoop302: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop302.out</span><br><span class="line">hadoop301: starting org.apache.spark.deploy.worker.Worker, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.worker.Worker-1-hadoop301.out</span><br><span class="line">[root@hadoop301 spark-standalone]# sbin/start-history-server.sh</span><br><span class="line">starting org.apache.spark.deploy.history.HistoryServer, logging to /opt/module/spark-standalone/logs/spark-root-org.apache.spark.deploy.history.HistoryServer-1-hadoop301.out</span><br></pre></td></tr></table></figure>



<p>重新执行任务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master spark://hadoop301:7077 \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# bin/spark-submit \</span><br><span class="line">&gt; --class org.apache.spark.examples.SparkPi \</span><br><span class="line">&gt; --master spark://hadoop301:7077 \</span><br><span class="line">&gt; ./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">&gt; 10</span><br><span class="line">23/12/12 16:39:05 WARN NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">Using Spark<span class="string">&#x27;s default log4j profile: org/apache/spark/log4j-defaults.properties</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO SparkContext: Running Spark version 3.1.1</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO ResourceUtils: ==============================================================</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO ResourceUtils: No custom resources configured for spark.driver.</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO ResourceUtils: ==============================================================</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO SparkContext: Submitted application: Spark Pi</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)</span></span><br><span class="line"><span class="string">23/12/12 16:39:05 INFO ResourceProfile: Limiting resource is cpu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job</span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO TaskSchedulerImpl: Killing all running tasks in stage 0: Stage finished</span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 4.522823 s</span></span><br><span class="line"><span class="string">Pi is roughly 3.141043141043141</span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO SparkUI: Stopped Spark web UI at http://hadoop301:4040</span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO StandaloneSchedulerBackend: Shutting down all executors</span></span><br><span class="line"><span class="string">23/12/12 16:39:23 INFO CoarseGrainedSchedulerBackend$DriverEndpoint: Asking each executor to shut down</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO MemoryStore: MemoryStore cleared</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO BlockManager: BlockManager stopped</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO BlockManagerMaster: BlockManagerMaster stopped</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO SparkContext: Successfully stopped SparkContext</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO ShutdownHookManager: Shutdown hook called</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO ShutdownHookManager: Deleting directory /tmp/spark-3aaec14f-7e43-4214-9e85-58d641e79b38</span></span><br><span class="line"><span class="string">23/12/12 16:39:24 INFO ShutdownHookManager: Deleting directory /tmp/spark-5b914f69-6e76-420b-92b7-c4e07295232b</span></span><br></pre></td></tr></table></figure>

<p>查看历史服务：cd </p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231212170908553.png" alt="image-20231212170908553"></p>
<p>9). 配置高可用</p>
<p>Zookeeper设置</p>
<ol>
<li>停止集群</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sbin/stop-all.sh</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>启动Zookeeper</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure>

<p>3个节点都要启动或使用</p>
<p>Zookeeper集群启动脚本</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">zk.sh start</span><br></pre></td></tr></table></figure>

<p>Zookeeper集群停止脚本</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">zk.sh stop</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 zookeeper]# zk.sh start</span><br><span class="line">---------- zookeeper hadoop301 启动 ------------</span><br><span class="line">Error: JAVA_HOME is not <span class="built_in">set</span> and java could not be found <span class="keyword">in</span> PATH.</span><br><span class="line">---------- zookeeper hadoop302 启动 ------------</span><br><span class="line">Error: JAVA_HOME is not <span class="built_in">set</span> and java could not be found <span class="keyword">in</span> PATH.</span><br><span class="line">---------- zookeeper hadoop303 启动 ------------</span><br><span class="line">Error: JAVA_HOME is not <span class="built_in">set</span> and java could not be found <span class="keyword">in</span> PATH.</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>修改spark-env.sh，如何如下</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">注释这两行</span><br><span class="line"><span class="comment"># SPARK_MASTER_HOST=hadoop301</span></span><br><span class="line"><span class="comment"># SPARK_MASTER_PORT=7077</span></span><br><span class="line"></span><br><span class="line">添加</span><br><span class="line">SPARK_MASTER_WEBUI_PORT=8989</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SPART_DAEMON_JAVA_OPTS=<span class="string">&quot;</span></span><br><span class="line"><span class="string">-Dspark.deploy.recoveryMode=ZOOKEEPER</span></span><br><span class="line"><span class="string">-Dspark.deploy.zookeeper.url=hadoop301,hadoop302,hadoop303</span></span><br><span class="line"><span class="string">-Dspark.deploy.zookeeper.dir=/spark&quot;</span></span><br></pre></td></tr></table></figure>

<p>分发….</p>
<ol start="4">
<li>启动集群</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sbin/start-all.sh</span><br></pre></td></tr></table></figure>

<p>查看： <a href="http://hadoop301:8989/">http://hadoop301:8989</a></p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213154113647.png" alt="image-20231213154113647"></p>
<ol start="5">
<li>启动hadoop302的单独Master节点，此时Master状态处于备用状态</li>
</ol>
<p>查看： <a href="http://hadoop302:8989/">http://hadoop302:8989</a></p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213154533997.png" alt="image-20231213154533997"></p>
<ol start="6">
<li>提交应用到高可用集群</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master spark://hadoop301:7077,hadoop302:7077 \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">10</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>停止hadoop的Master资源监控进程</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-standalone]# jps</span><br><span class="line">3408 QuorumPeerMain</span><br><span class="line">3888 NameNode</span><br><span class="line">7825 Jps</span><br><span class="line">4393 NodeManager</span><br><span class="line">7225 Worker</span><br><span class="line">6188 HistoryServer</span><br><span class="line">4045 DataNode</span><br><span class="line">7151 Master</span><br><span class="line">[root@hadoop301 spark-standalone]# <span class="built_in">kill</span> -9 7151</span><br><span class="line">[root@hadoop301 spark-standalone]# jps</span><br><span class="line">3408 QuorumPeerMain</span><br><span class="line">3888 NameNode</span><br><span class="line">4393 NodeManager</span><br><span class="line">7225 Worker</span><br><span class="line">6188 HistoryServer</span><br><span class="line">4045 DataNode</span><br><span class="line">7854 Jps</span><br></pre></td></tr></table></figure>

<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213155518859.png" alt="image-20231213155518859"></p>
<h4 id="四、Yarn模式"><a href="#四、Yarn模式" class="headerlink" title="四、Yarn模式"></a>四、Yarn模式</h4><p>1). 解压文件，并重命名放置再指定位置</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 software]# tar -zxvf spark-3.1.1-bin-hadoop3.2.tgz -C /opt/module/</span><br><span class="line">.....</span><br><span class="line"></span><br><span class="line">[root@hadoop301 module]# <span class="built_in">mv</span> spark-3.1.1-bin-hadoop3.2/ spark-yarn</span><br><span class="line">[root@hadoop301 module]# ll</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x. 11 yun   yun   173 12月  7 10:31 hadoop</span><br><span class="line">drwxr-xr-x. 11 yun   yun   221 12月 11 15:04 hive</span><br><span class="line">drwxr-xr-x.  8 yun   yun   255 12月 20 2017 jdk</span><br><span class="line">drwxr-xr-x. 10 mysql mysql 141 12月  6 15:49 mysql</span><br><span class="line">drwxr-xr-x. 13 yun   yun   211 12月 12 09:12 spark</span><br><span class="line">drwxr-xr-x. 15 yun   yun   235 12月 12 15:25 spark-standalone</span><br><span class="line">drwxr-xr-x. 13 yun   yun   211 2月  22 2021 spark-yarn</span><br><span class="line">drwxr-xr-x.  8 root  root  160 12月 13 15:03 zookeeper</span><br></pre></td></tr></table></figure>



<p>2).修改配置文件</p>
<p>修改hadoop配置文件&#x2F;opt&#x2F;module&#x2F;hadoop&#x2F;etc&#x2F;hadoop&#x2F;yarn-site.xml，并分发</p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213160855000.png" alt="image-20231213160855000"></p>
<p>3).修改conf&#x2F;spark-env.sh ，添加JAVA_HOME和YARN_CONF_DIR配置</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# ll</span><br><span class="line">总用量 36</span><br><span class="line">-rw-r--r--. 1 yun yun 1105 2月  22 2021 fairscheduler.xml.template</span><br><span class="line">-rw-r--r--. 1 yun yun 2023 2月  22 2021 log4j.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 9141 2月  22 2021 metrics.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 1292 2月  22 2021 spark-defaults.conf.template</span><br><span class="line">-rwxr-xr-x. 1 yun yun 4428 2月  22 2021 spark-env.sh.template</span><br><span class="line">-rw-r--r--. 1 yun yun  865 2月  22 2021 workers.template</span><br><span class="line">[root@hadoop301 conf]# <span class="built_in">mv</span> spark-env.sh.template spark-env.sh</span><br><span class="line">[root@hadoop301 conf]# vim spark-env.sh</span><br></pre></td></tr></table></figure>

<p>添加内容如下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/opt/module/jdk</span><br><span class="line">YARN_CONF_DIR=/opt/module/hadoop/etc/hadoop</span><br></pre></td></tr></table></figure>



<p>4).启动HDFS以及YARN集群</p>
<p>5).提交应用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master yarn \</span><br><span class="line">--deploy-mode cluster \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-yarn]# bin/spark-submit \</span><br><span class="line">&gt; --class org.apache.spark.examples.SparkPi \</span><br><span class="line">&gt; --master yarn \</span><br><span class="line">&gt; --deploy-mode cluster \</span><br><span class="line">&gt; ./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">&gt; 10</span><br><span class="line">2023-12-13 16:19:45,899 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">2023-12-13 16:19:46,041 INFO client.RMProxy: Connecting to ResourceManager at hadoop302/192.168.137.137:8032</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">2023-12-13 16:20:38,182 INFO yarn.Client: Application report <span class="keyword">for</span> application_1702451653078_0001 (state: RUNNING)</span><br><span class="line">2023-12-13 16:20:39,185 INFO yarn.Client: Application report <span class="keyword">for</span> application_1702451653078_0001 (state: FINISHED)</span><br><span class="line">2023-12-13 16:20:39,186 INFO yarn.Client:</span><br><span class="line">         client token: N/A</span><br><span class="line">         diagnostics: N/A</span><br><span class="line">         ApplicationMaster host: hadoop302</span><br><span class="line">         ApplicationMaster RPC port: 42631</span><br><span class="line">         queue: default</span><br><span class="line">         start <span class="keyword">time</span>: 1702455600467</span><br><span class="line">         final status: SUCCEEDED</span><br><span class="line">         tracking URL: http://hadoop302:8088/proxy/application_1702451653078_0001/</span><br><span class="line">         user: root</span><br><span class="line">2023-12-13 16:20:39,216 INFO util.ShutdownHookManager: Shutdown hook called</span><br><span class="line">2023-12-13 16:20:39,216 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-566fedcb-c4d9-44e9-b06b-c304d10eec03</span><br><span class="line">2023-12-13 16:20:39,229 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-12d7b76e-9d46-4f6f-ac04-edbde3f7869a</span><br></pre></td></tr></table></figure>

<p>查看 <a href="http://hadoop302:8088/">http://hadoop302:8088</a> 页面，点击History，查看历史页面</p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213162533931.png" alt="image-20231213162533931"></p>
<p>6).配置历史服务器</p>
<ol>
<li>修改spark-defaults.conf.template文件名为spark-defaults.conf</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 conf]# <span class="built_in">mv</span> spark-defaults.conf.template spark-defaults.conf</span><br><span class="line">[root@hadoop301 conf]# ll</span><br><span class="line">总用量 36</span><br><span class="line">-rw-r--r--. 1 yun yun 1105 2月  22 2021 fairscheduler.xml.template</span><br><span class="line">-rw-r--r--. 1 yun yun 2023 2月  22 2021 log4j.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 9141 2月  22 2021 metrics.properties.template</span><br><span class="line">-rw-r--r--. 1 yun yun 1292 2月  22 2021 spark-defaults.conf</span><br><span class="line">-rwxr-xr-x. 1 yun yun 4505 12月 13 16:15 spark-env.sh</span><br><span class="line">-rw-r--r--. 1 yun yun  865 2月  22 2021 workers.template</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>修改spark-defaults.conf文件，配置日志路径</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">spark.eventLog.enabled             <span class="literal">true</span></span><br><span class="line">spark.eventLog.<span class="built_in">dir</span>                 hdfs://hadoop301:8020/directory</span><br></pre></td></tr></table></figure>

<p>注意：需要启动hadoop集群，<strong>HDFS上的目录需要提前存在</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-yarn]# hdfs dfs -mkdir /directory</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>修改spark.env.sh文件，添加日志配置</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> SPARK_HISTORY_OPTS=<span class="string">&quot;</span></span><br><span class="line"><span class="string">-Dspark.history.ui.port=18080</span></span><br><span class="line"><span class="string">-Dspark.history.fs.logDirectory=hdfs://hadoop301:8020/directory</span></span><br><span class="line"><span class="string">-Dspark.history.retainedApplications=30&quot;</span></span><br></pre></td></tr></table></figure>



<ol start="4">
<li>分发配置文件</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-yarn]# xsync conf</span><br><span class="line">==================== hadoop301 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line"></span><br><span class="line">sent 257 bytes  received 17 bytes  548.00 bytes/sec</span><br><span class="line">total size is 19,281  speedup is 70.37</span><br><span class="line">==================== hadoop302 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">conf/</span><br><span class="line">conf/fairscheduler.xml.template</span><br><span class="line">conf/log4j.properties.template</span><br><span class="line">conf/metrics.properties.template</span><br><span class="line">conf/spark-defaults.conf</span><br><span class="line">conf/spark-env.sh</span><br><span class="line">conf/workers.template</span><br><span class="line"></span><br><span class="line">sent 19,799 bytes  received 134 bytes  39,866.00 bytes/sec</span><br><span class="line">total size is 19,281  speedup is 0.97</span><br><span class="line">==================== hadoop303 ====================</span><br><span class="line">sending incremental file list</span><br><span class="line">conf/</span><br><span class="line">conf/fairscheduler.xml.template</span><br><span class="line">conf/log4j.properties.template</span><br><span class="line">conf/metrics.properties.template</span><br><span class="line">conf/spark-defaults.conf</span><br><span class="line">conf/spark-env.sh</span><br><span class="line">conf/workers.template</span><br><span class="line"></span><br><span class="line">sent 19,799 bytes  received 134 bytes  13,288.67 bytes/sec</span><br><span class="line">total size is 19,281  speedup is 0.97</span><br></pre></td></tr></table></figure>



<ol start="5">
<li>修改spark-defaults.conf</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">spark.yarn.historyServer.address=hadoop301:18080</span><br><span class="line">spark.history.ui.port=18080</span><br></pre></td></tr></table></figure>



<ol start="6">
<li>启动历史服务</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sbin/start-history-server.sh</span><br></pre></td></tr></table></figure>



<ol start="7">
<li>重新提交应用</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">bin/spark-submit \</span><br><span class="line">--class org.apache.spark.examples.SparkPi \</span><br><span class="line">--master yarn \</span><br><span class="line">--deploy-mode client \</span><br><span class="line">./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@hadoop301 spark-yarn]# bin/spark-submit \</span><br><span class="line">&gt; --class org.apache.spark.examples.SparkPi \</span><br><span class="line">&gt; --master yarn \</span><br><span class="line">&gt; --deploy-mode client \</span><br><span class="line">&gt; ./examples/jars/spark-examples_2.12-3.1.1.jar \</span><br><span class="line">&gt; 10</span><br><span class="line">2023-12-13 16:49:44,349 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> y                                                                      our platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br><span class="line">2023-12-13 16:49:44,790 INFO spark.SparkContext: Running Spark version 3.1.1</span><br><span class="line">2023-12-13 16:49:44,872 INFO resource.ResourceUtils: =========================================                                                                      =====================</span><br><span class="line">2023-12-13 16:49:44,873 INFO resource.ResourceUtils: No custom resources configured <span class="keyword">for</span> spark.                                                                      driver.</span><br><span class="line">2023-12-13 16:49:44,873 INFO resource.ResourceUtils: =========================================                                                                      =====================</span><br><span class="line">2023-12-13 16:49:44,874 INFO spark.SparkContext: Submitted application: Spark Pi</span><br><span class="line">2023-12-13 16:49:44,939 INFO resource.ResourceProfile: Default ResourceProfile created, execut                                                                      or resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory,                                                                       amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), t                                                                      ask resources: Map(cpus -&gt; name: cpus, amount: 1.0)</span><br><span class="line">2023-12-13 16:49:44,961 INFO resource.ResourceProfile: Limiting resource is cpus at 1 tasks pe                                                                      r executor</span><br><span class="line">2023-12-13 16:49:44,992 INFO resource.ResourceProfileManager: Added ResourceProfile <span class="built_in">id</span>: 0</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">2023-12-13 16:50:47,759 INFO scheduler.DAGScheduler: Job 0 finished: reduce at SparkPi.scala:3                                                                      8, took 20.828142 s</span><br><span class="line">Pi is roughly 3.139227139227139</span><br><span class="line">2023-12-13 16:50:47,885 INFO server.AbstractConnector: Stopped Spark@6e9c413e&#123;HTTP/1.1, (http/                                                                      1.1)&#125;&#123;0.0.0.0:4040&#125;</span><br><span class="line">2023-12-13 16:50:47,900 INFO ui.SparkUI: Stopped Spark web UI at http://hadoop301:4040</span><br><span class="line">2023-12-13 16:50:47,909 INFO cluster.YarnClientSchedulerBackend: Interrupting monitor thread</span><br><span class="line">2023-12-13 16:50:47,998 INFO cluster.YarnClientSchedulerBackend: Shutting down all executors</span><br><span class="line">2023-12-13 16:50:47,999 INFO cluster.YarnSchedulerBackend<span class="variable">$YarnDriverEndpoint</span>: Asking each <span class="built_in">exec</span>                                                                      utor to shut down</span><br><span class="line">2023-12-13 16:50:48,037 INFO cluster.YarnClientSchedulerBackend: YARN client scheduler backend                                                                       Stopped</span><br><span class="line">2023-12-13 16:50:48,440 INFO spark.MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpo                                                                      int stopped!</span><br><span class="line">2023-12-13 16:50:48,511 INFO memory.MemoryStore: MemoryStore cleared</span><br><span class="line">2023-12-13 16:50:48,511 INFO storage.BlockManager: BlockManager stopped</span><br><span class="line">2023-12-13 16:50:48,543 INFO storage.BlockManagerMaster: BlockManagerMaster stopped</span><br><span class="line">2023-12-13 16:50:48,550 INFO scheduler.OutputCommitCoordinator<span class="variable">$OutputCommitCoordinatorEndpoint</span>                                                                      : OutputCommitCoordinator stopped!</span><br><span class="line">2023-12-13 16:50:48,644 INFO spark.SparkContext: Successfully stopped SparkContext</span><br><span class="line">2023-12-13 16:50:48,654 INFO util.ShutdownHookManager: Shutdown hook called</span><br><span class="line">2023-12-13 16:50:48,689 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-646e1f5a-                                                                      38b0-46f9-948c-af2f753731d7</span><br><span class="line">2023-12-13 16:50:48,738 INFO util.ShutdownHookManager: Deleting directory /tmp/spark-5d835f52-                                                                      96f8-4b11-82bd-e5cfad7e0a80</span><br></pre></td></tr></table></figure>



<ol start="8">
<li>Web 页面查看日志：<a href="http://hadoop302:8088/">http://hadoop302:8088</a></li>
</ol>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213165525855.png" alt="image-20231213165525855"></p>
<h4 id="五、Windows模式"><a href="#五、Windows模式" class="headerlink" title="五、Windows模式"></a>五、Windows模式</h4><p>1). 解压文件</p>
<p>将文件spark-3.1.1-bin-hadoop3.2.tgz解压到无中文五空格的路径中</p>
<p>2).启动本地环境</p>
<ol>
<li>执行解压文件路径下bin目录中的spark-shell.com文件，启动Spark本地环境</li>
</ol>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213171654405.png" alt="image-20231213171654405"></p>
<ol start="2">
<li>在bin目录中创建input目录，并添加word.txt文件，在命令行中输入脚本代码</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Hello World</span><br><span class="line">Hello Spark</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>在 终端输入如下命令</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sc.textFile(<span class="string">&quot;input/word.txt&quot;</span>).flatMap(_.<span class="built_in">split</span>(<span class="string">&quot;,&quot;</span>)).map((_,<span class="number">1</span>)).reduceByKey(_+_).collect</span><br></pre></td></tr></table></figure>

<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213173500001.png" alt="image-20231213173500001"></p>
<p>可以打开UI页面看一下</p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213173825783.png" alt="image-20231213173825783"></p>
<p>3).命令行提交应用</p>
<p>在DOS命令行窗口中执行提交命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spark-submit --class org.apache.spark.examples.SparkPi --master local[2] ../examples/jars/spark-examples_2.12-3.1.1.jar 10</span><br></pre></td></tr></table></figure>



<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231213174537566.png" alt="image-20231213174537566"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">spark-submit --class org.apache.spark.examples.SparkPi --master local[2] ../examples/jars/spark-examples_2.12-3.1.1.jar 10</span><br></pre></td></tr></table></figure>





<h4 id="六、Spark核心编程"><a href="#六、Spark核心编程" class="headerlink" title="六、Spark核心编程"></a>六、Spark核心编程</h4><p>1). 数据接收与发送（分布式框架）</p>
<p><strong>Executor：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">InputStream</span></span><br><span class="line"><span class="keyword">import</span> java.net.&#123;<span class="type">ServerSocket</span>, <span class="type">Socket</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动服务器，接收数据</span></span><br><span class="line">    <span class="keyword">val</span> server = <span class="keyword">new</span> <span class="type">ServerSocket</span>(<span class="number">9999</span>)</span><br><span class="line">    println(<span class="string">&quot;服务器启动，等待接收数据&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待客户端的连接</span></span><br><span class="line">    <span class="keyword">val</span> client: <span class="type">Socket</span> = server.accept()</span><br><span class="line">    <span class="keyword">val</span> in: <span class="type">InputStream</span> = client.getInputStream</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> i: <span class="type">Int</span> = in.read()</span><br><span class="line">    println(<span class="string">&quot;接收到客户端发送的数据：&quot;</span> + i)</span><br><span class="line">    in.close()</span><br><span class="line">    client.close()</span><br><span class="line">    server.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先运行Executor</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214083253778.png" alt="image-20231214083253778" style="zoom:50%;" />

<p><strong>Driver：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.<span class="type">Socket</span></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">OutputStream</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Driver</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 连接服务器</span></span><br><span class="line">    <span class="keyword">val</span> client = <span class="keyword">new</span> <span class="type">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> out: <span class="type">OutputStream</span> = client.getOutputStream</span><br><span class="line">    out.write(<span class="number">2</span>)</span><br><span class="line">    out.flush()</span><br><span class="line">    out.close()</span><br><span class="line"></span><br><span class="line">    client.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再运行Driver</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214083353078.png" alt="image-20231214083353078" style="zoom:50%;" />



<p>2). 数据接收与发送（分布式框架计算）</p>
<p><strong>Task：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> datas = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  val logic = ( num:Int )=&gt;&#123; num*2 &#125;</span></span><br><span class="line">  <span class="keyword">val</span> logic : (<span class="type">Int</span>)=&gt;<span class="type">Int</span> = _ * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">compute</span></span>() =&#123;</span><br><span class="line">    datas.map(logic)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Executor：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">InputStream</span>, <span class="type">ObjectInputStream</span>&#125;</span><br><span class="line"><span class="keyword">import</span> java.net.&#123;<span class="type">ServerSocket</span>, <span class="type">Socket</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动服务器，接收数据</span></span><br><span class="line">    <span class="keyword">val</span> server = <span class="keyword">new</span> <span class="type">ServerSocket</span>(<span class="number">9999</span>)</span><br><span class="line">    println(<span class="string">&quot;服务器启动，等待接收数据&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待客户端的连接</span></span><br><span class="line">    <span class="keyword">val</span> client: <span class="type">Socket</span> = server.accept()</span><br><span class="line">    <span class="keyword">val</span> in: <span class="type">InputStream</span> = client.getInputStream</span><br><span class="line">    <span class="keyword">val</span> objIn = <span class="keyword">new</span> <span class="type">ObjectInputStream</span>(in)</span><br><span class="line">    <span class="keyword">val</span> task: <span class="type">Task</span> = objIn.readObject().asInstanceOf[<span class="type">Task</span>]</span><br><span class="line">    <span class="keyword">val</span> ints: <span class="type">List</span>[<span class="type">Int</span>] = task.compute()</span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;计算节点计算的结果为：&quot;</span> + ints)</span><br><span class="line">    objIn.close()</span><br><span class="line">    client.close()</span><br><span class="line">    server.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先启动Executor</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214085834628.png" alt="image-20231214085834628" style="zoom:50%;" />



<p><strong>Driver：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.<span class="type">Socket</span></span><br><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">ObjectOutputStream</span>, <span class="type">OutputStream</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Driver</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 连接服务器</span></span><br><span class="line">    <span class="keyword">val</span> client = <span class="keyword">new</span> <span class="type">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> out: <span class="type">OutputStream</span> = client.getOutputStream</span><br><span class="line">    <span class="keyword">val</span> objOut = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(out)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> task = <span class="keyword">new</span> <span class="type">Task</span>()</span><br><span class="line">    objOut.writeObject(task)</span><br><span class="line">    objOut.flush()</span><br><span class="line">    objOut.close()</span><br><span class="line">    client.close()</span><br><span class="line">    println(<span class="string">&quot;客户端数据发送完毕&quot;</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再启动Driver</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214085907092.png" alt="image-20231214085907092" style="zoom:50%;" />

<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214085922852.png" alt="image-20231214085922852" style="zoom:50%;" />



<p>3).数据接收与发送（分布式框架发布计算）</p>
<p><strong>Task：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> datas = <span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  val logic = ( num:Int )=&gt;&#123; num*2 &#125;</span></span><br><span class="line">  <span class="keyword">val</span> logic : (<span class="type">Int</span>)=&gt;<span class="type">Int</span> = _ * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>SubTask：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubTask</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> datas :  <span class="type">List</span>[<span class="type">Int</span>] = _</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> logic : (<span class="type">Int</span>)=&gt;<span class="type">Int</span> = _</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">compute</span></span>() =&#123;</span><br><span class="line">    datas.map(logic)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Executor：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">InputStream</span>, <span class="type">ObjectInputStream</span>&#125;</span><br><span class="line"><span class="keyword">import</span> java.net.&#123;<span class="type">ServerSocket</span>, <span class="type">Socket</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动服务器，接收数据</span></span><br><span class="line">    <span class="keyword">val</span> server = <span class="keyword">new</span> <span class="type">ServerSocket</span>(<span class="number">9999</span>)</span><br><span class="line">    println(<span class="string">&quot;服务器启动，等待接收数据&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待客户端的连接</span></span><br><span class="line">    <span class="keyword">val</span> client: <span class="type">Socket</span> = server.accept()</span><br><span class="line">    <span class="keyword">val</span> in: <span class="type">InputStream</span> = client.getInputStream</span><br><span class="line">    <span class="keyword">val</span> objIn = <span class="keyword">new</span> <span class="type">ObjectInputStream</span>(in)</span><br><span class="line">    <span class="keyword">val</span> task: <span class="type">SubTask</span> = objIn.readObject().asInstanceOf[<span class="type">SubTask</span>]</span><br><span class="line">    <span class="keyword">val</span> ints: <span class="type">List</span>[<span class="type">Int</span>] = task.compute()</span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;计算节点[9999]计算的结果为：&quot;</span> + ints)</span><br><span class="line">    objIn.close()</span><br><span class="line">    client.close()</span><br><span class="line">    server.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动结果：</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214092354917.png" alt="image-20231214092354917" style="zoom:50%;" />

<p><strong>Executor2：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">InputStream</span>, <span class="type">ObjectInputStream</span>&#125;</span><br><span class="line"><span class="keyword">import</span> java.net.&#123;<span class="type">ServerSocket</span>, <span class="type">Socket</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Executor2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 启动服务器，接收数据</span></span><br><span class="line">    <span class="keyword">val</span> server = <span class="keyword">new</span> <span class="type">ServerSocket</span>(<span class="number">8888</span>)</span><br><span class="line">    println(<span class="string">&quot;服务器启动，等待接收数据&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 等待客户端的连接</span></span><br><span class="line">    <span class="keyword">val</span> client: <span class="type">Socket</span> = server.accept()</span><br><span class="line">    <span class="keyword">val</span> in: <span class="type">InputStream</span> = client.getInputStream</span><br><span class="line">    <span class="keyword">val</span> objIn = <span class="keyword">new</span> <span class="type">ObjectInputStream</span>(in)</span><br><span class="line">    <span class="keyword">val</span> task: <span class="type">SubTask</span> = objIn.readObject().asInstanceOf[<span class="type">SubTask</span>]</span><br><span class="line">    <span class="keyword">val</span> ints: <span class="type">List</span>[<span class="type">Int</span>] = task.compute()</span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;计算节点[8888]计算的结果为：&quot;</span> + ints)</span><br><span class="line">    objIn.close()</span><br><span class="line">    client.close()</span><br><span class="line">    server.close()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动结果：</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214092419564.png" alt="image-20231214092419564" style="zoom:50%;" />

<p><strong>Driver：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.<span class="type">Socket</span></span><br><span class="line"><span class="keyword">import</span> java.io.&#123;<span class="type">ObjectOutputStream</span>, <span class="type">OutputStream</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Driver</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">// 连接服务器</span></span><br><span class="line">    <span class="keyword">val</span> client1 = <span class="keyword">new</span> <span class="type">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">val</span> client2 = <span class="keyword">new</span> <span class="type">Socket</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> task = <span class="keyword">new</span> <span class="type">Task</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> out1: <span class="type">OutputStream</span> = client1.getOutputStream</span><br><span class="line">    <span class="keyword">val</span> objOut1 = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(out1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> subTask = <span class="keyword">new</span> <span class="type">SubTask</span>()</span><br><span class="line">    subTask.logic = task.logic</span><br><span class="line">    subTask.datas = task.datas.take(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    objOut1.writeObject(subTask)</span><br><span class="line">    objOut1.flush()</span><br><span class="line">    objOut1.close()</span><br><span class="line">    client1.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> out2: <span class="type">OutputStream</span> = client2.getOutputStream</span><br><span class="line">    <span class="keyword">val</span> objOut2 = <span class="keyword">new</span> <span class="type">ObjectOutputStream</span>(out2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> subTask1 = <span class="keyword">new</span> <span class="type">SubTask</span>()</span><br><span class="line">    subTask1.logic = task.logic</span><br><span class="line">    subTask1.datas = task.datas.takeRight(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    objOut2.writeObject(subTask1)</span><br><span class="line">    objOut2.flush()</span><br><span class="line">    objOut2.close()</span><br><span class="line">    client2.close()</span><br><span class="line">    println(<span class="string">&quot;客户端数据发送完毕&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动结果：</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214092448067.png" alt="image-20231214092448067" style="zoom:50%;" />

<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214092503853.png" alt="image-20231214092503853" style="zoom:50%;" />

<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231214092523751.png" alt="image-20231214092523751" style="zoom:50%;" />





<h4 id="七、弹性分布式数据集（RDD）"><a href="#七、弹性分布式数据集（RDD）" class="headerlink" title="七、弹性分布式数据集（RDD）"></a>七、弹性分布式数据集（RDD）</h4><p>1). 什么是RDD</p>
<p>​      RDD (Resilient Distributed Dataset）叫做弹性分布式数据集，是Spark中最基本的<strong>数据处理模型</strong>。代码中是一个抽象类，它代表一个弹性的、不可变、可分区、里面的元素可并行计算的集合。</p>
<p>RDD的数据处理类似于Java中的IO流，也有装饰者设计模式。</p>
<p>RDD的数据只有在调用collect方法时，才会真正执行业务逻辑操作。之前的封装都是功能的扩展。</p>
<p>RDD是不保存数据的，但是IO可以临时保存一部分数据。</p>
<p>2).RDD的创建</p>
<ol>
<li>从集合（内存）中创建RDD</li>
</ol>
<p>从集合中创建RDD, Spark主要提供了两个方法: parallelize和makeRDD</p>
<p><strong>rdd_Memory：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.rdd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">rdd_Memory</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 准备环境</span></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;RDD&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparkConf)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 创建RDD</span></span><br><span class="line">    <span class="comment">// 从内存中创建RDD，将内存中集合的数据作为处理的数据源</span></span><br><span class="line">    <span class="keyword">val</span> seq = <span class="type">Seq</span>[<span class="type">Int</span>](elems = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// parallelize : 并行</span></span><br><span class="line"><span class="comment">//    val rdd: RDD[Int] =  sc.parallelize(seq)</span></span><br><span class="line">    <span class="comment">// makeRDD 方法在底层实现时其实就是调用了rdd对象的parallelize方法。</span></span><br><span class="line">    <span class="keyword">val</span> rdd: <span class="type">RDD</span>[<span class="type">Int</span>] = sc.makeRDD(seq)</span><br><span class="line"></span><br><span class="line">    rdd.collect().foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭环境</span></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>从外部存储（文件）中创建RDD</li>
</ol>
<p><strong>rdd_File：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.rdd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">rdd_File</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 准备环境</span></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;RDD&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparkConf)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 创建RDD</span></span><br><span class="line">    <span class="comment">// 从文件中创建RDD，将文件中的数据作为处理的数据源</span></span><br><span class="line">    <span class="comment">// path 路径默认以当前环境的根路径为基准。可以写绝对路径，也可以写相对路径</span></span><br><span class="line"><span class="comment">//    sc.textFile(&quot;E:\\spack-study\\datas\\1.txt&quot;)</span></span><br><span class="line">    <span class="comment">// path路径可以是文件的具体路径，也可以是目录名称</span></span><br><span class="line"><span class="comment">//     val rdd: RDD[String] = sc.textFile(&quot;datas/1.txt&quot;)</span></span><br><span class="line">    <span class="comment">// path路径可以是文件的具体路径，也可以是目录名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    val rdd = sc.textFile(&quot;datas&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// path 路径还可以使用通配符*</span></span><br><span class="line">    <span class="keyword">val</span> rdd = sc.textFile(<span class="string">&quot;datas/1*.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//path还可以是分布式存储系统路径：HDFS</span></span><br><span class="line"></span><br><span class="line">    rdd.collect().foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭环境</span></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>rdd_File1：</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.rdd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">rdd_File1</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 准备环境</span></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;RDD&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparkConf)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 创建RDD</span></span><br><span class="line">    <span class="comment">// 从文件中创建RDD，将文件中的数据作为处理的数据源</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// textFile : 以行为单位来读取数据，读取的数据都是字符串</span></span><br><span class="line">    <span class="comment">// wholeTextFiles ：以文件为单位读取数据</span></span><br><span class="line">    <span class="comment">// 读取的结果表示为元组，第一个元素表示路径，第二个元素表示文件内容</span></span><br><span class="line">    <span class="keyword">val</span> rdd = sc.wholeTextFiles(<span class="string">&quot;datas/*.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">    rdd.collect().foreach(println)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭环境</span></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>RDD的并行度</li>
</ol>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> spark.rdd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">RDD</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">rdd_Memory_Par</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 准备环境</span></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;RDD&quot;</span>)</span><br><span class="line">    sparkConf.set(<span class="string">&quot;spark.default.parallelism&quot;</span>, <span class="string">&quot;5&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(sparkConf)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 创建RDD</span></span><br><span class="line">    <span class="comment">// RDD的并行度 &amp; 分区</span></span><br><span class="line">    <span class="comment">// makeRDD方法可以传递第二个参数，这个参数表示分区的数量</span></span><br><span class="line">    <span class="comment">// 第二个参数可以不传递的，那么makeRDD 方法会使用默认值： defaultParallelism(默认的并行度)</span></span><br><span class="line"><span class="comment">//    val rdd = sc.makeRDD(List(1,2,3,4),2)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//scheduler. conf. getInt (&quot;spark.default.parallelism &quot;,， totalCores)</span></span><br><span class="line">    <span class="comment">//spark在默认情况下，从配置对象中获取配置参数: spark. default.parallelism</span></span><br><span class="line">    <span class="comment">//如果获取不到，那么使用totalCores属性，这个属性取值为当前环境的最大可用核数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> rdd = sc.makeRDD(<span class="type">List</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将处理的数据保存成分区文件</span></span><br><span class="line">    rdd.saveAsTextFile(<span class="string">&quot;output&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO 关闭环境</span></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



















































<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p><strong>4 常用命令</strong></p>
<p><strong>4.1 docker 进程</strong></p>
<p>docer 进程启动、停止、重启等三种 常见操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service docker start   <span class="comment"># 启动docker</span></span><br><span class="line">service docker stop    <span class="comment"># 关机docker</span></span><br><span class="line">service docker restart <span class="comment"># 重启docker</span></span><br></pre></td></tr></table></figure>

<p><strong>4.2 镜像操作</strong></p>
<p>镜像是容器执行的前提条件，一般需要掌握命令注意有<strong>搜索</strong>、<strong>下载</strong>、<strong>删除</strong>、<strong>创建</strong>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images      <span class="comment"># 镜像列表</span></span><br><span class="line">docker search xxx  <span class="comment"># 检索镜像, 从镜像仓库中检索</span></span><br><span class="line">docker pull xxx    <span class="comment"># 下载镜像</span></span><br><span class="line">docker rmi xxx     <span class="comment"># 删除镜像</span></span><br></pre></td></tr></table></figure>

<p><strong>4.3 容器操作</strong></p>
<p>容器的各种操作主要包括，启动、关闭、重启和日志查询。</p>
<p><strong>4.3.1 容器创建 ：run</strong></p>
<p>加载镜像，创建容器run 后面可以跟很多的参数，比如容器暴露端口指定，存储映射，权限等等，由于参数过多，下面只给出几个不同的例子，来具体的演示参数可以怎么加</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">docker run</span><br><span class="line">         -i              # 打开 STDIN，用于控制台交互</span><br><span class="line">         -t              # 支持终端登录</span><br><span class="line">         -d              # 要求容器后台运行，默认前台 前三个标签可连写为itd</span><br><span class="line">         -v              # 挂载数据卷</span><br><span class="line">         --name=dc_nm    # 指定容器名</span><br><span class="line">         -p 8080:80      # 暴露容器端口 80，并与宿主机端口 8080 绑定  </span><br><span class="line">         centos:latest   # 镜像名:版本</span><br></pre></td></tr></table></figure>



<p><strong>4.3.2 基本操作:</strong></p>
<p>容器基本操作主要包括启动、停止、重启、删除</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a                       <span class="comment"># 查看容器列表， 列出所有的容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it <span class="string">&quot;ct_id&quot;</span> /bin/bash  <span class="comment"># 进入容器,ct_id是容器id</span></span><br><span class="line">docker start xxx                   <span class="comment"># xxx可以是容器名，也可以是容器id</span></span><br><span class="line">docker stop xxx                    <span class="comment"># 关闭容器</span></span><br><span class="line">docker restart xxx                 <span class="comment"># 重启</span></span><br><span class="line">docker <span class="built_in">rm</span> xxx                      <span class="comment"># 删除</span></span><br></pre></td></tr></table></figure>

<p>从宿主机复制文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">cp</span> 宿主机文件路径 容器<span class="built_in">id</span>:/home/your_path</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;jdbc:mysql://hadoop301:3306/hive3?createDatabaseIfNotExist=true&amp;amp;useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;root&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;root&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- H2S运行绑定host--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;hadoop301&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- 远程模式部署metastore metastore地址--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;hive.metastore.uris&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;thrift://hadoop301:9083&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"> </span><br><span class="line">&lt;!-- 关闭元数据存储授权--&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">	&lt;name&gt;hive.metastore.event.db.notification.api.auth&lt;/name&gt;</span><br><span class="line">	&lt;value&gt;false&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;     </span><br></pre></td></tr></table></figure>







<p>以下是一个示例的Scala代码，可用于将MySQL的shtd_store库中的数据抽取到Hive的ods库中。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">SparkSession</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">DataExtraction</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> spark = <span class="type">SparkSession</span>.builder()</span><br><span class="line">      .appName(<span class="string">&quot;DataExtraction&quot;</span>)</span><br><span class="line">      .enableHiveSupport()</span><br><span class="line">      .getOrCreate()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置分区字段值</span></span><br><span class="line">    <span class="keyword">val</span> partitionValue = java.time.<span class="type">LocalDate</span>.now.minusDays(<span class="number">1</span>).format(java.time.format.<span class="type">DateTimeFormatter</span>.ofPattern(<span class="string">&quot;yyyyMMdd&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽取Table1的全量数据，并添加静态分区</span></span><br><span class="line">    <span class="keyword">val</span> table1DF = spark.read.format(<span class="string">&quot;jdbc&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;jdbc:mysql://localhost:3306/shtd_store&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;driver&quot;</span>, <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;dbtable&quot;</span>, <span class="string">&quot;Table1&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;mysql_username&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;mysql_password&quot;</span>)</span><br><span class="line">      .load()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> table1WithPartitionDF = table1DF.withColumn(<span class="string">&quot;partition_col&quot;</span>, lit(partitionValue))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将数据保存到Hive表中</span></span><br><span class="line">    table1WithPartitionDF.write.format(<span class="string">&quot;hive&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;table&quot;</span>, <span class="string">&quot;ods.table1&quot;</span>)</span><br><span class="line">      .mode(<span class="string">&quot;overwrite&quot;</span>)</span><br><span class="line">      .save()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 显示分区信息</span></span><br><span class="line">    spark.sql(<span class="string">&quot;SHOW PARTITIONS ods.table1&quot;</span>).show()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用Maven创建项目：</p>
<ol>
<li>确保你已经安装了Maven。</li>
<li>在项目的根目录下创建一个Maven项目。可以使用命令<code>mvn archetype:generate</code>并选择适合的Maven项目模板。</li>
<li>在生成的项目中，将<code>DataExtraction.scala</code>文件复制到源代码目录中（默认为<code>src/main/scala</code>）。</li>
<li>在项目的根目录中打开终端或命令提示符，运行<code>mvn package</code>命令来打包项目。</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">import org.apache.spark.sql.SparkSession</span><br><span class="line">import org.apache.spark.sql.functions.&#123;lit, current_date, date_format&#125;</span><br><span class="line"></span><br><span class="line">object DataExtraction &#123;</span><br><span class="line">  def main(args: Array[String]): Unit = &#123;</span><br><span class="line">    val spark = SparkSession.builder()</span><br><span class="line">      .appName(<span class="string">&quot;DataExtraction&quot;</span>)</span><br><span class="line">      .enableHiveSupport()</span><br><span class="line">      .getOrCreate()</span><br><span class="line"></span><br><span class="line">    // 全量抽取 Table1 的数据到 DataFrame</span><br><span class="line">    val table1DF = spark.read.format(<span class="string">&quot;jdbc&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;jdbc:mysql://bigdata1:3306/hadoopdb01&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;driver&quot;</span>, <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;dbtable&quot;</span>, <span class="string">&quot;base_region&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line">      .load()</span><br><span class="line"></span><br><span class="line">    // 添加静态分区字段，分区值为当前比赛日的前一天日期</span><br><span class="line">    val partitionValue = current_date().minus(1).cast(<span class="string">&quot;string&quot;</span>)</span><br><span class="line">    val table1WithPartitionDF = table1DF.withColumn(<span class="string">&quot;partition_date&quot;</span>, lit(partitionValue))</span><br><span class="line"></span><br><span class="line">    // 将数据写入 Hive 表 table1，并覆盖已存在的分区</span><br><span class="line">    table1WithPartitionDF.write.format(<span class="string">&quot;hive&quot;</span>)</span><br><span class="line">      .option(<span class="string">&quot;table&quot;</span>, <span class="string">&quot;ods.table1&quot;</span>)</span><br><span class="line">      .mode(<span class="string">&quot;overwrite&quot;</span>)</span><br><span class="line">      .save()</span><br><span class="line"></span><br><span class="line">    // 在 Hive CLI 中执行 show partitions 命令</span><br><span class="line">    // show partitions ods.table1;</span><br><span class="line"></span><br><span class="line">    // 复制并粘贴 show partitions 的结果截图至报告中</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./spark-submit  --class DataExtraction   /opt/module/spark-3.1.1-yarn/data/sparkexamples-1.0-SNAPSHOT.jar</span><br><span class="line"></span><br><span class="line">spark-submit --master spark://bigdata1:7077 --class test.DataExtraction sparkexamples.jar</span><br><span class="line"></span><br><span class="line">spark-submit --master spark://bigdata1:7077 --class test.DataExtraction --executor-memory 2g --total-executor-cores 4 /opt/sparkexamples.jar</span><br><span class="line"></span><br><span class="line">spark-submit --class test.SparkExample --master yarn --deploy-mode cluster sparkexamples.jar</span><br><span class="line"></span><br><span class="line">spark-submit --class numtest.demo01 --master spark://bigdata1:7077 --executor-memory 2g --total-executor-cores 4   /opt/gu.jar </span><br><span class="line"></span><br><span class="line">spark-submit --class test.SparkExample --master yarn --deploy-mode cluster /opt/sparkexamples.jar</span><br></pre></td></tr></table></figure>



<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231225215043624.png" alt="image-20231225215043624"></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">spark-submit --class test.DataExtraction --master yarn --deploy-mode cluster /opt/sparkexamples.jar</span><br><span class="line"></span><br><span class="line">spark-submit --class test.InsertDataToHive --master yarn --deploy-mode client /opt/sparkexamples.jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">val pushDownQuery = <span class="string">&quot;select * from city limit 10&quot;</span></span><br><span class="line">val jdbcDF = spark.read</span><br><span class="line">  .format(<span class="string">&quot;jdbc&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;jdbc:mysql://hadoop301/world&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;driver&quot;</span>, <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line">  .option(<span class="string">&quot;dbtable&quot;</span>, city)</span><br><span class="line">  .load()</span><br><span class="line">jdbcDF.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">spark-submit --master yarn --class test.InsertDataToHive --deploy-mode client /opt/sparkexamples.jar</span><br><span class="line"></span><br><span class="line">spark-submit --master spark://bigdata1:7077 --class test.DataExtraction sparkexamples.jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-submin --master spark://bigdate1:7077 --class test.table1 /opt/dd.jar</span><br><span class="line"></span><br><span class="line">spark-submin --master spark://bigdate1:7077 --class test.d /opt/ss.jar</span><br><span class="line"></span><br><span class="line">spark-submin --master spark://bigdate:7077 --class test.djj /opt/ss.jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-submin --master spark://bigdate1:7077 --class tes </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-submin --master yarn --class --deploy-mode client  /op</span><br><span class="line">spark-submin --master yarn --class --deploy-mode deploy-mode client client client /op</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-submin --master yarn --class --deploy-mode client /</span><br><span class="line">--deploy-mode client</span><br><span class="line">--deploy-mode client</span><br><span class="line">--deploy-mode client</span><br><span class="line"></span><br><span class="line">--deploy-mode client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--deploy-mode client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--deploy-mode client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-subin -cmaster yarn --class tekkk  --deploy-mode client /op</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spark-subin --master yarn --class tes  --deploy-mode client /op</span><br><span class="line"></span><br><span class="line">spark-subin --master yarn --class --deploy-mode clie</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>hadoop</tag>
        <tag>scala</tag>
      </tags>
  </entry>
  <entry>
    <title>数据采集</title>
    <url>/2023-12-29-data-collection.html</url>
    <content><![CDATA[<h2 id="数据采集01"><a href="#数据采集01" class="headerlink" title="数据采集01"></a>数据采集01</h2><p><strong>整体相关学习的内容</strong></p>
<ul>
<li>安装Python解释器</li>
<li>安装PyChara开发工具</li>
<li>自己要抽时间去回顾蓝桥云课《Python程序设计基础》内容</li>
<li>网络爬虫的基本概念以及浏览器的基本应用</li>
<li>回顾HTML的相关标签和属性（为数据采集的必要性内容）</li>
<li>回顾CSS标签的基本样式的规则选择器写法（数据采集会使用）</li>
<li>请求库Requests库(基本应用、解决反爬机制应用)</li>
<li>网页内容的解析库Beautiful Soup(基本应用到高级应用)</li>
<li>如何使用网络爬虫技术去采集文本内容和多媒体内容</li>
</ul>
<h3 id="一、Python解释器和开发工具安装"><a href="#一、Python解释器和开发工具安装" class="headerlink" title="一、Python解释器和开发工具安装"></a>一、Python解释器和开发工具安装</h3><h5 id="1-1-Python-解释器的安装"><a href="#1-1-Python-解释器的安装" class="headerlink" title="1.1 Python 解释器的安装"></a>1.1 Python 解释器的安装</h5><p>安装的要求：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281002774.png" alt="image-20260128100240651"></p>
<p>等待安装完成：</p>
<img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20231018081118509.png" alt="image-20231018081118509" style="zoom:50%;" />

<p>安装完成并进行Close关闭</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281003542.png" alt="image-20260128100303444"></p>
<p>验证Python版本及安装情况，进入终端输入 Python -V</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\dengqiang&gt;python -V</span><br><span class="line">Python 3.8.8</span><br></pre></td></tr></table></figure>







<p><strong>Python关于下载的相关扩展(国内镜像源配置)</strong></p>
<p>默认情况下Python下载一些第三方库都在国外的地址下载，其下载的速度很慢，而且有时无法下载，所有我们尽量使用国内镜像源进行下载相关内容，以下会进行讲解国内的配置。</p>
<ol>
<li><p>有哪些国内镜像源下载地址：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">清华：https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">阿里云：https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"></span><br><span class="line">中国科技大学：https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line"></span><br><span class="line">山东理工大学：</span><br><span class="line"></span><br><span class="line">豆瓣：https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure>

<p>这些镜像源国内会每5分钟进行更新。</p>
<p>在C盘用户目录新建一个pip文件夹。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281003876.png" alt="image-20260128100323793"></p>
<p>再在pip文件夹中新建一个pip.ini文件，并打开编辑以下相关内容后保存。</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[global]</span></span><br><span class="line"><span class="attr">index-url</span>=https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line"><span class="section">[install]</span></span><br><span class="line"><span class="attr">trusted-host</span>=mirrors.aliyun.com</span><br></pre></td></tr></table></figure></li>
</ol>
<p>验证镜像源的情况(终端打开)：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip config <span class="built_in">list</span></span><br></pre></td></tr></table></figure>



<h5 id="1-2-pip简单命令的使用-使用终端操作"><a href="#1-2-pip简单命令的使用-使用终端操作" class="headerlink" title="1.2  pip简单命令的使用(使用终端操作)"></a>1.2  pip简单命令的使用(使用终端操作)</h5><h6 id="1-2-1-查看已安装的软件包的信息"><a href="#1-2-1-查看已安装的软件包的信息" class="headerlink" title="1.2.1 查看已安装的软件包的信息"></a>1.2.1 查看已安装的软件包的信息</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Package                       Version</span><br><span class="line">----------------------------- --------------------</span><br><span class="line">alabaster                     0.7.12</span><br><span class="line">anaconda-client               1.11.0</span><br><span class="line">anaconda-navigator            2.3.1</span><br><span class="line">anaconda-project              0.11.1</span><br><span class="line">anyio                         3.5.0</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>



<h6 id="1-2-2-更新pip命令"><a href="#1-2-2-更新pip命令" class="headerlink" title="1.2.2 更新pip命令"></a>1.2.2 更新pip命令</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\14949&gt;python -m pip install --upgrade pip</span><br><span class="line">Looking in indexes: https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">Requirement already satisfied: pip in d:\ops\anaconda\lib\site-packages (22.2.2)</span><br><span class="line">Collecting pip</span><br><span class="line">  Downloading https://mirrors.aliyun.com/pypi/packages/e0/63/b428aaca15fcd98c39b07ca7149e24bc14205ad0f1c80ba2b01835aedde1/pip-23.3-py3-none-any.whl (2.1 MB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 757.9 kB/s eta 0:00:00</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  Attempting uninstall: pip</span><br><span class="line">    Found existing installation: pip 22.2.2</span><br><span class="line">    Uninstalling pip-22.2.2:</span><br><span class="line">      Successfully uninstalled pip-22.2.2</span><br><span class="line">Successfully installed pip-23.3</span><br></pre></td></tr></table></figure>



<p>pip卸载</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m pip uninstall pip</span><br></pre></td></tr></table></figure>





<h6 id="1-2-3-使用pip安装文本转语音的库"><a href="#1-2-3-使用pip安装文本转语音的库" class="headerlink" title="1.2.3 使用pip安装文本转语音的库"></a>1.2.3 使用pip安装文本转语音的库</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install pyttsx3</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281003146.png" alt="image-20260128100346075"></p>
<p>进入Python使用代码实现语音播报</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\dengqiang&gt;python</span><br><span class="line">Python 3.8.8 (tags/v3.8.8:024d805, Feb 19 2021, 13:18:16) [MSC v.1928 64 bit</span><br><span class="line">(AMD64)] on win32</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import pyttsx3</span><br><span class="line">&gt;&gt;&gt; engine = pyttsx3.init()</span><br><span class="line">&gt;&gt;&gt; engine.say(&#x27;How Do You Do&#x27;)</span><br><span class="line">&gt;&gt;&gt; engine.runAndWait()</span><br><span class="line">&gt;&gt;&gt; engine.say(&#x27;你好！这是中国人民广播电台，现在播报今日的天气情况，小雨转中雨，中雨转多</span><br><span class="line">云。&#x27;)</span><br><span class="line">&gt;&gt;&gt; engine.runAndWait()</span><br><span class="line">&gt;&gt;&gt; exit()</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<h6 id="1-2-4-使用pip更新已有的第三方库"><a href="#1-2-4-使用pip更新已有的第三方库" class="headerlink" title="1.2.4 使用pip更新已有的第三方库"></a>1.2.4 使用pip更新已有的第三方库</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install -U package-name(第三方库名字)</span><br></pre></td></tr></table></figure>

<h6 id="1-2-5-使用pip删除不需要的第三方库"><a href="#1-2-5-使用pip删除不需要的第三方库" class="headerlink" title="1.2.5 使用pip删除不需要的第三方库"></a>1.2.5 使用pip删除不需要的第三方库</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip uninstall package-name(第三方库名字)</span><br></pre></td></tr></table></figure>



<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281003580.png" alt="image-20260128100356451"></p>
<p>下载库：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>



<p>百度文库复制方法：</p>
<p>Edge –&gt;  read:网址</p>
<h5 id="1-3-安装Python开发工具"><a href="#1-3-安装Python开发工具" class="headerlink" title="1.3 安装Python开发工具"></a>1.3 安装Python开发工具</h5><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004166.png" alt="image-20260128100403103"></p>
<p>根据自己的路径进行修改</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004358.png" alt="image-20260128100414295"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004981.png" alt="image-20260128100423926"></p>
<p><strong>新建Python项目</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004858.png" alt="image-20260128100430784"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004586.png" alt="image-20260128100436517"></p>
<p><strong>代码体验</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pyttsx3</span><br><span class="line">engine = pyttsx3.init() <span class="comment"># 初始化语音引擎</span></span><br><span class="line">text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">第一章 惊蛰</span></span><br><span class="line"><span class="string">二月二，龙抬头。</span></span><br><span class="line"><span class="string">暮色里，小镇名叫泥瓶巷的僻静地方，有位孤苦伶仃的清瘦少年，此时他正按照习俗，一手持蜡烛，一</span></span><br><span class="line"><span class="string">手持桃枝，照耀房梁、墙壁、木床等处，用桃枝敲敲打打，</span></span><br><span class="line"><span class="string">试图借此驱赶蛇蝎、蜈蚣等，嘴里念念有词，是这座小镇祖祖辈辈传下来的老话：二月二，烛照梁，桃</span></span><br><span class="line"><span class="string">打墙，人间蛇虫无处藏。</span></span><br><span class="line"><span class="string">少年姓陈，名平安，爹娘早逝。小镇的瓷器极负盛名，本朝开国以来，就担当起“奉诏监烧献陵祭器”的</span></span><br><span class="line"><span class="string">重任，有朝廷官员常年驻扎此地，监理官窑事务。</span></span><br><span class="line"><span class="string">无依无靠的少年，很早就当起了烧瓷的窑匠，起先只能做些杂事粗活，跟着一个脾气糟糕的半路师傅，</span></span><br><span class="line"><span class="string">辛苦熬了几年，刚刚琢磨到一点烧瓷的门道，结果世事无常，</span></span><br><span class="line"><span class="string">小镇突然失去了官窑造办这张护身符，小镇周边数十座形若卧龙的窑炉，一夜之间全部被官府勒令关闭</span></span><br><span class="line"><span class="string">熄火。</span></span><br><span class="line"><span class="string">陈平安放下新折的那根桃枝，吹灭蜡烛，走出屋子后，坐在台阶上，仰头望去，星空璀璨。</span></span><br><span class="line"><span class="string">少年至今仍然清晰记得，那个只肯认自己做半个徒弟的老师傅，姓姚，在去年暮秋时分的清晨，被人发</span></span><br><span class="line"><span class="string">现坐在一张小竹椅子上，正对着窑头方向，闭眼了。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 需要播放的文字</span></span><br><span class="line">engine.say(text)</span><br><span class="line"><span class="comment"># 启动开始进行语音读取</span></span><br><span class="line">engine.runAndWait()</span><br></pre></td></tr></table></figure>







<h3 id="二、网络爬虫的基本概念"><a href="#二、网络爬虫的基本概念" class="headerlink" title="二、网络爬虫的基本概念"></a>二、网络爬虫的基本概念</h3><h5 id="2-1-网络爬虫的标准"><a href="#2-1-网络爬虫的标准" class="headerlink" title="2.1 网络爬虫的标准"></a>2.1 网络爬虫的标准</h5><p>在实际开发过程中网络爬虫程序基本分为三个阶段：</p>
<ul>
<li>获取网页(明确目标)</li>
<li>提取信息(获取数据)</li>
<li>保存数据</li>
</ul>
<h5 id="2-2-常见浏览器有哪些"><a href="#2-2-常见浏览器有哪些" class="headerlink" title="2.2 常见浏览器有哪些"></a>2.2 常见浏览器有哪些</h5><p>问题1：请问全世界一共有多少个浏览器内核？分别是哪些浏览器？</p>
<p>答1：5种内核， IE浏览器、谷歌浏览器、火狐浏览器、Safar浏览器、Opera浏览器</p>
<h5 id="2-3-如何使用浏览器"><a href="#2-3-如何使用浏览器" class="headerlink" title="2.3  如何使用浏览器"></a>2.3  如何使用浏览器</h5><p>使用F12启动开发者模式，我们可以在里面查看其相关的HTML代码。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004419.png" alt="image-20260128100445326"></p>
<p><strong>代码体验</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pyttsx3</span><br><span class="line">engine = pyttsx3.init() <span class="comment"># 初始化语音引擎</span></span><br><span class="line">text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">第一章 惊蛰</span></span><br><span class="line"><span class="string">二月二，龙抬头。</span></span><br><span class="line"><span class="string">暮色里，小镇名叫泥瓶巷的僻静地方，有位孤苦伶仃的清瘦少年，此时他正按照习俗，一手持蜡烛，一</span></span><br><span class="line"><span class="string">手持桃枝，照耀房梁、墙壁、木床等处，用桃枝敲敲打打，</span></span><br><span class="line"><span class="string">试图借此驱赶蛇蝎、蜈蚣等，嘴里念念有词，是这座小镇祖祖辈辈传下来的老话：二月二，烛照梁，桃</span></span><br><span class="line"><span class="string">打墙，人间蛇虫无处藏。</span></span><br><span class="line"><span class="string">少年姓陈，名平安，爹娘早逝。小镇的瓷器极负盛名，本朝开国以来，就担当起“奉诏监烧献陵祭器”的</span></span><br><span class="line"><span class="string">重任，有朝廷官员常年驻扎此地，监理官窑事务。</span></span><br><span class="line"><span class="string">无依无靠的少年，很早就当起了烧瓷的窑匠，起先只能做些杂事粗活，跟着一个脾气糟糕的半路师傅，</span></span><br><span class="line"><span class="string">辛苦熬了几年，刚刚琢磨到一点烧瓷的门道，结果世事无常，</span></span><br><span class="line"><span class="string">小镇突然失去了官窑造办这张护身符，小镇周边数十座形若卧龙的窑炉，一夜之间全部被官府勒令关闭</span></span><br><span class="line"><span class="string">熄火。</span></span><br><span class="line"><span class="string">陈平安放下新折的那根桃枝，吹灭蜡烛，走出屋子后，坐在台阶上，仰头望去，星空璀璨。</span></span><br><span class="line"><span class="string">少年至今仍然清晰记得，那个只肯认自己做半个徒弟的老师傅，姓姚，在去年暮秋时分的清晨，被人发</span></span><br><span class="line"><span class="string">现坐在一张小竹椅子上，正对着窑头方向，闭眼了。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 需要播放的文字</span></span><br><span class="line">engine.say(text)</span><br><span class="line"><span class="comment"># 启动开始进行语音读取</span></span><br><span class="line">engine.runAndWait()</span><br></pre></td></tr></table></figure>







<h3 id="三、网页请求库requests的基本运用"><a href="#三、网页请求库requests的基本运用" class="headerlink" title="三、网页请求库requests的基本运用"></a>三、网页请求库requests的基本运用</h3><h5 id="3-1-安装requests库"><a href="#3-1-安装requests库" class="headerlink" title="3.1 安装requests库"></a>3.1 安装requests库</h5><p>打开终端，在终端中输入命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">C:\Users\14949&gt;pip install requests</span><br><span class="line">Looking <span class="keyword">in</span> indexes: https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">Collecting requests</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/70/8e/0e2d847013cb52cd35b38c009bb167a1a26b2ce6cd6965bf26b47bc0bf44/requests-2.31.0-py3-none-any.whl (62 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.6/62.6 kB 844.1 kB/s eta 0:00:00</span><br><span class="line">Collecting charset-normalizer&lt;4,&gt;=2 (from requests)</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/d1/47/148eae656ac376938afc97ed288893c6089038180c9e0782e5423ac0307d/charset_normalizer-3.3.0-cp312-cp312-win_amd64.whl (98 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.3/98.3 kB 1.9 MB/s eta 0:00:00</span><br><span class="line">Collecting idna&lt;4,&gt;=2.5 (from requests)</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/fc/34/3030de6f1370931b9dbb4dad48f6ab1015ab1d32447850b9fc94e60097be/idna-3.4-py3-none-any.whl (61 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 3.4 MB/s eta 0:00:00</span><br><span class="line">Collecting urllib3&lt;3,&gt;=1.21.1 (from requests)</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/26/40/9957270221b6d3e9a3b92fdfba80dd5c9661ff45a664b47edd5d00f707f5/urllib3-2.0.6-py3-none-any.whl (123 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 123.8/123.8 kB 3.7 MB/s eta 0:00:00</span><br><span class="line">Collecting certifi&gt;=2017.4.17 (from requests)</span><br><span class="line">  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/4c/dd/2234eab22353ffc7d94e8d13177aaa050113286e93e7b40eae01fbf7c3d9/certifi-2023.7.22-py3-none-any.whl (158 kB)</span><br><span class="line">     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 158.3/158.3 kB 2.4 MB/s eta 0:00:00</span><br><span class="line">Installing collected packages: urllib3, idna, charset-normalizer, certifi, requests</span><br><span class="line">Successfully installed certifi-2023.7.22 charset-normalizer-3.3.0 idna-3.4 requests-2.31.0 urllib3-2.0.6</span><br></pre></td></tr></table></figure>



<p>使用命令查看</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281004932.png" alt="image-20260128100457880"></p>
<h5 id="3-2-requests基本使用-请求网页"><a href="#3-2-requests基本使用-请求网页" class="headerlink" title="3.2 requests基本使用-请求网页"></a>3.2 requests基本使用-请求网页</h5><p>请求获取HTML</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入请求库</span></span><br><span class="line">import requests</span><br><span class="line"><span class="comment"># 定义需要请求网址的变量</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://www.baidu.com/&#x27;</span></span><br><span class="line"><span class="comment"># 向指定网页进行发送请求，它返回一个响应对象response</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line"><span class="comment"># 先来看一下，百度的编码是什么？</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;百度的编码方式为：&#x27;</span> + rep.encoding)</span><br><span class="line"><span class="comment"># 响应回来过程中会出现乱码问题，是编码方式造成的结果，以下方式我们将进行处理</span></span><br><span class="line"><span class="comment"># rep.encoding 表示获取或者设置从HTTP header中响应内容的编码方式</span></span><br><span class="line"><span class="comment"># rep.apparent_encoding 表示从内容中分析出响应内容编码方式</span></span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="comment"># HTTP请求的返回状态，200表示连接成功，404表示失败</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;当前的连接状态为：&quot;</span> + str(rep.status_code))</span><br><span class="line"><span class="comment"># 输入响应回来的HTML代码</span></span><br><span class="line"><span class="comment"># rep.text 表示HTTP响应内容的字符串形式。即url的HTML内容</span></span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br><span class="line"><span class="comment"># 给大家20分钟时间，分别去请求自己想请求的相关网站(至少3个及以上)。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>请求获取多媒体数据并进行写入</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">imgUrls = [<span class="string">&#x27;http://kaolapop.oss.kaolacdn.com/7a46a26d64e3426a8b1ae019507a980b_800_800.jpg&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;http://kaolahaitao.oss.kaolacdn.com/aba5088f577be7e9c52d9cbe0f68f3c3.jpg&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;http://kaolapop.oss.kaolacdn.com/db10a747d7f648fcafc5ab7f68d97540_800_800.jpg&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;http://kaolahaitao.oss.kaolacdn.com/d0f6cbd905c7dc0e4c77183665d3b25b.jpg&#x27;</span>]</span><br><span class="line"><span class="comment"># 模拟请求1张图片的地址</span></span><br><span class="line"><span class="comment"># testImgUrl = &#x27;http://kaolapop.oss.kaolacdn.com/7a46a26d64e3426a8b1ae019507a980b_800_800.jpg&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></span><br><span class="line"><span class="string">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> imgUrls:</span><br><span class="line">rep = requests.get(url, headers=headers)</span><br><span class="line">imgName = url.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>] <span class="comment"># 获取当前超链接的图片名字+后缀名</span></span><br><span class="line"><span class="comment"># print(imgName)</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/Images/&#x27;</span> + imgName, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">f.write(rep.content)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;图片全部采集完成！&quot;</span>)</span><br><span class="line"><span class="comment"># rep.content 表示HTTP响应内容的二进制形式</span></span><br><span class="line"><span class="comment"># print(rep.content)</span></span><br></pre></td></tr></table></figure>

<p><strong>复习巩固</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281005393.png" alt="image-20260128100507330"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">webUrl = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line"><span class="comment"># 请求百度网站首页，返回Response对象(响应)</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line"><span class="comment"># 解决乱码问题</span></span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="comment"># 输出响应得到的HTML内容。获取其字符串</span></span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br><span class="line"><span class="comment"># 当我们需要获取的是多媒体文件，请使用rep.content。获取二进制数</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="3-3-获取12306网站所有站点"><a href="#3-3-获取12306网站所有站点" class="headerlink" title="3.3 获取12306网站所有站点"></a>3.3 获取12306网站所有站点</h5><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281005328.png" alt="image-20260128100513246"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">webUrl =</span><br><span class="line"><span class="string">&#x27;https://www.12306.cn/index/script/core/common/station_name_new_v10018.js&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line"><span class="comment"># 获取12306站点的相关文件文本数据</span></span><br><span class="line">data = rep.text</span><br><span class="line"><span class="comment"># 将文本进行分割处理，它们有一个共同的分隔符为 |</span></span><br><span class="line">datas = data.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line"><span class="comment"># print(datas) # 通过查看发现中文站点的第一个地名的起始索引为1，后续分别为：11、21、</span></span><br><span class="line"><span class="number">31.</span>..，其规律为 间隔<span class="number">10</span>的步长</span><br><span class="line">chinaNames = datas[<span class="number">1</span>::<span class="number">10</span>]</span><br><span class="line"><span class="comment"># print(chinaNames)</span></span><br><span class="line"><span class="comment"># 大家将中文点名字 写入文本文档中。</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/Images/test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(chinaNames)):</span><br><span class="line">f.write(chinaNames[i] + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;文件写入完毕！&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p><strong>HTML状态码说明</strong></p>
<p>1开头状态码：请求收到，继续处理 </p>
<p>2开头状态码：操作成功收到，分析、接受 </p>
<p>3开头状态码：完成此请求必须进一步处理 </p>
<p>4开头状态码：请求包含一个错误语法或不能完成 </p>
<p>5开头状态码：服务器执行一个完全有效请求失败 </p>
<p>100——客户必须继续发出请求 </p>
<p>101——客户要求服务器根据请求转换HTTP协议版本</p>
<p> 200——交易成功 </p>
<p>201——提示知道新文件的URL </p>
<p>202——接受和处理、但处理未完成 </p>
<p>203——返回信息不确定或不完整 </p>
<p>204——请求收到，但返回信息为空 </p>
<p>205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件 </p>
<p>206——服务器已经完成了部分用户的GET请求 </p>
<p>300——请求的资源可在多处得到 import requests webUrl &#x3D; ‘<a href="http://www.baidu.com/">http://www.baidu.com</a>‘ # 请求百度网站首页，返回Response对象(响应) rep &#x3D; requests.get(webUrl) # 解决乱码问题 rep.encoding &#x3D; rep.apparent_encoding # 输出响应得到的HTML内容。获取其字符串 print(rep.text) # 当我们需要获取的是多媒体文件，请使用rep.content。获取二进制数据 1 2 3 4 5 6 7 8 9 10 11 </p>
<p>301——删除请求数据 </p>
<p>302——在其他地址发现了请求数据 </p>
<p>303——建议客户访问其他URL或访问方式 </p>
<p>304——客户端已经执行了GET，但文件未变化 </p>
<p>305——请求的资源必须从服务器指定的地址得到 </p>
<p>306——前一版本HTTP中使用的代码，现行版本中不再使用 </p>
<p>307——申明请求的资源临时性删除 </p>
<p>400——客户端发起的请求错误，如语法错误 </p>
<p>401——请求授权失败，需要身份认证 </p>
<p>402——保留有效ChargeTo头响应 </p>
<p>403——服务端理解客户端的请求，但是拒接此请求（你说气不气？） </p>
<p>404——没有发现文件、查询或URl </p>
<p>405——用户在Request-Line字段定义的方法不允许 </p>
<p>406——根据用户发送的Accept拖，请求资源不可访问 </p>
<p>407——类似401，用户必须首先在代理服务器上得到授权 </p>
<p>408——客户端没有在用户指定的饿时间内完成请求 </p>
<p>409——对当前资源状态，请求不能完成 </p>
<p>410——服务器上不再有此资源且无进一步的参考地址,410不同于404，如果资源以前有现在被永久删除 了可使用410代码，网站设计人员可通过301代码指定资源的新位置 </p>
<p>411——服务器拒绝用户定义的Content-Length属性请求 </p>
<p>412——一个或多个请求头字段在当前请求中错误 </p>
<p>413——请求的资源大于服务器允许的大小 </p>
<p>414——请求的资源URL长于服务器允许的长度</p>
<p> 415——请求资源不支持请求项目格式 </p>
<p>416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含IfRange请求头字段 417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满 足请求 </p>
<p>500——服务器内部发生错误，无法完成请求响应 </p>
<p>501——服务器不支持请求的功能 </p>
<p>502——充当网关或代理的服务器，从远端服务器接收到了一个无效的请求 </p>
<p>503——服务器过载或处于维护状态，暂停服务 </p>
<p>504——充当网关或代理的服务器，未及时从远端服务器获得请求 </p>
<p>505——服务器不支持或拒绝请求头中指定的HTTP版本</p>
<h5 id="3-4-解决网站针对爬虫的拒绝访问的方法"><a href="#3-4-解决网站针对爬虫的拒绝访问的方法" class="headerlink" title="3.4 解决网站针对爬虫的拒绝访问的方法"></a>3.4 解决网站针对爬虫的拒绝访问的方法</h5><p>请求豆瓣网会发现的一些问题</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">webUrl = <span class="string">&#x27;https://www.douban.com/&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line"><span class="built_in">print</span>(rep.status_code) <span class="comment"># 访问豆瓣网的时候，返回一个418状态码，它服务器拒绝我们访问。应</span></span><br><span class="line">该它知道你是爬虫</span><br><span class="line"><span class="built_in">print</span>(rep.request.headers) <span class="comment"># 查看响应回来的请求头部信息，豆瓣网就通过我们的请求的头部信</span></span><br><span class="line">息判别出来我是一个爬虫程序。</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">418</span><br><span class="line">&#123;&#x27;User-Agent&#x27;: &#x27;python-requests/2.31.0&#x27;, &#x27;Accept-Encoding&#x27;: &#x27;gzip,</span><br><span class="line">deflate&#x27;, &#x27;Accept&#x27;: &#x27;/&#x27;, &#x27;Connection&#x27;: &#x27;keep-alive&#x27;&#125;</span><br></pre></td></tr></table></figure>



<p>解决豆瓣网的拒绝访问</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 如果进行浏览器的伪装</span></span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36</span></span><br><span class="line"><span class="string">(KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=headers)</span><br><span class="line"><span class="built_in">print</span>(rep.status_code)</span><br><span class="line"><span class="built_in">print</span>(rep.request.headers)</span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">200</span><br><span class="line">&#123;&#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span><br><span class="line">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36&#x27;,</span><br><span class="line">&#x27;Accept-Encoding&#x27;: &#x27;gzip, deflate&#x27;, &#x27;Accept&#x27;: &#x27;/&#x27;, &#x27;Connection&#x27;: &#x27;keepalive&#x27;&#125;</span><br><span class="line">下列省略....</span><br></pre></td></tr></table></figure>





<h5 id="3-5-非200响应状态通用处理框架"><a href="#3-5-非200响应状态通用处理框架" class="headerlink" title="3.5 非200响应状态通用处理框架"></a>3.5 非200响应状态通用处理框架</h5><p><strong>第一种为了验证</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLTesxt</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url)</span><br><span class="line">        rep.raise_for_status()  <span class="comment"># rep.raise_for_status()当请求响应回来的状态码为200就正确执行后面的代码，如果非200就抛出异常</span></span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证首页</span></span><br><span class="line"><span class="comment"># print(getHTMLTesxt(&#x27;http://www.baidu.com&#x27;))  # 访问百度能正常7返回HTML字符串数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证豆瓣网</span></span><br><span class="line"><span class="built_in">print</span>(getHTMLTesxt(<span class="string">&#x27;https://www.douban.com/&#x27;</span>))  <span class="comment"># 访问豆瓣网是出现418的情况，所有就调用了异常处理</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p><strong>第二种标准写法</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 看一下标准的通用框架，访问豆瓣网是否正常</span></span><br><span class="line"><span class="built_in">print</span>(getHTMLText(<span class="string">&#x27;https://www.douban.com/&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="3-6-理解-关于爬虫的法律风险-Robots协议"><a href="#3-6-理解-关于爬虫的法律风险-Robots协议" class="headerlink" title="3.6  (理解) 关于爬虫的法律风险 Robots协议"></a>3.6  (理解) 关于爬虫的法律风险 Robots协议</h5><p>什么是Robots协议？ Robots协议也称为爬虫协议，机器人协议，它的全称叫做：网络爬虫排除标准</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281005524.png" alt="image-20260128100529453"></p>
<p><strong>Robots协议的遵守建议</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281005863.png" alt="image-20260128100536803"></p>
<h5 id="3-7-如何进行模拟登录"><a href="#3-7-如何进行模拟登录" class="headerlink" title="3.7 如何进行模拟登录"></a>3.7 如何进行模拟登录</h5><p>有很多网址需要用户进行登录后才能看到里面的具体内容！如果我们使用网络爬虫技术，我们就需要进行登录。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers =&#123;</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36</span></span><br><span class="line"><span class="string">(KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;_zap=42591f45-01f6-42c2-82b4-9c363a5dbd35; _xsrf=15d1b41d-08b1-</span></span><br><span class="line"><span class="string">4c5d-ba4f-5203514cee4c;</span></span><br><span class="line"><span class="string">d_c0=ASDTSVnckRePToPiYblJ0K6hLCZ3rDk5Mis=|1697705539;</span></span><br><span class="line"><span class="string">Hm_lvt_98beee57fd2ef70ccdd5ca52b9740c49=1697705530;</span></span><br><span class="line"><span class="string">SESSIONID=vZJ9cymGnP2kpGsgOR115H4l6JnlI7euLWuMqqNDCl4;</span></span><br><span class="line"><span class="string">JOID=UV4XAEm6Q76UgtquKrsnbBbYBjs8yR31rOCmx2zVFoj-85zYSfojvGG26sqrQFbZLpD4BrkOwMKoChTwSvLWGU=; osd=VVERAEqTLiUgd6hLLskaBneBjg4xhv1rSpwWzWEof485_cRvmojfWJ3aspqQ5dZLlH7xzkOAcFpihQxSTNWGY=;</span></span><br><span class="line"><span class="string">__snaker__id=vRIwwb88xv1fpUq2;</span></span><br><span class="line"><span class="string">gdxidpyhxdE=LJDkMB3i5e3beq46s7xO8JJJ%2BMXzLl2mToUhBphpU0awv9RuaVfhXG393QAwKt</span></span><br><span class="line"><span class="string">M96%5CWvPxw%2FA%2F0cmmpC84KyydvW3nuUW%2FvOJaDSvrwIPsMBQ%2FMBoMhq%2FlOYVR3n0W</span></span><br><span class="line"><span class="string">9o3GmxrnSwTiL3TK47tlJQbvMyYjTEDEnWm2askaOlvxBLfcCA%3A1697706431778;</span></span><br><span class="line"><span class="string">YD00517437729195%3AWM_NI=gRxwSOXvOmHXKLLi6XdtgNec4D0%2F8bv1RWY7Gsl5%2BC4vYVp</span></span><br><span class="line"><span class="string">H%2BosIib8fti4yVzNkCbGabUEmWqg0Wjm0vbs5cECN6XzshHbUYa%2FvfSEvHvkV8HxM2e72Knv</span></span><br><span class="line"><span class="string">94%2B2kFFRwN3Q%3D;</span></span><br><span class="line"><span class="string">YD00517437729195%3AWM_NIKE=9ca17ae2e6ffcda170e2e6eea9aa7bf1bfbcb5d972888e8ba</span></span><br><span class="line"><span class="string">7c14b978e9fadd539f28afaa8d539b0979cb2c42af0fea7c3b92aa58eb898d2459caa818ecb5</span></span><br><span class="line"><span class="string">48994848ab554a8aca9afe869f89c00d0bb6ab6ef9eb8dc3d85ada4d6aa49f8aa97b7f344e9b</span></span><br><span class="line"><span class="string">1bdaaec6afcbabc8ab77396a6828cc26a85bfaeb6c86795afa9d1d662aff0ba83f23fa19b8da</span></span><br><span class="line"><span class="string">fb554baada8a9e15f9bbfe197e55987aa8897ea5efc98b8aeb16ff5ee858ff533f8f5fe8cc54</span></span><br><span class="line"><span class="string">e92a982d4d437e2a3;</span></span><br><span class="line"><span class="string">YD00517437729195%3AWM_TID=ugxMx3nQpppBRVRQFVeEymV%2BTQ2wZCFQ;</span></span><br><span class="line"><span class="string">q_c1=120f7e5110904fdf97a70cffe0de56cd|1697705582000|1697705582000;</span></span><br><span class="line"><span class="string">captcha_session_v2=2|1:0|10:1697705772|18:captcha_session_v2|88:UXNOS1IrRmho</span></span><br><span class="line"><span class="string">cXBRaFFjajFHOG9WeVNPd0VzdWdmc0NDM3ZUQlJTeVVreXBJSGFxVDQ2YzVYTnlJVVZQMVc4Qw==</span></span><br><span class="line"><span class="string">|2d51d01d060a743b9b71453661778f2a08954df28c285f6e2771fdfb9b805950;</span></span><br><span class="line"><span class="string">captcha_ticket_v2=2|1:0|10:1697705782|17:captcha_ticket_v2|728:eyJ2YWxpZGF0Z</span></span><br><span class="line"><span class="string">SI6IkNOMzFfYlVvZSo4WEZEKkNXVzZmT2pxM2RKb0JxR3hrOVMzbnNjYWhMRVEyUWtVYTU4Lm9mc</span></span><br><span class="line"><span class="string">HguelVXNU8xLnN6Y2pmX2xzX3F0QnlaWUdvS2JraDVyX0o5S3pMUlczcE00VVU5Nm1TWmNnWllWc</span></span><br><span class="line"><span class="string">1YweHR2KkFBQVFtS2FKTlAuYnQzX1FxRlJaR29sWXVIX2pHblhQcWZESHh3dWU1YVdQbGdXOWZwa</span></span><br><span class="line"><span class="string">3VGaXd2WFh4d1RHSDZlbzFTYzI5Y2NEWU1ySUN5ZkJpdXNqMG5BSS4qd3pNTVRPS1dOSVNpcXNvc</span></span><br><span class="line"><span class="string">UtQM1FtZDZaTnVTTF9CRFRRSFczOFhDRXRXS2ZGTDkwYllCMVcqZ2o4VUZRSE1UdFV4eWVZdFBPb</span></span><br><span class="line"><span class="string">V9aX0owQmxyNl90VGZSNnJ3bXJPVUJtRm9CbFNFU1dDZU5mdHFOOWdURE00ek1aOW4wdXNYejJDQ</span></span><br><span class="line"><span class="string">2NQNFdqcllRRTFqZ0VhdkZ0KlJiSk45UGRjSUhjQVZlcVNBYXRHcGRheGE2cF9vcEtYWFUuKmtwa</span></span><br><span class="line"><span class="string">EVJRUNZUThOTUh5RG9EUEZmNkk2UVVwNF9jQWFEcVFIOGY0Y3VhbFJtdFpEUEdta21BZVFWa09RQ</span></span><br><span class="line"><span class="string">TZBc1NTQmxrUHBYUnh3QTRXb0pwejNCS0tidEN2ZGZOU1JNSThmOWhHU1dJZTFvLkRtU1FhazhZV</span></span><br><span class="line"><span class="string">G1EcUpzZDIwWTRqT1g3N192X2lfMSJ9|c5334ef8ec29d8ab14211ee82a746da4606d64ec664d</span></span><br><span class="line"><span class="string">b91bda3731dd0f060305;</span></span><br><span class="line"><span class="string">z_c0=2|1:0|10:1697705782|4:z_c0|92:Mi4xbVNKNkJ3QUFBQUFCSU5OSldkeVJGeVlBQUFCZ</span></span><br><span class="line"><span class="string">0FsVk5OajBlWmdCcElGd1Fpc0hObWVOdHdDZF9uUGZyekx4MGdB|eafeea9cd537816920e6db67</span></span><br><span class="line"><span class="string">3871a1ff49aefe027eeb7c31f1132035a104705d; tst=r;</span></span><br><span class="line"><span class="string">KLBRSID=81978cf28cf03c58e07f705c156aa833|1697705786|1697705538;</span></span><br><span class="line"><span class="string">Hm_lpvt_98beee57fd2ef70ccdd5ca52b9740c49=1697705777Sec-ChUa:&quot;Chromium&quot;;v=&quot;118&quot;, &quot;Google Chrome&quot;;v=&quot;118&quot;, &quot;Not=A?Brand&quot;;v=&quot;99&quot;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">rep = requests.get(url, headers=headers)</span><br><span class="line">rep.raise_for_status()</span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="keyword">return</span> rep.text</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代</span></span><br><span class="line"><span class="string">码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"><span class="built_in">print</span>(getHTMLText(<span class="string">&#x27;https://www.zhihu.com/&#x27;</span>)</span><br></pre></td></tr></table></figure>





<h3 id="四、网页的解析库-Beautiful-Soup"><a href="#四、网页的解析库-Beautiful-Soup" class="headerlink" title="四、网页的解析库 Beautiful Soup"></a>四、网页的解析库 Beautiful Soup</h3><h5 id="4-1-Beautiful-Soup的简介"><a href="#4-1-Beautiful-Soup的简介" class="headerlink" title="4.1 Beautiful Soup的简介"></a>4.1 Beautiful Soup的简介</h5><p>它主要的功能是从网页抓取数据。它可以解析HTML和XML。现今在使用玩转网页的解析库Beautiful Soup是使用率最高的。</p>
<h5 id="4-2-安装快速解析支持库lxml"><a href="#4-2-安装快速解析支持库lxml" class="headerlink" title="4.2 安装快速解析支持库lxml"></a>4.2 安装快速解析支持库lxml</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install lxml </span><br></pre></td></tr></table></figure>



<h5 id="4-3-安装Beautiful-Soup库"><a href="#4-3-安装Beautiful-Soup库" class="headerlink" title="4.3 安装Beautiful Soup库"></a>4.3 安装Beautiful Soup库</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281005807.png" alt="image-20260128100547653"></p>
<h5 id="4-4-Beautiful-Soup基础使用体验"><a href="#4-4-Beautiful-Soup基础使用体验" class="headerlink" title="4.4 Beautiful Soup基础使用体验"></a>4.4 Beautiful Soup基础使用体验</h5><p>请大家编写一下HTML代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>文献网<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dromouse&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>睡鼠的故事<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/elsie&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">id</span>=<span class="string">&quot;linkl&quot;</span>&gt;</span>&lt;!-</span><br><span class="line">- 注释的内容 --&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>,</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/lacie&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link2&quot;</span>&gt;</span>蕾西</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span>和</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/tillie&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sister&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link3&quot;</span>&gt;</span>蒂</span><br><span class="line">莉<span class="tag">&lt;/<span class="name">a</span>&gt;</span>;</span><br><span class="line">他们住在井底。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;story&quot;</span>&gt;</span>其他内容隐藏...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="comment"># 导入beautifulsoup解析库</span></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot;</span></span><br><span class="line"><span class="string">id=&quot;linkl&quot;&gt;&lt;!-- 注释的内容 --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;蕾西&lt;/a&gt;和</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;蒂莉&lt;/a&gt;;</span></span><br><span class="line"><span class="string">他们住在井底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># &#x27;lxml&#x27; 必须要下载这个三方库，不然会报错</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># 输入我们读取到HTML数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">50</span>) <span class="comment"># 分割线</span></span><br><span class="line"><span class="comment"># 如何获取当前页面的标题内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.title.string)</span><br><span class="line"><span class="comment"># 需要获取 里面有个内容为：睡鼠的故事</span></span><br><span class="line"><span class="built_in">print</span>(soup.b.string)</span><br></pre></td></tr></table></figure>





<h5 id="4-5-Beatiful-Soup基本元素及其运用"><a href="#4-5-Beatiful-Soup基本元素及其运用" class="headerlink" title="4.5 Beatiful Soup基本元素及其运用"></a>4.5 Beatiful Soup基本元素及其运用</h5><table>
<thead>
<tr>
<th>基本元素</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>tag</td>
<td>标签，最基本的信息组织单位，分别用&lt;&gt;和&lt;&#x2F;&gt;标明开头和结尾</td>
</tr>
<tr>
<td>name</td>
<td>标签的名字，<p>…..&lt;</p>的名字‘p’，其格式为：<tag>.name</td>
</tr>
<tr>
<td><strong>Attributes</strong></td>
<td>标签的属性，字典形式组成，其格式为：<tag>.attrs</td>
</tr>
<tr>
<td><strong>MavigableString</strong></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>选择元素</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.导入相关的第三方库</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup  <span class="comment"># 导入BeautifulSoup解析库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.获取到网页HTML的字符串内容</span></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;/a&gt;  &lt;!--注释的内容--&gt;</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;雷西&lt;/a&gt;和</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;蒂莉&lt;/a&gt;</span></span><br><span class="line"><span class="string">他们住在进底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 3.实例化 BeautifulSoup 对象并将网页HTML的字符串内容放入对象中进行解析</span></span><br><span class="line"><span class="comment"># &#x27;lxml&#x27; 必须要下载这个三方库，不然会报错</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.title)  <span class="comment"># 获取标签为title的整体内容，其包含标签的开始，结尾以及其内部内容</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(soup.title))  <span class="comment"># 查看当前属性是什么类型 bs4.element.Tag 表示文档中标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.b)  <span class="comment"># 获取标签p的整体内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>提取信息</strong></p>
<p>分别获取节点元素名称、提取属性、文本内容、注释</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.导入相关的第三方库</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup  <span class="comment"># 导入BeautifulSoup解析库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.获取到网页HTML的字符串内容</span></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;!--注释的内容--&gt;&lt;/a&gt;  </span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;雷西&lt;/a&gt;和</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;蒂莉&lt;/a&gt;</span></span><br><span class="line"><span class="string">他们住在进底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 3.实例化 BeautifulSoup 对象并将网页HTML的字符串内容放入对象中进行解析</span></span><br><span class="line"><span class="comment"># &#x27;lxml&#x27; 必须要下载这个三方库，不然会报错</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何提取元素名称：可以利用 name 属性获取节点名字</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;节点的名字为：&#x27;</span> + soup.title.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何提取属性， 回顾HTML标签的属性，HTML的属性是由0~N个组成， 一个标签中不存在相同属性的原则</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.attrs)</span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取某个具体的值，我们就可以使用字典的规则，通过键得到值</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取内容(具体的文本内容(字符串))</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取注释内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.string)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(soup.a.string))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>课堂练习与课后提升学习</p>
<p>1.练习Beautiful Soup 相关基本元素的应用和总结其作用</p>
<p>2.思考并练习：如何利用Requests和Beautiful Soup 配合使用。（靶向7网站：<a href="http://python123.io/ws/demo.html%EF%BC%89">http://python123.io/ws/demo.html）</a></p>
<h5 id="4-6-利用Requests和Beautiful-Soup-配合使用"><a href="#4-6-利用Requests和Beautiful-Soup-配合使用" class="headerlink" title="4.6 利用Requests和Beautiful Soup 配合使用"></a>4.6 利用Requests和Beautiful Soup 配合使用</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 看一下标准的通用框架，访问豆瓣网是否正常</span></span><br><span class="line"><span class="comment"># &#x27;http://python123.io/ws/demo.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建bs4</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://python123.io/ws/demo.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.prettify())  <span class="comment"># 查看请求的网页信息</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">80</span>)</span><br><span class="line"><span class="comment"># 获取当前网页超链接数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.a)</span><br><span class="line"><span class="comment"># 获取当前网页超链接文本内容</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.string)</span><br><span class="line"><span class="comment"># 获取当前网页超链接的属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs)</span><br><span class="line"><span class="comment"># 获取当前网页超链接的地址</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h5 id="4-7-Selector-简介与获取"><a href="#4-7-Selector-简介与获取" class="headerlink" title="4.7 Selector 简介与获取"></a>4.7 Selector 简介与获取</h5><p>什么是Selector？ 它是当前元素定义的CSS样式，它的返回值可能是id选择器、class选择器、标签(元素)选择器。我们再大一学过CSS层叠样式表的原理和方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#FourBoxNav &gt; div:nth-child(2) &gt; div:nth-child(1) &gt; div.FourBox0122 &gt; a &gt; img</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#center &gt; div.centerFive &gt; div.FiveLeft &gt; div.FiveBoxLeft01.bodyBorderShadow.bodyBorderBody &gt; div.FiveBoxLeft011 &gt; div:nth-child(1) &gt; div.FiveImg &gt; a &gt; img</span><br></pre></td></tr></table></figure>





<p><strong>数据采集时，整体工作流程：</strong></p>
<ol>
<li>明确采集的目标</li>
<li>分析采集目标的数据组成的结构以及它的规则</li>
<li>反爬机制的分析(测试，该目标有哪些反爬技术，，需要使用哪些方法来处理)</li>
<li>编写采集代码</li>
<li>先测试小量数据(发现问题，修改问题)</li>
<li>进行最终批量采集(保存文本内容或多媒体数据)</li>
</ol>
<p><strong>示列：采取小说网分析过程</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281006106.png" alt="image-20260128100607868"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 首先我们先观察每个小说类别有哪些规则</span><br></pre></td></tr></table></figure>





<p>通过分析我们可以使用循环来</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xsUrl = &#x27;https://b.faloo.com/Rank_&#x27;</span><br><span class="line"></span><br><span class="line">for i in range(1, 5):</span><br><span class="line">    url = xsUrl + str(i) + &#x27;.html&#x27;</span><br><span class="line">    print(url)</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下列地址为缩略图</span></span><br><span class="line">urls = [<span class="string">&#x27;https://img.ivsky.com/img/tupian/t/202108/25/lingyang-014.jpg&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img.ivsky.com/img/tupian/t/202108/25/lingyang-015.jpg&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img.ivsky.com/img/tupian/t/202108/25/lingyang-016.jpg&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img.ivsky.com/img/tupian/t/202108/25/lingyang-017.jpg&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://img.ivsky.com/img/tupian/t/202108/25/lingyang-018.jpg&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何将缩略图改为高清图</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    newUrl = url.replace(<span class="string">&#x27;/t/&#x27;</span>, <span class="string">&#x27;/pre/&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(newUrl)</span><br></pre></td></tr></table></figure>



<h5 id="4-8-Beautiful-Soup-关联元素选择"><a href="#4-8-Beautiful-Soup-关联元素选择" class="headerlink" title="4.8 Beautiful Soup 关联元素选择"></a>4.8 Beautiful Soup 关联元素选择</h5><p>我们再做选择的时候，有时候不能做到一步就选到需要的节点元素，需要先选取一个节点元素，然后以它为基准再选择它的子节点，父节点，兄弟节点等。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.contents</td>
<td>子节点的列表，将<tag>所有节点存入列表</td>
</tr>
<tr>
<td>.children</td>
<td>子节点的迭代类型，用于循环遍历子节点</td>
</tr>
<tr>
<td>.descendants</td>
<td>子节点的迭代类型，包含所有子孙节点，，用于循环遍历子孙节点</td>
</tr>
</tbody></table>
<p><strong>.contents属性，示列：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.导入相关的第三方库</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup  <span class="comment"># 导入BeautifulSoup解析库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.获取到网页HTML的字符串内容</span></span><br><span class="line">html =  <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;文献网&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;b&gt;睡鼠的故事&lt;/b&gt;</span></span><br><span class="line"><span class="string">            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;span&gt;塔尔希&lt;/span&gt;&lt;/a&gt; , </span></span><br><span class="line"><span class="string">            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;雷西&lt;/a&gt;和</span></span><br><span class="line"><span class="string">            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;蒂莉&lt;/a&gt;他们住在进底。</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;   </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.实例化 BeautifulSoup 对象并将网页HTML的字符串内容放入对象中进行解析</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 子节点列表</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.contents)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 看一下标准的通用框架，访问豆瓣网是否正常</span></span><br><span class="line"><span class="comment"># &#x27;http://python123.io/ws/demo.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建bs4</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://python123.io/ws/demo.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># body中有哪些子节点</span></span><br><span class="line"><span class="comment"># print(soup.body.contents)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># p中有哪些子节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.contents)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h6 id="4-8-1-子节点与子孙节点的基本运用"><a href="#4-8-1-子节点与子孙节点的基本运用" class="headerlink" title="4.8.1 子节点与子孙节点的基本运用"></a>4.8.1 子节点与子孙节点的基本运用</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 看一下标准的通用框架，访问豆瓣网是否正常</span></span><br><span class="line"><span class="comment"># &#x27;http://python123.io/ws/demo.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建bs4</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://python123.io/ws/demo.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># body中有哪些子节点</span></span><br><span class="line"><span class="comment"># print(soup.body.contents)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># p中有哪些子节点</span></span><br><span class="line"><span class="comment"># print(soup.p.contents)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># children 迭代类型，遍历所有的子节点</span></span><br><span class="line"><span class="comment"># print(soup.p.children)  # 得到的是一个迭代对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个p标签中所有的子节点，通过循环迭代出来</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.p.contents:</span><br><span class="line">    <span class="built_in">print</span>(child)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;=&#x27;</span> * <span class="number">80</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个p标签中所有的子孙节点，通过循环将其迭代</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.p.descendants:</span><br><span class="line">    <span class="built_in">print</span>(child)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h6 id="4-8-2-父节点先辈-祖先-节点"><a href="#4-8-2-父节点先辈-祖先-节点" class="headerlink" title="4.8.2 父节点先辈(祖先)节点"></a>4.8.2 父节点先辈(祖先)节点</h6><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.parent</td>
<td>节点的父标签</td>
</tr>
<tr>
<td>.parents</td>
<td>节点先辈标签的迭代类型，用于循环遍历先辈节点</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># soup.title.parent.name 的意思为：通过BeautifulSoup对象查询标签为title父节点标签获取其名字</span></span><br><span class="line"><span class="built_in">print</span>(soup.title.parent.name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;=&#x27;</span> * <span class="number">50</span>)</span><br><span class="line"><span class="keyword">for</span> parent <span class="keyword">in</span> soup.title.parents:</span><br><span class="line">    <span class="built_in">print</span>(parent.name)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h6 id="4-8-3-兄弟-同辈-节点"><a href="#4-8-3-兄弟-同辈-节点" class="headerlink" title="4.8.3 兄弟(同辈)节点"></a>4.8.3 兄弟(同辈)节点</h6><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.next_sibling</td>
<td>返回按照 HTML 文本顺序的下一个平行节点标签</td>
</tr>
<tr>
<td>.previous_sibling</td>
<td>返回按照 HTML 文本顺序的上一个平行节点标签</td>
</tr>
<tr>
<td>.next_siblings</td>
<td>迭代类型，返回按照 HTML 文本顺序的后续所有平行节点标签</td>
</tr>
<tr>
<td>.previous_siblings</td>
<td>迭代类型，返回按照 HTML 文本顺序的前续所有平行节点标签</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下一同辈元素(and) 字符串</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我想去获取到另一个a标签怎么写？</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling.next_sibling)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我想去获取a标签前面一个字符串数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_sibling)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;=&#x27;</span> * <span class="number">50</span>)</span><br><span class="line"><span class="comment"># 如果我想去获取a标签后面所有的兄弟节点</span></span><br><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.next_siblings:</span><br><span class="line">    <span class="built_in">print</span>(sibling)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line"># 通用的请求框架</span><br><span class="line">headers = &#123;</span><br><span class="line">    &#x27;User-Agent&#x27;:</span><br><span class="line">        &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span><br><span class="line">        &#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def getHTMLText(url):</span><br><span class="line">    try:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        return rep.text</span><br><span class="line">    except:</span><br><span class="line">        return &#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;.format(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建bs4</span><br><span class="line">webUrl = &#x27;https://b.faloo.com/y_0_0_0_0_2_0_1.html&#x27;</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), &#x27;lxml&#x27;)</span><br><span class="line"></span><br><span class="line">bookName = []  # 书名</span><br><span class="line">bookTyep = []  # 书的类型</span><br><span class="line">bookClike = []  # 数的点击量</span><br><span class="line">bookNum = []   # 书的总字数</span><br><span class="line"></span><br><span class="line"># .TwoBox02_08 a</span><br><span class="line"># .fontSize14andHui &gt; a</span><br><span class="line"></span><br><span class="line"># 获取所有数据书名</span><br><span class="line">for tag in soup.select(&#x27;.TwoBox02_08 a&#x27;):</span><br><span class="line">    # print(tag.attrs[&#x27;title&#x27;])</span><br><span class="line">    bookName.append(tag.attrs[&#x27;title&#x27;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 获取所有数据类型</span><br><span class="line">for tag in soup.select(&#x27;.fontSize14andHui &gt; a&#x27;):</span><br><span class="line">    # print(tag.string)</span><br><span class="line">    bookTyep.append(tag.string)</span><br><span class="line"></span><br><span class="line"># 获取所有数据点击量</span><br><span class="line">for tag in soup.select(&#x27;.fontSize14andHui &gt; a&#x27;):</span><br><span class="line">    # print(tag.next_sibling.next_sibling.string)</span><br><span class="line">    bookClike.append(tag.next_sibling.next_sibling.string)</span><br><span class="line"></span><br><span class="line"># 获取所有数据总字数</span><br><span class="line">for tag in soup.select(&#x27;.fontSize14andHui &gt; a&#x27;):</span><br><span class="line">    # print(tag.next_sibling.next_sibling.next_sibling.next_sibling.string)</span><br><span class="line">    bookNum.append(tag.next_sibling.next_sibling.next_sibling.next_sibling.string)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cjData = zip(bookName, bookTyep, bookClike, bookNum)</span><br><span class="line"></span><br><span class="line"># 循环遍历所有数据</span><br><span class="line">for d in cjData:</span><br><span class="line">    print(d)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h5 id="4-9-Beautiful-Soup类selector函数"><a href="#4-9-Beautiful-Soup类selector函数" class="headerlink" title="4.9 Beautiful Soup类selector函数"></a>4.9 Beautiful Soup类selector函数</h5><p>我们要掌握selector函数的运用，前提条件：</p>
<ol>
<li>知道CSS样式的定义</li>
<li>会写CSS相关的样式</li>
<li>能修改CSS相关的样式</li>
</ol>
<h6 id="4-9-1-回顾CSS层叠样式表"><a href="#4-9-1-回顾CSS层叠样式表" class="headerlink" title="4.9.1 回顾CSS层叠样式表"></a>4.9.1 回顾CSS层叠样式表</h6><p><strong>目录相关结构</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281006737.png" alt="image-20260128100625683"></p>
<p><strong>web01.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>巩固CSS层叠样式表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--导入外部CSS层叠样式表--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style01.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>id选择器用#号<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>class选择器用.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h5</span> <span class="attr">id</span>=<span class="string">&quot;myclass&quot;</span>&gt;</span>2022级大数据<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;conl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fonts&quot;</span>&gt;</span>大数据3班38人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;con2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fonts&quot;</span>&gt;</span>大数据4班38人<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            How Do You DO</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello HTML And CSS<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello Python Study<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>style01.css</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#myclass</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fonts</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span>&gt;<span class="selector-tag">span</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">h1&#123;....&#125; :通过标签名进行设置</span><br><span class="line">#myclass&#123;....&#125; :通过id名进行设置</span><br><span class="line">.fonts&#123;....&#125; :通过类名(class)进行设置</span><br><span class="line">p &gt; span&#123;....&#125; : 组合设置， &gt;表示它的子元素</span><br><span class="line">p span&#123;....&#125; : 组合设置，空格( )表示它的后代元素</span><br></pre></td></tr></table></figure>





<h6 id="4-9-2-数据采集使用select函数通过标签名查找"><a href="#4-9-2-数据采集使用select函数通过标签名查找" class="headerlink" title="4.9.2 数据采集使用select函数通过标签名查找"></a>4.9.2 数据采集使用select函数通过标签名查找</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = &#x27;https://python123.io/ws/demo.html&#x27;</span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, &#x27;lxml&#x27;)</span><br><span class="line"></span><br><span class="line"># select(规则选择器)，返回列表类型。表示能查找到1~N个元素</span><br><span class="line">print(soup.select(&#x27;title&#x27;))</span><br><span class="line">print(soup.select(&#x27;p&#x27;))</span><br><span class="line">print(&#x27;查询到p标签元素一个有：&#123;&#125;个&#x27;.format(len(soup.select(&#x27;p&#x27;))))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>练习：使用标签进行查找</strong></p>
<ol>
<li>查找a标签，并将a标签中的超链接地址进行打印输出</li>
<li>查找b标签，并将b标签中的文本内容进行打印输出</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># select(规则选择器)，返回列表类型。表示能查找到1~N个元素</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;title&#x27;))</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;p&#x27;))</span></span><br><span class="line"><span class="comment"># print(&#x27;查询到p标签元素一个有：&#123;&#125;个&#x27;.format(len(soup.select(&#x27;p&#x27;))))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找所有a标签</span></span><br><span class="line"><span class="comment"># a = soup.find_all(&#x27;a&#x27;)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # 打印a标签的属性</span></span><br><span class="line"><span class="comment"># for i in a:</span></span><br><span class="line"><span class="comment">#     print(i[&#x27;href&#x27;])</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;a&#x27;))</span></span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;a&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(tag.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(soup.a.attrs[&#x27;href&#x27;])</span></span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;b&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;b标签的内容为：&#x27;</span> + tag.string)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;b标签的内容为：&#x27;</span> + soup.b.string)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="4-9-3-数据采集使用select函数通过类名和ID查找"><a href="#4-9-3-数据采集使用select函数通过类名和ID查找" class="headerlink" title="4.9.3 数据采集使用select函数通过类名和ID查找"></a>4.9.3 数据采集使用select函数通过类名和ID查找</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用类名查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;.py1&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用ID查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;#link2&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>练习：使用类名或ID进行查找</strong></p>
<ol>
<li>查找类名为title，并将文本内容打印输出</li>
<li>查找id为link1，并将其超链接打印输出</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import requests</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = &#x27;https://python123.io/ws/demo.html&#x27;</span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, &#x27;lxml&#x27;)</span><br><span class="line"></span><br><span class="line"># # 使用类名查找</span><br><span class="line"># print(soup.select(&#x27;.py1&#x27;))</span><br><span class="line">#</span><br><span class="line"># # 使用ID查找</span><br><span class="line"># print(soup.select(&#x27;#link2&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># soup.select(&#x27;.title&#x27;)</span><br><span class="line"></span><br><span class="line">for tag in soup.select(&#x27;.title&#x27;):</span><br><span class="line">    print(&#x27;类名为title的内容为：&#x27; + tag.string)</span><br><span class="line"></span><br><span class="line">for tag in soup.select(&#x27;#link1&#x27;):</span><br><span class="line">    print(&#x27;id为link1的超链接为：&#x27; + tag.attrs[&#x27;href&#x27;])</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="4-9-4-数据采集使用select函数通过组合和属性查找"><a href="#4-9-4-数据采集使用select函数通过组合和属性查找" class="headerlink" title="4.9.4 数据采集使用select函数通过组合和属性查找"></a>4.9.4 数据采集使用select函数通过组合和属性查找</h6><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 组合查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;p &gt; b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;.title &gt; b&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;.course a&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 属性查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;p[class]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;a[id *= link]&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>练习：使用组合或属性查找</strong></p>
<ol>
<li>查找类名以py开头的数据，并将文本内容打印输出</li>
<li>查找a标签有class属性的数据，并将其id的值打印输出</li>
</ol>
<h3 id="五、数据采集项目实战"><a href="#五、数据采集项目实战" class="headerlink" title="五、数据采集项目实战"></a>五、数据采集项目实战</h3><h5 id="5-1-文字数据采集"><a href="#5-1-文字数据采集" class="headerlink" title="5.1 文字数据采集"></a>5.1 文字数据采集</h5><ol>
<li>获取网页(明确目标)</li>
</ol>
<ul>
<li><p>需要采集网站为(飞卢小说)，本站强推：<a href="https://b.faloo.com/Re_91_1.html">https://b.faloo.com/Re_91_1.html</a></p>
</li>
<li><p>​	需要采集哪些数据：小说的名字、作者的名字、小说类型、推荐时间、小说简介、具体小说的阅读连接地址</p>
</li>
<li><p>分析我们需要采集的网页基本结构</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说标题的元素</span></span><br><span class="line">.c_c_d_data1 &gt; .c_c_d_da_title</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说作者及类型</span></span><br><span class="line">.c_c_d_data1 &gt; .c_c_d_da_author &gt; a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说推荐时间</span></span><br><span class="line">.c_c_d_data1 &gt; .c_c_d_da_time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说的简介和链接地址</span></span><br><span class="line">.c_c_d_data1 &gt; .c_c_d_da_data &gt; a</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>请求和响应的测试</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://b.faloo.com/Re_91_1.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试读取结果</span></span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281006756.png" alt="image-20260128100638660"></p>
</li>
<li><p>追加下列代码，提取小说名、作者、小说类型的存储与测试</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://b.faloo.com/Re_91_1.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试读取结果</span></span><br><span class="line"><span class="comment"># print(soup.prettify())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取我们需要的相关数据</span></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说标题的元素</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;.c_c_d_data1 &gt; .c_c_d_da_title&#x27;))</span></span><br><span class="line"></span><br><span class="line">bookName = []</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_title&#x27;</span>):</span><br><span class="line">    bookName.append(tag.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说作者及类型</span></span><br><span class="line"></span><br><span class="line">authorNames = []</span><br><span class="line">bookTypes = []</span><br><span class="line"><span class="keyword">for</span> i, tag <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_author &gt; a&#x27;</span>)):</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>):</span><br><span class="line">        authorNames.append(tag.string)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        bookTypes.append(tag.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line"><span class="comment"># print(authorNames)</span></span><br><span class="line"><span class="comment"># print(bookTypes)</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>追加下列代码，提取小说推荐时间、简介、连接地址、进行组合</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通用的请求框架</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 &#x27;</span></span><br><span class="line">        <span class="string">&#x27;Safari/537.36 Edg/118.0.2088.46 &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLText</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        rep = requests.get(url, headers=headers)</span><br><span class="line">        rep.raise_for_status()</span><br><span class="line">        rep.encoding = rep.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> rep.text</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;产生非200响应状态异常，当前响应状态为&#123;&#125;，请进行及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://b.faloo.com/Re_91_1.html&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(getHTMLText(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试读取结果</span></span><br><span class="line"><span class="comment"># print(soup.prettify())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取我们需要的相关数据</span></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说标题的元素</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;.c_c_d_data1 &gt; .c_c_d_da_title&#x27;))</span></span><br><span class="line"></span><br><span class="line">bookNames = []</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_title&#x27;</span>):</span><br><span class="line">    bookNames.append(tag.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说作者及类型</span></span><br><span class="line"></span><br><span class="line">authorNames = []</span><br><span class="line">bookTypes = []</span><br><span class="line"><span class="keyword">for</span> i, tag <span class="keyword">in</span> <span class="built_in">enumerate</span>(soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_author &gt; a&#x27;</span>)):</span><br><span class="line">    <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>):</span><br><span class="line">        authorNames.append(tag.string)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        bookTypes.append(tag.string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line"><span class="comment"># print(bookNames)</span></span><br><span class="line"><span class="comment"># print(authorNames)</span></span><br><span class="line"><span class="comment"># print(bookTypes)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说推荐时间</span></span><br><span class="line">bookTime = []</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_time&#x27;</span>):</span><br><span class="line">    bookTime.append(tag.string[<span class="number">5</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line"><span class="comment"># print(bookTime)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面CSS样式，能获取当前小说的简介和链接地址</span></span><br><span class="line">bookBrief = []</span><br><span class="line">bookUrl = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;.c_c_d_data1 &gt; .c_c_d_da_data &gt; a&#x27;</span>):</span><br><span class="line">    bookBrief.append(tag.attrs[<span class="string">&#x27;title&#x27;</span>])</span><br><span class="line">    bookUrl.append(<span class="string">&#x27;https:&#x27;</span> + tag.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line"><span class="comment"># print(bookBrief)</span></span><br><span class="line"><span class="comment"># print(bookUrl)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩组装数据，二维数组</span></span><br><span class="line">bookInfo = <span class="built_in">zip</span>(bookNames, authorNames, bookTypes, bookTime, bookBrief, bookUrl)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(bookInfo))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># enumerate 列：</span></span><br><span class="line"><span class="comment"># s = [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="comment"># for i, j in enumerate(s, start=200):</span></span><br><span class="line"><span class="comment">#     print(i, j)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># x, y, z = (8, &#x27;abc&#x27;, True)</span></span><br><span class="line"><span class="comment"># print(x)</span></span><br><span class="line"><span class="comment"># print(z)</span></span><br><span class="line"><span class="comment"># print(y)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>知识扩展：zip函数的作用及应用</strong></p>
<p>zip()函数：用于将可迭代(循环处理)的对象作为参数，将对象(列表、元组等)中对应的元素打包成一个元组，然后返回由这些元组组成的列表。</p>
<p>语法：zip(可迭代对象1，可迭代对象2，……, 可迭代对象N)</p>
<p>说明：每一个可迭代对象长度建议一致，，我们可以理解一个列表数据为一列数据。列如：学生信息(学号、姓名、性别、年龄)，每一个列进行压缩，形成了学生完整的数据。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通过创建模拟学号，类似采集过程中学生学号数据</span></span><br><span class="line">stuids = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10001</span>, <span class="number">10009</span>))</span><br><span class="line"><span class="comment"># print(stuids)</span></span><br><span class="line"></span><br><span class="line">stunames = <span class="string">&#x27;张三 李四 王五 马六 田七 何八 郭就 怒是&#x27;</span>.split()</span><br><span class="line"><span class="comment"># print(stunames)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(len(stuids), len(stunames))</span></span><br><span class="line"></span><br><span class="line">stusexs = [<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27; 女&#x27;</span>, <span class="string">&#x27;男&#x27;</span>] * <span class="number">2</span></span><br><span class="line"><span class="comment"># print(stusexs)</span></span><br><span class="line"></span><br><span class="line">stuages = [<span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">13</span>, <span class="number">24</span>, <span class="number">26</span>]</span><br><span class="line"><span class="comment"># print(stuages)</span></span><br><span class="line"></span><br><span class="line">stuinfo = <span class="built_in">zip</span>(stuids, stunames, stusexs, stuages)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(stuinfo))</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<p><strong>保存数据</strong></p>
<ul>
<li>将数据存储为txt格式</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 保存数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;E:\采集的小说信息.txt&#x27;</span>, mode=<span class="string">&#x27;w+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i, book <span class="keyword">in</span> <span class="built_in">enumerate</span>(bookInfo):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="built_in">len</span>(bookNames) - <span class="number">1</span>:</span><br><span class="line">            f.write(<span class="string">&#x27; &#x27;</span>.join(book))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            f.write(<span class="string">&#x27; &#x27;</span>.join(book) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;写入完成！&#x27;</span>)</span><br></pre></td></tr></table></figure>



<ul>
<li>将数据存储为csv格式(逗号分割值文本文档格式)</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 保存为csv文件数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;E:\采集的小说信息.csv&#x27;</span>, mode=<span class="string">&#x27;w+&#x27;</span>, encoding=<span class="string">&#x27;GBK&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i, book <span class="keyword">in</span> <span class="built_in">enumerate</span>(bookInfo):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="built_in">len</span>(bookNames) - <span class="number">1</span>:</span><br><span class="line">            f.write(<span class="string">&#x27;,&#x27;</span>.join(book))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            f.write(<span class="string">&#x27;,&#x27;</span>.join(book) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;写入完成！&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h5 id="5-2-使用PyMysql进行数据库连接执行增、删、改、查"><a href="#5-2-使用PyMysql进行数据库连接执行增、删、改、查" class="headerlink" title="5.2 使用PyMysql进行数据库连接执行增、删、改、查"></a>5.2 使用PyMysql进行数据库连接执行增、删、改、查</h5><ol>
<li>请通过pip命令安装pymsql,在终端命令为：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>打开数据库工具navicat软件，进行创建数据库：</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281006111.png" alt="image-20260128100650031"></p>
<ol start="3">
<li>可以选择在navicat或python程序中创建数据库表，接下来的演示，我们在python中进行创建 数据库表</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 1.导入pymsql</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line"># 2.创建数据库连接</span><br><span class="line"># host 表示主机， port 表示端口号， user 表示用户名， passworld 表示密码， database 表示需要连接数据库的名字</span><br><span class="line">db = pymysql.connect(host=&#x27;localhost&#x27;,</span><br><span class="line">                     port=3306,</span><br><span class="line">                     user=&#x27;root&#x27;,</span><br><span class="line">                     password=&#x27;123456&#x27;,</span><br><span class="line">                     database=&#x27;pymysqldb&#x27;)</span><br><span class="line"></span><br><span class="line"># 3.创建一个游标对象</span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line"># 使用游标对象执行sql语句</span><br><span class="line">cursor.execute(&#x27;DROP TABLE IF EXISTS student&#x27;)</span><br><span class="line"></span><br><span class="line">sql = &#x27;&#x27;&#x27;</span><br><span class="line">CREATE TABLE student(</span><br><span class="line">	stuid int PRIMARY key,</span><br><span class="line">	stuname VARCHAR(30) not NULL,</span><br><span class="line">	stusex VARCHAR(2) NOT NULL,</span><br><span class="line">	stuage int NOT NULL</span><br><span class="line">)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">cursor.execute(sql)</span><br><span class="line"></span><br><span class="line">#  5.关闭数据库连接</span><br><span class="line">db.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>使用Pymysql插入数据相关操作</strong></p>
<p>简单操作(理解使用，不推荐实际使用)：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 导入pymysql</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 2. 创建数据库连接</span></span><br><span class="line"><span class="comment"># host 表示主机，port 表示端口号，user 表示用户名，password 表示密码，database 表示需</span></span><br><span class="line">要连接的数据库名字</span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">port=<span class="number">3306</span>,</span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">database=<span class="string">&#x27;pymysqldb&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 创建一个游标对象</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 4. 插入数据的操作</span></span><br><span class="line">sql = <span class="string">&quot;INSERT INTO student(stuid, stuname, stusex, stuage) &quot;</span> \</span><br><span class="line"><span class="string">&quot;VALUES (10001, &#x27;张三&#x27;, &#x27;男&#x27;, 20)&quot;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="comment"># 提交到数据库执行</span></span><br><span class="line">db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="comment"># 如果发生错误，执行数据库的回滚</span></span><br><span class="line">db.rollback()</span><br><span class="line"><span class="comment"># 5. 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>



<p><strong>正确操作(推荐大家使用)</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 导入pymysql</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 2. 创建数据库连接</span></span><br><span class="line"><span class="comment"># host 表示主机，port 表示端口号，user 表示用户名，password 表示密码，database 表示需</span></span><br><span class="line">要连接的数据库名字</span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">port=<span class="number">3306</span>,</span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">database=<span class="string">&#x27;pymysqldb&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 创建一个游标对象</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 4. 插入数据的操作</span></span><br><span class="line"><span class="comment"># sql = &quot;INSERT INTO student(stuid, stuname, stusex, stuage) &quot; \</span></span><br><span class="line"><span class="comment"># &quot;VALUES (10001, &#x27;张三&#x27;, &#x27;男&#x27;, 20)&quot;</span></span><br><span class="line"><span class="comment"># 在实际运用中sql正确写法</span></span><br><span class="line">stuid = <span class="number">10002</span></span><br><span class="line">stuname = <span class="string">&#x27;李四&#x27;</span></span><br><span class="line">stusex = <span class="string">&#x27;男&#x27;</span></span><br><span class="line">stuage = <span class="number">18</span></span><br><span class="line">sql = <span class="string">&quot;INSERT INTO student(stuid, stuname, stusex, stuage) &quot;</span> \</span><br><span class="line"><span class="string">&quot;VALUES (&#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;)&quot;</span> % (stuid, stuname, stusex, stuage)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="comment"># 提交到数据库执行</span></span><br><span class="line">db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="comment"># 如果发生错误，执行数据库的回滚</span></span><br><span class="line">db.rollback()</span><br><span class="line"><span class="comment"># 5. 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>



<p>实践练习：30分钟 通过PyMySQL向pymysqldb数据库中student表插入如下数据：</p>
<table>
<thead>
<tr>
<th>stuid</th>
<th>stuname</th>
<th>stusex</th>
<th>stuage</th>
</tr>
</thead>
<tbody><tr>
<td>10003</td>
<td>何仙姑</td>
<td>女</td>
<td>23</td>
</tr>
<tr>
<td>10004</td>
<td>周伯通</td>
<td>男</td>
<td>25</td>
</tr>
<tr>
<td>10005</td>
<td>黄蓉</td>
<td>女</td>
<td>17</td>
</tr>
<tr>
<td>10006</td>
<td>郭靖</td>
<td>男</td>
<td>20</td>
</tr>
<tr>
<td>10007</td>
<td>杨过</td>
<td>男</td>
<td>16</td>
</tr>
</tbody></table>
<p><strong>方式一：通过循环进行逐条插入数据</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 导入pymysql</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 2. 创建数据库连接</span></span><br><span class="line"><span class="comment"># host 表示主机，port 表示端口号，user 表示用户名，password 表示密码，database 表示需</span></span><br><span class="line">要连接的数据库名字</span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">port=<span class="number">3306</span>,</span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">database=<span class="string">&#x27;pymysqldb&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 创建一个游标对象</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 4. 插入数据的操作</span></span><br><span class="line">stuids = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10003</span>, <span class="number">10008</span>))</span><br><span class="line">stunames = <span class="string">&#x27;何仙姑 周伯通 黄蓉 郭靖 杨过&#x27;</span>.split()</span><br><span class="line">stusexs = (<span class="string">&#x27;女 男&#x27;</span>.split()) * <span class="number">2</span> + [<span class="string">&#x27;男&#x27;</span>]</span><br><span class="line">stuages = [<span class="number">23</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">16</span>]</span><br><span class="line">datas = <span class="built_in">zip</span>(stuids, stunames, stusexs, stuages)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="keyword">for</span> stuid, stuname, stusex, stuage <span class="keyword">in</span> datas:</span><br><span class="line">sql = <span class="string">&quot;INSERT INTO student(stuid, stuname, stusex, stuage) &quot;</span> \</span><br><span class="line"><span class="string">&quot;VALUES (&#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;, &#x27;%s&#x27;)&quot;</span> % (stuid, stuname, stusex,</span><br><span class="line">stuage)</span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="comment"># 提交到数据库执行</span></span><br><span class="line">db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="comment"># 如果发生错误，执行数据库的回滚</span></span><br><span class="line">db.rollback()</span><br><span class="line"><span class="comment"># 5. 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>



<p><strong>方法二：通过PyMySQL通过方法进行批量插入数据(推荐)</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 导入pymysql</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># 2. 创建数据库连接</span></span><br><span class="line"><span class="comment"># host 表示主机，port 表示端口号，user 表示用户名，password 表示密码，database 表示需</span></span><br><span class="line">要连接的数据库名字</span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">port=<span class="number">3306</span>,</span><br><span class="line">user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">database=<span class="string">&#x27;pymysqldb&#x27;</span>)</span><br><span class="line"><span class="comment"># 3. 创建一个游标对象</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"><span class="comment"># 4. 插入数据的操作</span></span><br><span class="line">stuids = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">10003</span>, <span class="number">10008</span>))</span><br><span class="line">stunames = <span class="string">&#x27;何仙姑 周伯通 黄蓉 郭靖 杨过&#x27;</span>.split()</span><br><span class="line">stusexs = (<span class="string">&#x27;女 男&#x27;</span>.split()) * <span class="number">2</span> + [<span class="string">&#x27;男&#x27;</span>]</span><br><span class="line">stuages = [<span class="number">23</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">16</span>]</span><br><span class="line">datas = <span class="built_in">zip</span>(stuids, stunames, stusexs, stuages)</span><br><span class="line"><span class="comment"># 提示：使用批量插入需要修订sql写法</span></span><br><span class="line">sql = <span class="string">&quot;INSERT INTO student(stuid, stuname, stusex, stuage) &quot;</span> \</span><br><span class="line"><span class="string">&quot;VALUES (%s, %s, %s, %s)&quot;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">cursor.executemany(sql, datas)</span><br><span class="line"><span class="comment"># 提交到数据库执行</span></span><br><span class="line">db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;发生错误！&#x27;</span>)</span><br><span class="line"><span class="comment"># 如果发生错误，执行数据库的回滚</span></span><br><span class="line">db.rollback()</span><br><span class="line"><span class="comment"># 5. 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>





<p><strong>期末项目考核一：</strong></p>
<ul>
<li>在数据库管理系统中新建一个数据库： feiludb </li>
<li>在当前数据库创建数据表( mybooks )字段： bookname 字符串类型(100) 、 authorname 字符串类 型(30) 、 booktype 字符串类型(50) 、 booktime 日期类型 、 bookbrief 字符串类型(255) 、 bookurl 字符串类型(100) </li>
<li>依据之前编写的采集飞卢小说网中，本站强推的小说信息数据采集 </li>
<li>将其相关数据存储 </li>
<li>提交相关操作代码(SQL(建立数据库、数据表)、python采集信息和存储数据库的代码)，相关如 下图所示：</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007764.png" alt="image-20260128100708689"></p>
<p><strong>期末项目考核附加(30分)：</strong> </p>
<ul>
<li>采集飞卢小说网中本站强推 </li>
<li>采集的数据为小说的封面图片，保存到本地电脑中 xiaoshuotupian 文件夹内 </li>
<li>每张图片名字为网站本身图片名字 </li>
<li>采集一页多张图片(10分)，两页多张图片(15分)，三页或更多页多张图片(20分) </li>
<li>根据大家代码的质量以及性能进行评分(3~10分)。 </li>
<li>最晚提交时间：2023年11月8日 18:00之前</li>
</ul>
<p><strong>PyMySQL查询数据</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.导入pymsql</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建数据库连接</span></span><br><span class="line"><span class="comment"># host 表示主机， port 表示端口号， user 表示用户名， passworld 表示密码， database 表示需要连接数据库的名字</span></span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                     port=<span class="number">3306</span>,</span><br><span class="line">                     user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                     password=<span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">                     database=<span class="string">&#x27;pymysqldb&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.创建一个游标对象</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.创建查询sql语句</span></span><br><span class="line">sql = <span class="string">&quot;SELECT * FROM student where stuage &gt; %s&quot;</span> % (<span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 5.执行sql语句</span></span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    <span class="comment"># 6.执行获取所有记录的方法</span></span><br><span class="line">    results = cursor.fetchall()</span><br><span class="line">    <span class="comment"># 7.通过循环将其进行逐行读取</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">        uid = row[<span class="number">0</span>]</span><br><span class="line">        name = row[<span class="number">1</span>]</span><br><span class="line">        sex = row[<span class="number">2</span>]</span><br><span class="line">        age = row[<span class="number">3</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;学号=%s,姓名=%s,性别=%s,年龄=%s&#x27;</span> % (uid, name, sex, age))</span><br><span class="line"><span class="keyword">except</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;发生错误&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.关闭数据库连接</span></span><br><span class="line">db.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h3 id="数据生产库Faker"><a href="#数据生产库Faker" class="headerlink" title="数据生产库Faker"></a>数据生产库Faker</h3><p><strong>Faker的作用：</strong></p>
<p>Python第三方开源项目，可以生成虚假数据，无论我们要引导数据库，填写一些持久性数据对项目进行 压力测试。</p>
<p><strong>能生成的数据：</strong></p>
<ul>
<li>地理信息 </li>
<li>网络信息 </li>
<li>邮箱信息 </li>
<li>人工作生活信息 </li>
<li>浏览器信息 </li>
<li>数字信息 </li>
<li>文本加密信息 </li>
<li>时间信息</li>
</ul>
<p><strong>如何安装：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install faker</span><br></pre></td></tr></table></figure>

<p><strong>基本运用</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入Fack类</span></span><br><span class="line"><span class="keyword">from</span> faker <span class="keyword">import</span> Faker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.创建对象，默认是英文，需要创建传入参数 zh_CN 表示指定中文</span></span><br><span class="line">fake = Faker(<span class="string">&#x27;zh_CN&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟输出姓名</span></span><br><span class="line"><span class="built_in">print</span>(fake.name())</span><br><span class="line"></span><br><span class="line">names = [fake.name() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(names)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成家庭地址</span></span><br><span class="line"><span class="built_in">print</span>(fake.address())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成电话号码</span></span><br><span class="line"><span class="built_in">print</span>(fake.phone_number())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成电子邮箱</span></span><br><span class="line"><span class="built_in">print</span>(fake.email())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟数据生成国家</span></span><br><span class="line"><span class="built_in">print</span>(fake.country())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成地区</span></span><br><span class="line"><span class="built_in">print</span>(fake.province())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成用户名</span></span><br><span class="line"><span class="built_in">print</span>(fake.user_name())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成网站</span></span><br><span class="line"><span class="built_in">print</span>(fake.url())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模拟生成身份证</span></span><br><span class="line"><span class="built_in">print</span>(fake.ssn())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相关函数的参考网址</span></span><br><span class="line"><span class="comment"># https://www.cnblogs.com/OceanHoi/p/16866183.html</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007251.png" alt="image-20260128100719165"></p>
<h2 id="数据采集02"><a href="#数据采集02" class="headerlink" title="数据采集02"></a>数据采集02</h2><h3 id="一、开发环境需求"><a href="#一、开发环境需求" class="headerlink" title="一、开发环境需求"></a>一、开发环境需求</h3><h4 id="1-1-关于Python需求"><a href="#1-1-关于Python需求" class="headerlink" title="1.1 关于Python需求"></a>1.1 关于Python需求</h4><ul>
<li>安装Python解释器(Python3) </li>
<li>安装Anaconda(Python3发行版本)</li>
</ul>
<h4 id="1-2-开发工具需求"><a href="#1-2-开发工具需求" class="headerlink" title="1.2 开发工具需求"></a>1.2 开发工具需求</h4><ul>
<li>PyCharm(推荐) </li>
<li>Jupyter Notebook(Anaconda自带) </li>
<li>VScode(需要配置插件)</li>
</ul>
<h4 id="1-3-数据采集常用请求库"><a href="#1-3-数据采集常用请求库" class="headerlink" title="1.3 数据采集常用请求库"></a>1.3 数据采集常用请求库</h4><ul>
<li>Python内置请求库(Urllib3) - 基本上都没有怎么用了 </li>
<li>requests</li>
<li>Selenium(自动化工具) + ChromeDriver驱动配置 </li>
<li>PhantomJS(无界面、可脚本编程的Webkit浏览器引擎)</li>
</ul>
<h4 id="1-4-数据采集常用解析库"><a href="#1-4-数据采集常用解析库" class="headerlink" title="1.4 数据采集常用解析库"></a>1.4 数据采集常用解析库</h4><ul>
<li>lxml </li>
<li>Beautiful Soup </li>
<li>pyquery </li>
<li>tesserocr(了解，我们在采集数据时，遇到了验证码或图形验证码，可以用OCR来识别)</li>
</ul>
<h4 id="1-5-常用存储"><a href="#1-5-常用存储" class="headerlink" title="1.5 常用存储"></a>1.5 常用存储</h4><ul>
<li>MySQL(关系型数据库) </li>
<li>MongoDB(列式数据库) - 代理(IP代理、登录用户代理等等) </li>
<li>Redis(基于内存的高效非关系型数据) - 代理(IP代理、登录用户代理等等)</li>
</ul>
<h4 id="1-6-存储连接操作库"><a href="#1-6-存储连接操作库" class="headerlink" title="1.6 存储连接操作库"></a>1.6 存储连接操作库</h4><ul>
<li>PyMySQL </li>
<li>PyMongoDB </li>
<li>redis-py + redisDump(数据导入&#x2F;导出)的工具</li>
</ul>
<h4 id="1-7-App爬取相关库"><a href="#1-7-App爬取相关库" class="headerlink" title="1.7 App爬取相关库"></a>1.7 App爬取相关库</h4><ul>
<li>Charles(网络抓包工具) </li>
<li>Appium(移动端的自动化测试工具)</li>
</ul>
<h4 id="1-8-爬虫框架库"><a href="#1-8-爬虫框架库" class="headerlink" title="1.8 爬虫框架库"></a>1.8 爬虫框架库</h4><ul>
<li>Scrapy </li>
<li>pyspider</li>
</ul>
<h3 id="二、安装相关库"><a href="#二、安装相关库" class="headerlink" title="二、安装相关库"></a>二、安装相关库</h3><h4 id="2-1-PyCharm的Python解释器配置"><a href="#2-1-PyCharm的Python解释器配置" class="headerlink" title="2.1 PyCharm的Python解释器配置"></a>2.1 PyCharm的Python解释器配置</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007415.png" alt="image-20260128100730318"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007006.png" alt="image-20260128100737920"></p>
<h4 id="2-2-查看当前解释器已经安装好了哪些库"><a href="#2-2-查看当前解释器已经安装好了哪些库" class="headerlink" title="2.2 查看当前解释器已经安装好了哪些库"></a>2.2 查看当前解释器已经安装好了哪些库</h4><p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007693.png" alt="image-20260128100747596"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281007281.png" alt="image-20260128100756196"></p>
<h4 id="2-3-安装要使用的第三方库"><a href="#2-3-安装要使用的第三方库" class="headerlink" title="2.3 安装要使用的第三方库"></a>2.3 安装要使用的第三方库</h4><p>文本转语音</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下面的是安装文本转语音的三方库</span></span><br><span class="line">pip install pyttsx3</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pyttsx3</span><br><span class="line">engine = pyttsx3.init()</span><br><span class="line">engine.say(<span class="string">&quot;How Do You Do, 今天是2023年12月12日双十二活动现场，接下来有请我们主持人:张</span></span><br><span class="line"><span class="string">俊宇。大家掌声欢迎&quot;</span>)</span><br><span class="line">engine.runAndWait()</span><br></pre></td></tr></table></figure>



<p>微信聊天机器人</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install pyautogui</span><br></pre></td></tr></table></figure>

<p>会自动安装一个 pyperclip</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pyautogui</span><br><span class="line"><span class="keyword">import</span> pyperclip</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要发生具体消息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_msg</span>():</span><br><span class="line">contents = <span class="string">&#x27;通知：2023年12月22日10:00到515集合，今天讲解内容为：网络爬虫采集小说</span></span><br><span class="line"><span class="string">数据&#x27;</span></span><br><span class="line"><span class="keyword">return</span> contents.split(<span class="string">&quot;，&quot;</span>)</span><br><span class="line"><span class="comment"># 发送操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send</span>(<span class="params">msg</span>):</span><br><span class="line"><span class="comment"># 复制需要发送的内容到粘贴板</span></span><br><span class="line">pyperclip.copy(msg)</span><br><span class="line"><span class="comment"># 模拟键盘粘贴快捷键</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;v&#x27;</span>) <span class="comment"># ctrl + v</span></span><br><span class="line"><span class="comment"># 发送消息</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line"><span class="comment"># 操作微信</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_msg</span>(<span class="params">friend_name</span>):</span><br><span class="line"><span class="comment"># 模拟打开微信的快捷键</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;alt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="comment"># 搜索好友</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;f&#x27;</span>)</span><br><span class="line"><span class="comment"># 复制好友名字</span></span><br><span class="line">pyperclip.copy(friend_name)</span><br><span class="line"><span class="comment"># 模拟键盘粘贴好友到输入框</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;ctrl&#x27;</span>, <span class="string">&#x27;v&#x27;</span>)</span><br><span class="line"><span class="comment"># 线程停止3秒</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 回车进入好友消息界面</span></span><br><span class="line">pyautogui.hotkey(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> msg <span class="keyword">in</span> get_msg():</span><br><span class="line">send(msg)</span><br><span class="line"><span class="comment"># 每条消息间隔30秒</span></span><br><span class="line">time.sleep(<span class="number">30</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">send_msg(<span class="string">&quot;22级大数据-谭含天&quot;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="三、网络请求框架"><a href="#三、网络请求框架" class="headerlink" title="三、网络请求框架"></a>三、网络请求框架</h3><h4 id="3-1-Requests请求"><a href="#3-1-Requests请求" class="headerlink" title="3.1 Requests请求"></a>3.1 Requests请求</h4><p>Requests是一个 优雅而简单 的 Python HTTP 库，专为人类而构建。 </p>
<p>Requests允许您极其轻松地发送 HTTP&#x2F;1.1 请求。无需手动将查询字符串添加到 URL，或对 POST 数据进行表单编码。得益于urllib3，Keep-alive 和 HTTP 连接池是 100% 自动的。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 请求到响应基础运用(以百度为例)</span></span><br><span class="line"><span class="comment"># 1. 导入需要情况库文件</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 请求和响应</span></span><br><span class="line"><span class="comment"># rep变量就是得到请求成功后响应的对象</span></span><br><span class="line"><span class="comment"># requests.get(网址字符串)</span></span><br><span class="line">webUrl = <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 读取百度网站的HTML内容(字符串)</span></span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br><span class="line"><span class="comment"># 我们是不是发现响应回来的内容有乱码</span></span><br><span class="line"><span class="comment"># 默认请求百度的编码方式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;百度的编码方式为：&quot;</span> + rep.encoding)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;自动推断区域编码：&quot;</span> + rep.apparent_encoding)</span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 状态码</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;百度请求的状态码&quot;</span> + <span class="built_in">str</span>(rep.status_code))</span><br></pre></td></tr></table></figure>



<p><strong>状态码</strong></p>
<p>1开头状态码：请求收到，继续处理 </p>
<p>2开头状态码：操作成功收到，分析、接受 </p>
<p>3开头状态码：完成此请求必须进一步处理 </p>
<p>4开头状态码：请求包含一个错误语法或不能完成 </p>
<p>5开头状态码：服务器执行一个完全有效请求失败 </p>
<p>100——客户必须继续发出请求 </p>
<p>101——客户要求服务器根据请求转换HTTP协议版本</p>
<p>200——交易成功 </p>
<p>201——提示知道新文件的URL </p>
<p>202——接受和处理、但处理未完成 </p>
<p>203——返回信息不确定或不完整 </p>
<p>204——请求收到，但返回信息为空 </p>
<p>205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件 </p>
<p>206——服务器已经完成了部分用户的GET请求 </p>
<p>300——请求的资源可在多处得到 </p>
<p>301——删除请求数据 </p>
<p>302——在其他地址发现了请求数据 </p>
<p>303——建议客户访问其他URL或访问方式 </p>
<p>304——客户端已经执行了GET，但文件未变化 </p>
<p>305——请求的资源必须从服务器指定的地址得到 </p>
<p>306——前一版本HTTP中使用的代码，现行版本中不再使用 </p>
<p>307——申明请求的资源临时性删除 </p>
<p>400——客户端发起的请求错误，如语法错误 </p>
<p>401——请求授权失败，需要身份认证 </p>
<p>402——保留有效ChargeTo头响应 </p>
<p>403——服务端理解客户端的请求，但是拒接此请求（你说气不气？） </p>
<p>404——没有发现文件、查询或URl </p>
<p>405——用户在Request-Line字段定义的方法不允许 </p>
<p>406——根据用户发送的Accept拖，请求资源不可访问</p>
<p>407——类似401，用户必须首先在代理服务器上得到授权 </p>
<p>408——客户端没有在用户指定的饿时间内完成请求 </p>
<p>409——对当前资源状态，请求不能完成 </p>
<p>410——服务器上不再有此资源且无进一步的参考地址,</p>
<p>410不同于404，如果资源以前有现在被永久删除 了可使用410代码，网站设计人员可通过301代码指定资源的新位置 </p>
<p>411——服务器拒绝用户定义的Content-Length属性请求 </p>
<p>412——一个或多个请求头字段在当前请求中错误 </p>
<p>413——请求的资源大于服务器允许的大小 </p>
<p>414——请求的资源URL长于服务器允许的长度 </p>
<p>415——请求资源不支持请求项目格式 </p>
<p>416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含IfRange请求头字段 </p>
<p>417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满 足请求 </p>
<p>500——服务器内部发生错误，无法完成请求响应 </p>
<p>501——服务器不支持请求的功能 </p>
<p>502——充当网关或代理的服务器，从远端服务器接收到了一个无效的请求 </p>
<p>503——服务器过载或处于维护状态，暂停服务 </p>
<p>504——充当网关或代理的服务器，未及时从远端服务器获得请求 </p>
<p>505——服务器不支持或拒绝请求头中指定的HTTP版本</p>
<p><strong>如何请求和响应多媒体数据</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">imgUrl =</span><br><span class="line"><span class="string">&quot;https://globalimg.sucai999.com/preimg/DBC456/700/DBC456/101/7f3b16dbdee11014</span></span><br><span class="line"><span class="string">56ecca13e8b0dd94.jpg&quot;</span></span><br><span class="line">rep = requests.get(imgUrl)</span><br><span class="line"><span class="comment"># 写入图片的操作</span></span><br><span class="line"><span class="comment"># mode=&#x27;w&#x27; 表示写入文本，如果要写入二进制(byte)就需要使用 &#x27;wb&#x27;(write byte)</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/美女1.jpg&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">f.write(rep.content)</span><br></pre></td></tr></table></figure>

<p><strong>我们请求的网站是如何知道请求是爬虫？我们该如何解决？</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">webUrl = <span class="string">&#x27;https://www.douban.com/&#x27;</span></span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></span><br><span class="line"><span class="string">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=head)</span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;豆瓣网返回响应的状态码：&quot;</span> + <span class="built_in">str</span>(rep.status_code))</span><br><span class="line"><span class="comment"># 向服务器请求时，带了哪些协议过去？</span></span><br><span class="line"><span class="built_in">print</span>(rep.request.headers)</span><br></pre></td></tr></table></figure>

<p><strong>请求返回数据的通用模块</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></span><br><span class="line"><span class="string">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=head)</span><br><span class="line"><span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块</span></span><br><span class="line">(<span class="keyword">except</span>)</span><br><span class="line">rep.raise_for_status()</span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line"><span class="keyword">if</span> whetherByte:</span><br><span class="line"><span class="keyword">return</span> rep.content</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">return</span> rep.text</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代</span></span><br><span class="line"><span class="string">码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 验证模块是否能请求</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"><span class="comment"># url = &#x27;http://www.baidu.com&#x27;</span></span><br><span class="line"><span class="comment"># data1 = getHTMLAndByte(url)</span></span><br><span class="line"><span class="comment"># print(data1)</span></span><br><span class="line">url =</span><br><span class="line"><span class="string">&#x27;https://globalimg.sucai999.com/preimg/DBC456/700/DBC456/155/4ceecb3136b74eb9</span></span><br><span class="line"><span class="string">2e0a097eb4a27b.jpg&#x27;</span></span><br><span class="line">imgByte = getHTMLAndByte(url, <span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(imgByte)</span><br></pre></td></tr></table></figure>



<h4 id="3-2-数据采集训练"><a href="#3-2-数据采集训练" class="headerlink" title="3.2 数据采集训练"></a>3.2 数据采集训练</h4><ol>
<li>获取12306的所有火车的站点数据</li>
</ol>
<ul>
<li>请求网址：<a href="https://www.12306.cn/index/script/core/common/station_name_new">https://www.12306.cn/index/script/core/common/station_name_new</a>_ v10023.js </li>
<li>获取所有站点的中文名称 </li>
<li>然后将其写入到一个名称 12306火车站点数据.txt 文件中，每个站点占一行。具体效果如下：</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008671.png" alt="image-20260128100809604"></p>
<p><strong>实现代码：</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008664.png" alt="image-20260128100818571"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></span><br><span class="line"><span class="string">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=head)</span><br><span class="line"><span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块</span></span><br><span class="line">(<span class="keyword">except</span>)</span><br><span class="line">rep.raise_for_status()</span><br><span class="line">rep.encoding = rep.apparent_encoding</span><br><span class="line"><span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line"><span class="keyword">if</span> whetherByte:</span><br><span class="line"><span class="keyword">return</span> rep.content</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">return</span> rep.text</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代</span></span><br><span class="line"><span class="string">码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">url =</span><br><span class="line"><span class="string">&#x27;https://www.12306.cn/index/script/core/common/station_name_new_v10024.js&#x27;</span></span><br><span class="line"><span class="comment"># # 测试</span></span><br><span class="line"><span class="comment"># print(getHTMLAndByte(url))</span></span><br><span class="line"><span class="comment"># 获取12306站点的JS文件数据</span></span><br><span class="line">jsdata = getHTMLAndByte(url)</span><br><span class="line"><span class="comment"># 处理字符串数据(字符串截取)，然后切片器进行选取数据</span></span><br><span class="line">sitedata = jsdata.split(<span class="string">&#x27;|&#x27;</span>)[<span class="number">1</span>::<span class="number">10</span>]</span><br><span class="line"><span class="comment"># 保存数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;trainsite.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> sitedata:</span><br><span class="line">f.write(data + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;文本写入完成！&#x27;</span>)</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>采集好看视频的视频数据</li>
</ol>
<ul>
<li>网址：<a href="https://haokan.baidu.com/">https://haokan.baidu.com/</a> </li>
<li>至少采集4个视频，通过代码下载到你的本地电脑中的指定文件夹 好看视频数据采集 中。</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008912.png" alt="image-20260128100825736"></p>
<p><strong>实现代码</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">		<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">	videoUrls = [<span class="string">&#x27;https://highlight-video.cdn.bcebos.com/video/6s/4a4ba5e4-9e01-11ee-a624-b4055dd173d7.mp4&#x27;</span>,</span><br><span class="line">				<span class="string">&#x27;https://highlight-video.cdn.bcebos.com/video/6s/a07afd0c9aa0-11ee-aa73-6c92bf4060b7.mp4&#x27;</span>,</span><br><span class="line">             	<span class="string">&#x27;https://highlight-video.cdn.bcebos.com/video/6s/5f6e2c8e94ac-11ee-9047-6c92bfb3fd7e.mp4&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 编写循环处理多个视频链接地址</span></span><br><span class="line">	<span class="keyword">for</span> url <span class="keyword">in</span> videoUrls:</span><br><span class="line">		<span class="comment"># 获取视频的字节流数据</span></span><br><span class="line">		videoByte = getHTMLAndByte(url, whetherByte=<span class="literal">True</span>)</span><br><span class="line">		<span class="comment"># 处理视频的名字, [&#x27;https:&#x27;, &#x27;&#x27;, &#x27;highlight-video.cdn.bcebos.com&#x27;,&#x27;video&#x27;, &#x27;6s&#x27;, &#x27;4a4ba5e4-9e01-11ee-a624-b4055dd173d7.mp4&#x27;]</span></span><br><span class="line">		videoName = url.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">		<span class="comment"># 写入视频数据</span></span><br><span class="line">		<span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;好看视频采集数据/&#x27;</span> + videoName, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">			f.write(videoByte)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;视频采集完成！&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p><strong>扩展知识</strong>：selenium和ChromeDriver </p>
<p>ChromeDriver淘宝镜像：<a href="https://registry.npmmirror.com/binary.html?path=chromed">https://registry.npmmirror.com/binary.html?path=chromed</a> river&#x2F;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	browser.get(<span class="string">&quot;https://www.vip.com&quot;</span>)</span><br><span class="line">	<span class="built_in">input</span> = browser.find_element(By.CSS_SELECTOR, <span class="string">&#x27;.c-search-input&#x27;</span>)</span><br><span class="line">	<span class="built_in">input</span>.send_keys(<span class="string">&#x27;口红&#x27;</span>)</span><br><span class="line">	time.sleep(<span class="number">3</span>)</span><br><span class="line">	<span class="built_in">input</span>.send_keys(Keys.ENTER)</span><br><span class="line">	names = browser.find_elements(By.CLASS_NAME, <span class="string">&#x27;c-goods-item__name&#x27;</span>)</span><br><span class="line">	<span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">		<span class="built_in">print</span>(name.text)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">	browser.close()</span><br></pre></td></tr></table></figure>



<h4 id="3-3-网址采集时的参数传递"><a href="#3-3-网址采集时的参数传递" class="headerlink" title="3.3 网址采集时的参数传递"></a>3.3 网址采集时的参数传递</h4><p>对于GET请求，如果我们要附加额外信息，就是要添加参数。比如：下列网址进行参数对比。 </p>
<p>百度搜索： <a href="https://www.baidu.com/s?wd=javascript">https://www.baidu.com/s?wd=javascript</a> </p>
<p>搜狗搜索：<a href="https://www.sogou.com/web?query=javascript">https://www.sogou.com/web?query=javascript</a> </p>
<p>什么是参数呢？ </p>
<p>在 ？ 后面就是需要添加的额外参数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要请求网址</span></span><br><span class="line">webUrl = <span class="string">&#x27;https://www.baidu.com/s&#x27;</span></span><br><span class="line"><span class="comment"># 请求网址是添加参数</span></span><br><span class="line">webParams = &#123;</span><br><span class="line">	<span class="string">&#x27;wd&#x27;</span>: <span class="string">&#x27;javascript&#x27;</span>,</span><br><span class="line">	<span class="string">&#x27;tn&#x27;</span>: <span class="string">&#x27;baiduhome_pg&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=head, params=webParams)</span><br><span class="line"><span class="built_in">print</span>(rep.request.url)</span><br></pre></td></tr></table></figure>

<p><a href="https://www.baidu.com/s?wd=javascript&tn=baiduhome_pg">https://www.baidu.com/s?wd=javascript&amp;tn=baiduhome_pg</a></p>
<p><strong>对比分析：</strong></p>
<p>单程</p>
<p><a href="https://kyfw.12306.cn/otn/leftTicket/init?linktypeid=dc">https://kyfw.12306.cn/otn/leftTicket/init?linktypeid=dc</a></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008988.png" alt="image-20260128100835908"></p>
<p>往返</p>
<p><a href="https://kyfw.12306.cn/otn/leftTicket/init?linktypeid=wf">https://kyfw.12306.cn/otn/leftTicket/init?linktypeid=wf</a></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008604.png" alt="image-20260128100842526"></p>
<h4 id="3-4-如何实现模拟登录"><a href="#3-4-如何实现模拟登录" class="headerlink" title="3.4 如何实现模拟登录"></a>3.4 如何实现模拟登录</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要请求网址</span></span><br><span class="line">webUrl = <span class="string">&#x27;https://home.jd.com/&#x27;</span></span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></span><br><span class="line"><span class="string">AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">rep = requests.get(webUrl, headers=head)</span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>京东-欢迎登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008079.png" alt="image-20260128100847991"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要请求网址</span></span><br><span class="line">webUrl = <span class="string">&#x27;https://home.jd.com/&#x27;</span></span><br><span class="line"><span class="comment"># 伪装请求的头部信息</span></span><br><span class="line"><span class="comment"># 需要模拟登录简单粗暴的使用cookies</span></span><br><span class="line">head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">		<span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;__jdu=16956384678711835153554; shshshfpa=726bacda-6837-98e5-4a73-60705bb4d99d-1695638474; shshshfpx=726bacda-6837-98e5-4a73-60705bb4d99d-1695638474; pinId=YsezASvotgm1ffsfn98I-w; ipLoc-djd=4-48207-48261-0; pin=dengq720; unick=FreeMan_Deng;_tp=ip8c6qT99GWkZGU2mU%2Falg%3D%3D; _pst=dengq720; __jdv=76161171|direct|-|none|-|1702947611805; PCSYCityID=CN_500000_500100_0; ceshi3.com=103; ...&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">rep = requests.get(webUrl, headers=head)</span><br><span class="line"><span class="built_in">print</span>(rep.text)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>我的京东</span><br></pre></td></tr></table></figure>



<h3 id="四、网页解析框架"><a href="#四、网页解析框架" class="headerlink" title="四、网页解析框架"></a>四、网页解析框架</h3><h4 id="4-1-lxml和Beautiful-Soup"><a href="#4-1-lxml和Beautiful-Soup" class="headerlink" title="4.1 lxml和Beautiful Soup"></a>4.1 lxml和Beautiful Soup</h4><p>lxml 是 Python 的一个解析库 ， 支持 HTML 和 XML 的解析，支持 XPath 解析方式，而且 解析效率非常高 。先安装lxml。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install lxml</span><br></pre></td></tr></table></figure>

<p>Beautiful Soup 是 Python 的一个 HTML 或 XML 的解析库，我们可以用它来方便地从网页中 提 取数据 。 它拥有强大的 API 和多样的解析方式，接下来了解一下它的安装方式。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281008029.png" alt="image-20260128100854940"></p>
<h4 id="4-2-Beautiful-Soup支持的解释器介绍"><a href="#4-2-Beautiful-Soup支持的解释器介绍" class="headerlink" title="4.2 Beautiful Soup支持的解释器介绍"></a>4.2 Beautiful Soup支持的解释器介绍</h4><p>Beautiful Soup 在解析时实际上依赖解析器，它除了支持 Python 标准库中的 HTML 解析器外， 还支持一些第三方解析器（比如 lxml ）。下列出是 Beautiful Soup 支持的解析器。</p>
<table>
<thead>
<tr>
<th>解析器</th>
<th>使用方法</th>
<th>优势</th>
<th>劣势</th>
</tr>
</thead>
<tbody><tr>
<td>Python 标准库</td>
<td>BeautifulSoup(markup,” html. parser”)</td>
<td>Python 的内置标准 库、执行速度适中、 文档容错能力强</td>
<td>Python 2.7.3 及 Python3 . 2 .2 之前的版本文档容错 能力差</td>
</tr>
<tr>
<td>lxml HTML 解 析器</td>
<td>BeautifulSoup(markup,” lxml”)</td>
<td>速度快 、文档容错 能力强</td>
<td>需要安装C语言库</td>
</tr>
<tr>
<td>lxml XML 解析器</td>
<td>BeautifulSoup(markup, “xml”)</td>
<td>速度快、唯一支持 XML 的解析器</td>
<td>需要安装C语言库</td>
</tr>
<tr>
<td>html5lib</td>
<td>BeautifulSoup(markup,” html5lib”)</td>
<td>最好的容错性、以浏 览器的方式解析文 档、生成 HTML5 格 式的文档</td>
<td>速度慢、不依赖外部 扩展</td>
</tr>
</tbody></table>
<p>通过以上对比可以看出， lxml 解析器有解析 HTML 和 XML 的功能，而且速度’快，容错能力强， 所以推荐使用它。 如果使用 lxml ，那么在初始化 Beautiful Soup 时，可以把第二个参数改为 lxml 即可:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 导入操作</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 解析网页数据(理解为：我们通过requests请求回来的具体HTML页面)</span></span><br><span class="line"><span class="comment"># BeautifulSoup(&#x27;&lt;h1&gt;BeautifulSoup&lt;/h1&gt;&#x27;, &#x27;lxml&#x27;)</span></span><br><span class="line"><span class="comment"># 参数1：需要解析的具体网页</span></span><br><span class="line"><span class="comment"># 参数2：你要使用那个解析器(解析器的名字)</span></span><br><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;h1&gt;BeautifulSoup&lt;/h1&gt;&#x27;</span>, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.提取数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.h1.string)</span><br></pre></td></tr></table></figure>

<p>在后面， Beautiful Soup 的用法实例也统一用这个解析器来演示。</p>
<h4 id="4-3-基本运用"><a href="#4-3-基本运用" class="headerlink" title="4.3 基本运用"></a>4.3 基本运用</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;</span></span><br><span class="line"><span class="string">,</span></span><br><span class="line"><span class="string">和</span></span><br><span class="line"><span class="string">;</span></span><br><span class="line"><span class="string">他们住在井底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;以下是提取网页标题的内容&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.title.string)</span><br></pre></td></tr></table></figure>



<p><strong>BeautifulSoup的基本元素</strong></p>
<table>
<thead>
<tr>
<th>基本元素</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Tag</td>
<td>标签，最基本的信息组织单元，分别用&lt;&gt;和标明开头和结尾</td>
</tr>
<tr>
<td>Name</td>
<td>标签的名字，&lt;p ………&lt;&#x2F;p&gt;的名字是‘p’   格式： .name</td>
</tr>
<tr>
<td>Attributes</td>
<td>标签的属性，字典形式组织，格式：，.attrs</td>
</tr>
<tr>
<td>NavigableString</td>
<td>标签内非属性字符串，&lt;&gt;……中字符串，格式：.string</td>
</tr>
<tr>
<td>Comment</td>
<td>标签内字符串的注释部分，一种特殊的Comment类型</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;</span></span><br><span class="line"><span class="string">,</span></span><br><span class="line"><span class="string">和</span></span><br><span class="line"><span class="string">;</span></span><br><span class="line"><span class="string">他们住在井底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 选择元素</span></span><br><span class="line"><span class="comment"># soup.title 查找title这个标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.title)</span><br><span class="line"><span class="comment"># 类型：bs4.element.Tag</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(soup.title))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(soup.p))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 提取信息操作</span></span><br><span class="line"><span class="built_in">print</span>(soup.title.name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 提取元素的属性</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.attrs)</span><br><span class="line"><span class="built_in">print</span>(soup.p.attrs[<span class="string">&#x27;name&#x27;</span>])</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;文献网&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;睡鼠的故事&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;linkl&quot;&gt;&lt;!-- Elsie --&gt;</span></span><br><span class="line"><span class="string">&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;蕾西&lt;/a&gt;和</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;蒂莉&lt;/a&gt;;</span></span><br><span class="line"><span class="string">他们住在井底。&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;其他内容隐藏...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs)</span><br><span class="line"><span class="built_in">print</span>(soup.a.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br></pre></td></tr></table></figure>





<h4 id="4-4-采集数据的初体验"><a href="#4-4-采集数据的初体验" class="headerlink" title="4.4 采集数据的初体验"></a>4.4 采集数据的初体验</h4><p>数据采集的整体工作流程:飞卢小说网为例 </p>
<ol>
<li>明确采集的目标(就是我们要采集的网站) </li>
<li>分析采集目标的数据组成结构以及它的规则 </li>
<li>反爬机制的分析(测试，该目标有哪些反爬技术，我们需要使用哪些方法来进行处理) </li>
<li>编写采集代码 </li>
<li>(建议)：先测试小量数据(发现问题，解决问题) </li>
<li>进行大批量数据采集(文本内容保存或者多媒体数据保存)</li>
</ol>
<p><strong>体验采集小说网的分析过程</strong> </p>
<p>标新榜： <a href="https://b.faloo.com/Rank_1.html">https://b.faloo.com/Rank_1.html</a> </p>
<p>总榜：<a href="https://b.faloo.com/Rank_2.html">https://b.faloo.com/Rank_2.html</a> </p>
<p>分类榜：<a href="https://b.faloo.com/Rank_3.html">https://b.faloo.com/Rank_3.html</a> </p>
<p>女生榜：<a href="https://b.faloo.com/Rank_4.html">https://b.faloo.com/Rank_4.html</a></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281009935.png" alt="image-20260128100905787"></p>
<p><img data-src="E:/typora%E5%9B%BE%E7%89%87/image-20240102103356381.png" alt="image-20240102103356381"></p>
<p>整个图片的CSS样式选择： #Tab1 .c_de_rk_content .c_de_rk_c_data .c_de_rk_c_d_img a img</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">		<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 请求网址</span></span><br><span class="line">bookUrl = <span class="string">&#x27;https://b.faloo.com/Rank_1.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引用解析库</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(bookUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># # 测试</span></span><br><span class="line"><span class="comment"># print(soup.prettify())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># # 测试是否找到了，我们想要的img标签数据，如果是多个，返回列表(数组)</span></span><br><span class="line"><span class="comment"># print(soup.select(&#x27;#Tab1 .c_de_rk_content .c_de_rk_c_data .c_de_rk_c_d_imga img&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;#Tab1 .c_de_rk_content .c_de_rk_c_data.c_de_rk_c_d_img a img&#x27;</span>):</span><br><span class="line">	<span class="comment"># 每张图片的链接地址</span></span><br><span class="line">	imgUrl = tag.attrs[<span class="string">&#x27;src&#x27;</span>]</span><br><span class="line">	<span class="comment"># 定义变量获取图片名字</span></span><br><span class="line">	imgName = imgUrl.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">	<span class="comment"># print(imgName)</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 获取下载图片的字节流</span></span><br><span class="line">	imgByte = getHTMLAndByte(imgUrl, whetherByte=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">	<span class="comment"># 写入图片IO操作</span></span><br><span class="line">	<span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/飞卢小说图片/&#x27;</span> + imgName, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">		f.write(imgByte)</span><br></pre></td></tr></table></figure>



<p><strong>采集训练：</strong></p>
<p>任务：将女生榜中图片数据进行采集到本地 </p>
<p>思考：我如何能将 标新榜、总榜、分类榜、女生榜 里面的图片一次性全部下载。对应的网址它的规则如何 处理，需要用到哪些Python基础知识。</p>
<p><strong>扩展：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通过分析我们可以使用循环来生成有规则的请求地址</span></span><br><span class="line"></span><br><span class="line">xsUrl = <span class="string">&#x27;https://b.faloo.com/Rank_&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>):</span><br><span class="line">	url = xsUrl + <span class="built_in">str</span>(i) + <span class="string">&#x27;.html&#x27;</span></span><br><span class="line">	<span class="built_in">print</span>(url)</span><br></pre></td></tr></table></figure>



<h4 id="4-5-Selector应用"><a href="#4-5-Selector应用" class="headerlink" title="4.5 Selector应用"></a>4.5 Selector应用</h4><p>什么是Selector?它是当前元素定义的CSS样式，它的返回值可能是id选择器、class选择器、标签 (元素)选择器。我们在大一时，学习CSS层叠样式表的原理和方式，所有我们对Selector的操作应该 比较容易上手。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281009191.png" alt="image-20260128100917108"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281009446.png" alt="image-20260128100925345"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281009107.png" alt="image-20260128100933005"></p>
<h4 id="4-6-Beautiful-Soup关联元素选择"><a href="#4-6-Beautiful-Soup关联元素选择" class="headerlink" title="4.6 Beautiful Soup关联元素选择"></a>4.6 Beautiful Soup关联元素选择</h4><p>我们在做选择的时候，有时候不能做到一步就选到炫耀的节点元素，需要先选取某一个节点元素，然后 以它为基准在选择它的子节点、父节点、兄弟节点等。</p>
<h5 id="4-6-1-子节点与子孙节点"><a href="#4-6-1-子节点与子孙节点" class="headerlink" title="4.6.1 子节点与子孙节点"></a>4.6.1 子节点与子孙节点</h5><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.contents</td>
<td>子节点的列表，将  所有子节点存入列表</td>
</tr>
<tr>
<td>.children</td>
<td>子节点的迭代类型，用于循环遍历子节点</td>
</tr>
<tr>
<td>.descendants</td>
<td>子孙节点的迭代类型，包含所有子孙节点，用于循环遍历子孙节点</td>
</tr>
</tbody></table>
<p><strong>.contents属性，示例：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">		<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 靶向网站 http://python123.io/ws/demo.html</span></span><br><span class="line"><span class="comment"># 创建bs4</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># body中有那些子节点</span></span><br><span class="line"><span class="comment"># print(soup.body.contents)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># p标签中有那些子节点</span></span><br><span class="line"><span class="built_in">print</span>(soup.p.contents)</span><br></pre></td></tr></table></figure>

<p><strong>子节点与子孙节点基本应用</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">		<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 靶向网站 http://python123.io/ws/demo.html 创建bs4</span></span><br><span class="line">webUrl = <span class="string">&#x27;http://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># body中有那些子节点</span></span><br><span class="line"><span class="comment"># print(soup.body.contents)</span></span><br><span class="line"><span class="comment"># p标签中有那些子节点</span></span><br><span class="line"><span class="comment"># print(soup.p.contents)</span></span><br><span class="line"><span class="comment"># children 迭代类型，遍历所有的子节点</span></span><br><span class="line"><span class="comment"># print(soup.p.children) # 得到的是一个迭代对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个p标签中所有的子节点，通过循环将其迭代</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.p.contents:</span><br><span class="line">	<span class="built_in">print</span>(child)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第一个p标签中所以的子孙节点，通过循环将其迭代</span></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> soup.p.descendants:</span><br><span class="line">	<span class="built_in">print</span>(child)</span><br></pre></td></tr></table></figure>



<h5 id="4-6-2-父节点和先辈-祖先-节点"><a href="#4-6-2-父节点和先辈-祖先-节点" class="headerlink" title="4.6.2 父节点和先辈(祖先)节点"></a>4.6.2 父节点和先辈(祖先)节点</h5><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.parent</td>
<td>节点的父标签</td>
</tr>
<tr>
<td>.parents</td>
<td>节点先辈标签的迭代类型，用于循环遍历先辈节点</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># soup.title.parent.name 的意思为：通过BeautifulSoup对象查询标签为title的父节点标签并获取其名字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.title.parent.name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span> * <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> parent <span class="keyword">in</span> soup.title.parents:</span><br><span class="line">	<span class="built_in">print</span>(parent.name)</span><br></pre></td></tr></table></figure>

<p><strong>4.6.3 兄弟(同辈)节点</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.next_sibling</td>
<td>返回按照 HTML 文本顺序的下一个平行节点标签</td>
</tr>
<tr>
<td>.previous_sibling</td>
<td>返回按照 HTML 文本顺序的上一个平行节点标签</td>
</tr>
<tr>
<td>.next_siblings</td>
<td>迭代类型，返回按照 HTML 文本顺序的后续所有平行节点标签</td>
</tr>
<tr>
<td>.previous_siblings</td>
<td>迭代类型，返回按照 HTML 文本顺序的前续所有平行节点标签</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://python123.io/ws/demo.html&#x27;</span></span><br><span class="line">rep = requests.get(webUrl)</span><br><span class="line">soup = BeautifulSoup(rep.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下一个同辈元素 (and) 字符串</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我想去获取到另外一个a标签怎么写？</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.next_sibling.next_sibling)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我想去获取a标签前面一个字符串数据</span></span><br><span class="line"><span class="built_in">print</span>(soup.a.previous_sibling)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我想去获取a标签后面所有的兄弟节点</span></span><br><span class="line"><span class="keyword">for</span> sibling <span class="keyword">in</span> soup.a.next_siblings:</span><br><span class="line">	<span class="built_in">print</span>(sibling)</span><br></pre></td></tr></table></figure>







<h3 id="五、阶段性实战项目"><a href="#五、阶段性实战项目" class="headerlink" title="五、阶段性实战项目"></a>五、阶段性实战项目</h3><h4 id="5-1-获取链家的城市数据"><a href="#5-1-获取链家的城市数据" class="headerlink" title="5.1 获取链家的城市数据"></a>5.1 获取链家的城市数据</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">    	<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br><span class="line">    </span><br><span class="line">cityUrl = <span class="string">&#x27;https://www.lianjia.com/city/&#x27;</span></span><br><span class="line"><span class="comment"># getHTMLAndByte(cityUrl) 核心点，请求并响应回来的相关HTML网页的字符串数据</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(cityUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># 定义存放数据的列表</span></span><br><span class="line">cityNames = []</span><br><span class="line">cityUrls = []</span><br><span class="line"><span class="keyword">for</span> tag <span class="keyword">in</span> soup.select(<span class="string">&#x27;.city_list_ul a&#x27;</span>):</span><br><span class="line">	<span class="comment"># 获取a的城市名字</span></span><br><span class="line">	cityNames.append(tag.string)</span><br><span class="line">	<span class="comment"># 获取a的超链接地址</span></span><br><span class="line">	cityUrls.append(tag.attrs[<span class="string">&#x27;href&#x27;</span>])</span><br><span class="line">    </span><br><span class="line">data = <span class="built_in">zip</span>(cityNames, cityUrls)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/城市数据.txt&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">	<span class="keyword">for</span> s <span class="keyword">in</span> data:</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>



<h4 id="5-2-采集链家房产数据"><a href="#5-2-采集链家房产数据" class="headerlink" title="5.2 采集链家房产数据"></a>5.2 采集链家房产数据</h4><h5 id="5-2-1-请求通用模块"><a href="#5-2-1-请求通用模块" class="headerlink" title="5.2.1 请求通用模块"></a>5.2.1 请求通用模块</h5><p><strong>ReqHtmlOrByte.py</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请求和响应的通用模块</span></span><br><span class="line"><span class="comment"># 参数：webUrl为需要请求的网址，whetherByte=False为是否为字节数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHTMLAndByte</span>(<span class="params">webUrl, whetherByte=<span class="literal">False</span></span>):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="comment"># 伪装请求的头部信息</span></span><br><span class="line">		head = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">		rep = requests.get(webUrl, headers=head)</span><br><span class="line">		<span class="comment"># 当请求响应回来的状态为200就是正常，会执行后续代码。如果非200就进入异常块(except)</span></span><br><span class="line">		rep.raise_for_status()</span><br><span class="line">		rep.encoding = rep.apparent_encoding</span><br><span class="line">		<span class="comment"># 当前whetherByte的值为True时，返回二进制字节数据</span></span><br><span class="line">		<span class="keyword">if</span> whetherByte:</span><br><span class="line">			<span class="keyword">return</span> rep.content</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> rep.text</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&#x27;产生非200响应异常，当前响应状态码为&#123;&#125;, 请及时修改代码&#x27;</span>.<span class="built_in">format</span>(rep.status_code)</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># # 引用模块方法一</span></span><br><span class="line"><span class="comment"># import ReqHtmlOrByte</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引用模块方法二</span></span><br><span class="line"><span class="keyword">from</span> ReqHtmlOrByte <span class="keyword">import</span> getHTMLAndByte</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://cq.lianjia.com/ershoufang/&#x27;</span></span><br><span class="line"><span class="comment"># # 用模块.函数进行使用</span></span><br><span class="line"><span class="comment"># data = ReqHtmlOrByte.getHTMLAndByte(webUrl)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接调用函数</span></span><br><span class="line">data = getHTMLAndByte(webUrl)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>



<h5 id="5-2-2-关于JSON"><a href="#5-2-2-关于JSON" class="headerlink" title="5.2.2 关于JSON"></a>5.2.2 关于JSON</h5><ul>
<li>JSON: JavaScript Object Notation(JavaScript 对象表示法) </li>
<li>JSON 是 存储和交换文本信息 的语法，类似 XML。 </li>
<li>JSON 比 XML 更小、更快，更易解析。 </li>
<li>JSON 易于人阅读和编写。 </li>
<li>C、Python、C++、Java、PHP、Go等编程语言都支持 JSON。 JSON 是轻量级的文本数据交换格式。</li>
</ul>
<p>JSON学习网址：<a href="https://www.runoob.com/json/json-tutorial.html">https://www.runoob.com/json/json-tutorial.html</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入json库</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">jsondata = <span class="string">&#x27;&#x27;&#x27;&#123;</span></span><br><span class="line"><span class="string">	&quot;sites&quot;: [</span></span><br><span class="line"><span class="string">	&#123; &quot;name&quot;:&quot;蓝桥&quot; , &quot;url&quot;:&quot;www.lanqiao.cm&quot; &#125;,</span></span><br><span class="line"><span class="string">    &#123; &quot;name&quot;:&quot;百度&quot; , &quot;url&quot;:&quot;www.baidu.com&quot; &#125;,</span></span><br><span class="line"><span class="string">    &#123; &quot;name&quot;:&quot;京东&quot; , &quot;url&quot;:&quot;www.jd.com&quot; &#125;</span></span><br><span class="line"><span class="string">	]</span></span><br><span class="line"><span class="string">&#125;&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将json格式转换为字典</span></span><br><span class="line">mydict = json.loads(jsondata)</span><br><span class="line"><span class="comment"># print(type(mydict))</span></span><br><span class="line"><span class="built_in">print</span>(mydict[<span class="string">&#x27;sites&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> mydict[<span class="string">&#x27;sites&#x27;</span>]:</span><br><span class="line">    <span class="built_in">print</span>(d[<span class="string">&#x27;name&#x27;</span>], d[<span class="string">&#x27;url&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典转json格式</span></span><br><span class="line">dictData = &#123;</span><br><span class="line">	<span class="string">&quot;student&quot;</span>: [</span><br><span class="line">		&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="literal">True</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">21</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="literal">False</span>&#125;,</span><br><span class="line">		&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="literal">True</span>&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br><span class="line">data = json.dumps(dictData)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(data))</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>



<h5 id="5-2-3-获取链家二手房所有的网址"><a href="#5-2-3-获取链家二手房所有的网址" class="headerlink" title="5.2.3 获取链家二手房所有的网址"></a>5.2.3 获取链家二手房所有的网址</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> ReqHtmlOrByte <span class="keyword">import</span> getHTMLAndByte</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://cq.lianjia.com/ershoufang/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取最大页数</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># print(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])</span></span><br><span class="line"><span class="comment"># print(json.loads(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])[&#x27;totalPage&#x27;])</span></span><br><span class="line"><span class="comment"># print(type(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;]))</span></span><br><span class="line"><span class="comment"># print(type(json.loads(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])))</span></span><br><span class="line"></span><br><span class="line">pc = json.loads(soup.select(<span class="string">&#x27;.house-lst-page-box&#x27;</span>)[<span class="number">0</span>].attrs[<span class="string">&#x27;page-data&#x27;</span>])[<span class="string">&#x27;totalPage&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页采集获取网址</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, pc + <span class="number">1</span>):</span><br><span class="line">    url = webUrl + <span class="string">&#x27;pg&#x27;</span> + <span class="built_in">str</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(url)</span><br></pre></td></tr></table></figure>



<p><strong>任务：</strong> </p>
<ol>
<li>熟悉本周讲解的相关内容。 </li>
<li>摸索如何对链家重庆二手房数据进行全面采集。具体要求如下：</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281009884.png" alt="image-20260128100946741"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> ReqHtmlOrByte <span class="keyword">import</span> getHTMLAndByte</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">webUrl = <span class="string">&#x27;https://cq.lianjia.com/ershoufang/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取最大页数</span></span><br><span class="line">soup = BeautifulSoup(getHTMLAndByte(webUrl), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="comment"># print(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])</span></span><br><span class="line"><span class="comment"># print(json.loads(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])[&#x27;totalPage&#x27;])</span></span><br><span class="line"><span class="comment"># print(type(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;]))</span></span><br><span class="line"><span class="comment"># print(type(json.loads(soup.select(&#x27;.house-lst-page-box&#x27;)[0].attrs[&#x27;page-data&#x27;])))</span></span><br><span class="line"></span><br><span class="line">pc = json.loads(soup.select(<span class="string">&#x27;.house-lst-page-box&#x27;</span>)[<span class="number">0</span>].attrs[<span class="string">&#x27;page-data&#x27;</span>])[<span class="string">&#x27;totalPage&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页采集获取网址</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">2</span>):  <span class="comment"># pc + 1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始进行采集&quot;</span>, i, <span class="string">&quot;页数据...&quot;</span>)</span><br><span class="line">    title, name, address, info, tag, totalprice, unitprice = [], [], [], [], [], [], []</span><br><span class="line">    url = webUrl + <span class="string">&#x27;pg&#x27;</span> + <span class="built_in">str</span>(i)</span><br><span class="line">    <span class="comment"># print(url)</span></span><br><span class="line">    soup = BeautifulSoup(getHTMLAndByte(url), <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取标题</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.info &gt; div.title&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(element.a.string)</span></span><br><span class="line">    <span class="comment">#     title.append(element.a.string)</span></span><br><span class="line"></span><br><span class="line">    title = [element.a.string <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.info &gt; div.title&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(title)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取小区名称与区域</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.positionInfo&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(element.a.string, element.a.next_sibling.next_sibling.string)</span></span><br><span class="line">    <span class="comment">#     name.append(element.a.string)</span></span><br><span class="line">    <span class="comment">#     address.append(element.a.next_sibling.next_sibling.string)</span></span><br><span class="line"></span><br><span class="line">    name = [element.a.string <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.positionInfo&#x27;</span>)]</span><br><span class="line">    address = [element.a.next_sibling.next_sibling.string <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.positionInfo&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(name)</span></span><br><span class="line">    <span class="comment"># print(address)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取房屋信息</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.houseInfo&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(element.span.next_sibling)</span></span><br><span class="line">    <span class="comment">#     info.append(element.span.next_sibling)</span></span><br><span class="line"></span><br><span class="line">    info = [element.span.next_sibling <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.houseInfo&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(info)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取房屋信息标签</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.tag&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(&#x27;|&#x27;.join([tag.string for tag in element.children]))</span></span><br><span class="line">    <span class="comment">#     tag.append(&#x27;|&#x27;.join([tag.string for tag in element.children]))</span></span><br><span class="line"></span><br><span class="line">    tag = [<span class="string">&#x27;|&#x27;</span>.join([tag.string <span class="keyword">for</span> tag <span class="keyword">in</span> element.children]) <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.tag&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(tag)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 字符串处理连接操作</span></span><br><span class="line">    <span class="comment"># test = [&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;, &#x27;four&#x27;, &#x27;five&#x27;]</span></span><br><span class="line">    <span class="comment"># print(&#x27;-&#x27;.join(test))</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取总价</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.totalPrice&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(element.span.string + element.span.next_sibling.string)</span></span><br><span class="line">    <span class="comment">#     totalprice.append(element.span.string + element.span.next_sibling.string)</span></span><br><span class="line"></span><br><span class="line">    totalprice = [element.span.string + element.span.next_sibling.string <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.totalPrice&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(totalprice)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取房屋的单价</span></span><br><span class="line">    <span class="comment"># for element in soup.select(&#x27;div.unitPrice&#x27;):</span></span><br><span class="line">    <span class="comment">#     # print(element.span.string.replace(&#x27;,&#x27;, &#x27;&#x27;))</span></span><br><span class="line">    <span class="comment">#     unitprice.append(element.span.string.replace(&#x27;,&#x27;, &#x27;&#x27;))</span></span><br><span class="line"></span><br><span class="line">    unitprice = [element.span.string.replace(<span class="string">&#x27;,&#x27;</span>, <span class="string">&#x27;&#x27;</span>) <span class="keyword">for</span> element <span class="keyword">in</span> soup.select(<span class="string">&#x27;div.unitPrice&#x27;</span>)]</span><br><span class="line">    <span class="comment"># print(unitprice)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 压缩数据</span></span><br><span class="line">    datas = [<span class="string">&#x27;,&#x27;</span>.join(d) + <span class="string">&#x27;/n&#x27;</span> <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">zip</span>(title, name, address, info, tag, totalprice, unitprice)]</span><br><span class="line">    <span class="comment"># print(datas)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 写入数据</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;E:\python_crawler_item\爬取信息存放\重庆链家房产信息.csv&#x27;</span>, mode=<span class="string">&#x27;a+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.writelines(datas)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># time.sleep(10)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;所有数据采集完成！&#x27;</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>requests</tag>
        <tag>BeautifulSoup</tag>
      </tags>
  </entry>
  <entry>
    <title>搬砖常用的 shell 片段记录</title>
    <url>/2021-07-25-shell-snippet.html</url>
    <content><![CDATA[<p>偶然间看到了 <a href="https://izsk.me/"><strong>Z.S.K.’s Records</strong></a> 大佬的一篇博客 《<a href="https://izsk.me/2021/03/21/shell-funny-snippet/">有趣的 Shell Snippet</a>》，突发奇想也准备写篇文章来记录一下常用的一些 shell 代码。</p>
<h2 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h2><h3 id="展开"><a href="#展开" class="headerlink" title="{} 展开"></a>{} 展开</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;hack,build&#125;</span><br><span class="line">hack build</span><br></pre></td></tr></table></figure>

<h3 id="变量替换"><a href="#变量替换" class="headerlink" title="变量替换"></a>变量替换</h3><blockquote>
<p><a href="http://cn.linux.vbird.org/linux_basic/0320bash_2.php#variable_other">http://cn.linux.vbird.org/linux_basic&#x2F;0320bash_2.php#variable_other</a></p>
<p>我们将这部份作个总结说明一下：</p>
<table>
<thead>
<tr>
<th>变量配置方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>${变量#关键词} ${变量##关键词}</td>
<td>若变量内容从头开始的数据符合『关键词』，则将符合的最短数据删除 若变量内容从头开始的数据符合『关键词』，则将符合的最长数据删除</td>
</tr>
<tr>
<td>${变量%关键词} ${变量 %% 关键词}</td>
<td>若变量内容从尾向前的数据符合『关键词』，则将符合的最短数据删除 若变量内容从尾向前的数据符合『关键词』，则将符合的最长数据删除</td>
</tr>
<tr>
<td>${变量&#x2F;旧字符串&#x2F;新字符串} ${变量&#x2F;&#x2F;旧字符串&#x2F;新字符串}</td>
<td>若变量内容符合『旧字符串』则『第一个旧字符串会被新字符串取代』 若变量内容符合『旧字符串』则『全部的旧字符串会被新字符串取代』</td>
</tr>
</tbody></table>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ image=<span class="string">&quot;library/nginx:1.19&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 比如要获取镜像的 tag 常用的是 echo 然后 awk/cut 的方式</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;image&#125;</span> | awk -F <span class="string">&#x27;:&#x27;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> 方式</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以直接使用 bash 内置的变量替换功能，截取特定字符串</span></span><br><span class="line">$ image_name=<span class="variable">$&#123;image%%:*&#125;</span></span><br><span class="line">$ image_tag=<span class="variable">$&#123;image##*:&#125;</span></span><br><span class="line">$ image_repo=<span class="variable">$&#123;image%%/*&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="变量配置方式"><a href="#变量配置方式" class="headerlink" title="变量配置方式"></a>变量配置方式</h3><table>
<thead>
<tr>
<th>变量配置方式</th>
<th>str 没有配置</th>
<th>str 为空字符串</th>
<th>str 已配置非为空字符串</th>
</tr>
</thead>
<tbody><tr>
<td>var&#x3D;${str-expr}</td>
<td>var&#x3D;expr</td>
<td>var&#x3D;</td>
<td>var&#x3D;$str</td>
</tr>
<tr>
<td>var&#x3D;${str:-expr}</td>
<td>var&#x3D;expr</td>
<td>var&#x3D;expr</td>
<td>var&#x3D;$str</td>
</tr>
<tr>
<td>var&#x3D;${str+expr}</td>
<td>var&#x3D;</td>
<td>var&#x3D;expr</td>
<td>var&#x3D;expr</td>
</tr>
<tr>
<td>var&#x3D;${str:+expr}</td>
<td>var&#x3D;</td>
<td>var&#x3D;</td>
<td>var&#x3D;expr</td>
</tr>
<tr>
<td>var&#x3D;${str&#x3D;expr}</td>
<td>str&#x3D;expr var&#x3D;expr</td>
<td>str 不变 var&#x3D;</td>
<td>str 不变 var&#x3D;$str</td>
</tr>
<tr>
<td>var&#x3D;${str:&#x3D;expr}</td>
<td>str&#x3D;expr var&#x3D;expr</td>
<td>str&#x3D;expr var&#x3D;expr</td>
<td>str 不变 var&#x3D;$str</td>
</tr>
<tr>
<td>var&#x3D;${str?expr}</td>
<td>expr 输出至 stderr</td>
<td>var&#x3D;</td>
<td>var&#x3D;$str</td>
</tr>
<tr>
<td>var&#x3D;${str:?expr}</td>
<td>expr 输出至 stderr</td>
<td>expr 输出至 stderr</td>
<td>var&#x3D;$str</td>
</tr>
</tbody></table>
<h3 id="判断字符串中是否包含子串"><a href="#判断字符串中是否包含子串" class="headerlink" title="判断字符串中是否包含子串"></a>判断字符串中是否包含子串</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 通过 ** 匹配</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;var&#125;</span>&quot;</span> == *<span class="string">&quot;<span class="variable">$&#123;sub_string&#125;</span>&quot;</span>* ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&#x27;%s\n&#x27;</span> <span class="string">&quot;sub_string is in var.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过 bash 内置的 =~ 判断</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;sub_string&#125;</span>&quot;</span> =~ <span class="string">&quot;<span class="variable">$&#123;var&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&#x27;%s\n&#x27;</span> <span class="string">&quot;sub_string is in var.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="安装-docker-ce"><a href="#安装-docker-ce" class="headerlink" title="安装 docker-ce"></a>安装 docker-ce</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">$ bash get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure>

<p>另外可通过传入 DRY_RUN 的参数来输出际会执行的内容，这个输出的内容可以用来配置 docker-ce 的源，而不安装 docker。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ DRY_RUN=1 sh ./get-docker.sh --mirror Aliyun &gt; install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Executing docker install script, commit: 7cae5f8b0decc17d6571f9f52eb840fbc13b2737</span></span><br><span class="line">apt-get update -qq &gt;/dev/null</span><br><span class="line">DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null</span><br><span class="line">curl -fsSL <span class="string">&quot;https://mirrors.aliyun.com/docker-ce/linux/debian/gpg&quot;</span> | apt-key add -qq - &gt;/dev/null</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/debian buster stable&quot;</span> &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">apt-get update -qq &gt;/dev/null</span><br><span class="line">apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null</span><br><span class="line">DEBIAN_FRONTEND=noninteractive apt-get install -y -qq docker-ce-rootless-extras &gt;/dev/null</span><br></pre></td></tr></table></figure>

<h3 id="安装-helm"><a href="#安装-helm" class="headerlink" title="安装 helm"></a>安装 helm</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash</span><br></pre></td></tr></table></figure>

<h3 id="安装-docker-compose"><a href="#安装-docker-compose" class="headerlink" title="安装 docker-compose"></a>安装 docker-compose</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h2 id="sed-grep-awk"><a href="#sed-grep-awk" class="headerlink" title="sed&#x2F;grep&#x2F;awk"></a>sed&#x2F;grep&#x2F;awk</h2><h3 id="匹配行的下一行插入"><a href="#匹配行的下一行插入" class="headerlink" title="匹配行的下一行插入"></a>匹配行的下一行插入</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sed -i <span class="string">&quot;/kube-node/a <span class="variable">$&#123;ip&#125;</span>&quot;</span> <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<h3 id="输出两个匹配行之间的内容"><a href="#输出两个匹配行之间的内容" class="headerlink" title="输出两个匹配行之间的内容"></a>输出两个匹配行之间的内容</h3><p>在不使用 yq 或者 jq 的情况下，需要输出 <code>downloads</code> 列表中的所有内容，即 <code>download:</code> 和 <code>download_defaults: </code> 之间的内容</p>
<ul>
<li><a href="https://github.com/kubernetes-sigs/kubespray/blob/master/roles/download/defaults/main.yml">download.yml</a></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dashboard_image_repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; docker_image_repo &#125;&#125;</span>/kubernetesui/dashboard-<span class="template-variable">&#123;&#123; image_arch &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">dashboard_image_tag:</span> <span class="string">&quot;v2.2.0&quot;</span></span><br><span class="line"><span class="attr">dashboard_metrics_scraper_repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; docker_image_repo &#125;&#125;</span>/kubernetesui/metrics-scraper&quot;</span></span><br><span class="line"><span class="attr">dashboard_metrics_scraper_tag:</span> <span class="string">&quot;v1.0.6&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">downloads:</span></span><br><span class="line">  <span class="attr">dashboard:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_enabled &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">container:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_image_repo &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_image_tag &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">sha256:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_digest_checksum|default(None) &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">groups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">kube_control_plane</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">dashboard_metrics_scrapper:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_enabled &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">container:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_metrics_scraper_repo &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_metrics_scraper_tag &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">sha256:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_digest_checksum|default(None) &#125;&#125;</span>&quot;</span></span><br><span class="line">    <span class="attr">groups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">kube_control_plane</span></span><br><span class="line"></span><br><span class="line"><span class="attr">download_defaults:</span></span><br><span class="line">  <span class="attr">container:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">file:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">dest:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">None</span></span><br></pre></td></tr></table></figure>

<p>可使用 sed 的方式进行匹配输出 <code>sed -n &#39;/$VAR1/,/$VAR2/p&#39;</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sed -n <span class="string">&#x27;/^downloads:/,/download_defaults:/p&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="奇偶行合并"><a href="#奇偶行合并" class="headerlink" title="奇偶行合并"></a>奇偶行合并</h3><p>接着上一个问题，通过 <code>sed -n &quot;s/repo: //p;s/tag: //p&quot;</code> 匹配出镜像的 repo 和 tag，但一个完整的镜像的格式是 <code>repo:tag</code>，因此需要将 repo 和 tag 行进行合并。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_image_repo &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">tag:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_image_tag &#125;&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">repo:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_metrics_scraper_repo &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="attr">tag:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; dashboard_metrics_scraper_tag &#125;&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>可使用 <code>sed &#39;N;s#\n# #g&#39;</code> 进行奇偶行合并</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;/^downloads:/,/download_defaults:/p&#x27;</span> <span class="variable">$&#123;REPO_ROOT_DIR&#125;</span>/<span class="variable">$&#123;DOWNLOAD_YML&#125;</span> \</span><br><span class="line">| sed -n <span class="string">&quot;s/repo: //p;s/tag: //p&quot;</span> | <span class="built_in">tr</span> -d <span class="string">&#x27; &#x27;</span> | sed <span class="string">&#x27;s/&#123;&#123;/$&#123;/g;s/&#125;&#125;/&#125;/g&#x27;</span> \</span><br><span class="line">| sed <span class="string">&#x27;N;s#\n# #g&#x27;</span> | <span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;:&#x27;</span> | sed <span class="string">&#x27;s/^/echo /g&#x27;</span> &gt;&gt; <span class="variable">$&#123;TEMP_DIR&#125;</span>/generate.sh</span><br></pre></td></tr></table></figure>

<h3 id="去除换行符"><a href="#去除换行符" class="headerlink" title="去除换行符"></a>去除换行符</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">&#x27;:a;N;$!ba;s/\n/ /g&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="统计匹配行行数"><a href="#统计匹配行行数" class="headerlink" title="统计匹配行行数"></a>统计匹配行行数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lsof -i | grep sshd | <span class="built_in">wc</span> -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># grep 通过 -c 参数即可统计匹配行，不需要使用 wc 来统计</span></span><br><span class="line">$ lsof -i | grep -c sshd</span><br></pre></td></tr></table></figure>

<h3 id="匹配-IPv4-地址"><a href="#匹配-IPv4-地址" class="headerlink" title="匹配 IPv4 地址"></a>匹配 IPv4 地址</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ egrep --only-matching -E <span class="string">&#x27;([[:digit:]]&#123;1,3&#125;\.)&#123;3&#125;[[:digit:]]&#123;1,3&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="统计-nginx-日志同-IP-访问次数并排序"><a href="#统计-nginx-日志同-IP-访问次数并排序" class="headerlink" title="统计 nginx 日志同 IP 访问次数并排序"></a>统计 nginx 日志同 IP 访问次数并排序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> access.log | awk <span class="string">&#x27;&#123;d[$1]++&#125; END &#123;for (i in d) print d[i],i&#125;&#x27;</span> | <span class="built_in">sort</span> -nr | <span class="built_in">head</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># d 是一个字典，以$1 第一列作为key，value每次累加</span></span><br><span class="line"><span class="comment"># END 指处理完所有行，再执行后面的逻辑</span></span><br><span class="line"><span class="comment"># for(i in d)遍历d并打印key和value</span></span><br></pre></td></tr></table></figure>

<h3 id="统计-TCP-连接情况"><a href="#统计-TCP-连接情况" class="headerlink" title="统计 TCP 连接情况"></a>统计 TCP 连接情况</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ss -nat | awk <span class="string">&#x27;NR&gt;1 &#123;d[$1]++&#125; END &#123;for (i in d) print d[i],i&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NR&gt;1 去除第一行</span></span><br><span class="line"><span class="comment"># &#123;d[$1]++&#125; 对第一列元素进行累加计数</span></span><br><span class="line"><span class="comment"># &#123;for (i in d) print d[i],i&#125; 打印出数组的元素和出现的次数</span></span><br></pre></td></tr></table></figure>

<h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><h3 id="将镜像构建到本地目录"><a href="#将镜像构建到本地目录" class="headerlink" title="将镜像构建到本地目录"></a>将镜像构建到本地目录</h3><p>和 <code>FROM scratch</code> 搭配起来使用，就可以将构建产物 build 到本地</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ DOCKER_BUILDKIT=1 docker build -o <span class="built_in">type</span>=<span class="built_in">local</span>,dest=<span class="variable">$PWD</span> -f Dockerfile .</span><br></pre></td></tr></table></figure>

<p>比如使用 Dockerfile 构建 skopeo 静态链接文件</p>
<ul>
<li>Dockerfile</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nixos/nix:<span class="number">2.3</span>.<span class="number">11</span> as builder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /build</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> nix build -f nix</span></span><br><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /build/result/bin/skopeo /skopeo</span></span><br></pre></td></tr></table></figure>

<ul>
<li>build</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DOCKER_BUILDKIT=1 docker build -o <span class="built_in">type</span>=<span class="built_in">local</span>,dest=<span class="variable">$PWD</span> .</span><br></pre></td></tr></table></figure>

<h3 id="将当前目录下的所有内容构建成一个镜像"><a href="#将当前目录下的所有内容构建成一个镜像" class="headerlink" title="将当前目录下的所有内容构建成一个镜像"></a>将当前目录下的所有内容构建成一个镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;FROM scratch\nCOPY . .&#x27;</span> | docker build -t files:tag -f - .</span><br></pre></td></tr></table></figure>

<p>构建好之后就把它 push 到一个 registry 中，另一个人同样通过 docker build 将该文件下载到本地 😂</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;FROM files:tag&#x27;</span> | DOCKER_BUILDKIT=1 docker build -o <span class="built_in">type</span>=<span class="built_in">local</span>,dest=<span class="variable">$PWD</span> -f - /dev/null</span><br></pre></td></tr></table></figure>

<h2 id="kubectl"><a href="#kubectl" class="headerlink" title="kubectl"></a>kubectl</h2><ul>
<li>获取集群中所有 pod 运行需要的镜像</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get pods -A -o=custom-columns=<span class="string">&#x27;IMAGE:spec.containers[*].image&#x27;</span> | <span class="built_in">tr</span> <span class="string">&#x27;,&#x27;</span> <span class="string">&#x27;\n&#x27;</span> | <span class="built_in">sort</span> -u</span><br></pre></td></tr></table></figure>

<ul>
<li>获取所有 namespace 的 events 日志并按照时间戳排序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get events --all-namespaces -o wide --sort-by=.metadata.creationTimestamp</span><br></pre></td></tr></table></figure>

<ul>
<li>导出一个 namespaces 下所有 pod 的日志</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get pod -n kube-system | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs -L1 -I &#123;&#125; bash -c <span class="string">&quot;kubectl -n kube-system logs &#123;&#125; &gt; &#123;&#125;.log&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导出 k8s 组件的 pod 日志</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get pod -n kube-system | grep -E <span class="string">&quot;kube-apiserver|kube-controller|kube-proxy|kube-scheduler|coredns&quot;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | xargs -L1 -I &#123;&#125; sh -c <span class="string">&quot;kubectl -n kube-system logs &#123;&#125; &gt; &#123;&#125;.log&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取集群中节点的 IP</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get nodes -o jsonpath=<span class="string">&#x27;&#123; $.items[*].status.addresses[?(@.type==&quot;InternalIP&quot;)].address &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取所有 Pod 的 IP</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get pods -o jsonpath=<span class="string">&#x27;&#123; $.items[*].status.podIP &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取所有 node 节点的子网信息</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get nodes -o jsonpath=<span class="string">&#x27;&#123;.items[*].spec.podCIDR&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取所有 service 的 IP</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ kubectl get svc --no-headers --all-namespaces -o jsonpath=<span class="string">&#x27;&#123;$.items[*].spec.clusterIP&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>根据 CPU&#x2F;RAM 占用排序</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cpu</span></span><br><span class="line">kubectl top pods --all-namespaces | <span class="built_in">sort</span> --reverse --key 3 --numeric</span><br><span class="line"><span class="comment"># memory</span></span><br><span class="line">kubectl top pods --all-namespaces | <span class="built_in">sort</span> --reverse --key 4 --numeric</span><br></pre></td></tr></table></figure>

<h2 id="yq-jq"><a href="#yq-jq" class="headerlink" title="yq&#x2F;jq"></a>yq&#x2F;jq</h2><h3 id="yq-根据某个-key-获取某个-value"><a href="#yq-根据某个-key-获取某个-value" class="headerlink" title="yq 根据某个 key 获取某个 value"></a>yq 根据某个 key 获取某个 value</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker registry for offline resources</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">src:</span> <span class="string">docker.io/library/registry</span></span><br><span class="line">  <span class="attr">dest:</span> <span class="string">library/registry</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># helm chartmuseum for offline resources</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">src:</span> <span class="string">ghcr.io/helm/chartmuseum</span></span><br><span class="line">  <span class="attr">dest:</span> <span class="string">library/chartmuseum</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yq <span class="built_in">eval</span> <span class="string">&#x27;.[]|select(.dest==&quot;library/chartmuseum&quot;) | .src&#x27;</span> images_origin.yaml</span><br></pre></td></tr></table></figure>

<h3 id="替换数组中的元素"><a href="#替换数组中的元素" class="headerlink" title="替换数组中的元素"></a>替换数组中的元素</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.1&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.20-alpine</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./resources/nginx:/usr/share/nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">443</span><span class="string">:443</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">5000</span><span class="string">:5000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8080</span><span class="string">:8080</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx_http_port=<span class="string">&quot;<span class="variable">$&#123;NGINX_HTTP_PORT&#125;</span>:8080&quot;</span> yq <span class="built_in">eval</span> --inplace <span class="string">&#x27;.services.nginx.ports[0] = strenv(nginx_http_port)&#x27;</span> <span class="variable">$&#123;COMPOSE_YAML_FILE&#125;</span></span><br><span class="line">registry_https_port=<span class="string">&quot;<span class="variable">$&#123;REGISTRY_HTTPS_PORT&#125;</span>:443&quot;</span> yq <span class="built_in">eval</span> --inplace <span class="string">&#x27;.services.nginx.ports[1] = strenv(registry_https_port)&#x27;</span> <span class="variable">$&#123;COMPOSE_YAML_FILE&#125;</span></span><br><span class="line">registry_push_port=<span class="string">&quot;<span class="variable">$&#123;REGISTRY_PUSH_PORT&#125;</span>:5000&quot;</span> yq <span class="built_in">eval</span> --inplace <span class="string">&#x27;.services.nginx.ports[2] = strenv(registry_push_port)&#x27;</span> <span class="variable">$&#123;COMPOSE_YAML_FILE&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="jq-遍历-json-数组-列表元素"><a href="#jq-遍历-json-数组-列表元素" class="headerlink" title="jq 遍历 json 数组&#x2F;列表元素"></a>jq 遍历 json 数组&#x2F;列表元素</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> pmd_name <span class="keyword">in</span> $(kubectl <span class="variable">$&#123;KUBECONFIG_ARG&#125;</span> get cpm --no-headers | <span class="built_in">cut</span> -d <span class="string">&#x27; &#x27;</span> -f1); <span class="keyword">do</span></span><br><span class="line">    CPMD_NAME=<span class="string">&quot;<span class="variable">$&#123;pmd_name&#125;</span>&quot;</span></span><br><span class="line">    JSON=<span class="string">&quot;<span class="variable">$&#123;RCTL_TMP_PATH&#125;</span>/<span class="variable">$&#123;pmd_name&#125;</span>.json&quot;</span></span><br><span class="line">    kubectl <span class="variable">$&#123;KUBECONFIG_ARG&#125;</span> get cpm <span class="variable">$&#123;pmd_name&#125;</span> -o jsonpath=<span class="string">&#x27;&#123;.spec&#125;&#x27;</span> &gt; <span class="variable">$&#123;JSON&#125;</span></span><br><span class="line">    ((moudles_num=$(jq &#x27;.modules|length&#x27; <span class="variable">$&#123;JSON&#125;</span>)-<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">seq</span> 0 <span class="variable">$&#123;moudles_num&#125;</span>); <span class="keyword">do</span></span><br><span class="line">        ((addons_num=$(jq &quot;.modules[<span class="variable">$&#123;i&#125;</span>].addons|length&quot; <span class="variable">$&#123;JSON&#125;</span>)-<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> $(<span class="built_in">seq</span> 0 <span class="variable">$&#123;addons_num&#125;</span>); <span class="keyword">do</span></span><br><span class="line">            addon_name=$(jq -r <span class="string">&quot;.modules[<span class="variable">$&#123;i&#125;</span>].addons[<span class="variable">$&#123;j&#125;</span>].name&quot;</span> <span class="variable">$&#123;JSON&#125;</span>)</span><br><span class="line">            <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;CHART_NAME&#125;</span>&quot;</span> = <span class="string">&quot;<span class="variable">$&#123;addon_name&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                PATCH_DATA=$(jq -c <span class="string">&quot;.modules[<span class="variable">$&#123;i&#125;</span>].addons[<span class="variable">$&#123;j&#125;</span>].version = \&quot;<span class="variable">$&#123;VERSION&#125;</span>\&quot;&quot;</span> <span class="variable">$&#123;JSON&#125;</span>)</span><br><span class="line">                <span class="built_in">break</span> 3</span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><h3 id="判断两个版本号大小"><a href="#判断两个版本号大小" class="headerlink" title="判断两个版本号大小"></a>判断两个版本号大小</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">printf</span> <span class="string">&quot;%s\\n%s\\n&quot;</span> v1.21 <span class="variable">$&#123;kube_version%.*&#125;</span> | <span class="built_in">sort</span> --check=quiet --version-sort; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> -n <span class="variable">$&#123;coredns_version&#125;</span>;<span class="keyword">else</span> <span class="built_in">echo</span> -n <span class="variable">$&#123;coredns_version/v/&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="查看-x509-证书"><a href="#查看-x509-证书" class="headerlink" title="查看 x509 证书"></a>查看 x509 证书</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ openssl x509 -noout -text -<span class="keyword">in</span> ca.cert</span><br></pre></td></tr></table></figure>

<h3 id="获取文件大小"><a href="#获取文件大小" class="headerlink" title="获取文件大小"></a>获取文件大小</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">stat</span> -c <span class="string">&#x27;%s&#x27;</span> file</span><br></pre></td></tr></table></figure>

<h3 id="获取本机-IP"><a href="#获取本机-IP" class="headerlink" title="获取本机 IP"></a>获取本机 IP</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ip r get 1 | awk <span class="string">&#x27;NR==1 &#123;print $NF&#125;&#x27;</span></span><br><span class="line">$ ip r get 1 | sed <span class="string">&quot;s/uid.*//g&quot;</span> | awk <span class="string">&#x27;NR==1 &#123;print $NF&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>一些 shell 脚本中常用的函数</p>
<h3 id="tar-进度条"><a href="#tar-进度条" class="headerlink" title="tar 进度条"></a>tar 进度条</h3><p>避免 tar 解压文件的时候污染终端，建议使用进度条的方式展示解压过程</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">untar</span></span>() &#123;</span><br><span class="line">  file_size=$(<span class="built_in">stat</span> -c <span class="string">&#x27;%s&#x27;</span> <span class="variable">$1</span>)</span><br><span class="line">  block_size=$(<span class="built_in">expr</span> <span class="variable">$file_size</span> / 51200); block_size=$(<span class="built_in">expr</span> <span class="variable">$block_size</span> + 1)</span><br><span class="line">  tar_info=<span class="string">&quot;Untar <span class="variable">$1</span> progress:&quot;</span></span><br><span class="line">  tar --blocking-factor=<span class="variable">$block_size</span> --checkpoint=1 --checkpoint-action=ttyout=<span class="string">&quot;<span class="variable">$&#123;tar_info&#125;</span> %u%  \r&quot;</span> -xpf <span class="variable">$1</span> -C <span class="variable">$2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正则匹配-IP"><a href="#正则匹配-IP" class="headerlink" title="正则匹配 IP"></a>正则匹配 IP</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># regular match ip</span></span><br><span class="line"><span class="function"><span class="title">match_ip</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> INPUT_IPS=$*</span><br><span class="line">    <span class="built_in">local</span> IPS=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> ! <span class="built_in">echo</span> <span class="variable">$&#123;INPUT_IPS&#125;</span> | egrep --only-matching -E <span class="string">&#x27;([[:digit:]]&#123;1,3&#125;\.)&#123;3&#125;[[:digit:]]&#123;1,3&#125;-[[:digit:]]&#123;1,3&#125;&#x27;</span> &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">        IPS=<span class="string">&quot;<span class="subst">$(echo $&#123;INPUT_IPS&#125; | egrep --only-matching -E &#x27;([[:digit:]]&#123;1,3&#125;\.)</span>&#123;3&#125;[[:digit:]]&#123;1,3&#125;&#x27; | tr &#x27;\n&#x27; &#x27; &#x27;)&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ip_prefix=<span class="string">&quot;<span class="subst">$(echo $&#123;INPUT_IPS&#125; | egrep --only-matching -E &#x27;([[:digit:]]&#123;1,3&#125;\.)</span>&#123;3&#125;[[:digit:]]&#123;1,3&#125;-[[:digit:]]&#123;1,3&#125;&#x27; | cut -d &#x27;.&#x27; -f1-3)&quot;</span></span><br><span class="line">        ip_suffix=<span class="string">&quot;<span class="subst">$(echo $&#123;INPUT_IPS&#125; | egrep --only-matching -E &#x27;([[:digit:]]&#123;1,3&#125;\.)</span>&#123;3&#125;[[:digit:]]&#123;1,3&#125;-[[:digit:]]&#123;1,3&#125;&#x27; | cut -d &#x27;.&#x27; -f4 | tr &#x27;-&#x27; &#x27; &#x27;)&quot;</span></span><br><span class="line">        <span class="keyword">for</span> suffix <span class="keyword">in</span> $(<span class="built_in">seq</span> <span class="variable">$&#123;ip_suffix&#125;</span>); <span class="keyword">do</span> IPS=<span class="string">&quot;<span class="variable">$&#123;IPS&#125;</span> <span class="variable">$&#123;ip_prefix&#125;</span>.<span class="variable">$&#123;suffix&#125;</span>&quot;</span>; <span class="keyword">done</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;IPS&#125;</span> | egrep --only-matching -E <span class="string">&#x27;([[:digit:]]&#123;1,3&#125;\.)&#123;3&#125;[[:digit:]]&#123;1,3&#125;&#x27;</span> | <span class="built_in">tr</span> <span class="string">&#x27;\n&#x27;</span> <span class="string">&#x27; &#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ssh-登录配置"><a href="#ssh-登录配置" class="headerlink" title="ssh 登录配置"></a>ssh 登录配置</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line">	  StrictHostKeyChecking no</span><br><span class="line">    UserKnownHostsFile=/dev/null</span><br><span class="line">    ForwardAgent <span class="built_in">yes</span></span><br><span class="line">    ServerAliveInterval 10</span><br><span class="line">    ServerAliveCountMax 10000</span><br><span class="line">    TCPKeepAlive no</span><br><span class="line">    ControlMaster auto</span><br><span class="line">    ControlPath ~/.ssh/session/%h-%p-%r</span><br><span class="line">    ControlPersist 12h</span><br><span class="line"></span><br><span class="line">Host nas</span><br><span class="line">    Hostname 172.20.0.10</span><br><span class="line">    Port 22</span><br><span class="line">    User root</span><br><span class="line">    IdentityFile ~/.ssh/local-node.pem</span><br><span class="line"></span><br><span class="line">Host 172.20.0.*</span><br><span class="line">    Port 22</span><br><span class="line">    User root</span><br><span class="line">    IdentityFile ~/.ssh/local-node.pem</span><br><span class="line"></span><br><span class="line">Host *github.com</span><br><span class="line">    Hostname github.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/github_muzi.pem</span><br></pre></td></tr></table></figure>

<ul>
<li><code>StrictHostKeyChecking no</code>：略过 HostKey 检查，避免出现 <a href="https://superuser.com/questions/125324/how-can-i-avoid-sshs-host-verification-for-known-hosts">How can I avoid SSH’s host verification for known hosts?</a></li>
</ul>
<h3 id="ssh-密码登录"><a href="#ssh-密码登录" class="headerlink" title="ssh 密码登录"></a>ssh 密码登录</h3><p>日常工作中常常需要 ssh 登录到机房的一些虚拟机上，又因为不同的机器密码不同，遂使用该脚本 ssh 登录到节点上。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">IP=<span class="variable">$&#123;1&#125;</span></span><br><span class="line">CMD=<span class="variable">$&#123;2&#125;</span></span><br><span class="line">USER=root</span><br><span class="line">ARGS=<span class="string">&quot;-o StrictHostKeyChecking=no -o ControlMaster=auto -o ControlPersist=12h -o ConnectionAttempts=100&quot;</span></span><br><span class="line">PASSWORDS=<span class="string">&quot;admin123456 test123456 centos1234&quot;</span></span><br><span class="line">ssh-keygen -R <span class="variable">$&#123;1&#125;</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">PASS=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> pass <span class="keyword">in</span> <span class="variable">$&#123;PASSWORDS&#125;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> sshpass -p <span class="variable">$&#123;pass&#125;</span> ssh <span class="variable">$&#123;ARGS&#125;</span> <span class="variable">$&#123;USER&#125;</span>@<span class="variable">$&#123;IP&#125;</span> <span class="string">&quot;hostname&quot;</span>; <span class="keyword">then</span> PASS=<span class="variable">$&#123;pass&#125;</span>; <span class="built_in">break</span> ; <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">sshpass -p <span class="variable">$&#123;PASS&#125;</span> ssh <span class="variable">$&#123;ARGS&#125;</span> <span class="variable">$&#123;USER&#125;</span>@<span class="variable">$&#123;IP&#125;</span> <span class="variable">$&#123;CMD&#125;</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>

<h3 id="脚本中统计函数耗时"><a href="#脚本中统计函数耗时" class="headerlink" title="脚本中统计函数耗时"></a>脚本中统计函数耗时</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">reset_global_timer</span></span>() &#123;</span><br><span class="line">	<span class="built_in">export</span> SEC0=$(<span class="built_in">date</span> --utc +%s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">reset_function_timer</span></span>()&#123;</span><br><span class="line">    <span class="built_in">export</span> SEC1=$(<span class="built_in">date</span> --utc +%s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">running_time</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    SEC2=$(<span class="built_in">date</span> --utc +%s); DIFFSEC=$((<span class="variable">$&#123;SEC2&#125;</span> - <span class="variable">$&#123;SEC1&#125;</span>)); <span class="built_in">printf</span> <span class="string">&quot;\nSection Time: <span class="subst">$(date +%H:%M:%S -ud @$&#123;DIFFSEC&#125;)</span>\n&quot;</span></span><br><span class="line">    SEC2=$(<span class="built_in">date</span> --utc +%s); DIFFSEC=$((<span class="variable">$&#123;SEC2&#125;</span> - <span class="variable">$&#123;SEC0&#125;</span>)); <span class="built_in">printf</span> <span class="string">&quot;Elapsed Time: <span class="subst">$(date +%H:%M:%S -ud @$&#123;DIFFSEC&#125;)</span>\n\n&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reset_global_timer</span><br><span class="line">reset_function_timer</span><br><span class="line">running_time</span><br></pre></td></tr></table></figure>

<h2 id="OS"><a href="#OS" class="headerlink" title="OS"></a>OS</h2><ul>
<li>dpkg 获取系统已经安装的包</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ dpkg-query -W -f=<span class="string">&#x27;$&#123;binary:Package&#125;=$&#123;Version&#125;\n&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>获取 CPU 架构</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ARCHITECTURE=$(<span class="built_in">uname</span> -m)</span><br><span class="line">host_architecture=$(dpkg --print-architecture)</span><br></pre></td></tr></table></figure>

<h3 id="替换系统-OS-源"><a href="#替换系统-OS-源" class="headerlink" title="替换系统 OS 源"></a>替换系统 OS 源</h3><p>使用华为云 yum 源</p>
<ul>
<li>CentOS 7</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.huaweicloud.com/repository/conf/CentOS-7-anon.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装华为云 EPEL 源</span></span><br><span class="line">yum install epel-release -y</span><br><span class="line">sed -i <span class="string">&quot;s/#baseurl/baseurl/g&quot;</span> /etc/yum.repos.d/epel.repo</span><br><span class="line">sed -i <span class="string">&quot;s/metalink/#metalink/g&quot;</span> /etc/yum.repos.d/epel.repo</span><br><span class="line">sed -i <span class="string">&quot;s@https\?://download.fedoraproject.org/pub@https://mirrors.huaweicloud.com@g&quot;</span> /etc/yum.repos.d/epel.repo</span><br></pre></td></tr></table></figure>

<ul>
<li>Debian</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sed -i <span class="string">&#x27;s/deb.debian.org/mirrors.huaweicloud.com/g&#x27;</span> /etc/apt/sources.list</span><br><span class="line">$ sed -i <span class="string">&#x27;s|security.debian.org/debian-security|mirrors.huaweicloud.com/debian-security|g&#x27;</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<ul>
<li>Ubuntu</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sed -i <span class="string">&#x27;s/archive.ubuntu.com/mirrors.huaweicloud.com/g&#x27;</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<ul>
<li>Alpine</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;http://mirrors.huaweicloud.com/alpine/latest-stable/main/&quot;</span> &gt; /etc/apk/repositories</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;http://mirrors.huaweicloud.com/alpine/latest-stable/community/&quot;</span> &gt;&gt; /etc/apk/repositories</span><br></pre></td></tr></table></figure>

<h3 id="CA-证书信任"><a href="#CA-证书信任" class="headerlink" title="CA 证书信任"></a>CA 证书信任</h3><ul>
<li>CentOS</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ update-ca-trust force-enable</span><br><span class="line">$ <span class="built_in">cp</span> domain.crt /etc/pki/ca-trust/source/anchors/domain.crt</span><br><span class="line">$ update-ca-trust</span><br></pre></td></tr></table></figure>

<ul>
<li>Debian</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> domain.crt /usr/share/ca-certificates/domain.crt</span><br><span class="line">$ <span class="built_in">echo</span> domain.crt &gt;&gt; /etc/ca-certificates.conf</span><br><span class="line">$ update-ca-certificates</span><br></pre></td></tr></table></figure>

<ul>
<li>Ubuntu</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> domain.crt /usr/local/share/ca-certificates/domain.crt</span><br><span class="line">$ update-ca-certificates</span><br></pre></td></tr></table></figure>

<h3 id="Git-操作"><a href="#Git-操作" class="headerlink" title="Git 操作"></a>Git 操作</h3><h4 id="修改历史-commit-信息"><a href="#修改历史-commit-信息" class="headerlink" title="修改历史 commit 信息"></a>修改历史 commit 信息</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">git filter-branch --env-filter <span class="string">&#x27;</span></span><br><span class="line"><span class="string">OLD_EMAIL=&quot;github-actions@github.com&quot;</span></span><br><span class="line"><span class="string">CORRECT_NAME=&quot;github-actions&quot;</span></span><br><span class="line"><span class="string">CORRECT_EMAIL=&quot;41898282+github-actions[bot]@users.noreply.github.com&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;</span></span><br><span class="line"><span class="string">    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;</span></span><br><span class="line"><span class="string">    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">&#x27;</span> --tag-name-filter <span class="built_in">cat</span> -- --branches --tags</span><br></pre></td></tr></table></figure>

<h4 id="获取当前-repo-的最新-git-tag"><a href="#获取当前-repo-的最新-git-tag" class="headerlink" title="获取当前 repo 的最新 git tag"></a>获取当前 repo 的最新 git tag</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git describe --tags --always</span><br></pre></td></tr></table></figure>

<h4 id="删除-remote-repo-中的-tag"><a href="#删除-remote-repo-中的-tag" class="headerlink" title="删除 remote repo 中的 tag"></a>删除 remote repo 中的 tag</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git push --delete origin tag_name</span><br><span class="line"><span class="comment"># 删除所有</span></span><br><span class="line">$ git tag -l | xargs -L1 -I &#123;&#125; git push --delete origin &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="govc"><a href="#govc" class="headerlink" title="govc"></a>govc</h2><ul>
<li>批量还原快照</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">: <span class="variable">$&#123;SP_NAME:=&quot;init&quot;&#125;</span></span><br><span class="line">: <span class="variable">$&#123;NODES:=&quot;kube-control-01 kube-control-02 kube-control-03 kube-node-01&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> <span class="variable">$&#123;NODES&#125;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> govc snapshot.revert -vm <span class="variable">$&#123;node&#125;</span> <span class="variable">$&#123;SP_NAME&#125;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;node&#125;</span> snapshot revert successfully&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  govc vm.info <span class="variable">$&#123;node&#125;</span> | grep -q poweredOn || govc vm.power -on <span class="variable">$&#123;node&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/dylanaraps/pure-bash-bible">pure-bash-bible</a></li>
<li><a href="http://cn.linux.vbird.org/linux_basic/0320bash_2.php#variable_other">鸟哥 Linux 私房菜</a></li>
<li><a href="https://mozillazg.com/2018/01/jq-use-examples-cookbook.html">jq 常用操作</a></li>
<li><a href="https://lyyao09.github.io/2019/08/02/tools/The-usage-of-yq-read-write/">YAML 处理工具 yq 之读写篇</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Bash</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Java笔记</title>
    <url>/2024-05-12-java-notes.html</url>
    <content><![CDATA[<p><strong>JAVA</strong> 入门视频**</p>
<p><a href="https://www.bilibili.com/video/BV1Kb411W75N/?spm_id_from=333.337.search-card.all.click">https://www.bilibili.com/video/BV1Kb411W75N/?spm_id_from=333.337.search-card.all.click</a></p>
<h3 id="一、Java概述"><a href="#一、Java概述" class="headerlink" title="一、Java概述"></a>一、Java概述</h3><h5 id="01、计算机语言"><a href="#01、计算机语言" class="headerlink" title="01、计算机语言"></a>01、计算机语言</h5><p>​		计算机语言(Computer Language)是人与计算机之间通信的语言，它主要由一些指令组成，这些指令包括数字、符号和语法等内容，程序员可通过这些指令指挥计算机进行工作。<br>计算机语言的种类非常多，总的来说可以分成机器语言、汇编语言、高级语言三大类。</p>
<p><strong>计算机三大语言：机器语言、汇编语言、高级语言</strong></p>
<h5 id="02、Java所属类型"><a href="#02、Java所属类型" class="headerlink" title="02、Java所属类型"></a>02、Java所属类型</h5><p>​      <strong>机器语言</strong>都是由二进制的0和1组成的编码，不便于记忆和识别。</p>
<p>​      <strong>汇编语言</strong>采用了英文缩写的标识符，容易识别记忆;</p>
<p>​      <strong>高级语言</strong>采用接近于人类的自然语言进行编程进—步简化了程序编写的过程。<br>​       因此，目前编程语言大多是高级语言(其中包括Java编程语言)。</p>
<h5 id="03、Java简介"><a href="#03、Java简介" class="headerlink" title="03、Java简介"></a>03、Java简介</h5><p>​		<strong>Java</strong>是由<strong>Sun</strong> 公司于<strong>1995年5月</strong>推出的Java<em><strong>面向对象程序设计语言</strong></em>，它是一种可以编写跨平台应用软件、完全面向对象的程序设计语言。Java语言简单易用、安全可靠，自问世以来，与之相关自技术和应用发展得非常快。在计算机、移动电话、家用电器等领域中，Java技术无处不在。<strong>后来 Sun公司被Oracle(甲骨文)公司收购</strong>，Java 也随之成为Oracle 公司的产品。</p>
<h5 id="04、Java分为三个体系"><a href="#04、Java分为三个体系" class="headerlink" title="04、Java分为三个体系"></a>04、Java分为三个体系</h5><p>​		JavaSE(J2SE),java平台标准版</p>
<p>​		JavaEE(J2EE),java平台企业版</p>
<p>​		JavaME(J2ME),java平台微型版</p>
<h5 id="05、Java特点关键词"><a href="#05、Java特点关键词" class="headerlink" title="05、Java特点关键词"></a>05、Java特点关键词</h5><p><strong>面向对象&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;分布式&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;健壮&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;安全&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;体系结构中立&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;可移值&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;高性能&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;多线程&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;动态</strong></p>
<p><strong>06、Java语言的由来</strong></p>
<p>Java语言是詹姆士·高斯林发明的，Java的名字来自于—种咖啡的品种名称，所以Java语言的Logo是一杯热气腾腾的咖啡。詹姆斯·高斯林等人于1990年初开发Java语言的雏形，最初被命名为Oak。随着1990年代互联网的发展，Sun公司看见Oak在互联网上应用的前景，于是改进了Oak并在1995年5月以Java的名称正式发布。</p>
<h5 id="07、Java程序可以运行的系统平台"><a href="#07、Java程序可以运行的系统平台" class="headerlink" title="07、Java程序可以运行的系统平台"></a>07、Java程序可以运行的系统平台</h5><p>Windows 7&#x2F;8&#x2F;10&#x2F;11操作系统</p>
<p>Linux操作系统</p>
<p>Mac OS操作系统</p>
<h4 id="在Windows-下安装-JDK-11"><a href="#在Windows-下安装-JDK-11" class="headerlink" title="在Windows 下安装 JDK 11"></a>在Windows 下安装 JDK 11</h4><h5 id="01、下载JDDK"><a href="#01、下载JDDK" class="headerlink" title="01、下载JDDK"></a>01、下载JDDK</h5><p>首先，下载 JDK 。</p>
<p>打开一个浏览器，输入网址：<a href="https://developer.oracle.com/java/">https://developer.oracle.com/java/</a> 这里进行 JDK 下载，点击下方的 Download Java 下载，如下图所示：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281109632.png" alt="image-20260128110919400"></p>
<p>点击 “Download Java” 后，将会进入页面你可以按照自己的需求选择版本：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281109627.png" alt="image-20260128110938497"></p>
<p>🌟 下载 JDK 时需要注意以下两点：</p>
<ol>
<li>下载需要登录 Oracle 账号，如果没有账号需要先注册。</li>
<li>根据自己的系统和需求，选择合适的版本。其中，x86 代表 32 位操作系统，x64 代表 64 位操作系统，红框内的是 Windows 64 位系统使用的版本。可以通过控制面板–系统和安全–系统中查看自己的操作系统类型，如下图所示：</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281109491.png" alt="image-20260128110946380"></p>
<p>然后，安装 JDK。</p>
<p>双击打开 <code>jdk-11.0.15.1_windows-x64_bin.exe</code> 安装包，直接下一步即可。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281109597.png" alt="image-20260128110952480"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281110852.png" alt="image-20260128111014741"></p>
<p><strong>安装时特别要注意的是：安装路径中不要包含中文和空格。</strong></p>
<p>其他都可以默认点击 ”下一步“，即可完成安装，安装其实还蛮简单的，只要注意安装路径就可以了。</p>
<p>最后，配置 JDK。</p>
<p>JDK 的配置，就是环境变量的配置，我们可以右击计算机 → 属性 → 高级系统设置 → 高级 → 环境变量，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281110452.png" alt="image-20260128111024339"></p>
<p>我们可以选择用户变量或系统变量中进行配置，需要新增 JAVA_HOME 环境变量 和 修改 Path 环境变量。</p>
<p>新增 JAVA_HOME 环境变量：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281110686.png" alt="image-20260128111037562"></p>
<p>🌟 注意：配置好变量后，一定要点击<strong>确定</strong>按钮来退出这些窗口，而不是点击窗口右上角的 ✖️ ，否则配置的信息将不被保存。</p>
<p>接下来，测试环境是否搭建成功，win+R（组合按键），输入 cmd 回车，打开命令窗口输入 <code>java -version</code>，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281110735.png" alt="image-20260128111047626"></p>
<h5 id="02、Java开发环境搭建"><a href="#02、Java开发环境搭建" class="headerlink" title="02、Java开发环境搭建"></a>02、Java开发环境搭建</h5><ul>
<li>​	<strong>理解JDK</strong></li>
</ul>
<p>SUN公司提供了一套Java开发环境，简称JDK(Java Development Kit)。JDK包括<strong>Java编译器</strong>、<strong>Java运行工具</strong>、<strong>Java文档生成工具</strong>、<strong>Java打包工具</strong>等。</p>
<ul>
<li><strong>理解Java目录结构</strong></li>
</ul>
<p>​		<strong>bin目录</strong>：Java的编译器、解释器等工具，java，javac等。</p>
<p>​		<strong>include目录</strong>：调用系统资源的接口文件。</p>
<p>​		<strong>jre目录</strong>：Java运行环境文件。</p>
<p>​		<strong>lib目录</strong>：Java用到的类库文件。</p>
<ul>
<li><strong>验证jdk是否安装成功</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java -version  </span><br><span class="line">查看Java jdk版本</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>环境变量配置</strong></li>
</ul>
<p>1.打开系统，点击<strong>高级系统设置</strong>，如下图：</p>
<p>2.系统属性对话框中点击<strong>环境变量</strong>，如下图：</p>
<p>3.在<strong>系统变量(s)<strong>中点击</strong>新建(w)…<strong>进行</strong>编辑系统变量</strong>。</p>
<ul>
<li>变量名：JAVA_HOME</li>
<li>变量值：c:\program  Files\Java\jdk1.8.0_201</li>
</ul>
<p>4.在**系统变量(s)**中点击新建(w)…进行编辑系统变量。</p>
<ul>
<li>变量名：CLASSPATH</li>
<li>变量值：.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;</li>
</ul>
<p>5.找到变量path，注意这个本来就有，所以不用新建，直接双击进去修改就行了，然后分别点击新建以下两个变量：</p>
<ul>
<li>%JAVA_HOME%\bin</li>
<li>%JAVA_HOME%\jre\bin</li>
</ul>
<p>6.检查是否配置成功，运行总端(管理员)，输入命令：javac，出现如下图就说明配置成功了：</p>
<h4 id="Java常用开发工具介绍"><a href="#Java常用开发工具介绍" class="headerlink" title="Java常用开发工具介绍"></a>Java常用开发工具介绍</h4><ul>
<li><p><strong>代码解析</strong></p>
</li>
<li><p><strong>Java 程序执行流程</strong></p>
</li>
</ul>
<h3 id="二、数据类型和运算符"><a href="#二、数据类型和运算符" class="headerlink" title="二、数据类型和运算符"></a>二、数据类型和运算符</h3><ul>
<li><h5 id="Java注释语法"><a href="#Java注释语法" class="headerlink" title="Java注释语法"></a>Java注释语法</h5></li>
</ul>
<ol>
<li>单行注释</li>
<li>多行注释</li>
<li>文档注释</li>
</ol>
<p>单行注释采用的是两个斜杠 （ &#x2F;&#x2F; ），多行注释采用的是斜杠星号开始、星号斜杠结束 （ &#x2F;* *&#x2F; ）。</p>
<p><strong>文档注释</strong>，存在的意义主要是为企业级项目而准备的，所谓企业级项目就是较为庞大的、完善的、规范的项目，最后需要有项目 API 文档的生成，以便于后期的代码维护和重构，或是提高代码的重用率。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestComment&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 标准输出语句，打印输出 Hello, Java字符串。</span><br><span class="line">        System.out.println(&quot;Hello, Java&quot;);</span><br><span class="line">        /*</span><br><span class="line">         * 标准输出语句，打印输出 你好，爪哇 字符串。</span><br><span class="line">         * print 方法不具有换行效果。</span><br><span class="line">         */</span><br><span class="line">        System.out.print(&quot;你好，爪哇&quot;);</span><br><span class="line">        System.out.println(&quot;好好学习，小桃子&quot;);</span><br><span class="line">        // System.out.println(&quot;我不会被编译执行哦&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Java 数据类型</strong></p>
</li>
<li><p><strong>数据类型 — 整数</strong></p>
</li>
</ul>
<p><strong>byth:-128~127</strong></p>
<p><strong>short:-32600~32600</strong>左右</p>
<p><strong>int:-21亿~21亿左右</strong></p>
<p><strong>long:-90万亿~90万亿</strong></p>
<p>long类型的二进制的位数:64<br>long类型的最小取i值:-9223372036854775808<br>long类型的最大取值9223372036854775807<br>int类型最大取值:2147483647<br>int类型最大取值:-2147483648<br>short类型最大取值:32767<br>short类型最大取值:-32768<br>byte类型最大取值:127<br>byte类型最大取值:-128</p>
<h5 id="2-2变量与常量"><a href="#2-2变量与常量" class="headerlink" title="2.2变量与常量"></a>2.2<strong>变量与常量</strong></h5><p>声明变量的语法格式：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281110826.png" alt="image-20260128111059715"></p>
<p>PS：标识符规则，名字命名时可以使用字母、数字、下划线、美元符，<strong>但必须以字母、下划线和美元符开头</strong>。</p>
<p>注意：在对变量名进行命名时：</p>
<ul>
<li>中间不能有<strong>空格</strong>、不能使用<strong>数字</strong>开头，除了<strong>下划线、美元符</strong>其他符号都不能使用。</li>
<li><strong>Java 语言中严格区分大小写。</strong></li>
<li>不要使用<strong>关键字</strong>作为变量名。</li>
<li>一般变量名可以<strong>采用驼峰形式</strong>，也就是从第二个单词开始首字符大写，当然也可以<strong>采用全小写形式</strong>而存在。</li>
</ul>
<p><strong>常用的转义符</strong></p>
<table>
<thead>
<tr>
<th>转义符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>\n</td>
<td>换行符</td>
</tr>
<tr>
<td>\t</td>
<td>制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车符</td>
</tr>
<tr>
<td>\b</td>
<td>退格符</td>
</tr>
<tr>
<td>&#39;</td>
<td>单引号</td>
</tr>
<tr>
<td>&quot;</td>
<td>双引号</td>
</tr>
<tr>
<td>\</td>
<td>斜杠</td>
</tr>
</tbody></table>
<p><strong>常量的基本结构，如图：</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281111567.png" alt="image-20260128111108415"></p>
<p>从图中，我们可以看到定义一个常量的基本结构，但我们需要注意以下几点：</p>
<ol>
<li>声明常量必须使用 <code>final</code> 关键字进行修饰，也就是说，不加 <code>final</code> 关键字就不是一个常量；</li>
<li>对于数据类型而言，各种类型都可以；</li>
<li>常量名<strong>建议字母全部大写</strong>，还可以采用下划线（ _ ）进行分隔；</li>
<li>常量<strong>声明后必须赋值</strong>，赋值后将不能改变其值。</li>
</ol>
<p><strong>常量的基本结构</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 常量的使用</span><br><span class="line"> * @author 小桃子</span><br><span class="line"> */</span><br><span class="line">public class TestConstant&#123;</span><br><span class="line">    // 声明静态常量</span><br><span class="line">    public static final String SELECT_USERS_ALL = &quot;SELSECT * FROM users&quot;;</span><br><span class="line"></span><br><span class="line">    // 声明成员常量</span><br><span class="line">    final String WATER_PATTERN = &quot;H₂O&quot;;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 声明局部常量</span><br><span class="line">        final double PI = 3.1415926;</span><br><span class="line">        // 常量 PI 赋值之后其值不可改变。</span><br><span class="line">        // PI = 3.14159265358;</span><br><span class="line">        System.out.println(&quot;圆周率 = &quot; + PI);</span><br><span class="line"></span><br><span class="line">        /* 常量在使用前必须要赋值，才能使用。</span><br><span class="line">        final int TOTAL;</span><br><span class="line">        System.out.println(&quot;总和 = &quot; + TOTAL);</span><br><span class="line">        */</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-3数据类型"><a href="#2-3数据类型" class="headerlink" title="2.3数据类型"></a>2.3数据类型</h5><p><strong>整型和布尔类型的使用</strong></p>
<ul>
<li>整型</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 简单类型 - 整型 4 种类型的使用</span><br><span class="line"> * @author 小桃子</span><br><span class="line"> */</span><br><span class="line">public class TestType2&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // byte 类型取值范围 -128 ~ 127</span><br><span class="line">        byte b1 = 127;</span><br><span class="line">        System.out.println(b1);</span><br><span class="line">        // 短整型</span><br><span class="line">        short s1 = 12;</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        // 默认是十进制整型数值</span><br><span class="line">        int i1 = 20;</span><br><span class="line">        System.out.println(i1);</span><br><span class="line">        // 八进制整型数值</span><br><span class="line">        int i2 = 020;</span><br><span class="line">        System.out.println(i2);</span><br><span class="line">        // 十六进制整型数值</span><br><span class="line">        int i3 = 0x20;</span><br><span class="line">        System.out.println(i3);</span><br><span class="line">        // 长整型</span><br><span class="line">        long l1 = 1000;</span><br><span class="line">        System.out.println(l1);</span><br><span class="line">        long l2 = 1000000000000L;</span><br><span class="line">        System.out.println(l2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>布尔型</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestType3 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        boolean b1 = true;</span><br><span class="line">        boolean b2 = false;</span><br><span class="line">        // boolean b3 = &quot;Y&quot;;</span><br><span class="line">        if(!b1)&#123;</span><br><span class="line">            System.out.println(&quot;代码量不够，好好敲！&quot;);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            System.out.println(&quot;哇，厉害，恭喜你升级P7啦!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>浮点和字符类型的使用</strong></p>
<ul>
<li>浮点类型</li>
</ul>
<p>浮点类型，指的就是数值有小数位的存在，这个类型分为<strong>单精度 float 和双精度 double</strong>，浮点数值默认情况下是 double 类型。</p>
<p>Java 浮点类型常量值有以下两种表示形式。</p>
<ul>
<li>十进制形式，例如 3.14，314.0，0.314。</li>
<li>科学记数法形式，例如 3.14e2，3.14E2，100E-2。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestType4&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 声明双精度类型</span><br><span class="line">        double d1 = 3.14;</span><br><span class="line">        double d2 = 3;</span><br><span class="line">        double d3 = 2.6e2;</span><br><span class="line">        System.out.println(d1);</span><br><span class="line">        System.out.println(d2);</span><br><span class="line">        System.out.println(d3);</span><br><span class="line">        </span><br><span class="line">        // 声明单精度类型</span><br><span class="line">        float f1 = 12.3f;</span><br><span class="line">        System.out.println(f1);</span><br><span class="line">        float f2 = (float)12.3;</span><br><span class="line">        System.out.println(f2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Java 中 float 类型的数据可以加 f 来标识，double 类型的数据可以加 d 来标识，如果一个小数不加 f 和 d，那么默认是 double 类型；</p>
<p><strong>字符类型</strong></p>
<p>字符类型数据，就是用来描述字符的，使用 <code>char</code> 关键字来声明。</p>
<p>字符常量是用单引号括起来的单个字符，例如： <strong>char c &#x3D; ‘A’;</strong></p>
<p>Java 语言中字符采用 Unicode 编码，每个字符占两个字节，因而可用十六进制编码形式表示，例如： <strong>char c &#x3D; ‘\u0061’;</strong></p>
<p>字符类型还可以使用之前我们讲过的转义字符，例如：<strong>char c &#x3D; ‘\n’;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestType5 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 声明字符类型</span><br><span class="line">        // 单引号中只能放入一个字符、一个数字或者一个中文字</span><br><span class="line">        char c = &#x27;A&#x27;;</span><br><span class="line">        char b = &#x27;1&#x27;;</span><br><span class="line">        char d = &#x27;好&#x27;;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        System.out.println(b);</span><br><span class="line">        System.out.println(d);</span><br><span class="line">        // 字符类型变量可以用 Unicode 编码进行赋值</span><br><span class="line">        char c4 = &#x27;\u0061&#x27;;</span><br><span class="line">        System.out.println(c4);</span><br><span class="line">        char c5 = &#x27;\n&#x27;;</span><br><span class="line">        System.out.println(c5);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>引用类型的使用</strong></li>
</ul>
<p>除了简单类型外的所有类型，我们都称之为引用类型。</p>
<p>引用类型可以包括：类、接口、数组、枚举等，这些知识我们会在后面的章节中详细和大家讲解。</p>
<p><strong>字符串 String 类型</strong></p>
<p><strong>String</strong> 是最常用的一种存储文本的数据类型；</p>
<p>然而 <strong>String</strong> 类型存储的文本需要用<strong>双引号括起来</strong>，双引号中可以包含 0 到多个字符。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestString&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 字符串变量 str1 所赋值就是 0 个字符</span><br><span class="line">        String str1 = &quot;&quot;;</span><br><span class="line">        System.out.println(str1);</span><br><span class="line">        // 字符串变量 str2 所赋值就是多个字符</span><br><span class="line">        String str2 = &quot;HelloWorld&quot;;</span><br><span class="line">        System.out.println(str2);</span><br><span class="line">        // 以下两行代码比较有代表性</span><br><span class="line">        System.out.println(1 + 1);</span><br><span class="line">        System.out.println(&quot;1 + 1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>String</strong> 类型数据可以和任何其它数据类型进行” + “操作，这里的加号不是在进行数学计算操作，而是实现字符串<strong>连接</strong>的效果。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestString&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 字符串变量 str1 所赋值就是 0 个字符</span><br><span class="line">        String str1 = &quot;&quot;;</span><br><span class="line">        System.out.println(str1);</span><br><span class="line">        // 字符串变量 str2 所赋值就是多个字符</span><br><span class="line">        String str2 = &quot;HelloWorld&quot;;</span><br><span class="line">        System.out.println(str2);</span><br><span class="line">        // 以下两行代码比较有代表性</span><br><span class="line">        System.out.println(1 + 1);</span><br><span class="line">        System.out.println(&quot;1 + 1&quot;);</span><br><span class="line"></span><br><span class="line">        // 声明两个变量</span><br><span class="line">        String str3 = &quot;Hello&quot;;</span><br><span class="line">        String str4 = &quot;Java&quot;;</span><br><span class="line">        // 两个字符进行拼接操作</span><br><span class="line">        System.out.println(str3 + str4);</span><br><span class="line">        // 声明 int 类型变量</span><br><span class="line">        int a = 100;</span><br><span class="line">        System.out.println(str3 + a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>简单类型之间的转换</strong></p>
<ul>
<li><strong>自动类型转换</strong></li>
</ul>
<p>自动类型转换，我们又称为隐式类型转换，是因为代码中无须添加任何其他内容，就可以完成转换操作。</p>
<p>下图是数据类型转换原则图。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281111181.png" alt="image-20260128111120965"></p>
<p>首先，我们来看一下自动类型转换是如何操作的，从上图中我们可以看到，类型从小到大的转换，那是自动完成的。也就是按箭头的方向是自动完成的，红色虚线方向会丢失精度。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConvert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 声明 byte 类型变量 b</span></span><br><span class="line">        <span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line">        <span class="comment">// 将 byte 类型变量 b 赋值给 short 类型变量 s</span></span><br><span class="line">        <span class="type">short</span> <span class="variable">s</span> <span class="operator">=</span> b;</span><br><span class="line">        <span class="comment">// 将 short 类型变量 s 赋值给 int 类型变量 i</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> s;</span><br><span class="line">        <span class="comment">// 将 int 类型变量 i 赋值给 long 类型变量 ll</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">ll</span> <span class="operator">=</span> i;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 声明char 类型变量 c</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">        <span class="comment">// 将 char 类型变量 c 赋值给 int 类型变量 i2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span> c;</span><br><span class="line">        <span class="comment">// 将 int 类型变量 i2 赋值给 float 类型变量 f, 可能会损失精度</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">f</span> <span class="operator">=</span> i2;</span><br><span class="line">        <span class="comment">// 将 float 类型变量 f 赋值给 double 类型变量 d </span></span><br><span class="line">        <span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> i2;</span><br><span class="line">        <span class="comment">// 将 long 类型变量 ll 赋值给double 类型变量 d2 ,可能会损失精度</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> ll;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;b 的值为：&quot;</span> + b);</span><br><span class="line">        System.out.println(<span class="string">&quot;s 的值为：&quot;</span> + s);</span><br><span class="line">        System.out.println(<span class="string">&quot;i 的值为：&quot;</span> + i);</span><br><span class="line">        System.out.println(<span class="string">&quot;ll 的值为：&quot;</span> + ll);</span><br><span class="line">        System.out.println(<span class="string">&quot;c 的值为：&quot;</span> + c);</span><br><span class="line">        System.out.println(<span class="string">&quot;i2 的值为：&quot;</span> + i2);</span><br><span class="line">        System.out.println(<span class="string">&quot;f 的值为：&quot;</span> + f);</span><br><span class="line">        System.out.println(<span class="string">&quot;d 的值为：&quot;</span> + d);</span><br><span class="line">        System.out.println(<span class="string">&quot;d2 的值为：&quot;</span> + d2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<ul>
<li><strong>显式类型转换</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestConvert2 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int i3 = 128;</span><br><span class="line">        // byte b2 = i3;</span><br><span class="line">        // short s2 = i3;</span><br><span class="line">        // 容量大的数据赋值给容量小的数据时，程序并不能正常运行并且会出现</span><br><span class="line">        // 错误，这是因为容量大类型转容量小类型时不能够自动转换。</span><br><span class="line"></span><br><span class="line">        // 这时，我们就需要进行强制类型转换来保证代码可编译</span><br><span class="line">        byte b2 = (byte)i3;</span><br><span class="line">        short s2 = (short)i3;</span><br><span class="line">        // 当我们加入强制转换后，程序可以正常通过编译并运行出结果了。</span><br><span class="line">        // 但我们发现结果与我们的预期并不符合。原因是因为在强制类型</span><br><span class="line">        // 转换中，若被转换的变量值大于转换后的数据类型容量则会出现</span><br><span class="line">        // 数据精度丢失。因此我们在使用强制类型转换时需要注意转换后</span><br><span class="line">        // 的类型容量是否能容纳被转换的变量值。</span><br><span class="line">        System.out.println(&quot;b2的值为&quot; + b2);</span><br><span class="line">        System.out.println(&quot;s2的值为&quot; + s2);</span><br><span class="line"></span><br><span class="line">        byte b = 123;</span><br><span class="line">        short s = 1000;</span><br><span class="line">        char c = &#x27;Z&#x27;;</span><br><span class="line">        // b2 = b + s + c;</span><br><span class="line">        // s2 = b + s + c;</span><br><span class="line">        i3 = b + s + c;</span><br><span class="line">        System.out.println(&quot;b2的值为&quot; + b2);</span><br><span class="line">        System.out.println(&quot;s2的值为&quot; + s2);</span><br><span class="line">        System.out.println(&quot;i3的值为&quot; + i3);</span><br><span class="line"></span><br><span class="line">        double d = 3.14;</span><br><span class="line">        float f = 17.0f;</span><br><span class="line">        // int i4 = b + s + c + d + f;</span><br><span class="line">        // System.out.println(&quot;i4的值为&quot; + i4);</span><br><span class="line"></span><br><span class="line">        double d2 = b + s + c + d + f;</span><br><span class="line">        System.out.println(&quot;d2的值为&quot; + d2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-4-从控制台输入数据"><a href="#2-4-从控制台输入数据" class="headerlink" title="2.4 从控制台输入数据"></a>2.4 从控制台输入数据</h5><p><strong>使用 Scanner 进行数据传递</strong></p>
<ul>
<li>Scanner 类</li>
</ul>
<p>Scanner 类是存储在 JDK 提供的 API 中 java.util 工具包中的一个类，用于获取用户的键盘输入信息。</p>
<p>首先，我们可以打开 API 看一下，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281111569.png" alt="image-20260128111129428"></p>
<p>从图中我们可见，API 对 Scanner 类介绍信息中已经告诉我们了，这个类应该如何进行使用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 需要导入，才能使用 Scanner 类</span><br><span class="line">import java.util.Scanner;</span><br><span class="line">/**</span><br><span class="line"> * Scanner 的简单使用</span><br><span class="line"> * @author 小桃子</span><br><span class="line"> */</span><br><span class="line">public class TestScanner &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //创建控制台输入对象</span><br><span class="line">        Scanner input = new Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        //从控制台输入 byte 类型的数据</span><br><span class="line">        byte byteNum =  input.nextByte();</span><br><span class="line">        System.out.println(&quot;byteNum：&quot; + byteNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 short 类型的数据</span><br><span class="line">        short shortNum = input.nextShort();</span><br><span class="line">        System.out.println(&quot;shortNum：&quot; + shortNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 int 类型的数据</span><br><span class="line">        int intNum =  input.nextInt();</span><br><span class="line">        System.out.println(&quot;intNum：&quot; + intNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 long 类型的数据</span><br><span class="line">        long longNum =  input.nextLong();</span><br><span class="line">        System.out.println(&quot;longNum：&quot; + longNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 float 类型的数据</span><br><span class="line">        float floatNum = input.nextFloat();</span><br><span class="line">        System.out.println(&quot;floatNum：&quot; + floatNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 double 类型的数据</span><br><span class="line">        double doubleNum = input.nextDouble();</span><br><span class="line">        System.out.println(&quot;doubleNum：&quot; + doubleNum);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 boolean 类型的数据</span><br><span class="line">        boolean booleanValue = input.nextBoolean();</span><br><span class="line">        System.out.println(&quot;booleanValue：&quot; + booleanValue);</span><br><span class="line"></span><br><span class="line">         //从控制台输入 String 类型的数据</span><br><span class="line">        String stringValue =  input.next();</span><br><span class="line">        System.out.println(&quot;stringValue：&quot; + stringValue);</span><br><span class="line">          // 资源释放</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-5-运算符"><a href="#2-5-运算符" class="headerlink" title="2.5 运算符"></a>2.5 运算符</h5><ul>
<li>运算符</li>
</ul>
<table>
<thead>
<tr>
<th>运算符</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>加</td>
<td>两个数值相加，例如 1 + 1</td>
</tr>
<tr>
<td>-</td>
<td>减</td>
<td>两个数值相减，例如 2 - 1</td>
</tr>
<tr>
<td>*</td>
<td>乘</td>
<td>两个数值相乘，例如 2 * 2</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>除</td>
<td>进行除法计算，返回整除部分，例如 5 &#x2F; 2</td>
</tr>
<tr>
<td>%</td>
<td>取模</td>
<td>进行除法计算，返回余数部分，例如 5 % 2</td>
</tr>
</tbody></table>
<p><strong>【🔔 注意】</strong></p>
<p><strong>任何位数的数取模10，结果都为个位</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">public class IfChallenge1&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int num = 2782;</span><br><span class="line">        int qian = num / 1000;</span><br><span class="line">        int bai = num % 1000 / 100; //写法二:num / 100 % 10;</span><br><span class="line">        int shi = num% 100 / 10; </span><br><span class="line">        int ge = num % 10;</span><br><span class="line">        System.out.println(&quot;千位&quot; + qian);</span><br><span class="line">        System.out.println(&quot;百位&quot; + bai);</span><br><span class="line">        System.out.println(&quot;十位&quot; + shi);</span><br><span class="line">        System.out.println(&quot;各位&quot; + ge);</span><br><span class="line">        // 任何位数的数取模10，结果都为个位</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>递增递减运算符在变量 x 的右边时： <code>x++ 、x--</code>，表示变量 x 应先计算后递增或递减；</p>
<p> 在 Java 中又新增了两个算术运算符，那就是递增运算符 ++ 和递减运算符 。</p>
<p>递增递减运算符在变量 y 的左边时： <code>++y 、--y</code>，表示变量 y 应先递增或递减后计算。</p>
<p><strong>注意：<strong>在使用递增递减的运算符时，<strong>两个 +</strong> 或</strong>两个 -  之间</strong>不能有空格**，该运算符<strong>只能用在变量上</strong>，不能直接用在数值上，例如 3++ 、–10 这种写法都是错误的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestOperator&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 由于运算符比较简单，我们就直接放在输出语句中来看一下运算结果</span><br><span class="line">        System.out.println(2 + 2);</span><br><span class="line">        System.out.println(15 - 3);</span><br><span class="line">        System.out.println(6 * 22);</span><br><span class="line">        System.out.println(15 / 2);</span><br><span class="line">        System.out.println(15 % 2);</span><br><span class="line"></span><br><span class="line">        int a = 2;</span><br><span class="line">        int b = (++a) * 5;</span><br><span class="line">        System.out.println(&quot;a=&quot; + a);</span><br><span class="line">        System.out.println(&quot;b=&quot; + b);</span><br><span class="line">        int c = 2;</span><br><span class="line">        int d = (c++) * 5;</span><br><span class="line">        System.out.println(&quot;c=&quot; + c);</span><br><span class="line">        System.out.println(&quot;d=&quot; + d);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>关系运算符</li>
</ul>
<p><strong>关系运算符</strong> 就是小学课本中的「大于、小于、等于……」，通常用于程序执行<strong>循环和判断</strong> 中：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;&#x3D;</td>
<td>x &#x3D;&#x3D; y</td>
<td>等于：比较值是否相等</td>
</tr>
<tr>
<td>!&#x3D;</td>
<td>x !&#x3D; y</td>
<td>不等于：比较两个值是否不相等</td>
</tr>
<tr>
<td>&gt;</td>
<td>x &gt; y</td>
<td>大于：返回 x 是否大于 y</td>
</tr>
<tr>
<td>&lt;</td>
<td>x &lt; y</td>
<td>小于：返回 x 是否小于 y</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>x &gt;&#x3D; y</td>
<td>大于等于：返回 x 是否大于等于 y</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>x &lt;&#x3D; y</td>
<td>小于等于：返回 x 是否小于等于 y</td>
</tr>
</tbody></table>
<p>🔔 <strong>注意： 在高级编程语言中，一个 &#x3D; 代表赋值符，两个 &#x3D; 才代表数学意义上的“相等”。</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestOperator2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span>(a == b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a等于b&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(a != b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a不等于b&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a &gt; b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a大于b&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a &lt; b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a小于b&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a &gt;= b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a大于等于b&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(a &lt;= b)</span><br><span class="line">            System.out.println(<span class="string">&quot;a小于等于b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>逻辑运算符</li>
</ul>
<p><strong>逻辑运算符</strong>，可以对 boolean 类型数据进行“与”、“或”、“非”、“异或”等逻辑运算，结果仍为 boolean 类型，通常用于程序的运行流程控制。</p>
<p>Java 逻辑运算符，较为常用的逻辑运算有三个： ！、&amp;&amp; 、||。</p>
<p><strong>||  或       【有true(真)，则true(真)】</strong></p>
<p><strong>&amp;&amp;  与     【有false(假)则false(假)】</strong></p>
<p>🔔 <strong>注意：逻辑运算符必须对 boolean 值进行操作。</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestOperator3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">a</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">boolean</span> c;</span><br><span class="line">        c = !a;</span><br><span class="line">        System.out.println(<span class="string">&quot;!a=&quot;</span> + c);</span><br><span class="line">        c = a &amp;&amp; b;</span><br><span class="line">        System.out.println(<span class="string">&quot;a &amp;&amp; b=&quot;</span> + c);</span><br><span class="line">        c = a || b;</span><br><span class="line">        System.out.println(<span class="string">&quot;a || b=&quot;</span> + c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li>赋值运算符</li>
</ul>
<p>**最常用的赋值运算符 **</p>
<p>其他都是为了简写，<strong>如果看不懂可以先跳过，在以后的项目中会更容易理解。</strong></p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>赋值运算符</td>
<td>c &#x3D; a + b ：将 a + b 的运算结果赋值为 c</td>
</tr>
<tr>
<td>+&#x3D;</td>
<td>加法赋值运算符</td>
<td>c +&#x3D; a ：等效于 c &#x3D; c + a</td>
</tr>
<tr>
<td>-&#x3D;</td>
<td>减法赋值运算符</td>
<td>c -&#x3D; a ：等效于 c &#x3D; c - a</td>
</tr>
<tr>
<td>*&#x3D;</td>
<td>乘法赋值运算符</td>
<td>c *&#x3D; a ：等效于 c &#x3D; c * a</td>
</tr>
<tr>
<td>&#x2F;&#x3D;</td>
<td>除法赋值运算符</td>
<td>c &#x2F;&#x3D; a ：等效于 c &#x3D; c &#x2F; a</td>
</tr>
<tr>
<td>%&#x3D;</td>
<td>取模赋值运算符</td>
<td>c %&#x3D; a ：等效于 c &#x3D; c % a</td>
</tr>
<tr>
<td>&amp;&#x3D;</td>
<td>逻辑与赋值运算符</td>
<td>c &amp;&#x3D; a : 等效于 c &#x3D; c &amp; a</td>
</tr>
<tr>
<td>|&#x3D;</td>
<td>逻辑或赋值运算符</td>
<td>c |&#x3D; a : 等效于 c &#x3D; c | a</td>
</tr>
<tr>
<td>^&#x3D;</td>
<td>逻辑异或赋值运算符</td>
<td>c ^&#x3D; a : 等效于 c &#x3D; c ^ a</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestOperator4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span><span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a + b;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        a += b;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a += b;  等价于 a = a + b; 所以 c 和 a 打印的值是一样的。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>计算三位数各位之和</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Digit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入一个三位数&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">g</span> <span class="operator">=</span>num % <span class="number">10</span>;<span class="comment">//获取个数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span>num / <span class="number">10</span> % <span class="number">10</span>;<span class="comment">//获取十位</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span>num / <span class="number">100</span> ;<span class="comment">//获取百位</span></span><br><span class="line">        <span class="type">int</span> f=(g+s+l);</span><br><span class="line">       System.out.println(<span class="string">&quot;三个数的和&quot;</span>+f);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>条件运算符</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281111226.png" alt="image-20260128111145118"></p>
<p>从结构中我们可以看到，条件运算符是由问号和冒号组成的，<code>?</code> 左边的表达式 1 必须返回 boolean 类型值，需要根据布尔值来确定执行后 <code>:</code> 左边还是右边的表达式，当表达式 1 返回 true 时，执行 表达式 2，当返回值为 false 时，执行 表达式 3</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestOperator5</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 声明两个整数变量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">        <span class="comment">// 当 a &gt; b 条件成立，将a赋值给c ,否则将b赋值给c</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> a &gt; b ? a : b;</span><br><span class="line">        System.out.println(c);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明一个成绩变量 d</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">59</span>;</span><br><span class="line">        <span class="comment">// 当成绩大于等于 60 ， 考试通过，否则返回成绩</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span>  d &gt;= <span class="number">60</span> ? <span class="string">&quot;PASS&quot;</span> : d + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>判断水仙花数</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gu005</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断水仙花数</span></span><br><span class="line">        <span class="comment">// （例如：a^3 + b^3 + c^3 = abc)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入一个三位数N:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line">        <span class="comment">// int a, b, c;</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> N % <span class="number">10</span>;<span class="comment">//获取个数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> N / <span class="number">10</span> % <span class="number">10</span>; <span class="comment">//获取十位</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> N / <span class="number">100</span>; <span class="comment">//获取百位</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span>N + <span class="string">&quot;是水仙花数&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span>N + <span class="string">&quot;不是水仙花数&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sum</span> <span class="operator">=</span> a*a*a + b*b*b + c*c*c == N ? str1 : str2;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        <span class="comment">// 水仙花数</span></span><br><span class="line">        <span class="comment">// 153</span></span><br><span class="line">        <span class="comment">// 370</span></span><br><span class="line">        <span class="comment">// 371</span></span><br><span class="line">        <span class="comment">// 407</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-6-表达式"><a href="#2-6-表达式" class="headerlink" title="2.6 表达式"></a>2.6 表达式</h5><ul>
<li>计算 Java 工程师的薪资</li>
</ul>
<ol>
<li><p>Java 工程师的月薪按以下方式计算：</p>
<p>Java 工程师月薪 &#x3D; 月底薪 + 月实际绩效 + 月餐补 - 月保险</p>
<p>其中：</p>
<ul>
<li>月底薪为固定值。</li>
<li>月实际绩效 &#x3D; 月绩效基数（月底薪 × 25% ）× 月工作完成分数（最小值为 0，最大值为 150 ）&#x2F; 100。</li>
<li>月餐补 &#x3D; 月实际工作天数 × 15。</li>
<li>月保险为固定值。</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalSalary</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算 Java 工程师的薪资</span></span><br><span class="line">    <span class="comment">//     Java 工程师月薪 = 月底薪 + 月实际绩效 + 月餐补 - 月保险</span></span><br><span class="line">    <span class="comment">// 其中：</span></span><br><span class="line">    <span class="comment">// 月底薪为固定值。</span></span><br><span class="line">    <span class="comment">// 月实际绩效 = 月绩效基数（月底薪 × 25% ）× 月工作完成分数（最小值为 0，最大值为 150 ）/ 100。</span></span><br><span class="line">    <span class="comment">// 月餐补 = 月实际工作天数 × 15。</span></span><br><span class="line">    <span class="comment">// 月保险为固定值。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入Java工程师底薪：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">D</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入Java工程师月工作完成分数（最小值为 0，最大值为 150）：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">F</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入Java工程师月实际工作天数：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">T</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入Java工程师月应扣保险数：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">B</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">float</span> <span class="variable">W</span> <span class="operator">=</span> (<span class="type">float</span>) (D+D*<span class="number">0.25</span>*F/<span class="number">100</span>+T*<span class="number">15</span>-B);</span><br><span class="line">        System.out.println(<span class="string">&quot;Java工程师月薪为：&quot;</span> + W);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请输入月底薪:</span></span><br><span class="line">        <span class="comment">// 10000</span></span><br><span class="line">        <span class="comment">// 请输入月工作完成分数（最小值为 0,最大值为 150):</span></span><br><span class="line">        <span class="comment">// 120</span></span><br><span class="line">        <span class="comment">// 请输入月实际工作天数:</span></span><br><span class="line">        <span class="comment">// 22</span></span><br><span class="line">        <span class="comment">// 请输入月保险:</span></span><br><span class="line">        <span class="comment">// 2354</span></span><br><span class="line">        <span class="comment">// Java 工程师月薪10976.0</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-7-复习与挑战"><a href="#2-7-复习与挑战" class="headerlink" title="2.7 复习与挑战"></a>2.7 复习与挑战</h5><p>本章所学的都是 Java 编程语言中最基础的语法知识，总结如下：</p>
<ol>
<li><p><strong>注释</strong>分为 3 种形式</p>
<ul>
<li>类体中、方法体和语句块中都可以使用单行注释和多行注释。</li>
<li>文档注释主要是针对类、接口和方法的描述，并会使用命令 javadoc 进行文档生成。</li>
<li>一定要养成合理书写注释的好习惯。</li>
</ul>
</li>
<li><p><strong>分隔符</strong>，在程序的编写中合理使用分隔符，可以提高程序的可读性。</p>
</li>
<li><p><strong>关键字</strong>，一定要记住 53 个关键字都是小写的，一旦大写就不是关键字了。关键字在每个知识点中的运用，在后续的章节中会详细讲解。</p>
</li>
<li><p><strong>标识符</strong>，所有和名字有关的字符串，像类名、接口名、包名、方法名、变量名、常量名等等名字都必须是合法的标识符。使用时要按照命名规则，需注意：</p>
<ul>
<li>标识符中不能有空格。</li>
<li>标识符除了美元符和下划线可用，其他符号都不能出现在标识符中。</li>
<li>标识符中不能使用关键字。</li>
<li>标识符可以使用中文，但一般不建议用中文命名，会存在中文乱码问题。</li>
</ul>
</li>
<li><p><strong>变量和常量</strong></p>
<ul>
<li>都必须先声明后使用。</li>
<li>常量必须进行初始化赋值后才能访问，一旦赋值将不能改变。</li>
<li>变量名，命名时从第二个单词开始首字母大写，当然全面小写也是可以的；而常量名则建议所有字母都大写。这是 IT 行业默认的规则，你需要遵循。</li>
</ul>
</li>
<li><p><strong>数据类型</strong>，主要分为简单数据类型和引用数据类型。</p>
<ul>
<li>简单数据类型，每个类型的所占的存储空间和二进制位数要清楚。</li>
<li>byte、short、int、long、char、float、double 之间的自动转换和显式转换规则需要明白。</li>
<li>引用类型后面章节中会重点讲解，本章中只讲解了 String 类型简单用法。</li>
<li>从键盘传入并接收各种数据的操作，主要是通过 Scanner 类，会进行基本操作。</li>
</ul>
</li>
<li><p><strong>运算符</strong>，主要分为算术、关系、逻辑、赋值、条件 5 种基本的运算符，还有像 + 也是连接符在 String 中已使用，像 () 也是造型符在显式转换中已使用。</p>
<ul>
<li>我们需要清楚每个运算符的用法。</li>
<li>能够在程序中灵活和熟练的进行合理运用，这就需要多练、多写才能做到。</li>
</ul>
</li>
<li><p><strong>表达式</strong>，将以上知识融合一起，就组成了表达式。</p>
<p>需要注意的是，在编写代码时，一般我们不会刻意记住运算符的优先级，在工作状态下也可以先查询再使用，但当不确定运算符的优先级时，我们可以对先运算的部分加上小括号，保证此运算优先执行。</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281111518.png" alt="image-20260128111155347"></p>
<ul>
<li>计算任意半径的圆的面积</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Gu007</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算任意半径的圆的面积</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入圆的半径:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line">        <span class="comment">// 声明单精度类型</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.14f</span>;</span><br><span class="line">        <span class="type">float</span> <span class="variable">S</span> <span class="operator">=</span> PI * R * R;</span><br><span class="line">        System.out.println(S);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>计算正方体的体积</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cube</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算正方体的体积</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入正方体的边长:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">V</span> <span class="operator">=</span> L * L * L;</span><br><span class="line">        System.out.println(<span class="string">&quot;正方体的体积为:&quot;</span> + V);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>计算圆柱体的体积</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cylinder</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入圆柱的底面半径:&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span>scanner.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入圆柱的高:&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">final</span> <span class="type">float</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.14f</span>;</span><br><span class="line">        <span class="type">float</span> <span class="variable">S</span> <span class="operator">=</span> PI * r * r;</span><br><span class="line">        System.out.println(<span class="string">&quot;该圆柱的体积为:&quot;</span> + S*h);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="三、流程控制"><a href="#三、流程控制" class="headerlink" title="三、流程控制"></a>三、流程控制</h3><h5 id="3-1-if-语句"><a href="#3-1-if-语句" class="headerlink" title="3.1 if 语句"></a>3.1 if 语句</h5><p>在编程世界中，流程控制语句可以分成以下三类：</p>
<ul>
<li><p>顺序结构</p>
<p><strong>变量值的互换</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Challenge4</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>, b = <span class="number">20</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    c = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = c;</span><br><span class="line">    System.out.println(a);</span><br><span class="line">    System.out.println(b);</span><br><span class="line">    System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>选择结构(条件结构)</p>
</li>
<li><p>循环结构</p>
</li>
</ul>
<p>顺序结构是程序中最简单最基本的流程控制，没有特定的语法结构，按照代码的先后顺序，依次执行，程序中大多数的代码都是这样执行的。 通俗的说法：</p>
<ul>
<li>写在前面的先执行</li>
<li>写在后面的后执行。</li>
</ul>
<p>Java 语言提供了两种选择结构语句：</p>
<ul>
<li>if 语句</li>
<li>switch 语句</li>
</ul>
<p>if 语句有三种格式：</p>
<ul>
<li>单分支结构</li>
<li>双分支结构</li>
<li>多分支结构</li>
</ul>
<p>🍒 if 语句单分支语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (布尔表达式)&#123;</span><br><span class="line">   <span class="comment">//表达式为真时执行的代码块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 if 语句双分支语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (布尔表达式)&#123;</span><br><span class="line">   <span class="comment">//表达式为真时执行的代码块 1</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">   <span class="comment">//表达式为假时执行的代码块 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 if 语句多分支语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (布尔表达式 <span class="number">1</span>)&#123;</span><br><span class="line">   <span class="comment">//表达式 1 为真时执行的代码块 1</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (布尔表达式 <span class="number">2</span>)&#123;</span><br><span class="line">   <span class="comment">//表达式 2 为真时执行的代码块 2</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (布尔表达式 <span class="number">3</span>)&#123;</span><br><span class="line">   <span class="comment">//表达式 3 为真时执行的代码块 3</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (布尔表达式 n)&#123;</span><br><span class="line">   <span class="comment">//表达式 n 为真时执行的代码块 n</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="comment">//以上表达式都不满足时执行的代码块 n+1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>if 分支的实验步骤</strong></p>
<p>场景描述：键盘录入一个成绩信息，如果输入大于等于 60，则输出<code>恭喜你及格了</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Preview1</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入成绩:&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义变量接收从控制台输入信息</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="comment">// 使用比较运算符完成年龄比对，进入对应的分支</span></span><br><span class="line">        <span class="keyword">if</span>(score&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜你及格了&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;你的成绩是：&quot;</span> + score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>双分支结构</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Preview1</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入成绩:&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义变量接收从控制台输入信息</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="comment">// 使用比较运算符完成年龄比对，进入对应的分支</span></span><br><span class="line">        <span class="keyword">if</span>(score&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜你及格了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你还需要努力哦&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;你的成绩是：&quot;</span> + score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>多分支结构</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Preview1</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 多分支结构</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入成绩:&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义变量接收从控制台输入信息</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="comment">// 使用比较运算符完成年龄比对，进入对应的分支</span></span><br><span class="line">        <span class="keyword">if</span>(score&gt;=<span class="number">90</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你真的太优秀了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&gt;=<span class="number">80</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;良好的开端，可以更上一层楼哦&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&gt;=<span class="number">70</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;开端虽然一般，但你的成长空间非常大&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜你及格了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你还要继续努力哦&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;你的成绩是：&quot;</span> + score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>单分支选择结构</strong></p>
<p>学校举行举重比赛，根据年龄分成“成年组”和“少年组”两大组，小蓝决定要参加比赛。请根据小蓝输入的年龄判断小蓝可以参加哪一组的比赛。规则如下：</p>
<ul>
<li>年龄大于 18 岁（含）则参加“成年组”</li>
<li>年龄小于 18 岁则参加“少年组”</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的年龄：&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in); </span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span>scanner.nextInt();</span><br><span class="line">        <span class="keyword">if</span>(age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝参加的是成年组的比赛&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(age&lt;<span class="number">18</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝参加的是少年组的比赛&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>单分支的执行流程</p>
<ul>
<li>首先判断条件表达式看其结果是 true 还是 false</li>
<li>如果是 true 就执行代码块</li>
<li>如果是 false 就不执行代码块</li>
</ul>
<p>单分支的注意事项</p>
<ul>
<li>括号中的表达式无论简单还是复杂，结果必须是 boolean 类型</li>
<li>if 语句后面的代码块如果只有一条语句，大括号可以省略；如果是多条语句，就不能省略。建议不要省略。</li>
</ul>
<p><strong>双分支选择结构</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入小蓝的成绩&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">if</span>(age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝参加的是成年组比赛&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝参加是少年组比赛&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小蓝来到了公告栏，看到了举重赛事的相关说明，和选手的体重有关，需要根据体重参加对应级别的比赛。具体要求如下：</p>
<ul>
<li>如果体重大于 70 （含）公斤就参加 70 公斤级比赛</li>
<li>如果体重大于 60 （含）公斤低于 70 公斤就参加 60 公斤级比赛</li>
<li>如果体重大于 50 （含）公斤低于 60 公斤就参加 50 公斤级比赛</li>
<li>如果体重低与 50 公斤就不能参加比赛。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的体重&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">weight</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">if</span>(weight&gt;=<span class="number">70</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝可以参加 70 公斤级比赛&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&lt;<span class="number">70</span> &amp;&amp; weight&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝可以参加 60 公斤级比赛&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&lt;<span class="number">60</span> &amp;&amp; weight&gt;=<span class="number">50</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;小蓝可以参加 50 公斤级比赛&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;很遗憾，体重不达标，小蓝不能参加比赛&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>嵌套分支结构</strong></p>
<p>小蓝来到了举重报名处，负责登记信息的老师让小蓝登记年龄和体重信息，需要根据小蓝的年龄和体重参加对应级别的比赛。具体要求如下：</p>
<ul>
<li>年龄如果大于 18 岁（含）则参加“成年组”</li>
<li>年龄如果小于 18 岁 则参加“少年组”</li>
<li>如果体重大于 70 （含）公斤就参加 70 公斤级比赛</li>
<li>如果体重大于 60 （含）公斤低于 70 公斤就参加 60 公斤级比赛</li>
<li>如果体重大于 50 （含）公斤低于 60 公斤就参加 50 公斤级比赛</li>
<li>如果体重低与 50 公斤就不能参加比赛。</li>
</ul>
<p>请根据小蓝输入的年龄和体重完成对应的报名吧。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * if 嵌套结构的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 蓝桥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建键盘录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的年龄：&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义变量接收从控制台输入年龄的信息</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的体重：&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义变量接收从控制台输入的体重信息</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">weight</span>  <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="comment">//使用嵌套选择结构完成业务需求</span></span><br><span class="line">        <span class="keyword">if</span>(age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;小蓝可以参加成年组&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(weight&gt;=<span class="number">70</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 70 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 60 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&gt;=<span class="number">50</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 50 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;但很遗憾，因为体重不达标，小蓝不能参加比赛&quot;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span>  &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;小蓝可以参加少年组&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(weight&gt;=<span class="number">70</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 70 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&gt;=<span class="number">60</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 60 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(weight&gt;=<span class="number">50</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; 50 公斤级比赛&quot;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;但很遗憾，因为体重不达标，小蓝不能参加比赛&quot;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 资源释放</span></span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>给景点门票订个价</strong></p>
<p>现有一景区为提高游客数量，增加门票收入，针对淡旺季和游客身份灵活制订价格。其规则如下：</p>
<ul>
<li>每年的 1 月，2 月，6 月，7 月，8 月，12 月为旺季，在原价基础上打 8 折。</li>
<li>每年的 3 月，4 月，5 月，9 月，10 月，11 月为淡季，在原价基础上打 6 折。</li>
<li>如果游客是学生，在淡旺季的基础上再继续打 7 折。</li>
<li>如果游客是老师，在淡旺季的基础上再继续打 8 折。</li>
<li>其他游客不再继续打折。</li>
<li>原价为 100 元。</li>
</ul>
<p>请根据以上信息帮助景区收银员完成门票订价工作。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfChallenge1</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入你的职业：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">job</span> <span class="operator">=</span> scan.next();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入你入园的月份：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">        <span class="type">double</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(month==<span class="number">1</span> || month==<span class="number">2</span> || month==<span class="number">6</span> || month==<span class="number">7</span> || month==<span class="number">8</span> || month==<span class="number">12</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(job.equals(<span class="string">&quot;学生&quot;</span>))&#123;</span><br><span class="line">                a=a*<span class="number">0.8</span>*<span class="number">0.7</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(job.equals(<span class="string">&quot;教师&quot;</span>))&#123;</span><br><span class="line">                a=a*<span class="number">0.8</span>*<span class="number">0.8</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                a=a*<span class="number">0.8</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;您的门票价格为：&quot;</span> + a);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(month==<span class="number">3</span> || month==<span class="number">4</span> || month==<span class="number">5</span> || month==<span class="number">9</span> || month==<span class="number">10</span> || month==<span class="number">11</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(job.equals(<span class="string">&quot;学生&quot;</span>))&#123;</span><br><span class="line">                a=a*<span class="number">0.6</span>*<span class="number">0.7</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(job.equals(<span class="string">&quot;教师&quot;</span>))&#123;</span><br><span class="line">                a=a*<span class="number">0.6</span>*<span class="number">0.8</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                a=a*<span class="number">0.6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;您的门票价格为：&quot;</span> + a);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请正确输入月份&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>找出三个数中的最大值</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfChallenge2</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入第一个数：&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">A</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入第二个数：&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">B</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入第三个数：&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">C</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法一</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">max1</span> <span class="operator">=</span> A &gt; B ? A : B;</span><br><span class="line">    max1 = max1 &gt; C ? max1 : C; </span><br><span class="line">    System.out.println(<span class="string">&quot;法一,三个数中最大的数字是&quot;</span> + max1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法二</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">max2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(A&gt;B &amp;&amp; A&gt;C)&#123;</span><br><span class="line">        max2 = A;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(B&gt;A &amp;&amp; B&gt;C)&#123;</span><br><span class="line">        max2 = B;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        max2 = C;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;法二,三个数中最大的数字是&quot;</span> + max2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法三</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">max3</span> <span class="operator">=</span> A;  <span class="comment">//指定第一个数为最大值</span></span><br><span class="line">        <span class="keyword">if</span>(max3 &lt; B)&#123;</span><br><span class="line">            max3 = B;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(max3 &lt; C)&#123;</span><br><span class="line">            max3 = C;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;法三,三个数中最大的数字是&quot;</span> + max3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="3-2-switch-语句"><a href="#3-2-switch-语句" class="headerlink" title="3.2 switch 语句"></a>3.2 switch 语句</h5><p><strong>switch 语句</strong></p>
<p>switch 语句语法格式：(开关语句)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式) &#123;</span><br><span class="line">  <span class="keyword">case</span> 值 <span class="number">1</span>：</span><br><span class="line">    代码块 <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> 值<span class="number">2</span>：</span><br><span class="line">    代码块 <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    …</span><br><span class="line"> <span class="keyword">default</span>：</span><br><span class="line">    代码块 n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>语法解释： 表达式的取值类型：</p>
<ul>
<li>byte</li>
<li>short</li>
<li>int</li>
<li>char</li>
<li>枚举（JDK5 以后）</li>
<li>String（JDK7 以后）</li>
</ul>
<p>注意事项：</p>
<ul>
<li>case 后面跟的是要和表达式进行比较的值，只能是常量值。</li>
<li>代码块部分可以是一条或多条语句。</li>
<li>break 表示中断，结束的意思，用来结束 switch 语句。</li>
<li>default 语句表示所有情况都不匹配的时候，就执行该处的内容，相当于 if 语句的 else。</li>
</ul>
<p><strong>实验介绍</strong></p>
<p>场景描述：电竞大赛根据比赛名次发放奖品</p>
<ul>
<li>如果是第一名奖励电脑一台</li>
<li>如果是第二名奖励手机一部</li>
<li>如果是第三名奖励硬盘一个</li>
<li>如果是第四名奖励键盘一个</li>
<li>其它名次均不得奖</li>
<li>请写一个颁奖程序根据选手录入的名次完成奖品的发放。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Preview2</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入你的名次：&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">places</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">    <span class="keyword">switch</span>(places)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;第一名奖励电脑一台&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;第二名奖励手机一部&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;第三名奖励硬盘一个&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        System.out.println(<span class="string">&quot;第四名奖励键盘一个&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span> :</span><br><span class="line">        System.out.println(<span class="string">&quot;对不求，这个名次没有奖励&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;颁奖结束，你的名次是&quot;</span> + places);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在做判断的时候，我们有两种选择：</p>
<ul>
<li>if 语句</li>
<li>switch 语句</li>
</ul>
<p>在使用场景上的区别如下：</p>
<p>if 语句使用场景：</p>
<ul>
<li>可以针对一个范围的判断</li>
<li>可以针对固定个数的常量值进行判断</li>
<li>其特点是表达式的结果只能是 boolean 表达式</li>
</ul>
<p>switch 语句使用场景：</p>
<ul>
<li><p>适合针对固定个数的常量值进行判断</p>
</li>
<li><p>其特点是 case 表达式的值只能是常量，switch (表达式) 只能是 byte、short、int、char、枚举（JDK5 以后）和 String（JDK7 以后）</p>
<p><strong>实验介绍</strong></p>
</li>
</ul>
<p>学校举行举重比赛，赛事奖项如下：</p>
<ul>
<li>第一名：冠军，奖品为最新款旗舰笔记本电脑一台</li>
<li>第二名：亚军，奖品为最新款旗舰手机一部</li>
<li>第三名：季军，奖品为固态移动硬盘一个</li>
<li>第四名：殿军，奖品为 U 盘一个</li>
<li>其它名次没有奖励</li>
</ul>
<p>请根据小蓝输入的名次进行颁奖。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的名次：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">places</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span>(places)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜获得冠军，奖励为最新旗舰笔记本电脑一台&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜获得亚军，奖励为最新款旗舰手机一台&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜获得季军，奖励为固态移动硬盘一个&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;恭喜获得殿军，奖励为 U 盘一个&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;重在参与，下次加油&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>switch 语句使用场景：</p>
<ul>
<li>针对几个常量值的判断</li>
</ul>
<p>switch 执行流程</p>
<ul>
<li>首先获取或计算出表达式的值；</li>
<li>其次，和 case 依次比较，一旦有对应的值，就会执行相应的语句，在执行的过程中，遇到 break 结束；</li>
<li>最后，如果所有的 case 都和表达式的值不匹配，就会执行 default 代码块，程序结束。</li>
</ul>
<p><strong>实验介绍</strong></p>
<p>全年赛事结束后，校方需要统计各个季度的赛事情况。季度划分的规则是：</p>
<ul>
<li>1 月、2 月、3 月为第一季度（Q1）</li>
<li>4 月、5 月、6 月为第二季度（Q2）</li>
<li>7 月、8 月、9 月为第三季度（Q3）</li>
<li>10 月、11 月、12 月为第四季度（Q4）</li>
</ul>
<p>请根据输入的月份信息（整型）获得进行对应的季度的统计工作。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入月份(1-12)：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">places</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">switch</span>(places)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;开始第一季度（Q1）的统计工作&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;开始第二季度（Q2）的统计工作&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;开始第三季度（Q3）的统计工作&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;开始第四季度（Q4）的统计工作&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;输入的月份有错&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>注意事项:</p>
<ul>
<li>case： case 后面只能是常量，不能是变量，case 后面的值只能出现一次。</li>
<li>default： 虽然可以省略，但为了保障程序的严谨性，通常不建议省略。</li>
<li>break： 可以省略，但一般不建议省略，否则有可能出现预期外的结果，除非是利用 case 穿透的特点。但省略最后一项的 break 对程序不会影响。</li>
<li>switch 中的 case 项 和 default 项的位置可以随意排列。</li>
</ul>
<p><strong>switch 和 if 嵌套使用</strong></p>
<p>小蓝报名成功后，来到了体育场馆，在馆内空无一人，原来今天并没有安排赛事，小蓝懊恼的说道：下回一定要先查看是不是有比赛，对，先去查下赛程表。赛程表的内容：</p>
<ul>
<li>一、三、五 成年组比赛</li>
<li>二、四、六 少年组比赛</li>
<li>星期天都不比赛</li>
</ul>
<p>请根据小蓝输入的年龄和星期几来帮助小蓝确认是否要前往体育馆。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小蓝的年龄：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入星期几：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">week</span> <span class="operator">=</span> scanner.next();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span>(week)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;一&quot;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;三&quot;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;五&quot;</span>:</span><br><span class="line">            <span class="keyword">if</span>(age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;今天有比赛，别迟到了&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.err.println(<span class="string">&quot;小蓝是少年组，今天没有比赛&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;二&quot;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;四&quot;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;六&quot;</span>:</span><br><span class="line">            <span class="keyword">if</span>(age&gt;=<span class="number">18</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;小蓝是少年组，今天没有比赛&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;今天有比赛，别迟到了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;日&quot;</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;今天休息，不用比赛&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span> :</span><br><span class="line">            System.out.println(<span class="string">&quot;合法日期格式是（一、二、三、四、五、六、日）&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明：从使用场景上看，能用 switch 的地方一定可以使用 if 实现，反之则不一定。</strong></p>
<p>每个月有多少天</p>
<p>挑战介绍</p>
<p>小蓝的表弟小迷糊上小学三年级了，学到日历时他又犯迷糊了，他对每个月有多少天完全记不住？什么是大月、小月、平月？7 月有 31 天？8 月也有 31 天？那今年的 2 月呢？明年的呢？哎呀，头疼，记不住！于是小迷糊决定去找小蓝！小蓝无耐的转头看着你求助，希望你帮忙写个程序帮小迷糊记忆。看着小蓝楚楚可怜的样子，呃，你该不会拒绝吧？</p>
<ol>
<li><p>闰年的规则是：</p>
<ul>
<li>年份是 4 的倍数，且不是 100 的倍数的，为闰年（如 2004 年、2020 年等就是闰年）。</li>
<li>年份是整百数的，必须是 400 的倍数才是闰年（如 1900 年不是闰年，2000 年是闰年）。</li>
</ul>
<p>🐠 简言之，能被 4 整除不能被 100 整除或者能被 400 整除为闰年。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchChallenge3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入年份：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入月份：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">days</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(year%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; year%<span class="number">100</span>!=<span class="number">0</span> || year%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">switch</span>(days)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">                System.out.println(d21ays + <span class="string">&quot;月是大月,有 31 天&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">                System.out.println(days + <span class="string">&quot;月是小月,有 30 天&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                System.out.println(year + <span class="string">&quot;年时闰年,&quot;</span> + days + <span class="string">&quot;月是闰月,有 29 天&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">switch</span>(days)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">                    System.out.println(days + <span class="string">&quot;月是大月,有 31 天&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">                    System.out.println(days + <span class="string">&quot;月是小月,有 30 天&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    System.out.println(year + <span class="string">&quot;年时平年,&quot;</span> + days + <span class="string">&quot;月是平月,有 28 天&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>大胆画出来</strong></p>
<p>挑战内容</p>
<p>动手编写一个程序可以根据键盘录入的信息打印事先封装好的图形，对应的关系：</p>
<ol>
<li>1 - 矩形</li>
<li>2 - 直角三角形</li>
<li>3 - 等腰三角形</li>
<li>4 - 菱形</li>
<li>5 - 心形</li>
<li>0 - 退出</li>
<li>其它选项则继续打印</li>
</ol>
<p>效果如图：</p>
<p><img data-src="https://doc.shiyanlou.com/courses/4486/1702055/92da563c3fd0d4c2ae3cb16b02e3e66f-0" alt="img"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Challenge4</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1 - 矩形&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2 - 直角三角形&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3 - 等腰三角形&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;4 - 菱形&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;5 - 心形&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请选择要打印的图形：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">        <span class="keyword">switch</span>(x)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定矩形的行数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">hang1</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定矩形的列数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">lie</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=hang1;i++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> i1=<span class="number">1</span>;i1&lt;=lie;i1++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定直角三角形的行数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">hang2</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=hang2;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j1=<span class="number">1</span>;j1&lt;=j;j1++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定等腰三角形的行数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">hang3</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=hang3;k++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k1=<span class="number">1</span>;k1&lt;=hang3-k;k1++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k2=<span class="number">1</span>;k2&lt;=<span class="number">2</span>*k-<span class="number">1</span>;k2++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定菱形的行数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">hang4</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> y=<span class="number">1</span>;y&lt;=hang4;y++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> y1=hang4;y1&gt;y;y1--)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> y3=<span class="number">0</span>;y3&lt;y*<span class="number">2</span>-<span class="number">1</span>;y3++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> y=hang4-<span class="number">1</span>;y&gt;<span class="number">0</span>;y--)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> y2=hang4;y2&gt;y;y2--)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> y3=<span class="number">0</span>;y3&lt;<span class="number">2</span>*y-<span class="number">1</span>;y3++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;     ******       ******&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;   **********   **********&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot; ************* *************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;*****************************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;*****************************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;*****************************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot; ***************************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;   ***********************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;     *******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;       ***************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;         ***********&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;           *******&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;             ***&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;请正确输入图形序号&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p> 挑战介绍</p>
<p>今天，小蓝带着小迷糊找到你，你前两次的仗义帮助让 TA 感激不已，而小迷糊对几何图形开始着迷，你决定再表现一把，写出一个能打印几何图形的程序将你的心意藏在里面，嗯，希望小蓝能感受到。</p>
<h5 id="3-3-循环语句"><a href="#3-3-循环语句" class="headerlink" title="3.3 循环语句"></a>3.3 循环语句</h5><ul>
<li>while 循环语句格式：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">条件初始值;</span><br><span class="line"><span class="keyword">while</span>(条件判断布尔表达式) &#123;</span><br><span class="line">     循环体;</span><br><span class="line">     条件变化;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>do … while 循环语句格式：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">条件初始值;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">     循环体;</span><br><span class="line">     条件变化;</span><br><span class="line">&#125;<span class="keyword">while</span>(条件判断布尔表达式)</span><br></pre></td></tr></table></figure>

<ul>
<li>for 循环语句格式：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(条件初始值;条件判断布尔表达式;条件变化) &#123;</span><br><span class="line">        <span class="comment">// 循环体;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>while 循环实验步骤</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">Preview3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义变量用来接收求和的结果</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 定义初始条件值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 定义结束值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="comment">// 条件判断布尔表达式</span></span><br><span class="line">        <span class="keyword">while</span> (start &lt;= end)&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            sum = sum + start;</span><br><span class="line">            <span class="comment">// 条件变化</span></span><br><span class="line">            start = start + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// start++;</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;1-100累加结果为:&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>do … while 循环实验步骤</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">Preview3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义变量来接收求和的结果</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 定义初始条件值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 定义结束值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            sum = sum + start;</span><br><span class="line">            <span class="comment">// 条件变化</span></span><br><span class="line">            start = start + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// start++;</span></span><br><span class="line">            <span class="comment">// 条件判断布尔表达式</span></span><br><span class="line">        &#125;<span class="keyword">while</span>(start &lt;= end);</span><br><span class="line">        System.out.println(<span class="string">&quot;1-100累加结果为:&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>for 循环 实验步骤</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">Preview3</span>&#123;</span><br><span class="line">    <span class="comment">// do ... while 循环实验步骤</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义变量来接收求和的结果</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 定义结束值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>; start &lt;= end; start++)&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            sum +=start;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;1-100累加结果为:&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自从报名举重比赛成功后，小蓝为了能在比赛中取得好成绩就给自己制定了一个训练计划：每天练习挺举 100 次，在训练的时候还会依次报出“第 1 次挺举”，“第 2 次 挺举”。。。“第 100 次挺举”的口号，请编写程序描述小蓝完成这一天的训练过程。</p>
<p>使用 while 循环的方式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopDemo1</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自从报名举重比赛成功后，小蓝为了能在比赛中取得好成绩就给自己制定了</span></span><br><span class="line">    <span class="comment">// 一个训练计划：每天练习挺举 100 次，在训练的时候还会依次报出“第 1 次挺</span></span><br><span class="line">    <span class="comment">// 举”，“第 2 次 挺举”。。。“第 100 次挺举”的口号，请编写程序描述小蓝完成</span></span><br><span class="line">    <span class="comment">// 这一天的训练过程。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 while 循环的方式</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 初始条件</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(start &lt;= <span class="number">100</span>)&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            System.out.println(<span class="string">&quot;完成第&quot;</span> + start + <span class="string">&quot;次挺举&quot;</span>);</span><br><span class="line">            <span class="comment">// 条件变化</span></span><br><span class="line">            start++;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 do … while 循环的方式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopDemo1</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 do ... while 循环的方式</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 条件初始值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            System.out.println(<span class="string">&quot;完成第&quot;</span> + start + <span class="string">&quot;挺举&quot;</span>);</span><br><span class="line">            start++;</span><br><span class="line">        &#125;<span class="keyword">while</span>(start &lt;= <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 for 循环的方式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopDemo1</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 for 循环的方式</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> start;</span><br><span class="line">        <span class="comment">// 初始条件    //条件判断      //条件变化</span></span><br><span class="line">        <span class="keyword">for</span>(start = <span class="number">1</span>; start &lt;= <span class="number">100</span>; start++)&#123;</span><br><span class="line">            <span class="comment">// 循环体</span></span><br><span class="line">            System.out.println(<span class="string">&quot;完成第&quot;</span> + start + <span class="string">&quot;挺举&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三种循环语句虽然进行互相转化，但还是有一点小区别的:</p>
<ul>
<li>do … while 循环先执行一次循环体再进行判断是否继续执行</li>
<li>for 循环和 while 循环只有在条件成立的时候才会去执行循环体</li>
<li>do … while 和 while 适合在循环次数不确定的情况下使用</li>
<li>for 循环适合循环次数确定的场</li>
</ul>
<p><strong>循环嵌套使用</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoopDemo3</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印乘法表</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">             <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">                  System.out.print(j+<span class="string">&quot; x &quot;</span>+i+<span class="string">&quot; = &quot;</span>+i*j +<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>距离比赛的日子越来越近，小蓝准备从今天开始重新制定一个训练计划，换一种训练方式也许更容易提升成绩，Ta 的计划是训练当天距离比赛还有多少天，那一天就练习多少次，比如距离比赛还有 10 天，那么当天就练 10 次，第二天 9 次，第三天 8 次，直到比赛那天为止，请编写一个程序帮助小蓝统计在新计划执行期间共进行了多少次举重训练。</p>
<ul>
<li>while 循环</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WhileLoopChallenge</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 距离比赛的日子越来越近，小蓝准备从今天开始重新制定一个训练计划，换一种训练</span></span><br><span class="line">    <span class="comment">// 方式也许更容易提升成绩，Ta 的计划是训练当天距离比赛还有多少天，那一天就练习多</span></span><br><span class="line">    <span class="comment">// 少次，比如距离比赛还有 10 天，那么当天就练 10 次，第二天 9 次，第三天 8 次，直</span></span><br><span class="line">    <span class="comment">// 到比赛那天为止，请编写一个程序帮助小蓝统计在新计划执行期间共进行了多少次举重训练。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// while 循环</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入剩余天数:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">T</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">C</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(C &lt;= T)&#123;</span><br><span class="line">            sum = sum + C;</span><br><span class="line">            C++;   </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;共训练了&quot;</span> + sum + <span class="string">&quot;次&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>do … while 循环</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoWhileLoopChallenge</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// do ... while 循环</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入剩余天数:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">T</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">C</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            sum += C;</span><br><span class="line">            C++;</span><br><span class="line">        &#125;<span class="keyword">while</span>(C &lt;= T);</span><br><span class="line">        System.out.println(<span class="string">&quot;共训练了&quot;</span> + sum + <span class="string">&quot;次&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>for 循环代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForLoopChallenge</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for 循环代码</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入剩余天数:&quot;</span>);  </span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">T</span> <span class="operator">=</span>input.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> C=<span class="number">1</span>; C &lt;= T; C++)&#123;</span><br><span class="line">            sum += C;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;共练习了&quot;</span> + sum + <span class="string">&quot;次&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-4-跳转语句"><a href="#3-4-跳转语句" class="headerlink" title="3.4 跳转语句"></a>3.4 跳转语句</h5><ul>
<li>break 的使用</li>
</ul>
<p><strong>退出循环</strong></p>
<p>break只在循环和switch中生效</p>
<p>随机数的生成方式可采用以下方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//伪随机数的生成</span><br><span class="line">Math.random() 可以生成 0-1 之间的小数，但是不包含 1 。</span><br></pre></td></tr></table></figure>

<p>小蓝今天有点不舒服，看着训练表上以往轻轻松松能完成 100 次的计划，叹了一口气。心想做任何事不能轻易放弃，无论如何还是要训练的，但训练次数就通过翻书决定吧， 100 以内的翻到第几页就练几次。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BreakDemo</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义目标次数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">target</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;开始翻书&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">times</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random()*<span class="number">100</span>+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=target;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;开始第&quot;</span> + i + <span class="string">&quot;次训练&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(i==times)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;今天就练&quot;</span> + times + <span class="string">&quot;次&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>continue 的作用</strong></li>
</ul>
<p><strong>跳过当前循环后执行下一次循环</strong></p>
<p>自从小蓝报名比赛后，每天花在训练上的时间大大超过学习的时间，感觉学业有点荒废了，现在突然同时来个五门课程的月考，小蓝有点慌了。信春哥的小蓝考完都不敢看成绩了。请根据小蓝的各科成绩，统计出小蓝的总分成绩，平均分和及格率的信息，然后告诉 TA ，也许会有个好消息。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContinueDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// continue 的作用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入参加考试的课程数：&quot;</span>);</span><br><span class="line">        <span class="comment">// 定义课程数量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">en</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="comment">// 定义通过的课程数量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">an</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 定义总分</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=en;i++)&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入第&quot;</span> + i + <span class="string">&quot;门课的成绩&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">bn</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            sum += bn;</span><br><span class="line">            <span class="keyword">if</span>(bn&lt;<span class="number">60</span>)&#123;</span><br><span class="line">                <span class="comment">// 如果低于60分，本次循环的后续代码就不再执行，进入下一次</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 及格课程的数加 1</span></span><br><span class="line">            an++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;总分共：&quot;</span> +sum+ <span class="string">&quot;分，通过&quot;</span> +an+ <span class="string">&quot;门，及格率为：&quot;</span> +an*<span class="number">100</span>/en+ <span class="string">&quot;%,平均分为：&quot;</span> +sum/en);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用场合</p>
<p>break： 常用于 switch 结构和循环结构中，在循环中可以终止某个循环，程序跳转到循环块外的下一条语句。</p>
<p>continue： 只能用于循环结构中，可以跳过循环体中剩余的语句而执行下一次循环。</p>
<ul>
<li>循环的其它流程控制方式</li>
</ul>
<p>在前面的小节中，已经掌握了通过 <code>break</code> 和 <code>continue</code> 跳转语句控制程序执行的流程，除了这两种方式还有什么其它方式可以改变程序的执行流程呢？本次实验将通过控制一个多重循环流程来初步了解 <code>return</code> 和 虚拟机的关闭，最后对 <code>break</code> 的使用做个补充。</p>
<p>🍒 方式一： 补充 <code>return;</code> 结束当前的方法</p>
<p>运行效果如图所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinishDemo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//🍒 方式一： 补充 `return;` 结束当前的方法</span></span><br><span class="line"><span class="comment">//运行效果如图所示：</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序开始执行&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;<span class="number">2</span>;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;所有循环结束&quot;</span>);</span><br><span class="line">                        <span class="comment">// 请在此处补充代码，实现当k=1时，退出所有循环</span></span><br><span class="line">                        <span class="keyword">return</span>;    </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序结束执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 方式二： 补充 <code>System.exit(0);</code> 关闭虚拟机</p>
<p>运行效果如图所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinishDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 🍒 方式二： 补充 System.exit(0); 关闭虚拟机</span></span><br><span class="line">    <span class="comment">// 运行效果如图所示：</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序开始执行&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;<span class="number">2</span>;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;所有循环结束&quot;</span>);</span><br><span class="line">                        <span class="comment">// 请在此处补充代码，实现当k=1时，退出所有循环</span></span><br><span class="line">                        System.exit(<span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序结束执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方式一和方式二都不再执行最外层循环之后的代码。这显示不是我们想要的效果。那么如何解决呢？</p>
<p>🍒 方式三：可以设定一个标识，每一层的循环都对这个标识进行判断是否结束，代码及效果如下图：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinishDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 🍒 方式三：可以设定一个标识，每一层的循环都对这个标识进行判断是否结束，</span></span><br><span class="line">    <span class="comment">// 代码及效果如下图：</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序开始执行&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isOver</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;<span class="number">2</span>;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;所有循环结束&quot;</span>);</span><br><span class="line">                        <span class="comment">// 请在此处补充代码，实现当k=1时，退出所有循环</span></span><br><span class="line">                        isOver = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(isOver)&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(isOver)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序结束执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 方式四： 使用 <code>break</code> 标签名的形式</p>
<p>运行效果如图所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinishDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 🍒 方式四： 使用 break 标签名的形式</span></span><br><span class="line">    <span class="comment">// 运行效果如图所示：</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序开始执行&quot;</span>);</span><br><span class="line">        goDown:</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;<span class="number">2</span>;k++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;所有循环结束&quot;</span>);</span><br><span class="line">                        <span class="comment">// 请在此处补充代码，实现当k=1时，退出所有循环</span></span><br><span class="line">                        <span class="keyword">break</span> goDown;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序结束执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>趣味补代码</li>
</ul>
<p>上次你画的心形让小蓝突然有了学习编程的想法，在蓝桥云课上偷偷的学了一段时间，效果不错。今天找到你，得意地让你看看 TA 打印出来的镂空菱形，还让你出个循环题来考考 TA，你当然知道应该怎么做了。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 不知道呀</span><br></pre></td></tr></table></figure>





<h5 id="3-5-复习与挑战"><a href="#3-5-复习与挑战" class="headerlink" title="3.5 复习与挑战"></a>3.5 复习与挑战</h5><p>本章总结</p>
<p>本章学习了 Java 中的流程控制。流程控制程序结构分为顺序结构、选择结构、循环结构。</p>
<ol>
<li><p>程序结构分为：</p>
<ul>
<li>顺序结构是程序中最简单最基本的流程控制，没有特定的语法结构，按照代码的先后顺序，依次执行，程序中大多数的代码都是这样执行的。</li>
<li>选择结构也被称为分支结构，它有特定的语法规则，程序根据要执行具体的逻辑运算结果来进行判断，选择执行不同的代码流程。</li>
<li>循环结构可以在程序满足指定条件的情况下，重复执行某一段代码来实现预期的功能。</li>
</ul>
</li>
<li><p>分支语句</p>
<p>分为 if 结构 和 switch 结构。</p>
<ul>
<li><p>if 语句分为：单分支、双分支、多分支</p>
<p>特点：</p>
<ul>
<li>可以针对一个范围的判断；</li>
<li>可以针对固定个数的常量值进行判断；</li>
<li>表达式的结果只能是 boolean 表达式。</li>
</ul>
</li>
<li><p>switch 语句属于多分支，需要和 break 语句配合使用。</p>
<p>特点：</p>
<ul>
<li>适合针对固定个数的常量值进行判断，在这种场景下性能优于 if 分支；</li>
<li>default 相当于 if 分支中的 else；</li>
<li>case 表达式的值只能是常量值；</li>
<li>switch (表达式) 只能是 byte、short、int、char、枚举（JDK5 以后）和 String（JDK7 以后）</li>
</ul>
</li>
</ul>
</li>
<li><p>循环语句</p>
<p>分为 while 循环 、do … while 循环 和 for 循环，循环可以互相嵌套，但不建议超过三层。</p>
<p>三种循环语句进行互相转化，区别如下:</p>
<ul>
<li>do … while 循环先执行一次循环体再进行判断是否继续执行；</li>
<li>for 循环和 while 循环只有在条件成立的时候才会去执行循环体；</li>
<li>do … while 和 while 适合在循环次数不确定的情况下使用；</li>
<li>for 循环适合循环次数确定的场景。</li>
</ul>
</li>
<li><p>跳转语句</p>
<ul>
<li>break: 结束当前的循环，继续执行当前循环外的语句。</li>
<li>break lable: 在多重循环中，结束当前的循环跳到指定标签的循环处。</li>
<li>continue: 跳过当次循环后面的代码，进入下一次循环的执行。</li>
<li>return: 不仅结束循环，还结束当前方法。</li>
<li>System.exit(0): 不仅结束当前方法，还关闭了 JVM（虚拟机）。</li>
</ul>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281114230.png" alt="image-20260128111417064"></p>
<p>鸡兔同笼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeWork2</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 鸡兔同笼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入头的总数：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">to</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入脚的总数：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">jiao</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;to;i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> to - i;</span><br><span class="line">            <span class="keyword">if</span>(i+j==to &amp;&amp; <span class="number">2</span>*i+<span class="number">4</span>*j==jiao)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;鸡有&quot;</span>+ i+<span class="string">&quot;只，兔有&quot;</span>+j+<span class="string">&quot;只&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>流程控制语句实现多需求</strong></p>
<ol>
<li>键盘录入字符串 <code>A</code> 选项对应完成指定范围内的质数：<ul>
<li>质数的定义是只能被 1 和自身整除的大于 1 的正整数，最小的质数是 2 ；</li>
<li>比如 10 以内的质数有 2、3、5、7 ；</li>
<li>此分支完成找出指定范围内的所有质数。</li>
</ul>
</li>
<li>键盘录入字符串 <code>B</code> 选项对应完成录入的两个数字的最大公约数。</li>
<li>键盘录入字符串 <code>C</code> 选项对应完成找出 1000 以内的水仙花数：<ul>
<li>水仙花数（Narcissistic number）也被称为超完全数字不变数（pluperfect digital invariant, PPDI）、自恋数、自幂数、阿姆斯壮数或阿姆斯特朗数（Armstrong number），水仙花数是指一个 3 位数，它的每个位上的数字的 3 次幂之和等于它本身（例如：a^3 + b^3+ c^3 &#x3D; abc<em>a</em>3+<em>b</em>3+<em>c</em>3&#x3D;<em>a<strong>b</strong>c</em>）。</li>
</ul>
</li>
<li>键盘录入字符串 <code>D</code> 选项对应完成指定范围内的所有奇数求和计算。</li>
<li>键盘录入其它选项则提示功能未开放，并且退出循环结束程序。<ul>
<li>使用跳转语句实现循环的结束。</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeWork3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入你的选择：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">opt</span> <span class="operator">=</span> scan.next();</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">switch</span>(opt)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;A&quot;</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定质数查查找的范围：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">            System.out.print(prime + <span class="string">&quot;以内的质数有&quot;</span> + <span class="number">2</span> +<span class="string">&quot; &quot;</span>);</span><br><span class="line">            OUT:</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=prime;i+=<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">2</span>;j&lt;i;j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i%j==<span class="number">0</span>)&#123;</span><br><span class="line">                        <span class="keyword">continue</span> OUT;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.print(i + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;B&quot;</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定第一数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定第二个数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> num1 &gt; num2? num1 : num2;</span><br><span class="line">            <span class="keyword">while</span>(num1%max!=<span class="number">0</span> || num2%max!=<span class="number">0</span>)&#123;</span><br><span class="line">                max--;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(num1 + <span class="string">&quot;和&quot;</span>+ num2 +<span class="string">&quot;的最大公约数是：&quot;</span> + max);</span><br><span class="line">               </span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;C&quot;</span>:</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">100</span>;i&lt;=<span class="number">999</span>;i++)&#123;</span><br><span class="line">                <span class="type">int</span> g=i%<span class="number">10</span>;</span><br><span class="line">                <span class="type">int</span> s=i/<span class="number">10</span>%<span class="number">10</span>;</span><br><span class="line">                <span class="type">int</span> b=i/<span class="number">100</span>;</span><br><span class="line">                <span class="keyword">if</span>(g*g*g+s*s*s+b*b*b==i)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;1000以内的水仙花数有：&quot;</span> + i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;D&quot;</span>:</span><br><span class="line">            System.out.print(<span class="string">&quot;请指定奇数的求和范围：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">num3</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=num3;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">                    sum +=i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(num3 + <span class="string">&quot;范围内的奇数和是：&quot;</span> + sum);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;功能未开放&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>













<h4 id="for循环介绍"><a href="#for循环介绍" class="headerlink" title="for循环介绍"></a>for循环介绍</h4><p><strong>1、语法结构</strong></p>
<p>for（语句1；语句2；语句3）{</p>
<p>语句4；</p>
<p>}</p>
<p>语句1：循环开始的初始化条件（只被执行一次）</p>
<p>语句2：循环结束条件</p>
<p>语句3：循环的迭代条件（循环的变化规律）+&#x3D;2</p>
<p>语句4：循环体的内容（满足循环条件执行的内容）</p>
<p>语句1-&gt;语句2-&gt;语句4-&gt;语句3-&gt;语句2-&gt;语句4-&gt;语句3…-&gt;语句2-&gt;语句4-&gt;语句3-&gt;语句2（结束循环）</p>
<p>for（语句1；语句2；语句3）{&#x2F;&#x2F;1</p>
<p>语句；</p>
<p>for（语句1；语句2；语句3）{&#x2F;&#x2F;2</p>
<p>语句4；</p>
<p>}</p>
<p>语句；</p>
<p>}</p>
<h3 id="四、初识面向对象"><a href="#四、初识面向对象" class="headerlink" title="四、初识面向对象"></a>四、初识面向对象</h3><p><strong>面向对象创建的体验</strong></p>
<p>创建一个 <code>TiMiHero.java </code>类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TiMiHero</span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 英雄的属性</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">String name; <span class="comment">//英雄的名称</span></span><br><span class="line">String des; <span class="comment">// 英雄的称号</span></span><br><span class="line"><span class="type">int</span> gp; <span class="comment">// 英雄需要金币的数量 GoldPoint</span></span><br><span class="line"><span class="type">int</span> hp; <span class="comment">// 英雄的血量</span></span><br><span class="line"><span class="type">int</span> mp; <span class="comment">// 英雄的法力值</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 英雄的行为(方法)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 向上移动的方法</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">heroTop</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(name + <span class="string">&quot;向上移动一格&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">heroLeft</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(name + <span class="string">&quot;向左移动一格&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建程序的入口 <code>TiMiMain.java</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TiMiMain</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">TiMiHero</span> <span class="variable">tm1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiMiHero</span>();</span><br><span class="line">		tm1.name = <span class="string">&quot;夏侯惇&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="type">TiMiHero</span> <span class="variable">tm2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiMiHero</span>();</span><br><span class="line">		tm2.name = <span class="string">&quot;诸葛亮&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="type">TiMiHero</span> <span class="variable">tm3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TiMiHero</span>();</span><br><span class="line">		tm3.name = <span class="string">&quot;鲁班7号&quot;</span>;</span><br><span class="line">		</span><br><span class="line">		tm1.heroTop();</span><br><span class="line">		tm2.heroLeft();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>一、如何创建一个类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义类一个Student （学生类）</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">	<span class="comment">// 学生的属性(成员属性 或 成员变量)</span></span><br><span class="line">	String stuName; <span class="comment">// 学生姓名</span></span><br><span class="line">	<span class="type">int</span> stuAge; <span class="comment">// 学生年龄</span></span><br><span class="line">	<span class="type">int</span> stuSex; <span class="comment">// 学生性别</span></span><br><span class="line">	<span class="type">int</span> stuGrade; <span class="comment">// 学生年级</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 学生的方法(行为)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(stuName + <span class="string">&quot;正在认真听课！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">doHomework</span><span class="params">(<span class="type">int</span> hour)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;现在北京时间：&quot;</span> + hour + <span class="string">&quot;点，&quot;</span> + stuName + <span class="string">&quot;正在写作业！&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法的定义规则：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">修饰符 返回值类型(或无返回值) 方法名([参数类型<span class="number">1</span> 参数名<span class="number">1</span>, [参数类型<span class="number">2</span> 参数名<span class="number">2</span>, ...参数类型N参数名N]])&#123;</span><br><span class="line">	方法体</span><br><span class="line">	[<span class="keyword">return</span> 返回值;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义的好处：可以进行反复使用。程序的专业描述：可复用性</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFun</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun1</span><span class="params">()</span>&#123;</span><br><span class="line">		System.out.println(<span class="number">10</span> + <span class="number">10</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fun2</span><span class="params">(<span class="type">int</span> x)</span>&#123; <span class="comment">// int x 是属于形式参数</span></span><br><span class="line">		System.out.println(x * x);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fun3</span><span class="params">(<span class="type">int</span> x)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x * x;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span>&#123;</span><br><span class="line">	<span class="type">int</span> result;</span><br><span class="line">		<span class="keyword">if</span>(num1 &gt; num2)&#123;</span><br><span class="line">			result = num1;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			result = num2;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="comment">// 无参数和无返回值的方法</span></span><br><span class="line">		<span class="type">MyFun</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyFun</span>();</span><br><span class="line">		my.fun1();</span><br><span class="line">		my.fun2(<span class="number">9</span>); <span class="comment">// 调用方法是，写的9，就是实际参数</span></span><br><span class="line">		<span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> my.fun3(<span class="number">7</span>);</span><br><span class="line">		System.out.println(sum + <span class="number">10</span>);</span><br><span class="line">		<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">41</span>, y = <span class="number">39</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> my.max(x, y);</span><br><span class="line">		System.out.println(<span class="string">&quot;最大值为：&quot;</span> + num);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="4-1面向对象"><a href="#4-1面向对象" class="headerlink" title="4.1面向对象"></a>4.1面向对象</h5><p> 面向对象概述</p>
<p>万物皆对象</p>
<p>类：用来描述多个对象的共同特征，它是对象的模板。对象：用于描述现实中的个体，它是类的实例。对象是根据类创建的，一个类可以对应多个对象。</p>
<p>Java 语言是一种<strong>面向对象编程</strong>（OOP：Object Oriented Programming）的设计语言，而面向对象思想是一种程序设计思想，我们在面向对象思想的指引下，使用 Java 语言去设计、开发计算机程序。</p>
<p><strong>对象</strong>泛指现实中一切事物，每种事物都具备自己的属性和行为。</p>
<p>那么面向对象思想就是在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，描述成计算机事件的设计思想。 它区别于面向过程思想，强调的是通过调用对象的行为来实现功能，而不是自己一步一步的去操作实现。</p>
<p> 面向过程和面向对象</p>
<p>🍒 面向过程</p>
<p>生活中过程：就像工厂中的流水线操作，前面一步没有完成，后面一步就无法完成，必须按部就班一步一步完成。</p>
<p>程序中的过程：回顾一下前面学习的入口方法 <code>main</code> 方法，可以了解到方法中书写的是一个功能，而功能在执行时是分步骤，逐行执行步骤。</p>
<p>接下来我们来看一下这个面向过程的例子：</p>
<p>【洗衣服：把衣服脱下来 –&gt;找一个盆–&gt;放点洗衣粉–&gt;加点水–&gt;浸泡10 分钟–&gt;揉一揉–&gt;清洗衣服–&gt;拧干–&gt;晾起来】</p>
<blockquote>
<p>强调的是过程，即每一个步骤。通过上面例子中的动词可以发现，每一个环节只关注行为动作和功能的实现，而每一个过程都需要人确切的参与其中，可以看出面向过程强调的是参与者。</p>
</blockquote>
<p>🍒 面向对象</p>
<p>对象：是一类事物的具体体现。对象是类的一个实例（这里的对象不是找一个女朋友哦 😜），必然具备该类事物的属性和行为。</p>
<p>同样，我们来看下面这个面向对象的例子：</p>
<p>【洗衣服：把衣服脱下来 –&gt;打开全自动洗衣机–&gt;扔衣服–&gt;按钮–&gt;晾起来】</p>
<blockquote>
<p>强调的是对象，这里的对象有<strong>衣服</strong>、<strong>洗衣机</strong>，还有一个隐藏的对象——<strong>人</strong>。如果用面向对象的思想来看这个洗衣服的过程，你会发现人不是每一个过程都参与，需要的时候去执行一下就可以了。这整个过程中，是以事物（对象）为单位，考虑的也是单个事物的特征和行为，不是整个过程的。</p>
</blockquote>
<p>🍄 区别在于：</p>
<ol>
<li>面向对象是基于面向过程的。面向对象和面向过程并不冲突，面向过程强调的是参与者，面向对象强调的是调用者。</li>
<li>面向对象和面向过程都是用来解决问题的一种方法。<ul>
<li>面向过程：用来解决需求比较小的问题。其实面向过程是可以解决需求比较大的问题，但是因为到后期程序中的方法就会有很多，不使用对象的话，所有的功能代码都会在一个文件中，文件会很大，会造成程序的维护性比较差。</li>
<li>面向对象：用来解决需求比较大的问题。面向对象是把方法封装到类，此时开发人员不必面对过多的方法，只用面对封装了这些方法的类，使程序在后期维护上相对简单一些。</li>
</ul>
</li>
</ol>
<p> <strong>类和对象</strong></p>
<p>环顾周围，你会发现有很多对象，比如桌子，椅子，同学，老师等都可以看作一个对象，只是种类不同桌椅属于办公用品，师生属于人类。那这些对象和类有什么关系呢？接下来我们需要了解什么是<strong>类</strong> ，什么是<strong>对象</strong> 。</p>
<p>🍒 什么是<strong>类</strong></p>
<p><strong>类</strong>：是一组相关属性和行为的集合。可以看成是一类事物的模板，使用事物的属性特征和行为特征来描述该类事物。</p>
<blockquote>
<p>属性：就是该事物的状态信息；</p>
<p>行为：就是该事物能够做什么。</p>
</blockquote>
<p>【例如：小猫】</p>
<p>属性：名字、体重、年龄、颜色等。<br>行为：走、吃、叫。</p>
<p>🍒 什么是<strong>对象</strong></p>
<p><strong>对象</strong>：是一类事物的具体体现。这里的对象是类的一个实例，具备该类事物的属性和行为。</p>
<blockquote>
<p>现实中，一类事物的一个具体实例。</p>
</blockquote>
<p>【例如：一只小猫】</p>
<p>属性：Tony、5kg、2 years、yellow等。<br>行为：遛墙根走、吃着小鱼、喵喵叫。</p>
<p>🍄 <strong>类</strong>和<strong>对象</strong>的对比</p>
<ul>
<li><strong>类</strong>是对一类事物的描述，是抽象的。</li>
<li><strong>对象</strong>是一类事物的实例，是具体的。</li>
<li><strong>类</strong>是对象的模板，对象是类的实体。</li>
</ul>
<p>总结</p>
<p>本实验给大家讲解了面向对象和面向过程，也给大家介绍了类和对象之间的关系，那么如何定义类和创建对象呢，下面会给大家进行详细的讲解，快去学习吧 ~ 😊</p>
<h5 id="4-2声明类"><a href="#4-2声明类" class="headerlink" title="4.2声明类"></a>4.2声明类</h5><p><strong>类的基本语法</strong></p>
<p>类定义格式</p>
<p>Java API，它提供了很多现有的类，开发人员可以直接使用这些类来创建对象（小伙伴们别着急，这些现成的 Java API 在后续的学习中会给大家慢慢讲到，稍安勿躁 😊）。除了使用现有的 Java 类，开发人员还可以自定义 Java 类，接下来会详细地给大家介绍如何定义和使用 Java 类，Let’s go ！！！🏃‍♀️</p>
<p>🍄 事物与类的对比</p>
<p>小伙伴们，在正式介绍类的语法之前我们先来对比一下我们现实世界中的事物与类有啥不可告人的 “秘密”。 😎</p>
<p>现实世界的一类事物：</p>
<p>  <strong>属性</strong>：事物的状态信息。</p>
<p>  <strong>行为</strong>：事物能够做什么。</p>
<p>Java 中的 <code>class</code> 描述事物：</p>
<p>  <strong>成员属性</strong>：对应事物的属性。</p>
<p>  <strong>成员方法</strong>：对应事物的行为。</p>
<p>🍒 类定义格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> class 类名｛</span><br><span class="line">    <span class="comment">//定义类属性</span></span><br><span class="line">    属性<span class="number">1</span>类型:属性<span class="number">1</span>名;</span><br><span class="line">    属性<span class="number">2</span>类型:属性<span class="number">2</span>名;</span><br><span class="line">    …</span><br><span class="line">    <span class="comment">//定义方法</span></span><br><span class="line">    方法<span class="number">1</span>定义</span><br><span class="line">    方法<span class="number">2</span>定义</span><br><span class="line">    …</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>上面就是类的定义格式，在 Java 中，<code>class</code> 是用来定义类的关键字，<code>class</code> 关键字后面是要定义的类的名称，然后有一对大括号称为类体，里面写的是类的主要内容。</p>
<p>  <strong>类组成</strong> ：包括成员属性和成员方法。</p>
<p>  <strong>成员属性</strong> ：和以前定义变量几乎是一样的，只不过位置发生了改变，现在是在类中，方法外。</p>
<p>  <strong>成员方法</strong> ：和以前定义方法几乎是一样的。这里的成员方法可以是静态的（这个后面会给大家讲解哦 😊），也可以是非静态的，我们目前讲解的是非静态的。</p>
<p>🍒 定义一个类</p>
<p>需要描述一个学生的基本信息，有姓名、年龄、性别、年级 ，并且他还会听课、写作业。</p>
<blockquote>
<p>大家根据需求参照下面代码编写这样一个类，熟悉一下定义类的语法和格式，其中 <strong>属性</strong> 和 <strong>方法</strong> 的定义我们在下面章节中会详细讲解，大家别着急哦 😊。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="comment">// 访问修饰符 类的关键字 类名&#123; 类的具体设置 &#125;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">        <span class="comment">// 类的属性(特征)进行设置</span></span><br><span class="line">    String stuName;</span><br><span class="line">    <span class="type">int</span> stuAge;</span><br><span class="line">    <span class="type">int</span> stuSex;</span><br><span class="line">    <span class="type">int</span> stuGrade;</span><br><span class="line">        <span class="comment">// 设置了部分的类属性</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义类的方法(行为)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(stuName + <span class="string">&quot;正在认真听课!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doHomework</span><span class="params">(<span class="type">int</span> hour)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;现在是北京时间：&quot;</span> + hour + <span class="string">&quot;点，&quot;</span> + stuName + <span class="string">&quot;正在写作业！&quot;</span>;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🔔 类的主要组成部分：</p>
<ul>
<li>第一部分是类的属性定义，在类内部、方法外部定义的变量称为成员变量，也可以称为成员属性，或简称为 “属性”，这几种说法都可以。</li>
<li>第二部分是类的方法定义，通过方法的定义，描述类（对象）具有的动态行为，这些方法也可以称为成员方法，或简称为 “方法”。</li>
</ul>
<p><strong>创建一个 Person 类</strong></p>
<p>在 Java 语言中，所有 Java 程序都以类为组织单元，构成 Java 面向对象编程的最小单元。</p>
<p>回顾一下 Java 中类定义的语法 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> class 类名｛</span><br><span class="line">    <span class="comment">//定义类属性</span></span><br><span class="line">    属性<span class="number">1</span>类型:属性<span class="number">1</span>名;</span><br><span class="line">    属性<span class="number">2</span>类型:属性<span class="number">2</span>名;</span><br><span class="line">    …</span><br><span class="line">    <span class="comment">//定义方法</span></span><br><span class="line">    方法<span class="number">1</span>定义</span><br><span class="line">    方法<span class="number">2</span>定义</span><br><span class="line">    …</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>Java 类的主体是通过一对大括号 “{ }” 括起来的。类的主体中，主要是由属性和方法构成。</p>
<p>接下来我们就一起来定义一个<strong>人</strong>类命名为<code>Person</code> ，人共有的特征和行为有：姓名、年龄、性别、说话和行走等。</p>
<p>Java 中自定义类的步骤为：</p>
<ul>
<li>第一步 定义类名</li>
<li>第二步 编写类的属性名</li>
<li>第三步 编写类的方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">int</span> sex; <span class="comment">//1为男 0为女</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加了static关键字的，我们称为静态方法</span></span><br><span class="line">    <span class="comment">// 静态方法的好处是程序一运行就可以直接调用该方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">speak</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我会吃饭！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tread</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我会飞~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        speak();</span><br><span class="line">        tread();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="4-3声明属性"><a href="#4-3声明属性" class="headerlink" title="4.3声明属性"></a>4.3声明属性</h5><p><strong>属性的声明和定义</strong></p>
<p>性又称为成员变量，主要在类中方法外进行声明。</p>
<ol>
<li>声明属性语法格式</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[public|protected|private][static][final] type variable_name;</span><br></pre></td></tr></table></figure>

<p>备注：[…] 中括号里面的内容是可选的。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public、protected、private</td>
<td>用于表示成员变量的访问权限。</td>
</tr>
<tr>
<td>static</td>
<td>表示该成员变量为类变量，也称为静态变量。</td>
</tr>
<tr>
<td>final</td>
<td>表示将该成员变量声明为常量，其值无法更改。</td>
</tr>
<tr>
<td>type</td>
<td>表示变量的数据类型。</td>
</tr>
<tr>
<td>variable_name</td>
<td>表示变量名称，遵循驼峰命名规则。</td>
</tr>
</tbody></table>
<p>​	2.定义属性</p>
<p>需求：比如我们前面所讲的学生类，它的属性有：姓名、年龄、性别、年级等。接下来创建一个学生类（<code>Student.java</code>）,在这个类中添加学生的属性。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Student 类，并添加成员属性</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String stuName;  <span class="comment">//学生姓名</span></span><br><span class="line">    <span class="type">int</span> stuAge;      <span class="comment">//学生年龄</span></span><br><span class="line">    <span class="type">int</span> stuSex;      <span class="comment">//学生性别</span></span><br><span class="line">    <span class="type">int</span> stuGrade;    <span class="comment">//学生年级</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>初始化的默认值：</li>
</ol>
<p>我们也️可以在声明变量的同时对其进行初始化，比如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Student 类，并添加成员属性</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String stuName=<span class="string">&quot;蓝云&quot;</span>;  <span class="comment">//学生姓名</span></span><br><span class="line">    <span class="type">int</span> stuAge=<span class="number">18</span>;         <span class="comment">//学生年龄</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuSex</span> <span class="operator">=</span> <span class="number">1</span>;               <span class="comment">//学生性别（1代表男，2代表女）</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuGrade</span> <span class="operator">=</span> <span class="number">4</span>;           <span class="comment">//学生年级（4代表大学四年级）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>假如，声明成员变量时没有对其初始化，那么系统会使用默认值初始化成员变量，下表列举了各种类型的默认初始值：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>默认初始值</th>
</tr>
</thead>
<tbody><tr>
<td>整数型（byte、short、int、long）</td>
<td>0</td>
</tr>
<tr>
<td>单精度浮点型（float）</td>
<td>0.0f</td>
</tr>
<tr>
<td>双精度浮点型（double）</td>
<td>0.0d</td>
</tr>
<tr>
<td>字符型（char）</td>
<td>\u0000</td>
</tr>
<tr>
<td>布尔类型</td>
<td>false</td>
</tr>
<tr>
<td>引用类型变量</td>
<td>null</td>
</tr>
</tbody></table>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281115835.png" alt="image-20260128111516681"></p>
<p>例如下面声明的成员变量，它们的初始值如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Student 类，并添加成员属性</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String stuName;  <span class="comment">//学生姓名 默认值是 null</span></span><br><span class="line">    <span class="type">int</span> stuAge;      <span class="comment">//学生年龄 默认值是 0</span></span><br><span class="line">    <span class="type">int</span> stuSex;      <span class="comment">//学生性别 默认值是 0</span></span><br><span class="line">    <span class="type">int</span> stuGrade;    <span class="comment">//学生年级 默认值是 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-4声明方法"><a href="#4-4声明方法" class="headerlink" title="4.4声明方法"></a>4.4声明方法</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrint</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        print(<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请上课不要玩手机！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrint</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        print(<span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;i;j++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>方法的作用</strong></p>
<p>大家先来观察下面这段代码，看看有何不妥 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrint</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">// 输出 5 句 hello world</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt; <span class="number">5</span>;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello word&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出 10 句 hello world</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt; <span class="number">10</span>;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello word&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出 15 句 hello world</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt; <span class="number">15</span>;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello word&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>大家观察以上程序，发现啥问题没？🤔️</p>
<p>大家仔细观察会发现上面三个 <code>for</code> 循环想做的事情都是输出 <code>hello world</code>，只不过输出的次数不一样而已， 很明显程序中存在很多重复的代码。而在实际的开发中，如果存在重复的代码会影响程序的可读性、复用性（ps：你的钱包可能会缩水哦，你懂的 😜）。</p>
<p>那我们该如何去解决代码可读性、复用性差的问题呢？🤔️</p>
<p>对，就是通过方法，方法通常是为完成一定的功能，把程序中特定的代码组合在一起而构成的，其主要的好处体现在两个方面，一个是可以复用，另一个是使程序结构更加清晰（也就是可读性强）。</p>
<p><strong>声明方法格式</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[修饰符]  返回值类型  方法名([参数类型 参数名<span class="number">1</span>, 参数类型 参数名<span class="number">2</span>,……])</span><br><span class="line">&#123;</span><br><span class="line">       <span class="comment">//代码  函数的功用</span></span><br><span class="line">       [<span class="keyword">return</span> 返回值;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法的定义规则：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  修饰符 返回值类型(或无返回值) 方法名([参数类型<span class="number">1</span> 参数名<span class="number">1</span>,[参数类型<span class="number">2</span> 参数<span class="number">2</span>,...参数类型N C参数名N]])&#123;</span><br><span class="line"></span><br><span class="line">​      方法体</span><br><span class="line"></span><br><span class="line">​      [<span class="keyword">return</span> 返回值;]  </span><br><span class="line"></span><br><span class="line">​    &#125;</span><br></pre></td></tr></table></figure>

<p>​    定义的好处：可以进行反复使用，程序的专业描述：可复用性。</p>
<ul>
<li><p>修饰符：用来规定方法的可见范围等特征。例如，我们一直在使用的 <code>main</code> 方法，其中的 <code>public static</code> 就是修饰符，<code>public</code> 表示这个方法的可见范围，而 <code>static</code> 表示 <code>main</code> 方法是一个静态方法，这些内容将在后面的课程详细介绍。</p>
</li>
<li><p>返回值类型：方法在运行完成后，有返回值时，需要声明该返回值的类型；无返回值时，可以使用关键字 void。</p>
</li>
<li><p>方法名：就是给所书写的功能起个名称（开发人员起名，方法的命名规范和变量一样）。</p>
</li>
<li><p>参数列表：需要有参数名对应参数类型，多个情况下用逗号分隔。</p>
<p>那到底什么是参数列表，它可以用来干什么呢？🤔️</p>
<p>参数列表就是用来接收外界传来的信息，可以是一个或多个，也可以没有参数，但无论是否有参数，都必须有小括号。方法中的这些参数称为形式参数，简称形参，形参必须说明数据类型，如下代码所示：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 这个方法中有两个形参，都是 int 型的，返回值也是 int 型。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">returnAdd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>return 语句：用来结束方法的（在定义方法时不能缺少的关键字，如果方法返回值是 <code>void</code> 但开发人员自己又没有写，代码在编译的过程中 <code>JVM</code> 会自动添加上），返回值数据类型必须和方法头部分中返回值类型保持一致。</li>
</ul>
<p>⭐ <strong>注意：</strong></p>
<ol>
<li>声明格式中的用中括号<code>[]</code> 部分，表示可选部分。</li>
<li>大括号 <code>{}</code> 部分称为方法体，将方法需要完成的功能代码写在这部分中。</li>
<li>如果声明了多个方法，方法之间不能相互嵌套，错误写法如下：</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>&#123;</span><br><span class="line">    …</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span>&#123;</span><br><span class="line">        …</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>定义方法时需要明确下面两个条件：<ul>
<li>明确返回值类型：方法运行结束后，是否有结果。</li>
<li>明确形参列表：是否有参与方法运算的数据。</li>
</ul>
</li>
</ol>
<p>让我们马上开始定义方法吧 ~ 👇 👇 👇</p>
<p><strong>定义方法</strong></p>
<p>接下来我们一起来改造本实验一开始提供的程序，让它的复用性、可读性都很强。</p>
<p>需求：输出 “hello world”，但输出的次数不能写死，需要灵活性强。</p>
<p>分析：定义方法实现功能，需要两个明确，即<strong>返回值</strong>和<strong>参数</strong>。</p>
<ul>
<li>明确返回值：只要打印 “hello world” 就可以，故无返回值，用 <code>void</code> 表示。</li>
<li>明确参数：需求中要求打印的次数不能写死，需要灵活性强，故打印的方法需要形参来控制次数。</li>
</ul>
<blockquote>
<p>说明：方法名称为 <code>print</code>。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多次输出 “hello world”</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrint</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  main 方法是程序的入口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">// 输出5句 hello world</span></span><br><span class="line">        print(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// 输出10句 hello world</span></span><br><span class="line">        print(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// 输出15句 hello world</span></span><br><span class="line">        print(<span class="number">15</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此方法用来输出 “hello world”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;= a;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;hello word&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>方法详细分析，见下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281115857.png" alt="image-20260128111532692"></p>
<p>说明：当方法在书写时声明了返回值类型为 <code>void</code> 时（表示不需要返回值，<code>return</code> 关键字可以省略），当方法中没有书写 <code>return</code> 语句，在使用 <code>javac</code> 命令去编译程序时，<code>JVM</code> 会帮助方法自动添加一个 <code>return</code> 语句（<code>JVM</code> 代替程序人员完成了 <code>return</code> 的添加）。</p>
<p>本实验给大家讲解了类的另一个组成部分——<strong>方法</strong>。下面是对方法做的一个简单的总结：</p>
<ol>
<li>定义方法时明确以下两点：<ul>
<li>明确返回值类型：方法运行结束后，是否有结果。</li>
<li>明确形参列表：是否有参与方法运算的数据。</li>
</ul>
</li>
<li>编写方法时需注意：<ul>
<li>一个方法最好只书写一个功能代码（方法只做一件和自己相关的事）。</li>
<li>在书写方法时，方法中的代码不易过多。</li>
<li>当方法中代码过多时，再次把部分代码抽取出来重新封装为一个新的方法。</li>
</ul>
</li>
</ol>
<p><strong>方法调用</strong></p>
<p>需求：<strong>计算 1+2+3…+100 的和</strong></p>
<p>分析：定义方法实现功能，需要两个明确，即<strong>返回值</strong>和<strong>参数</strong>。</p>
<ul>
<li>明确返回值：1 ～ 100 的求和，计算后必然还是整数，返回值类型是 int。</li>
<li>明确参数：需求中已知计算的数据，没有未知的数据，可以不定义参数。</li>
</ul>
<p>需求分析完之后，那就赶紧动动你的小手尝试一下吧～ 😉。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 计算 1+2+3...+100 的和</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> getSum();</span><br><span class="line">        System.out.println(<span class="string">&quot;1~100的和：&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义计算 1～100的和的方法</span></span><br><span class="line"><span class="comment">     *      返回值类型：计算结果为int类型；</span></span><br><span class="line"><span class="comment">     *      参数：没有确切的数据。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//定义变量保存求和并赋予初始值0</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//从1开始，到100结束</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)&#123;</span><br><span class="line">            sum = sum + i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// return 是用来返回结果的</span></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>方法调用的三种方式</strong></p>
<p>1.直接调用：直接写方法名称</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        print();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;全世界我最帅！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.赋值调用：调用方法，在方法前面定义变量，接收方法返回值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> getSum();</span><br><span class="line">        System.out.println(<span class="string">&quot;1~100的和：&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)&#123;</span><br><span class="line">            sum = sum + i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.输出语句调用：在输出语句中调用方法，<code>System.out.println(方法名()) </code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(getSum());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)&#123;</span><br><span class="line">            sum = sum + i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：不能用输出语句调用 <code>void</code> 类型的方法。因为方法执行后没有结果，也就不会输出任何内容。</p>
<ol>
<li>方法定义<ul>
<li>类中其它方法外面；</li>
<li>返回值数据类型必须和方法声明时的返回值类型一致；</li>
<li>在方法中，return 语句之后不能再写其他语句。</li>
</ul>
</li>
<li>方法调用<ul>
<li>直接调用</li>
<li>赋值调用</li>
<li>输出语句调用</li>
</ul>
</li>
</ol>
<p>​			3.</p>
<p>1）java由类组成</p>
<p>2）类是对象的模板</p>
<p>3）对象就是具体事物</p>
<p>4）类定义属性和方法</p>
<p>模块化程序主界面菜单</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">showMenu</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.print(<span class="string">&quot;1. 输入数据&quot;</span>);</span><br><span class="line">    System.out.print(<span class="string">&quot;2. 输出数据&quot;</span>);</span><br><span class="line">    System.out.print(<span class="string">&quot;3. 退出程序&quot;</span>);</span><br><span class="line">    System.out.print(<span class="string">&quot;请选择你的输入（只能输入1、2、3）：&quot;</span>);</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);  <span class="comment">//从控制台获取用户输入的选择</span></span><br><span class="line">    <span class="keyword">return</span> input.nextInt();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">inputData</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">outputData</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//依然使用的死循环保证程序不间断执行</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="comment">//调用showMenu()方法获得用户输入</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">userSel</span> <span class="operator">=</span> showMenu();</span><br><span class="line">        <span class="keyword">switch</span>(userSel)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="comment">//调用inputData()方法</span></span><br><span class="line">            inputData();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            outputData();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;结束程序！&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;输入数据不正确！&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//当用户输入3时，退出while循环，结束程序</span></span><br><span class="line">        <span class="keyword">if</span>(userSel == <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>简单学生管理系统</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentProject</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;***************&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;*             *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;* 学生信息管理系统  *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;*             *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;***************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">showMenu</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;***************&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;1.添加学生信息&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;2.删除学生信息&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;3.修改学生信息&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;4.查询指定学生信息&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;5.查询所有学生信息&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;6.退出程序&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;***************&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请选择你的输入（只能输入1、.2、3、4、5、6):&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> scan.nextInt();</span><br><span class="line">    &#125;   </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addData</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteData</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">updateData</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectOneData</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectAllData</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;******************&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="comment">//依然使用的死循环保证程序不间断执行</span></span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="comment">//调用showMenu()方法获得用户输入</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">userSel</span> <span class="operator">=</span> showMenu();</span><br><span class="line">                <span class="keyword">switch</span>(userSel)&#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="comment">//调用inputData()方法</span></span><br><span class="line">                    addData();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    deleteData();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    updateData();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    selectOneData();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                    selectAllData();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;结束程序！&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;输入数据不正确！&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//当用户输入3时，退出while循环，结束程序</span></span><br><span class="line">                <span class="keyword">if</span>(userSel == <span class="number">6</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>制作简易的四则运算器</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        printInfo();  <span class="comment">//学生系统的首页名称方法</span></span><br><span class="line">        jiafa(<span class="number">10</span>, <span class="number">8</span>, <span class="string">&quot;*&quot;</span>);   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;*                    *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;*   三加四计算系统   *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;*                    *&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;**********************&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jiafa</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, String jsf)</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span>(jsf)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">            System.out.println(x+ <span class="string">&quot;+&quot;</span> +y + <span class="string">&quot;=&quot;</span> + (x+y));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">            System.out.println(x+ <span class="string">&quot;-&quot;</span> +y + <span class="string">&quot;=&quot;</span> + (x-y));</span><br><span class="line">            <span class="keyword">if</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">            System.out.println(x+ <span class="string">&quot;*&quot;</span> +y + <span class="string">&quot;=&quot;</span> + (x*y));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">            System.out.println(x+ <span class="string">&quot;/&quot;</span> +y + <span class="string">&quot;=&quot;</span> + (x/y));</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入合法运算符！！&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>如何保障做减法是不产生负数</p>
<p>做除法时除数大于被除数</p>
<h5 id="4-5变量的作用域"><a href="#4-5变量的作用域" class="headerlink" title="4.5变量的作用域"></a>4.5变量的作用域</h5><p><strong>成员变量和局部变量</strong></p>
<ol>
<li>成员变量：类中、方法外定义的变量。 👇</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;lanqiao&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] aStrings)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全局变量的分类：</p>
<ul>
<li>成员变量（不用 <code>static</code> 修饰）：随着实例变量的存在而存在。</li>
<li>类变量（<code>static</code> 修饰）：随着类的存在而存在。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员变量</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">noStaticName</span> <span class="operator">=</span> <span class="string">&quot;成员变量&quot;</span>;</span><br><span class="line">    <span class="comment">// 类变量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">String</span> <span class="variable">staticName</span> <span class="operator">=</span> <span class="string">&quot;类变量&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 未初始化的成员变量</span></span><br><span class="line">    String noStaticName1;</span><br><span class="line">    <span class="comment">// 未初始化的类变量</span></span><br><span class="line">    <span class="keyword">static</span> String staticName1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：成员变量如果不显式初始化，系统会自动进行默认的初始化。</p>
</blockquote>
<p>2.局部变量：类的方法、语句块中的变量。 👇</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 成员变量和局部变量使用</span><br><span class="line"> * @author lanqiao</span><br><span class="line"> */</span><br><span class="line">public class TestVariable&#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        //在 main 方法内部，是局部变量</span><br><span class="line">        String name = &quot;lanqiao&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>局部变量分类：</p>
<ul>
<li>形参（形式参数）：在整个方法内有效。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        print(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a 形参，在整个方法内都有效</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b 形参，在整个方法内都有效</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a=&quot;</span>+a+<span class="string">&quot;\tb=&quot;</span>+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法局部变量（方法内定义）：从定义这个变量开始到方法结束这一段时间内有效。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        print();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//方法内部，局部变量</span></span><br><span class="line">        <span class="type">int</span> a=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> b=<span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;a=&quot;</span>+a+<span class="string">&quot;\tb=&quot;</span>+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>代码块局部变量 （代码块内定义）：从定义这个变量开始到代码块结束这一段时间内有效。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这是代码块，后续会讲解</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//局部变量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：局部变量除了形参外，需要显示初始化，也就是要指定一个初始值，否则不能访问。</p>
</blockquote>
<p>3.局部变量和成员变量重名</p>
<p>Java 中允许局部变量和成员变量重名，局部变量会覆盖成员变量的值。代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 成员变量和局部变量使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVariable</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        print();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//方法内部，局部变量</span></span><br><span class="line">        <span class="comment">//int a=1;</span></span><br><span class="line">        <span class="comment">//int b=2;</span></span><br><span class="line">        System.out.println(<span class="string">&quot;a=&quot;</span>+a+<span class="string">&quot;\tb=&quot;</span>+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.局部变量和成员变量的区别</p>
<p>🍒 作用域</p>
<ul>
<li>成员变量：整个类有效。</li>
<li>局部变量：只在某个范围有效（一般指的是方法、语句块内）。</li>
</ul>
<p>🍒 存储位置</p>
<ul>
<li>成员变量：随着对象的创建而存在，随着对象的消失而消失，存储在堆内存中。</li>
<li>局部变量：在方法被调用，或者语句被执行的时候存在，存储在栈内存中。当方法调用完，或者语句结束后，就自动释放。</li>
</ul>
<p>🍒 生命周期</p>
<ul>
<li>成员变量：随着对象的创建而存在，随着对象的消失而消失。</li>
<li>局部变量：当方法调用完，或者语句结束后，就自动释放。</li>
</ul>
<p>🍒 初始值</p>
<ul>
<li>成员变量：有默认初始值。</li>
<li>局部变量：没有默认初始值，使用前必须赋值。</li>
</ul>
<h5 id="4-6创建和使用对象"><a href="#4-6创建和使用对象" class="headerlink" title="4.6创建和使用对象"></a>4.6创建和使用对象</h5><p><strong>对象的创建</strong></p>
<p>创建对象的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">类名 对象名 = new 类名();</span><br></pre></td></tr></table></figure>

<p>创建对象时，要使用 <code>new</code> 关键字，后面要跟着类名（构造方法名），类名后的括号内可传递构造参数（这里的构造参数会在后续章节中讲解，不要着急哦 😊）。</p>
<p>在 <code>/home/project</code> 目录下创建 <code>Student.java</code> 源文件，具体代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个学生类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    String stuName;  <span class="comment">//学生姓名</span></span><br><span class="line">    <span class="type">int</span> stuAge;      <span class="comment">//学生年龄</span></span><br><span class="line">    <span class="type">int</span> stuSex;      <span class="comment">//学生性别</span></span><br><span class="line">    <span class="type">int</span> stuGrade;    <span class="comment">//学生年级</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义听课的方法，在控制台直接输出</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">learn</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(stuName + <span class="string">&quot;正在认真听课！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义写作业的方法，输入时间，返回字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doHomework</span><span class="params">(<span class="type">int</span> hour)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;现在是北京时间:&quot;</span> + hour + <span class="string">&quot;点，&quot;</span> + stuName + <span class="string">&quot; 正在写作业！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义好类后，就可以根据这个类创建（实例化）对象了。类就相当于一个模板，可以创建多个对象。</p>
<p>接着，新建一个 <code>TestStudent.java</code> 源文件，在 <code>main</code> 方法并在里面创建<strong>蓝云</strong>这个学生对象：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestStudent&#123;</span><br><span class="line">  public static void main(String[] args)&#123;</span><br><span class="line">    // 对象创建，名为 lanYun</span><br><span class="line">    Student lanYun = new Student();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>对象的使用</strong></p>
<p>在 Java 语言中，通过 <code>.</code> 操作符来引用对象的属性和方法，具体的语法格式如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">对象名.属性 ;</span><br><span class="line">对象名.方法() ;</span><br></pre></td></tr></table></figure>

<p>通过上面的语法形式，可以给对象的属性赋值，也可以更改对象属性的值或者调用对象的方法，具体的核心代码如下 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">lanYun.stuName =<span class="string">&quot;蓝云&quot;</span>;</span><br><span class="line">lanYun.stuAge = <span class="number">22</span>;</span><br><span class="line">lanYun.stuSex = <span class="number">1</span>;            <span class="comment">//1代表男，2代表女</span></span><br><span class="line">lanYun.stuGrade = <span class="number">4</span>;        <span class="comment">//4代表大学四年级</span></span><br><span class="line">lanYun.learn();                <span class="comment">//调用学生听课的方法</span></span><br><span class="line">System.out.println(lanYun.doHomework(<span class="number">22</span>));        <span class="comment">//调用学生写作业的方法，输入值22代表现在是22点</span></span><br></pre></td></tr></table></figure>

<p>在 TestStudent 类中通过对象调用属性和方法，具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个学生测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStudent</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">      <span class="comment">// 创建学生对象 蓝云</span></span><br><span class="line">      <span class="type">Student</span> <span class="variable">lanYun</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 访问对象中的属性和方法</span></span><br><span class="line">      lanYun.stuName =<span class="string">&quot;蓝云&quot;</span>;</span><br><span class="line">      lanYun.stuAge = <span class="number">22</span>;</span><br><span class="line">      lanYun.stuSex = <span class="number">1</span>;            <span class="comment">//1代表男，2代表女</span></span><br><span class="line">      lanYun.stuGrade = <span class="number">4</span>;        <span class="comment">//4代表大学四年级</span></span><br><span class="line">      lanYun.learn();                <span class="comment">//调用学生听课的方法</span></span><br><span class="line">      System.out.println(lanYun.doHomework(<span class="number">22</span>));<span class="comment">//调用学生写作业的方法，输入值22代表现在是22点</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出学校基本信息</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义学校类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">School</span>&#123;</span><br><span class="line">    <span class="comment">// 类的属性</span></span><br><span class="line">    String name; <span class="comment">// 学校名</span></span><br><span class="line">    String address;<span class="comment">// 学校地址</span></span><br><span class="line">    String president; <span class="comment">// 校长</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输出学校的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;学校名称：&quot;</span> + name + <span class="string">&quot;，学校地址：&quot;</span> + address + <span class="string">&quot;，校长：&quot;</span> + president);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSchool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span>&#123;</span><br><span class="line">        <span class="comment">// 创建 School 对象</span></span><br><span class="line">        <span class="type">School</span> <span class="variable">school</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">School</span>();</span><br><span class="line"></span><br><span class="line">        school.name = <span class="string">&quot;蓝桥学院&quot;</span>;      <span class="comment">// 添加学校名称</span></span><br><span class="line">        school.president = <span class="string">&quot;lanqiao&quot;</span>;<span class="comment">// 添加校长</span></span><br><span class="line">        school.address = <span class="string">&quot;北京&quot;</span>;     <span class="comment">// 添加地址</span></span><br><span class="line"></span><br><span class="line">        school.print(); <span class="comment">//输出书的信息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出图书相关信息</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span>&#123;</span><br><span class="line">         String name;</span><br><span class="line">         String author;</span><br><span class="line">         <span class="type">float</span> jiage;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;书名：&quot;</span> + name + <span class="string">&quot;,作者：&quot;</span> + author + <span class="string">&quot;,价格：&quot;</span> + jiage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.name = <span class="string">&quot;Java 基础&quot;</span>;</span><br><span class="line">        book.author = <span class="string">&quot;lanqiao&quot;</span>;</span><br><span class="line">        book.jiage = <span class="number">60.8f</span>;</span><br><span class="line"></span><br><span class="line">        book.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="4-7复习挑战"><a href="#4-7复习挑战" class="headerlink" title="4.7复习挑战"></a>4.7复习挑战</h5><p>本章带领大家领略了面向对象的风采，学习了面向对象编程（OOP：Object Oriented Programming）。我们了解了面向对象程序设计的优点：可重用性、可扩展性等。</p>
<ol>
<li><p>面向对象和面向过程以及他们之间的不同点。</p>
<ul>
<li>面向过程（PO：Procedure Oriented）：是一种以过程为中心的编程思想。分析出解决问题所需要的步骤，然后用方法把这些步骤一步一步实现，使用的时候一个一个依次调用就可以了。</li>
<li>面向对象（OO：Object Oriented）：是一种以对象为中心的思想。面向对象将对象作为程序的基本单元，将程序和数据封装其中，以提高软件的重用性、灵活性、扩展性。</li>
</ul>
</li>
<li><p>声明类</p>
<ul>
<li>类的关键字 class。</li>
<li>类的命名。</li>
<li>最常用的修饰符 public 。</li>
</ul>
<p>类主要是由属性和方法组成的。</p>
</li>
<li><p>声明属性</p>
<ul>
<li>属性又称为成员变量，在类中方法外定义。</li>
<li>每个属性都需要有一个确切的数据类型。</li>
<li>属性的命名。</li>
</ul>
</li>
<li><p>变量的分类</p>
<ul>
<li>全局变量，在类中方法外定义的，又分为成员变量和类变量，作用于整个类。</li>
<li>局部变量，在方法体中或语句块中定义的，只在指定的区域中有效。</li>
</ul>
</li>
<li><p>声明方法</p>
<ul>
<li>方法的基本结构。</li>
<li>方法分为成员方法和普通方法，成员方法用来传递数据，普通方法用于功能实现。</li>
<li>方法的命名。</li>
</ul>
</li>
<li><p>对象的创建和使用</p>
<ul>
<li>通过关键字 new 创建对象。</li>
<li>通过 . 操作符调用类中的属性和方法。</li>
</ul>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281116892.png" alt="image-20260128111617645"></p>
<h3 id="五、数组"><a href="#五、数组" class="headerlink" title="五、数组"></a>五、数组</h3><h5 id="5-1一维数组"><a href="#5-1一维数组" class="headerlink" title="5.1一维数组"></a>5.1一维数组</h5><p>在讲解数组之前，我们先来看这样一个案例：</p>
<p>现在需要统计某公司员工的工资情况，例如计算平均工资、找到最高工资等。</p>
<p>假设该公司有 50 名员工，用前面所学的知识，程序首先需要声明 50 个变量来分别记住每位员工的工资，然后再进行操作。</p>
<p>显然这样做会显得很麻烦，而且错误率也会很高。</p>
<p>🤔 那有没有一种更好的方案来解决这个问题呢？</p>
<p>当然有，Java 提供了一种称为数组的数据结构。前面介绍过，数组属于引用类型。那么数组是如何帮助我们解决这个问题的呢？别急，待我给大家一一讲解。 😎</p>
<p>先了解一下数组的概念：</p>
<p>把相同数据类型的多个变量按一定顺序组织起来，这些按顺序排列的同类型数据元素的集合称为<strong>数组</strong>。</p>
<p>数组中的元素在内存中是<strong>连续</strong>存储的。</p>
<p>数组中的元素既可以是基本类型，也可以是引用类型。</p>
<p>数组的使用你只需要记住以下三步：</p>
<ul>
<li>第 1 步：声明数组。如：“int[] a;”。</li>
<li>第 2 步：分配数组内存空间。 如：“a &#x3D; new int[10];”。</li>
<li>第 3 步：给数组元素赋值。如：“a[0] &#x3D; 6;”。</li>
</ul>
<p>大家看完这些步骤，心底的大石头是不是落地了，对，就是这么简单。 😊</p>
<p>为了让大家更好的理解和掌握每一步，接下来我会给大家详细的分析每一步，集中精神，认真学习哦 ~ 💪</p>
<ol>
<li>声明数组</li>
</ol>
<p>声明数组主要是告诉数组可以存放什么类型的数据。</p>
<p>🍇 语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数据类型  数组名[];</span><br><span class="line">或</span><br><span class="line">数据类型[] 数组名;</span><br></pre></td></tr></table></figure>

<p>上面两种声明方式都可以，第二种在开发中使用更为普遍，也推荐使用这种方式。例如：定义数组类型的变量，代码如下 👇：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int[] salary;  // 工资</span><br><span class="line">int age[];     // 年龄</span><br><span class="line">String[] name; // 姓名</span><br></pre></td></tr></table></figure>

<p>注意：Java 语言中声明数组的时候不可以指定数组长度，例如 <code>int engNo[100]</code> 是非法的。</p>
<p>2.分配空间</p>
<p>分配空间主要是告诉计算机分配几个<strong>连续</strong>的内存空间给这个数组。</p>
<p>🍇 语法格式 ：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数组名 = new 数据类型[数组长度];</span><br></pre></td></tr></table></figure>

<p>例如：给工资数组分配 30 个内存空间，给年龄数组分配 20 个内存空间，给姓名数组分配 25 个内存空间，代码如下 👇：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">salary = new int[30];</span><br><span class="line">age = new int[20];</span><br><span class="line">name = new String[25];</span><br></pre></td></tr></table></figure>

<p>当然，也可以把数组的声明和分配空间合并。</p>
<p>🍇 语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数据类型[] 数组名 = new 数据类型[数组长度];</span><br></pre></td></tr></table></figure>

<p>使用声明和分配空间合并的方式改造上面的需求，代码如下 👇：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int[] salary = new int[30];</span><br><span class="line">int age[] = new int[20];</span><br><span class="line">String[] name = new String[25];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里指定的内存大小没有参照实际的案例需求，在正式开发中，需要结合你的场景去定义数组大小。</p>
</blockquote>
<p>3.赋值</p>
<p>创建完数组之后，就可以给数组赋值并使用数组了。在使用数组时，主要是通过下标来访问数组元素。</p>
<p>🍒 给数组中元素赋值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数组名[数组下标] = 数值;</span><br></pre></td></tr></table></figure>

<p>🍒 获取数组中元素：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">变量 = 数组名[数组下标];</span><br></pre></td></tr></table></figure>

<p>🍒 获取数组的长度：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数组名.length;</span><br></pre></td></tr></table></figure>

<p>例如：姓名小蓝，年龄 22 岁，他的工资是每月 20000 元，羡慕不，学习完 Java 后你也可以，加油！ 💪</p>
<p>代码如下 👇：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">salary[0] = 20000;</span><br><span class="line">age[0] = 22;</span><br><span class="line">name[0] = &quot;小蓝&quot;;</span><br><span class="line">int age1 = age[0]; // 获取年龄数组中 0 下标上的元素</span><br><span class="line">System.out.println(salary.length); // 输出工资数组的大小</span><br></pre></td></tr></table></figure>

<p>🔔 <strong>注意：</strong></p>
<ol>
<li>数组的下标是从 0 开始的，到 <strong>【长度 - 1】</strong> 结束（分配的内存空间是连续的）。</li>
<li>数组名[0]代表数组中第 1 个元素，数组名[1]代表数组中第 2 个元素…数组下标的最大值为数组长度减 1，如果下标不在这个范围中，程序就会报错，即数组越界异常。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">text</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Java中数据类型定义：</span></span><br><span class="line">        <span class="comment">// 语法一:数据类型 数组名[];</span></span><br><span class="line">        <span class="comment">// 语法二：数据类型[] 数组名；</span></span><br><span class="line">        <span class="comment">// 推荐使用语法二，了解知道有方法一。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 实列：定义一个成绩数组，都是整数</span></span><br><span class="line">        <span class="comment">// 创建完整方式:数据类型[]  数组名 = 数据类型[数组长度]</span></span><br><span class="line">        <span class="type">int</span>[] scores = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">6</span>];</span><br><span class="line">        <span class="comment">// 向数组添加数据</span></span><br><span class="line">        scores[<span class="number">0</span>] = <span class="number">22</span>;</span><br><span class="line">        scores[<span class="number">1</span>] = <span class="number">44</span>;</span><br><span class="line">        scores[<span class="number">2</span>] = <span class="number">66</span>;</span><br><span class="line">        scores[<span class="number">3</span>] = <span class="number">88</span>;</span><br><span class="line">        scores[<span class="number">4</span>] = <span class="number">99</span>;</span><br><span class="line">        scores[<span class="number">5</span>] = <span class="number">75</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;数据长度为：&quot;</span> + scores.length);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取数组第3个数：&quot;</span> + scores[<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;scores.length;i++)&#123;</span><br><span class="line">            sum+=scores[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;一组的平均分为：&quot;</span> + (sum/scores.length));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">90</span>;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">91</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">92</span>;</span><br><span class="line">        arr[<span class="number">3</span>] = <span class="number">93</span>;</span><br><span class="line">        arr[<span class="number">4</span>] = <span class="number">94</span>;</span><br><span class="line">        arr[<span class="number">5</span>] = <span class="number">95</span>;</span><br><span class="line">        arr[<span class="number">6</span>] = <span class="number">96</span>;</span><br><span class="line">        arr[<span class="number">7</span>] = <span class="number">97</span>;</span><br><span class="line">        arr[<span class="number">8</span>] = <span class="number">98</span>;</span><br><span class="line">        arr[<span class="number">9</span>] = <span class="number">99</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">sum1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">            sum1+=arr[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;我的平均分为：&quot;</span> + (sum1/arr.length));</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>[] nums = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">	<span class="type">int</span>[] nums = &#123;&#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>动手练一练：</strong></p>
<p><strong>示例 1」</strong>：将数组中的元素进行相加（具体的数据内容自己定，但是数据类型需要是 int 型的）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数组中的元素进行相加</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo1</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *    数组的使用：</span></span><br><span class="line"><span class="comment">     *  1.声明一个数组并确定数组中存放的数组类型（这里是int型）</span></span><br><span class="line"><span class="comment">     *    2.开辟空间来存放数据</span></span><br><span class="line"><span class="comment">     *  3.给开辟的空间中存数据</span></span><br><span class="line"><span class="comment">     *    4.将数组的所有数据相加，求和</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">int</span>[] a;          <span class="comment">// 声明数组</span></span><br><span class="line">        a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];   <span class="comment">// 开辟连续的空间</span></span><br><span class="line">        a[<span class="number">0</span>] = <span class="number">1</span>;          <span class="comment">// 给第一个空间赋值（可以叫第 1 个元素，也可以叫第 0 号元素）</span></span><br><span class="line">        a[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        a[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">        a[<span class="number">3</span>] = <span class="number">4</span>;</span><br><span class="line">        a[<span class="number">4</span>] = <span class="number">5</span>;         <span class="comment">// 到这里是给开辟的最后一个空间赋值</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 求和。数组名[下标]：就能获取到数组中具体的数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a[<span class="number">0</span>] + a[<span class="number">1</span>] + a[<span class="number">2</span>] + a[<span class="number">3</span>] + a[<span class="number">4</span>];</span><br><span class="line">        System.out.println(<span class="string">&quot;和为：&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>「示例 2」</strong>：将数组中的数据进行相加（具体的数据内容自己定，但是数据类型是 int 型的）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数组中的元素进行相加</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo2</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *    数组的使用：</span></span><br><span class="line"><span class="comment">     *  1.声明一个数组的同时开辟空间并赋值</span></span><br><span class="line"><span class="comment">     *    2.将数组的所有数据相加，求和</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明的同时开辟空间并赋初始值</span></span><br><span class="line">        <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 求和。数组名[下标]：就能获取到数组中具体的数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a[<span class="number">0</span>] + a[<span class="number">1</span>] + a[<span class="number">2</span>] + a[<span class="number">3</span>] + a[<span class="number">4</span>];</span><br><span class="line">        System.out.println(<span class="string">&quot;和为：&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>「示例 3」</strong>：动态的通过键盘录入 5 个整型的数并存到数组中，最后相加。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数组中的元素进行相加</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo3</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *    数组的使用：</span></span><br><span class="line"><span class="comment">     *  1.声明一个数组的同时开辟空间（空间的大小为5）</span></span><br><span class="line"><span class="comment">     *  2.通过循环动态给开辟的每一个空间赋值</span></span><br><span class="line"><span class="comment">     *    3.将数组的所有数据相加，求和</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明的同时开辟空间</span></span><br><span class="line">        <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">// 从键盘录入数据</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入 5 个整型数据：&quot;</span>);</span><br><span class="line">        <span class="comment">//循环给每一个空间赋值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">            a[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 求和。数组名[下标]：就能获取到数组中具体的数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a[<span class="number">0</span>] + a[<span class="number">1</span>] + a[<span class="number">2</span>] + a[<span class="number">3</span>] + a[<span class="number">4</span>];</span><br><span class="line">        System.out.println(<span class="string">&quot;和为：&quot;</span> + sum);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>「示例 4」</strong>：将数组中内容循环输出。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将数组中的元素进行相加</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDemo3</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *    数组的使用：</span></span><br><span class="line"><span class="comment">     *  1.声明一个数组的同时开辟空间（空间的大小为5）</span></span><br><span class="line"><span class="comment">     *  2.通过循环动态给开辟的每一个空间赋值</span></span><br><span class="line"><span class="comment">     *    3.将数组的所有数据相加，求和</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明的同时开辟空间</span></span><br><span class="line">        <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="comment">// 从键盘录入数据</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入 5 个整型数据：&quot;</span>);</span><br><span class="line">        <span class="comment">//循环给每一个空间赋值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">            a[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 求和。数组名[下标]：就能获取到数组中具体的数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> a[<span class="number">0</span>] + a[<span class="number">1</span>] + a[<span class="number">2</span>] + a[<span class="number">3</span>] + a[<span class="number">4</span>];</span><br><span class="line">        System.out.println(<span class="string">&quot;和为：&quot;</span> + sum);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>求数组最大值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">           <span class="type">int</span>[] nums = &#123;<span class="number">77</span>,<span class="number">87</span>,<span class="number">54</span>,<span class="number">37</span>,<span class="number">33</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">76</span>,<span class="number">87</span>,&#125;;</span><br><span class="line">           <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">               <span class="keyword">if</span>(max&lt;nums[i])&#123;</span><br><span class="line">                   max = nums[i];</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           System.out.println(<span class="string">&quot;nums数组中的最大值为：&quot;</span> + max);</span><br></pre></td></tr></table></figure>

<p>求数组最大值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">            <span class="type">int</span>[] nums = &#123;<span class="number">77</span>,<span class="number">87</span>,<span class="number">54</span>,<span class="number">37</span>,<span class="number">33</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">76</span>,<span class="number">87</span>,&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> nums[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(min&gt;nums[i])&#123;</span><br><span class="line">                min = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;nums数组中的最小值为：&quot;</span> + min);</span><br></pre></td></tr></table></figure>



<p><strong>Java 工程师薪资之高薪查询</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 统计员工薪资</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArray</span> &#123;</span><br><span class="line">    <span class="comment">//全局接收用户输入对象</span></span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="comment">//工程师数量固定为10人</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">COUNT</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//存储薪资的数组</span></span><br><span class="line">    <span class="type">int</span>[] basSalary = <span class="keyword">new</span> <span class="title class_">int</span>[COUNT];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//高薪人员比例</span></span><br><span class="line">    <span class="type">double</span> ratio;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//高薪人员平均薪资</span></span><br><span class="line">    <span class="type">double</span> avg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="keyword">final</span> String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestArray</span> <span class="variable">ta</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestArray</span>();</span><br><span class="line">        ta.inputSalary();</span><br><span class="line">        ta.calc();</span><br><span class="line">        <span class="keyword">if</span>(ta.ratio == <span class="number">0.0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;很遗憾，10个Java工程师中没有高薪人员！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;10个Java工程师中，高薪人员比例为：&quot;</span> + ta.ratio * <span class="number">100</span> + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;高薪人员平均底薪为：&quot;</span> + ta.avg);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入你需要获取第几个工程师的底薪：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> ta.input.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;第&quot;</span> + index + <span class="string">&quot;个工程师的底薪为：&quot;</span> + ta.select(index));</span><br><span class="line">        ta.input.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 负责接受输入并存储</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inputSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= COUNT; i++) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入第&quot;</span> + i + <span class="string">&quot;个工程师底薪：&quot;</span>);</span><br><span class="line">            <span class="comment">// 依次让用户输入的第i个工程师的底薪，注意下标是i-1</span></span><br><span class="line">            basSalary[i - <span class="number">1</span>] = input.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 负责计算高薪人员比例和平均工资</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">calc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">highNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sumBasSalary</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; COUNT; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (basSalary[i] &gt;= <span class="number">6000</span>) &#123;</span><br><span class="line">                <span class="comment">// 高薪人员数量+1</span></span><br><span class="line">                highNum = highNum + <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// 高薪人员底薪求和</span></span><br><span class="line">                sumBasSalary = sumBasSalary + basSalary[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(highNum &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// 计算比例和平均薪资</span></span><br><span class="line">            ratio = highNum * <span class="number">1.0</span> / COUNT;</span><br><span class="line">            avg = sumBasSalary * <span class="number">1.0</span> / highNum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询指定员工的薪资</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">select</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> basSalary[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>数组常见错误</p>
<p>我们在讲解数组内存结构之前，先来看看我的这些经验之谈——数组中常见的错误。这些错误是大家初学数组常犯的错误，务必认真学习哦 ~ 💪</p>
<ol>
<li>没有明确指明数组的大小。</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281116391.png" alt="image-20260128111636199"></p>
<p>分析一下：这里出现编译错，没有指明数组的大小。记住，声明数组时不管使用哪种方式，一定要让计算机知道数组的大小。上面代码将声明数组的语句改成 <code>int[] score = new int[2];</code> 就可以了。</p>
<p>2.数组越界。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281116211.png" alt="image-20260128111643018"></p>
<p>分析一下：<strong>这种是在运行时出错，编译时不会出错。<strong>要知道，数组大小一旦明确就等于告诉计算机开辟了多少连续的内存空间了，此时内存空间就固定了，不能修改，更不能超过。如果超过规定的空间就会造成数组下标越界的错误。这种错误也叫做</strong>异常</strong>（<strong>异常</strong>在后续章节会详细解决），是一种 Java 中常见的<strong>运行时异常</strong>（<code>ArrayIndexOutOfBoundsException</code>），叫做数组下标越界异常。你可以将上面代码的语句 “score[2]” 中的 2 改成 0 （ 或 1）。</p>
<p>3.数组初始化错误。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281116881.png" alt="image-20260128111648692"></p>
<p>分析一下：这里编译出错，记住创建数组并赋值的操作必须在一条语句中完成。将上面编译出错的代码改为 <code>int[] score = new int[]{99,98,97,96,94};</code>就可以了。</p>
<p>没有一种前人栽树后人乘凉的感觉。 😜</p>
<p>对，就是需要这样。前人遇到的坑，在实际开发中就不要再犯。那么在这里允许大家去犯一下哦，还等什么呢，赶紧动手去尝试一下吧。 😄</p>
<p><strong>交换两个数的位置</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 交换两个数的位置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArray2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">engNo1</span> <span class="operator">=</span> <span class="number">1001</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">engNo2</span> <span class="operator">=</span> <span class="number">1002</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;传递值交换数值：&quot;</span>);</span><br><span class="line">        <span class="comment">//调用前</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用前第1、第2编号为：&quot;</span> + engNo1 + <span class="string">&quot;\t&quot;</span> + engNo2);</span><br><span class="line">        <span class="comment">//值传递，传递的实质是数值的副本，所以没有交换原值</span></span><br><span class="line">        exchange1(engNo1, engNo2);</span><br><span class="line">        <span class="comment">//调用后</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用后第1、第2编号为：&quot;</span> + engNo1 + <span class="string">&quot;\t&quot;</span> + engNo2);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] engNo = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];<span class="comment">//数组类型实参</span></span><br><span class="line">        <span class="comment">//给数组赋值</span></span><br><span class="line">        engNo[<span class="number">0</span>] = <span class="number">1001</span>;</span><br><span class="line">        engNo[<span class="number">1</span>] = <span class="number">1002</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;传递引用交换数值：&quot;</span>);</span><br><span class="line">        <span class="comment">//调用前</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用前第1、第2编号为：&quot;</span> + engNo[<span class="number">0</span>] + <span class="string">&quot;\t&quot;</span> + engNo[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">//传递引用类型，传递的实质是指向数组的地址，所以交换了数组里的值</span></span><br><span class="line">        exchange2(engNo);</span><br><span class="line">        <span class="comment">//调用后</span></span><br><span class="line">        System.out.println(<span class="string">&quot;调用后第1、第2编号为：&quot;</span> + engNo[<span class="number">0</span>] + <span class="string">&quot;\t&quot;</span> + engNo[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 传递基本数据类型，交换int型a和b的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">exchange1</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 传递引用数据类型，交换数组x第1个元素和第2个元素的值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">exchange2</span><span class="params">(<span class="type">int</span>[] x)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> x[<span class="number">0</span>];</span><br><span class="line">        x[<span class="number">0</span>] = x[<span class="number">1</span>];</span><br><span class="line">        x[<span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数组的遍历</strong></p>
<p>使用增强 for 循环遍历数组</p>
<p>增强 for 循环可以在不知道初始值和终止值的情况下，对数组和后续要学习的集合类型的元素进行遍历，其语法如下。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for(数据类型 变量名 : 数组或集合)&#123;</span><br><span class="line">    循环代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试增强 for 循环</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestForeach</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;<span class="comment">//增强for循环</span></span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数组反转</strong></p>
<p>目前为止我们已经学习了一维数组的全部知识，本次挑战我们将尝试从控制台录入数组，然后将数组中的内容倒序输出。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputArray</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 控制台输入数组长度和数组元素</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] input()&#123;</span><br><span class="line">        <span class="comment">// 创建控制台输入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入要输入的数组长度：&quot;</span>);</span><br><span class="line">             <span class="comment">// 接收数组长度</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">            <span class="comment">// 创建数组</span></span><br><span class="line">            <span class="type">int</span>[] nums = <span class="keyword">new</span> <span class="title class_">int</span>[length];</span><br><span class="line">            <span class="comment">// 循环录入数组内各个元素的值</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; length; i++)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入第&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;个元素：&quot;</span>);</span><br><span class="line">                <span class="comment">// 将控制台输入的值放入数组</span></span><br><span class="line">                nums[i] = scanner.nextInt();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> nums;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 反转数组</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> nums 原数组</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> 新数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] reverseArray(<span class="type">int</span>[] nums)&#123;</span><br><span class="line">    <span class="comment">// 创建新数组</span></span><br><span class="line">        <span class="type">int</span>[] newArray = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        <span class="comment">// 正向遍历原数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length ; i++)&#123;</span><br><span class="line">            <span class="comment">// 将遍历出的值从后往前赋值给新数组</span></span><br><span class="line">            newArray[newArray.length-(i+<span class="number">1</span>)] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newArray;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* 遍历并输出数组内的所有元素</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> nums 要输出的元素</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showArray</span><span class="params">(<span class="type">int</span>[] nums)</span>&#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;数组内的元素有：&quot;</span>);</span><br><span class="line">        <span class="comment">// 遍历数组,并不换行输出内容</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i &lt; nums.length ; i++)&#123;</span><br><span class="line">            System.out.print(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 换行</span></span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class TestInputArray &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        InputArray ia = new InputArray();</span><br><span class="line">        ia.showArray(ia.reverseArray(ia.input()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>成绩分析</strong></p>
<p>小蓝突然接到一个通知，需要统计出一个班级的所有学生成绩，并且需要找出来班级中的最高分、最低分、平均分、及格人数、优秀人数（高于平均分）。小蓝傻了，这么短的时间没法弄。求助你，想要你帮忙设计一个成绩分析程序。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">// 定义一个PerformanceAnalysis 类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerformanceAnalysis</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 控制台输入数组长度和数组元素，需要注意成绩可能不是整数，因此使用 double 类型的数组</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span>[] input()&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入要输入的成绩数组长度：&quot;</span>);</span><br><span class="line">        <span class="comment">// 接收数组长度</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> scan.nextInt();</span><br><span class="line">        <span class="comment">// 创建数组</span></span><br><span class="line">        <span class="type">double</span>[] nums = <span class="keyword">new</span> <span class="title class_">double</span>[length];</span><br><span class="line">        <span class="comment">// 循环录入数组内各个元素的值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入下一个成绩：&quot;</span>);</span><br><span class="line">            <span class="comment">// 将控制台输入的值放入数组</span></span><br><span class="line">            nums[i] = scan.nextDouble();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 计算平均成绩</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">average</span><span class="params">(<span class="type">double</span>[] array)</span>&#123;</span><br><span class="line">        <span class="comment">// 定义变量保存成绩总和，类型为浮点型</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 遍历数组并累加成绩</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            sum+=array[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 求出平均成绩，由于元素的浮点型，计算结果也采用浮点型</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">avg</span> <span class="operator">=</span> sum / array.length;</span><br><span class="line">        <span class="keyword">return</span> avg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 传入成绩数组和平均值，统计成绩大于平均分的人数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">averageNum</span><span class="params">(<span class="type">double</span>[] array,<span class="type">double</span> average)</span>&#123;</span><br><span class="line">        <span class="comment">// 定义变量统计人数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 循环遍历数组，判断元素是否大于平均成绩</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            <span class="comment">// 若成绩大于平均成绩，num 自增 1</span></span><br><span class="line">            <span class="keyword">if</span>(array[i]&gt;average)&#123;</span><br><span class="line">                num++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 查找成绩数组中的最大值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">findMax</span><span class="params">(<span class="type">double</span>[] array)</span>&#123;</span><br><span class="line">        <span class="comment">// 定义变量保存最大成绩，初始值为数组中的第一个元素</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// 循环遍历数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            <span class="comment">// 若当遍历的元素值大于 max 将它的值给 max</span></span><br><span class="line">            <span class="keyword">if</span>(array[i]&gt;max)&#123;</span><br><span class="line">                max=array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 循环结束 max 就是最大值，将其返回出去</span></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 查找成绩数组中的最小值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">findMin</span><span class="params">(<span class="type">double</span>[] array)</span>&#123;</span><br><span class="line">        <span class="comment">// 定义变量保存最小成绩，初始值为数组中的第一个元素</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">min</span> <span class="operator">=</span> array[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">// 循环遍历数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            <span class="comment">// 若将遍历的元素值小于 min 将它的值赋值给 min</span></span><br><span class="line">            <span class="keyword">if</span>(array[i]&lt;min)&#123;</span><br><span class="line">                min = array[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 循环结束， min 就是最小值，将它返回出去</span></span><br><span class="line">        <span class="keyword">return</span> min;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 统计及格人数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">passNum</span><span class="params">(<span class="type">double</span>[] array)</span>&#123;</span><br><span class="line">        <span class="comment">// 定义变量保存及格人数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 遍历数组判断是否及格</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;array.length;i++)&#123;</span><br><span class="line">            <span class="comment">// 若成绩大于 60 分则 sum 自增 1</span></span><br><span class="line">            <span class="keyword">if</span>(array[i]&gt;<span class="number">60</span>)&#123;</span><br><span class="line">                sum++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 查询入口，调用上面的方法，完成功能</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 开启输入，获得控制台录入数组</span></span><br><span class="line">        <span class="type">double</span>[] array = input();</span><br><span class="line">        <span class="comment">// 将数组传入方法中求取平均成绩</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">average</span> <span class="operator">=</span> average(array);</span><br><span class="line">        <span class="comment">// 将数组和平均成绩传入方法中求取优秀人数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> averageNum(array, average);</span><br><span class="line">        <span class="comment">// 将数组传入方法求取最高分</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> findMax(array);</span><br><span class="line">        <span class="comment">// 将数组传入方法中求取最低分</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">min</span> <span class="operator">=</span> findMin(array);</span><br><span class="line">        <span class="comment">// 将数组传入方法中求取及格人数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">passNum</span> <span class="operator">=</span> passNum(array);</span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;及格人数：&quot;</span> + passNum);</span><br><span class="line">        System.out.println(<span class="string">&quot;平均分：&quot;</span> + average);</span><br><span class="line">        System.out.println(<span class="string">&quot;优秀人数：&quot;</span> + sum);</span><br><span class="line">        System.out.println(<span class="string">&quot;最高分：&quot;</span> + max);</span><br><span class="line">        System.out.println(<span class="string">&quot;最低分：&quot;</span> + min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h5 id="5-2二维数组"><a href="#5-2二维数组" class="headerlink" title="5.2二维数组"></a>5.2二维数组</h5><p>声明二维数组</p>
<ol>
<li>声明并创建二维数组的语法格式：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数据类型[][] 数组名 = new 数据类型[第一维长度] [第二维长度];</span><br><span class="line">或</span><br><span class="line">数据类型 数组名[][] = new 数据类型[第一维长度] [第二维长度];</span><br></pre></td></tr></table></figure>

<p>🔔 注意：创建的时候，可以同时设置第一维长度和第二维长度，也可以只设置第一维长度，但不可以只设置第二维长度。例如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][<span class="number">4</span>];</span><br><span class="line"><span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][];</span><br></pre></td></tr></table></figure>

<p>上面的例子就是定义了一个 3 行 4 列的二维数组，数组名为 <code>arr</code>。该数组的下标变量共有 12（3×4）个，即：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">arr [<span class="number">0</span>][<span class="number">0</span>], arr [<span class="number">0</span>][<span class="number">1</span>], arr [<span class="number">0</span>][<span class="number">2</span>], arr [<span class="number">0</span>][<span class="number">3</span>]</span><br><span class="line">arr [<span class="number">1</span>][<span class="number">0</span>], arr [<span class="number">1</span>][<span class="number">1</span>], arr [<span class="number">1</span>][<span class="number">2</span>], arr [<span class="number">1</span>][<span class="number">3</span>]</span><br><span class="line">arr [<span class="number">2</span>][<span class="number">0</span>], arr [<span class="number">2</span>][<span class="number">1</span>], arr [<span class="number">2</span>][<span class="number">2</span>], arr [<span class="number">2</span>][<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>⭐ 分析归纳：</p>
<p>二维数组本质是一维数组的叠加，二维数组的所有元素都是引用类型，这些元素分别指向不同的一维数组，其内存结构和之前介绍的一维数组类似。例如，二维数组 <code>arr</code> 指向了由 <code>arr[0]、arr[1]和 arr[2]</code> 组成的数组，而 <code>arr[0]、arr[1]和 arr[2]</code> 自身也是一维数组。也就是说，<code>arr[0]、arr[1]和 arr[2]</code> 三者既是二维数组的数组元素，又各自是一个独立的一维数组，如果把地址看做钥匙，引用（可认为是变量名）可看做钥匙盒。</p>
<p>2.二维数组的访问</p>
<p>二维数组的赋值和使用与一维数组类似，都是通过下标访问数组元素，不同的是一维数组只有一个下标，而二维数组有两个下标，分别表示该元素所在数组的行数和列数。</p>
<p>访问二维数组的语法格式：</p>
<p>🍒 给数组中的元素赋值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数组名[行数][列数] = 数值</span><br></pre></td></tr></table></figure>

<p>例如 <code>a = arr[0][3]</code>，其表示的是获取数组 <code>arr</code> 中第 1 行第 4 列的元素并赋值给变量 a。</p>
<blockquote>
<p>在声明并创建数组（<code>int[][] arr = new int[3][4];</code>）之后，可使用的数组下标范围为：<code>arr[0][0]~arr[2][3]</code>，这一点和一维数组类似，需要注意数组下标越界的问题。</p>
</blockquote>
<ol>
<li>同一维数组一样，二维数组在创建的时候也可以初始化。</li>
</ol>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] arr1= &#123;&#123;<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;,&#123;<span class="number">3</span>,<span class="number">9</span>&#125;&#125;;<span class="comment">//初始化一个3行2列的整型二维数组</span></span><br><span class="line"><span class="type">int</span>[][] arr2= &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;,&#123;<span class="number">3</span>,<span class="number">9</span>&#125;&#125;;<span class="comment">//初始化一个3行的整型二维数组</span></span><br></pre></td></tr></table></figure>

<p>其中，数组 <code>arr2</code> 第一行有 3 个元素，第二行和第三行都有 2 个元素，对于这类每行元素个数不同的二维数组，在使用时特别需要注意数组下标越界的问题。</p>
<p>🌱 如何遍历二维数组？</p>
<p>二维数组是二维的，是由 “行” 和 “列” 构成的。</p>
<p>因此，只需要先遍历每一行，然后再遍历每一行中的每一列即可。其中的 “行”，就是构成二维数组的元素：一维数组。</p>
<p>遍历二维数组的伪代码如下：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//遍历二维数组的每一行</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; 二维数组.length; i++) &#123;</span><br><span class="line">     <span class="comment">//遍历每一行中的每一列</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; 二维数组[i].length; j++) &#123;</span><br><span class="line">        <span class="comment">//二维数组[i][j]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动手练一练</p>
<p>例如：要统计一个公司三个销售小组中每个小组的总销售额以及整个公司的销售额。</p>
<p>如下所示：</p>
<ul>
<li>第一小组销售额为{11, 12}万元</li>
<li>第二小组销售额为{21, 22, 23}万元</li>
<li>第三小组销售额为{31, 32, 33, 34}万元</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoubleArray</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][];  <span class="comment">//定义一个长度为3的二维数组</span></span><br><span class="line">        <span class="comment">// 为数组赋值</span></span><br><span class="line">        arr[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>&#125;;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;<span class="number">31</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">34</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">//定义变量记录总销售额</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">groupSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;arr[i].length;j++)&#123;</span><br><span class="line">                groupSum += arr[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            sum += groupSum;  <span class="comment">//累加小组销售额</span></span><br><span class="line">            System.out.println(<span class="string">&quot;第&quot;</span> + (i + <span class="number">1</span>) + <span class="string">&quot;小组销售额为：&quot;</span> + groupSum + <span class="string">&quot;万元&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;总销售额为：&quot;</span> + sum + <span class="string">&quot;万元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>求各科目的平均成绩和总平均成绩</strong></p>
<p>需求如下：</p>
<p>某学习小组有 4 个学生，每个学生有 3 门课的考试成绩，如下表所示。要求用户输入学生的各科成绩，并求各科目的平均成绩和总平均成绩。</p>
<table>
<thead>
<tr>
<th>科目\姓名</th>
<th>小蓝</th>
<th>小雨</th>
<th>小南</th>
<th>小雷</th>
</tr>
</thead>
<tbody><tr>
<td>Java 基础</td>
<td>77</td>
<td>65</td>
<td>91</td>
<td>84</td>
</tr>
<tr>
<td>前端技术</td>
<td>56</td>
<td>71</td>
<td>88</td>
<td>79</td>
</tr>
<tr>
<td>后端技术</td>
<td>80</td>
<td>81</td>
<td>85</td>
<td>66</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CountScore</span>&#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输入科目、学生、成绩的相关方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inputScore</span><span class="params">(String[] course,String[] name, <span class="type">int</span>[][] stuScore)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)&#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;请输入科目：&quot;</span> + course[i] + <span class="string">&quot;学生：&quot;</span> + name[j] + <span class="string">&quot;的成绩：&quot;</span>);</span><br><span class="line">                <span class="comment">// 读取学生成绩</span></span><br><span class="line">                stuScore[i][j] = input.nextInt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] eachAvgScore(String[] course,<span class="type">int</span>[][] stuScore)&#123;</span><br><span class="line">        <span class="type">int</span>[] singleSum = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="comment">// 对单科成绩累加</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)&#123;</span><br><span class="line">                <span class="comment">// 单科成绩累加</span></span><br><span class="line">                singleSum[i] = singleSum[i] + stuScore[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;科目：&quot;</span> + course[i] + <span class="string">&quot;的平均成绩：&quot;</span> + singleSum[i]/<span class="number">4.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> singleSum;</span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">totalAvgScore</span><span class="params">(<span class="type">int</span>[] singleSum)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">allScore</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">            allScore = allScore + singleSum[i]; </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;总平均成绩：&quot;</span> + allScore / <span class="number">12.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCountScore</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] course = &#123;<span class="string">&quot;java基础&quot;</span>,<span class="string">&quot;前端技术&quot;</span>,<span class="string">&quot;后端技术&quot;</span>&#125;;</span><br><span class="line">        String[] name = &#123;<span class="string">&quot;小蓝&quot;</span>,<span class="string">&quot;小雨&quot;</span>, <span class="string">&quot;小南&quot;</span>,<span class="string">&quot;小雷&quot;</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[][] stuScore = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建CountScore 对象</span></span><br><span class="line">        <span class="type">CountScore</span> <span class="variable">cs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountScore</span>();</span><br><span class="line">        <span class="comment">// 输入成绩</span></span><br><span class="line">        cs.inputScore(course,name,stuScore);</span><br><span class="line">        <span class="comment">// 计算各科成绩平均分</span></span><br><span class="line">        <span class="type">int</span>[] singleSum = cs.eachAvgScore(course,stuScore);</span><br><span class="line">        <span class="comment">// 计算全部科目的平均成绩</span></span><br><span class="line">        cs.totalAvgScore(singleSum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>二维数组的查找</strong></p>
<p>目前为止我们已经学完了二维数组的基本概念了哦 😊，接下来就需要大家亲自动手完成一个在二维数组中查找的程序 ，快来挑战吧~😎</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindElement</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] array = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,</span><br><span class="line">            &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">12</span>&#125;,</span><br><span class="line">            &#123;<span class="number">4</span>,<span class="number">7</span>,<span class="number">10</span>,<span class="number">13</span>&#125;,</span><br><span class="line">            &#123;<span class="number">6</span>,<span class="number">8</span>,<span class="number">11</span>,<span class="number">15</span>&#125;&#125;;</span><br><span class="line">            System.out.print(<span class="string">&quot;输入要查找的数：&quot;</span>);</span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> array.length;</span><br><span class="line">            <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> array[<span class="number">0</span>].length;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> n - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(i&lt;m &amp;&amp; j&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(array[i][j]&lt;a)&#123;</span><br><span class="line">                   i++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(array[i][j]&gt;a)&#123;</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-3复习挑战"><a href="#5-3复习挑战" class="headerlink" title="5.3复习挑战"></a>5.3复习挑战</h5><p><strong>本章总结</strong></p>
<p>本章主要讲解了<strong>数组</strong>，一维和二维的基本使用，一定要通过循序渐进和反复的上机练习，掌握本章的所有内容，总结一下本章所学知识点如下：</p>
<ol>
<li><p>数组基本概念</p>
<p>用来管理一组数据类型相同的数据。</p>
<p>数组本身是引用类型。</p>
<p>数组元素可以是简单类型也可以是引用类型。</p>
</li>
<li><p>一维数组的声明和创建</p>
<p>数组的声明：datatype[] arrayName;</p>
<p>数组的创建：arrayName &#x3D; new datatype[length];</p>
<p>数组的初始化：arrayName[index] &#x3D; value;</p>
</li>
<li><p>二维数组的声明和创建</p>
<p>数组的声明：datatype[] [] arrayName;</p>
<p>数组的创建：arrayName &#x3D; new datatype [lengthRow] [] 或 arrayName &#x3D; new datatype [lengthRow] [lengthCol]</p>
<p>数组的初始化：arrayName [indexRow] [indexCol] &#x3D; value;</p>
<p>二维数组的步骤基本跟一维数组差不多，二维数组中的元素实际就是一个个的一维数组。</p>
</li>
<li><p>数组的使用</p>
<p>通过 length 属性获取数组长度。</p>
<p>通过下标 index 获取数组元素，index 从 0 开始到 length-1 结束。</p>
<p>通过数组传递数据。</p>
<p>通过 for 循环进行数组遍历。</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117537.png" alt="image-20260128111707267"></p>
<p><strong>实现等腰杨辉三角</strong></p>
<p>杨辉三角是中国古代数学的杰出研究成果之一，它把二项式系数图形化，把组合数内在的一些代数性质直观地从图形中体现出来，是一种离散型的数与形的结合。具有以下几点性质：</p>
<ol>
<li>第 <code>n</code> 行的数字有 <code>n</code> 项。</li>
<li>每行数字左右对称，由 1 开始逐渐变大。</li>
<li>每个数等于它上方两数之和。</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117128.png" alt="image-20260128111712918"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Yh_tangle&#123;</span><br><span class="line">    public void yh(int n)&#123;</span><br><span class="line">        // 实现输入等腰三角形的方法</span><br><span class="line">        int yh[][] = new int[n][];  //定义二维数组</span><br><span class="line">        int sum = 0;  //总和</span><br><span class="line">        </span><br><span class="line">        // 遍历二位数组</span><br><span class="line">        for(int i=0;i&lt;n;i++)&#123;</span><br><span class="line">            yh[i] = new int[i+1];  //申请空间，第i行由i+1个数（i从0开始)</span><br><span class="line">            for(int j=0;j&lt;n-i;j++)&#123;</span><br><span class="line">                System.out.print(&quot;  &quot;);  //大两个空格</span><br><span class="line">            &#125;</span><br><span class="line">            // 遍历一维数组</span><br><span class="line">            for(int j=0;j&lt;i+1;j++)&#123;</span><br><span class="line">                if(j==0 || j==yh[i].length-1)&#123;  //行首行末</span><br><span class="line">                    yh[i][j] = 1;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    // 当前一维数组的索引n元素的值，等于前一个数组索引n-1,加上索引n的值</span><br><span class="line">                    yh[i][j] = yh[i-1][j] + yh[i-1][j-1];</span><br><span class="line">                &#125;</span><br><span class="line">                // 格式化输出元素值</span><br><span class="line">                System.out.printf(&quot;%4s&quot;,yh[i][j]+&quot; &quot;);</span><br><span class="line">                // 求和</span><br><span class="line">                sum +=yh[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            // 换行</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        // 输出总和</span><br><span class="line">        System.out.print(&quot;\n&quot; + &quot;前十行和为：&quot; + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYh_tangle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建对象，调用yh()方法并传入参数（需要输出的行数)</span></span><br><span class="line">        <span class="type">Yh_tangle</span> <span class="variable">yt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Yh_tangle</span>();</span><br><span class="line">        yt.yh(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>打印指定矩阵的元素信息</strong></p>
<p>本次挑战将综合的前面几个章节所学的知识，实现按照顺时针螺旋顺序打印一个二维矩阵中所有元素信息。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Print</span> &#123;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">0</span> ;<span class="comment">//行数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span> ; <span class="comment">//列数</span></span><br><span class="line">    <span class="comment">//当前正在打印的数字是： arr[row][column]</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>, column = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 约定打印的方向</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">down</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">up</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> [][]arr = <span class="literal">null</span> ;</span><br><span class="line">    <span class="comment">//当前正在打印的方向（从“右”开始）</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">direction</span> <span class="operator">=</span> right;</span><br><span class="line">    <span class="comment">//当前正在打印第几圈</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">circle</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//当前正在打印第几个数字</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 输入行号、列号，并初始化二维数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">input</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//行数</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入行数：&quot;</span>);</span><br><span class="line">        m = input.nextInt();</span><br><span class="line">        <span class="comment">//列数</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入列数：&quot;</span>);</span><br><span class="line">        n = input.nextInt();;</span><br><span class="line">        arr = <span class="keyword">new</span> <span class="title class_">int</span>[m][n];</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 填充二维数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fillArray</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (count &lt; m * n) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        arr[row][column] = count;</span><br><span class="line">        <span class="keyword">switch</span> (direction) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="comment">// 向右打印时，打印的位置逐步右移</span></span><br><span class="line">        <span class="keyword">if</span> (column &lt; n - circle) &#123;</span><br><span class="line">        column++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//从“向右打印”切换到“向下打印”</span></span><br><span class="line">    direction = down;</span><br><span class="line">        row++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">if</span> (row &lt; m - circle) &#123;</span><br><span class="line">        row++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    direction = left;</span><br><span class="line">    column--;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">if</span> (column &gt; circle - <span class="number">1</span>) &#123;</span><br><span class="line">    column--;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    direction = up;</span><br><span class="line">    row--;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">if</span> (row &gt; circle) &#123;</span><br><span class="line">        row--;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        circle++;</span><br><span class="line">        direction = right;</span><br><span class="line">        column++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 打印内容</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i][j] &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                System.out.print(arr[i][j] + <span class="string">&quot; &quot;</span> + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.print(arr[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrint</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建对象，调用输入行号、填充二维数组以及打印三个方法</span></span><br><span class="line">        <span class="type">Print</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Print</span>();</span><br><span class="line">        p.input();</span><br><span class="line">        p.fillArray();</span><br><span class="line">        p.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="六、-面向对象基础"><a href="#六、-面向对象基础" class="headerlink" title="六、 面向对象基础"></a>六、 面向对象基础</h3><h5 id="6-1Java中的类"><a href="#6-1Java中的类" class="headerlink" title="6.1Java中的类"></a>6.1Java中的类</h5><p>在正式开始本实验之前，先给大家抛一个企业中经常问到的面试题：面向对象有哪些基本特征呢？ 🤔️</p>
<p>答案：封装、继承、多态。</p>
<p>对，没错这就是面向对象的特征。那这些都是什么意思呢？别急，本实验就带大家来看第一个特征<strong>封装</strong>，另外两个后面陆续会讲解，快拿起你的小本本，随我来学习吧 ~ 😎</p>
<p>前面我们已经给大家介绍了类和对象，当时我们没有介绍对象的特征<strong>封装</strong>。那到底什么是封装呢？它的好处又是什么呢？接下来让我一一为你揭秘。</p>
<p>我们都知道每一个人都有自己的小秘密，不想被别人所熟知。同样在 Java 世界中的对象也有自己的隐私，对象的隐私就是对象内部的实现细节。那如何保护这些隐私呢，这就需要我们的<strong>封装</strong>来实现了 😊。</p>
<p>🍒 封装的概念</p>
<p> 封装就是将类的某些信息隐藏在类内部，不允许外部程序直接访问，而是通过该类提供的方法来实现对隐藏信息的操作和访问。</p>
<p>🍒 封装的目的</p>
<ul>
<li><p>简化编程：是指封装可以让使用者不必了解具体类的内部实现细节，而只是要通过提供给外部访问的方法来访问类中的属性和方法。</p>
<p>例如，Java API 中的 <code>Arrays.sort()</code>方法，该方法可以用于给数组进行排序操作，开发者只需要将待排序的数组名放到 <code>Arrays.sort()</code>方法的参数中，该方法就会自动的将数组排好序。可见，开发者根本不需要了解 <code>Arrays.sort()</code>方法的底层逻辑，只需要简单的将数组名传递给方法即可实现排序。</p>
</li>
<li><p>增强安全性：是指封装可以使某个属性只能被当前类使用，从而避免被其他类或对象进行误操作。</p>
<p>例如，在 <code>Student.java</code> 的程序中，<code>Student</code> 的 <code>stuAge</code> 属性是 <code>public</code> 的形式体现的，但这样做实际存在着安全隐患：<code>TestStudent</code> 类（或在访问修饰符可见范围内的其他类）完全可以随意的对 <code>stuAge</code> 进行修改，如以下程序。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="comment">// 不能将我们的属性(字段)暴露给别人</span></span><br><span class="line">    <span class="comment">// public String stuName;</span></span><br><span class="line">    <span class="comment">// public int stuAge;</span></span><br><span class="line">    <span class="comment">// public String stuSex;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String stuName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> stuAge;</span><br><span class="line">    <span class="keyword">private</span> String stuSex;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 我们要将私有属性(字段)进行封装成 getter 和 setter 方法</span></span><br><span class="line">    <span class="comment">// 封装的设置操作</span></span><br><span class="line">    <span class="comment">// 设置的封装方法的名称：set + 属性名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        stuName = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(age&gt;<span class="number">1</span> &amp;&amp; age&lt;<span class="number">130</span>)&#123;</span><br><span class="line">            stuAge = age;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            stuAge = <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuSex</span><span class="params">(String sex)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(sex.equals(<span class="string">&quot;男&quot;</span>) || sex.equals(<span class="string">&quot;女&quot;</span>))&#123;</span><br><span class="line">            stuSex = sex;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            stuSex = <span class="string">&quot;女&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 封装的获取操作</span></span><br><span class="line">    <span class="comment">// 获取的封装方法的名称：get + 属性名</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStuName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuAge;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStuSex</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stuInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;大家好！我叫&quot;</span> + stuName + <span class="string">&quot;，今年&quot;</span> + stuAge + <span class="string">&quot;岁,我是一个&quot;</span> + stuSex + <span class="string">&quot;。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStudent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        s1.setStuName(<span class="string">&quot;吉吉&quot;</span>);</span><br><span class="line">        s1.setStuAge(<span class="number">9999</span>);</span><br><span class="line">        s1.setStuSex(<span class="string">&quot;人妖&quot;</span>);</span><br><span class="line">        <span class="comment">// s1.stuInfo();</span></span><br><span class="line">        System.out.println(<span class="string">&quot;大家好！我叫&quot;</span> + s1.getStuName() + <span class="string">&quot;，今年&quot;</span> + s1.getStuAge(<span class="number">0</span>) + <span class="string">&quot;岁,我是一个&quot;</span> + s1.getStuSex() + <span class="string">&quot;。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117421.png" alt="image-20260128111723183"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个学生类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String stuName;  <span class="comment">//学生姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> stuAge;      <span class="comment">//学生年龄</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给属性提供 getter/setter 方法</span></span><br><span class="line">    <span class="comment">// 获取stuName的值</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStuName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给 stuName 赋值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        stuName = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取 stuAge 的值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getStuAge</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给 stuAge 的赋一个合法的值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStuAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="comment">//如果年龄在合理范围内，则正常赋值</span></span><br><span class="line">        <span class="keyword">if</span>( age &gt;<span class="number">0</span> &amp;&amp; age &lt;<span class="number">120</span>)&#123;</span><br><span class="line">            stuAge = age;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; <span class="comment">//如果对年龄的赋值不合理，则设置为默认值为 1</span></span><br><span class="line">            age = <span class="number">1</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个学生测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStudent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">xiaolan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="comment">// 如果将stuAge赋值负数，setStuAge() 就会将stuAge设置为默认值 1 ，防止出现安全问题。</span></span><br><span class="line">        <span class="comment">// xiaolan.setStuAge(-10);</span></span><br><span class="line">        xiaolan.setStuAge(<span class="number">22</span>); <span class="comment">// 给年龄赋值</span></span><br><span class="line">        xiaolan.setStuName(<span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> xiaolan.getStuAge() ;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> xiaolan.getStuName();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;姓名：&quot;</span> + name + <span class="string">&quot;\t年龄：&quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="6-2构造的方法"><a href="#6-2构造的方法" class="headerlink" title="6.2构造的方法"></a>6.2构造的方法</h5><p><strong>构造方法的介绍</strong></p>
<p>哈喽，我们又见面了～</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117181.png" alt="image-20260128111730965"></p>
<p>前面我们给大家讲解了普通的方法。有普通，是不是就有特殊呢？当你这么思考的时候，说明你离大神又近了一步（哈哈哈，开个玩笑 😎）。</p>
<p><strong>构造方法的基本语法</strong></p>
<p>构造方法不同于普通方法，普通方法代表对象的行为，而构造方法是提供给系统用于创建对象的方法，同时也可以用于给属性赋值，相当于多个 setter。</p>
<p>实际在我们前面创建对象的时候就已经使用了构造方法了，一个新对象初始化的最终步骤是通过 new 关键字去调用对象的构造方法。那它到底长啥样呢？别急，待我慢慢给大家讲解。 😊</p>
<p><strong>构造方法</strong>（也称为构造函数）是一种特殊的方法，它具有以下特点：</p>
<ul>
<li>构造方法的方法名必须与类名相同。</li>
<li>构造方法没有返回类型，在方法名前不声明返回类型（包括 void）。</li>
<li>不能被 <code>static</code>、<code>final</code>、<code>abstract</code>、<code>synchronized</code>、<code>native</code> 修饰，且不能有 <code>return </code>语句返回值。</li>
</ul>
<p>🍒 构造方法的语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[访问修饰符] 构造方法名 ([参数列表]) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然构造方法在语法形式上没有返回类型，但其实构造方法是有返回值的，返回的是刚刚被初始化完成的当前对象的引用。既然构造方法返回被初始化对象的引用，为什么不写返回值类型呢？例如 <code>Student</code> 类构造方法为什么不写成 <code>public Student Student（参数列表）｛…｝</code>呢？因为 Java 设计人员把这种方法名（类名）和返回类型的类名相同的方法看成一个普通方法，只是名称 “碰巧” 相同罢了，编译器识别时也会认为它是一个方法。为了和普通方法进行区别，Java 设计人员规定构造方法不写返回值，编译器通过这一规定识别构造方法，而不是说构造方法真的没有返回值。</p>
<p><strong>构造方法的分类</strong></p>
<p>根据参数的不同，构造方法可分为以下三类：</p>
<p>🍒 <strong>隐式无参构造方法</strong></p>
<p>在定义类的时候如果没有给类定义一个构造方法，Java 编译器在编译的时候会默认提供一个隐式无参的构造方法。</p>
<p>请看下面 <code>Person</code> 类中就有一个隐式的构造方法，代码如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Person 类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 说话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">speak</span><span class="params">(String word)</span>&#123;</span><br><span class="line">        System.out.println(name +  <span class="string">&quot;说:&quot;</span> + word);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 Person 对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">// 调用系统提供的一个隐式无参的构造方法</span></span><br><span class="line">        person.name = <span class="string">&quot;小蓝&quot;</span>;</span><br><span class="line">        person.speak(<span class="string">&quot;english&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 <strong>显式无参构造方法</strong></p>
<p>在上面 <code>Person</code> 类中添加一个无参的构造方法，代码如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Person 类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无参构造方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 说话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">speak</span><span class="params">(String word)</span>&#123;</span><br><span class="line">        System.out.println(name +  <span class="string">&quot;说:&quot;</span> + word);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 Person 对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">// 调用提供的一个显式无参的构造方法</span></span><br><span class="line">        person.name = <span class="string">&quot;小蓝&quot;</span>;</span><br><span class="line">        person.speak(<span class="string">&quot;english&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🔔 注意：如果类中有一个自己编写的构造方法时，编译器就不会再提供那个默认的构造方法。此时如果希望还可以用无参构造方法来创建类的实例时，那么就必须在类中明确添加这个默认的无参构造方法，否则编译就报错。</p>
<p>类中没有无参构造方法，但是有一个带参的构造方法，通过 new 关键字来调用无参构造方法就会出错，代码如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义一个 Person 类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义两个参数的构造方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String n, <span class="type">int</span> a)</span>&#123;</span><br><span class="line">        name = n;</span><br><span class="line">        age = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 说话</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">speak</span><span class="params">(String word)</span>&#123;</span><br><span class="line">        System.out.println(name +  <span class="string">&quot;说:&quot;</span> + word);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 Person 对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">// 调用系统提供的一个隐式无参的构造方法</span></span><br><span class="line">        person.name = <span class="string">&quot;小蓝&quot;</span>;</span><br><span class="line">        person.speak(<span class="string">&quot;english&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译时出现错误，错误如下图所示：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117613.png" alt="image-20260128111740383"></p>
<p><strong>带参构造方法的使用</strong></p>
<p>除了创建完对象之后再给属性赋值外，我们还可以借助构造方法实现对对象属性的赋值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定一个 Student 类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String stuName;  <span class="comment">// 学生姓名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> stuAge;      <span class="comment">// 学生年龄</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> stuSex;      <span class="comment">// 学生性别  1：男   0：女</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> stuGrade;    <span class="comment">// 学生年级</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造方法，用户初始化对象的成员变量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> sex, <span class="type">int</span> grade)</span> &#123;</span><br><span class="line">        stuName = name;</span><br><span class="line">        stuAge = age;</span><br><span class="line">        stuSex = sex;</span><br><span class="line">        stuGrade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印学生的信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;姓名：&quot;</span> + stuName + <span class="string">&quot;\t性别：&quot;</span> + (stuSex==<span class="number">1</span> ? <span class="string">&quot;男&quot;</span>:<span class="string">&quot;女&quot;</span>)</span><br><span class="line">                            + <span class="string">&quot;\t年龄：&quot;</span> + stuAge + <span class="string">&quot;\t年级：&quot;</span> + stuGrade);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 定一个 TestStudent 类</span><br><span class="line"> * @author lanqiao</span><br><span class="line"> */</span><br><span class="line">public class TestStudent &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 创建 Student 对象并初始化</span><br><span class="line">        Student xiaolan = new Student(&quot;小蓝&quot;, 22, 1, 4);</span><br><span class="line">        xiaolan.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="6-3this-关键字"><a href="#6-3this-关键字" class="headerlink" title="6.3this 关键字"></a>6.3this 关键字</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法重载</span></span><br><span class="line">    <span class="comment">// 如何实现方法重载的原则：</span></span><br><span class="line">    <span class="comment">// 参数列表的个数不同或参数类型不同，可以实现方法重载</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 所有类创建时，默认会产生一个无参的构造方法</span></span><br><span class="line">    <span class="comment">// 当我们自定义构造方法后，默认构造方法将会被覆盖</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="comment">// this关键字表示类本身的意思</span></span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> MyTese01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFun01</span> &#123;</span><br><span class="line">    <span class="comment">// 无参的方法</span></span><br><span class="line">    <span class="comment">// 方法重载与构造方法的重载原理一模一样</span></span><br><span class="line">    <span class="comment">// 构造方法名称为类名</span></span><br><span class="line">    <span class="comment">// 方法的名称自定义</span></span><br><span class="line">    <span class="comment">// 实现方法重载的要求是：(1)、方法名相同  (2)、参数个数不同或参数类型不同</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span> + <span class="number">10</span>;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i * i;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// i的n次幂</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> m)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            num *= n;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        jisuan();</span><br><span class="line">        jisuan(<span class="number">5</span>);</span><br><span class="line">        jisuan(<span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>this 关键字的介绍</strong></p>
<p><code>this</code> 是 Java 的一个关键字，它表示 “指向当前对象的引用（后文简称为当前对象）”。</p>
<p>类中的每个非静态的方法（没有被 <code>static</code> 修饰）都会隐含一个 <code>this</code> 关键字，它指向调用这个方法对象。</p>
<p>当在方法中使用本类中的属性时，都会隐含地使用 <code>this</code> 关键字，当然也可以显式的指定 <code>this</code> 关键字。</p>
<p>例如，在前面小节中给 <code>stuAge</code> 属性赋值的语句，片段代码如下 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">  <span class="type">Student</span> <span class="variable">xiaolan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">  xiaolan.setStuAge(<span class="number">18</span>);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这条语句中的当前对象就是 xiaolan，因此在 <code>setStuAge()</code>方法中 <code>this</code> 就是 xiaolan。</p>
</blockquote>
<p>又或者如前面讲解的构造方法，片段代码如下 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义两个参数的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String n, <span class="type">int</span> a)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = n;</span><br><span class="line">  <span class="built_in">this</span>.age = a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里的 <code>this</code> 可以看做一个变量，它的值就是当前对象的引用，即在 new 的时候创建的那个对象。</p>
</blockquote>
<p>✨ 在实际开发时，<code>this</code> 通常用于以下两个场景：</p>
<ol>
<li>区分成员变量和局部变量，避免命名的烦恼。</li>
<li>调用其他构造方法。</li>
</ol>
<p>接下来我们就一起来看一下如何使用 <code>this</code> 区分成员变量和局部变量。</p>
<p>还记得在前面的实验中，我们是如何通过构造方法给成员变量赋值的吗？</p>
<p>片段代码如下 👇：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义带参数的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String n, <span class="type">int</span> a, <span class="type">boolean</span> s)</span>&#123;</span><br><span class="line">  name = n;</span><br><span class="line">  age = a;</span><br><span class="line">  sex = s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里有个疑问，是否可以将参数 <code>n</code>、<code>a</code>、<code>s</code> 和成员变量 <code>name</code>、<code>age</code>、<code>sex</code>设置为相同的名称，就像下面代码一样呢？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义带参数的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">boolean</span> sex)</span>&#123;</span><br><span class="line">  name = name;</span><br><span class="line">  age = age;</span><br><span class="line">  sex = sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>显然，编译器将无法区分<code>name = name;</code>、<code>age = age;</code>、<code>sex = sex;</code>这些代码中哪个变量是成员变量，哪个变量是参数，所以这也就是为什么我们之前就只能通过不同的变量名来区分。而现在，我们如果想保持成员变量和参数名称一致，就可以通过 this 来区分不同的 <code>name</code>、<code>age</code>、<code>sex</code>，代码如下所示 ：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> sex; <span class="comment">// 性别</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;     <span class="comment">// 年龄</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义带参数的构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">boolean</span> sex)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  <span class="built_in">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>✨ 注意：</p>
<p>在<code>this.name = name;</code>、<code>this.age = age;</code>、<code>this.sex = sex;</code> 这些代码中，因为 <code>this</code> 代表着当前对象，因此 <code>this.name</code>、<code>this.age</code>、<code>this.sex</code> 就代表了当前对象的 <code>name</code>、 <code>age</code>、<code>sex</code> 属性；而没有被 <code>this</code> 修饰的 <code>name</code>、<code>age</code> 、<code>sex</code>，就会根据变量的作用域，默认是方法参数中的 <code>name</code>、<code>age</code>、<code>sex</code>。</p>
<h5 id="6-4对象的初始化过程"><a href="#6-4对象的初始化过程" class="headerlink" title="6.4对象的初始化过程"></a>6.4对象的初始化过程</h5><p><strong>对象初始化</strong></p>
<p>初始化其实就是赋值，如我们常说的变量初始化、数组初始化，也就是对变量和数组进行赋值操作，然后在合适的位置进行使用。</p>
<p>那么对象初始化也就是给对象赋值咯 ~ 😊</p>
<p>完全正确 🌸</p>
<p>接下来就让我们来体会一下对象初始化的过程吧 ~</p>
<p>大家应该都知道，创建对象必须通过 ”new + 构造方法“ 格式，以 Student 类为例。</p>
<p>☘️ 通过无参构造方法创建对象，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">初始化其实就是赋值，如我们常说的变量初始化、数组初始化，也就是对变量和数组进行赋值操作，然后在合适的位置进行使用。</span><br><span class="line"></span><br><span class="line">那么对象初始化也就是给对象赋值咯 ~ 😊</span><br><span class="line"></span><br><span class="line">完全正确 🌸</span><br><span class="line"></span><br><span class="line">接下来就让我们来体会一下对象初始化的过程吧 ~</span><br><span class="line"></span><br><span class="line">大家应该都知道，创建对象必须通过 ”<span class="keyword">new</span> + 构造方法“ 格式，以 Student 类为例。</span><br><span class="line"></span><br><span class="line">☘️ 通过无参构造方法创建对象，代码如下：</span><br></pre></td></tr></table></figure>

<p>代码中可见，new Student() 就是通过无参构造方法创建 Student 的对象，然后将申请的地址空间赋值给 s ，那么对象 s 就可以调用类中成员了。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281117295.png" alt="image-20260128111753059"></p>
<p>运行结果如下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281118164.png" alt="image-20260128111802949"></p>
<p>从运行的结果可以看出，通过无参构造方法创建 Student 对象时，先执行无参构造方法中的语句，再将对象赋给变量 s，打印输出的数据获取的是属性声明时初始化的值。</p>
<p>☘️ 通过带参构造方法创建对象，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">3</span>, <span class="number">9</span>);</span><br><span class="line">System.out.println(s2);</span><br></pre></td></tr></table></figure>

<p><img data-src="C:/Users/14949/AppData/Roaming/Typora/typora-user-images/image-20260128111809463.png" alt="image-20260128111809463"></p>
<p>运行结果如下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281118290.png" alt="image-20260128111815034"></p>
<p>从运行的结果可以看出，通过全参构造方法创建 Student 对象时，先执行无参构造方法中的语句，并将参数数据进行传递，赋给属性后，再将对象赋给变量 s2，打印输出的数据获取的是构造方法传参的数据。</p>
<p><strong>初始化块</strong></p>
<p>这时我们还需要引出一个知识点，就是初始化块了 ~</p>
<p>🤔 那什么是初始化块呢？</p>
<p>初始化块就是专职用来对属性进行赋合理化值而存在的，该语句块没有限定的名字，在对象每次创建时都会执行的部分，当然了没有创建对象那么该语句块也不会被执行。</p>
<p>🌻 初始化块语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 属性赋值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>格式挺简单的就是一对大括号，而且可以放在类中任何地方，注意不能放在任何方法中。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281118030.png" alt="image-20260128111829758"></p>
<p>运行结果如下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281118457.png" alt="image-20260128111841226"></p>
<p>从运行的结果可以看出，不管通过无参构造方法或是带参构造方法创建对象，有初始化块存在时，必须先访问初始化块中的语句，然后再执行构造方法中语句，最后将申请的地址空间赋值给对象变量进行使用。</p>
<p>观察仔细的同学会看到，通过带参构造方法创建对象后，sex &#x3D; 3 是不合理的数据，要如何让它变得合理，前面的实验中已经讲解了封装，相信大家一定知道如何解决了 ~ 🤓</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 年龄</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 性别 1 - 男，0 - 女</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">sex</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 年级</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">grade</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用初始化块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入初始化区域&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;李斯&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">10</span>;</span><br><span class="line">        <span class="built_in">this</span>.sex = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.grade = <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无参构造方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;无参构造方法初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全参构造方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 姓名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> age 年龄</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sex 性别</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> grade 年级</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> sex, <span class="type">int</span> grade)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;带参构造方法初始化&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 给成员变量添加 setter/getter 方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(<span class="type">int</span> sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSex</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGrade</span><span class="params">(<span class="type">int</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getGrade</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [age=&quot;</span> + age + <span class="string">&quot;, grade=&quot;</span> + grade + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, sex=&quot;</span> + sex + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        System.out.println(s.toString());</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">3</span>, <span class="number">9</span>);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



































<h5 id="6-5方法重载"><a href="#6-5方法重载" class="headerlink" title="6.5方法重载"></a>6.5方法重载</h5><p><strong>方法重载的介绍</strong></p>
<p>在同一个类中，可以有两个或两个以上的方法具有相同的方法名，但它们的参数列表不同，这种形式被称为重载（overload）。</p>
<p>✨ 所谓参数列表不同包括以下三种情形：</p>
<ul>
<li>参数的数量不同。</li>
<li>参数的类型不同。</li>
<li>参数的顺序不同。</li>
</ul>
<p>只要三种情况满足一种并且方法名相同，就是重载哦 ~ 😊</p>
<p>⚠️ 注意：</p>
<ol>
<li>仅返回值不同不能视为方法重载，还会得到一个语法错误。而且重载的方法之间只是 “碰巧” 名称相同罢了，不具备连带效应。既然方法名称相同，在使用相同的名称调用方法时，编译器怎么确定调用哪个方法呢？这就要靠传入参数的不同确定具体调用哪个方法。</li>
<li>一个类的多个构造方法被视为重载，因为多个构造方法的方法名相同，而参数列表不同，符合重载的定义。</li>
</ol>
<p>例如下面这道题：</p>
<p>void show(int a, float b, char c){ }<br>下列哪些方法和给定方法重载了<br>A、int show(int x,float y,char z)   &#x2F;&#x2F;不可以，方法中的参数和给定方法中的参数相同<br>B、void show(float b,int a,char c)   &#x2F;&#x2F;可以，方法中的参数和给定方法中的参数不相同<br>C、void show(int c,float a,char b)   &#x2F;&#x2F;不可以，方法和给定方法完全一模一样<br>D、void show(int a,int b,int c)   &#x2F;&#x2F;可以，方法中的参数和给定方法中的参数类型不相同<br>E、double show()   &#x2F;&#x2F;可以，方法中的参数和给定方法中的参数个数不相同</p>
<p>在重载中复用已有的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法重载</span></span><br><span class="line">    <span class="comment">// 如何实现方法重载的原则：</span></span><br><span class="line">    <span class="comment">// 参数列表的个数不同或参数类型不同，可以实现方法重载</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 所有类创建时，默认会产生一个无参的构造方法</span></span><br><span class="line">    <span class="comment">// 当我们自定义构造方法后，默认构造方法将会被覆盖</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="comment">// this关键字表示类本身的意思</span></span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> MyTese01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFun01</span> &#123;</span><br><span class="line">    <span class="comment">// 无参的方法</span></span><br><span class="line">    <span class="comment">// 方法重载与构造方法的重载原理一模一样</span></span><br><span class="line">    <span class="comment">// 构造方法名称为类名</span></span><br><span class="line">    <span class="comment">// 方法的名称自定义</span></span><br><span class="line">    <span class="comment">// 实现方法重载的要求是：(1)、方法名相同  (2)、参数个数不同或参数类型不同</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span> + <span class="number">10</span>;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> i * i;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// i的n次幂</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">jisuan</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> m)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            num *= n;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        jisuan();</span><br><span class="line">        jisuan(<span class="number">5</span>);</span><br><span class="line">        jisuan(<span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>构造方法的重载</p>
<p>构造方法的主要作用是完成对象的初始化工作，它能够把定义对象时的参数传给对象。一个类可以定义多个构造方法，但需要根据参数的个数、类型或排列顺序来区分不同的构造方法，那就是构造方法重载，我们来演示一下。</p>
<h5 id="6-6Java中的包"><a href="#6-6Java中的包" class="headerlink" title="6.6Java中的包"></a>6.6Java中的包</h5><p><strong>包的概述</strong></p>
<p>计算机中存放了若干类型的文档，为了管理方便，操作系统采用了树形结构的文件夹存放这些文档，并对文档进行管理。例如，在 Windows 操作系统中，可以将硬盘划分为 C、D、E、F 四个分区（简称 C、D、E、F 盘）。为了达到分类管理的目的，可以将程序安装在 C 盘，把工作用到的文档放在 D 盘，把生活中产生的文档放在 E 盘，最后将 F 盘作为备份盘，用于备份文件。</p>
<p>这样做的好处是不仅可以将文档分门别类地存储，易于查找，同时还可以在不同的盘符下存放同名的文件，解决了文件名冲突的问题。</p>
<p>🍒 为了更好地组织类，Java 提供了<strong>包机制</strong>。</p>
<p>包是类的容器，用于分隔类名空间。如果没有指定包名，所有的类都属于一个默认的无名包。Java 中将实现相关功能的类组织到一个包中。例如，Java 中通用的工具类，一般都放在 <code>java.util</code> 包中。</p>
<p>总的来说，包有以下三个方面的作用：</p>
<ol>
<li><p>提供了类似于操作系统树形文件夹的组织形式，能分门别类地存储、管理类，易于查找并使用类。</p>
</li>
<li><p>解决了同名类的命名冲突问题。</p>
<p>例如，学生小蓝定义了一个类，类名叫 <code>TestStudent</code>，学生小刘也定义了一个叫 <code>TestStudent</code> 的类。如果在同一个文件夹下，就会产生命名冲突的问题。而使用了包的机制，就可以把小蓝定义的类存放在 <code>xiaolan</code> 包下，把小刘定义的类存放在 <code>xiaoliu</code> 包下，之后就可以先通过 <code>xiaolan</code> 和 <code>xiaoliu</code> 这样的包名，区分不同的目录，然后再使用 <code>TestStudent</code> 访问两个包中各自的类，从而解决了命名冲突的问题。</p>
</li>
<li><p>包允许在更广的范围内保护类、属性和方法。关于这方面的作用，接下来介绍访问权限的时候，大家就能体会到了。</p>
</li>
</ol>
<p>🍒 JDK 库中的包</p>
<p>JDK 类库中包含的众多类，就是使用包进行结构化分的。划分的形式就像在硬盘上嵌套有各级子目录一样，JDK 类库最高一级的包名是 <code>java</code> 和 <code>javax</code>，其下一级的包名有 <code>lang、util、net、io</code> 等，如图所示。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281118631.png" alt="image-20260128111855382"></p>
<p>下面简要介绍 JDK 类库中不同包的主要功能。</p>
<ul>
<li><code>java.lang</code>：lang 是 language 的简写，这个包提供 Java 语言的基础类，例如 String、Math、Integer、System 和 Thread 等，该包中的所有类无须显式导入便可使用。</li>
<li><code>java.util</code>：util 是 utility 的简写，组织了 Java 的工具类，包含集合、事件模型、日期和时间设置、国际化和各种实用工具类。</li>
<li><code>java.io</code>：io 是 input 和 output 的合并简写，指输入和输出，组织了数据流、序列化和文件系统相关的类。</li>
<li><code>java.net</code>：net 即网络，这个包组织了为实现网络应用程序而提供的类。</li>
<li><code>java.awt</code>：抽象窗口工具集(Abstract Window Toolkit)，包含用于创建用户界面和绘制图形图像的类。</li>
</ul>
<p><strong>包的创建</strong></p>
<p>🍒 包的语法</p>
<p>程序员可以使用 <code>package</code> 关键字指明源文件中的类属于哪个具体的包。</p>
<p>包的语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package pkg1[．pkg2[．pkg3…]];</span><br></pre></td></tr></table></figure>

<p>包的命令规则：</p>
<p>通常包名全部用小写字母，这与类名以大写字母开头且各单词的首字母亦大写的命名约定有所不同。</p>
<p>关于包的命名，现在使用最多的规则是使用翻转的 internet 域名（不含 www、ftp 等访问协议）。</p>
<p>例如 abc 公司的域名为 abc.com，该公司开发部门正开发一个名为 fly 的项目，在这个项目中有一个工具类的包，则这个工具包的包名可以为：<code>com.abc.fly.tools</code>。</p>
<p>⭐ 注意：</p>
<ul>
<li>程序中如果有 <code>package</code> 语句，该语句一定是源文件中的第一条可执行语句，它的前面只能有注释或空行。另外，一个文件中最多只能有一条 package 语句，即只能把一个类放在一个包中。</li>
<li>包的名字应该有层次关系，各层之间以<code>.</code>分隔。</li>
</ul>
<p>🍒 package 的使用</p>
<p>之前我们在编辑完成 Java 源文件后，直接在文件所在目录下（<code>/home/project</code>），执行 <code>javac</code> 和 <code>java</code> 命令即可，但是当存在包之后，运行方式有所不同，来看一下：</p>
<p>🌱 首先，需要在 <code>/home/project</code> 目录下依次建立 <code>org</code>、<code>lanqiao</code> 和 <code>test</code> 子目录，然后在 <code>org/lanqiao/test</code> 子目录下创建 <code>TestPackage.java</code> 源文件，如图所示。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281119697.png" alt="image-20260128111903449"></p>
<p>这里暂时把 <code>project</code> 看作项目名，也就是说直接在 <code>project</code> 下创建包。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.test;    <span class="comment">// 声明包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPackage</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;package org.lanqiao.test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🔔 再次温馨提示：</p>
<p>创建包时注意以下 3 点：<br>1.创建包时用 <code>package</code> 关键字。<br>2.如果有包声明，那么它一定作为源代码的第一行，它前面要有内容只能是注释或空行。<br>3.包的名称一般为小写，而且要有意义。</p>
<p>你也可以使用下方命令创建文件夹及文件（后续试验将不再提供命令）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mkdir -p org/lanqiao/test/</span><br><span class="line">touch org/lanqiao/test/TestPackage.java</span><br></pre></td></tr></table></figure>

<p>🌱 然后，要编译运行这个程序，执行 <code>javac org/lanqiao/test/TestPackage.java</code> 命令编译这个 java 源文件。运行时，执行 <code>java org.lanqiao.test.TestPackage</code>。**特别注意，运行时用<code>·</code>符号分割包路径。**运行结果如图所示：</p>
<p>🌱 然后，要编译运行这个程序，执行 <code>javac org/lanqiao/test/TestPackage.java</code> 命令编译这个 java 源文件。运行时，执行 <code>java org.lanqiao.test.TestPackage</code>。**特别注意，运行时用<code>·</code>符号分割包路径。**运行结果如图所示：</p>
<p>通过实验可以发现，当使用包管理程序后，程序的编译和运行方式也随即发生了改变。</p>
<p><strong>包的导入</strong></p>
<p>接下来，我们来看一下下面这种情况。</p>
<p>在 <code>/home/project</code> 目录下在新建 <code>TestImport.java</code> 源文件，文件结构如图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281119136.png" alt="image-20260128111912048"></p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestImport</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestPackage</span> <span class="variable">testPackage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPackage</span>();</span><br><span class="line">        testPackage.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>随后，编译程序会提示找不到 <code>TestPackage</code> 类的错误，如图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281119169.png" alt="image-20260128111943019"></p>
<p>其原因在于，<code>TestPackage</code> 这个类已经被打包到 <code>org\lanqiao\test</code> 目录下，如果在 <code>TestImport</code> 代码中不做任何操作，是找不到 <code>TestPackage</code> 类的。</p>
<p>那么我们需要来解决上述问题，如何能正确的在 TestImport 类中导入 TestPackage 类。</p>
<p>🍄 导入不同包中的类有两种方法：</p>
<ul>
<li>一种非常直观的方法就是使用完整类名引用类，即 <strong>包名+类名</strong>（也称为类的全限定名）。</li>
<li>另一种是导入包的形式，导入包的语法格式：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import 包名.类名|*;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>提示：使用类的全限定名的方法虽然直观，但书写的内容多，且当使用的类比较多时，编辑和阅读都非常困难，因此并不推荐。</p>
</blockquote>
<p>✨ 这里的包名、类名既可以是 JDK 提供的包和类的名称，也可以是用户自定义的包名和类名。</p>
<p>🍒 <strong>使用完整类名（包名 + 类名）引用类</strong></p>
<p>修改已存在的 <code>TestImport</code> 类的代码，其他文件和目录全部不变，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 引用包</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestImport</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 TestPackage 对象，使用类的全限定名</span></span><br><span class="line">        org.lanqiao.test.<span class="type">TestPackage</span> <span class="variable">testPackage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">org</span>.lanqiao.test.TestPackage();</span><br><span class="line">        testPackage.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行，结果下图所示：👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281120094.png" alt="image-20260128112017852"></p>
<p>🍒 <strong>import 导入的方式</strong></p>
<p>修改已存在的 <code>TestImport</code> 类的代码，其他文件和目录全部不变，代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.lanqiao.test.TestPackage; <span class="comment">// 导入 org.lanqiao.test 包中的 TestPackage</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 引用包</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestImport</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 TestPackage 对象</span></span><br><span class="line">        <span class="type">TestPackage</span> <span class="variable">testPackage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPackage</span>();</span><br><span class="line">        testPackage.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>🍒 <strong>批量导入多个类</strong></p>
<p>如果需要导入一个包下的多个类，那么同样可以使用 <code>import</code> 来帮助我们实现。</p>
<p>在 <code>org/lanqiao/test</code> 子目录下在创建 <code>Student.java</code> 源文件，结构如图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281122743.png" alt="image-20260128112200716"></p>
<p>源代码如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;小蓝是一名优秀的学生！！！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改 <code>TestImport</code> 类的代码，需要在 <code>main</code> 中再创建一个 <code>Student</code> 对象，并调用 <code>Student</code> 中的 <code>print</code> 方法，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入 org.lanqiao.test 包中的 Student 类</span></span><br><span class="line"><span class="keyword">import</span> org.lanqiao.test.Student;</span><br><span class="line"><span class="comment">// 导入 org.lanqiao.test 包中的 TestPackage 类</span></span><br><span class="line"><span class="keyword">import</span> org.lanqiao.test.TestPackage;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lanqiao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestImport</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建对象</span></span><br><span class="line">        <span class="type">TestPackage</span> <span class="variable">testPackage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPackage</span>();</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"></span><br><span class="line">        testPackage.show();</span><br><span class="line">        student.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行，结果如下图所示 👇：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281122120.png" alt="image-20260128112223456"></p>
<p>✨ 大家来观察下面这段代码，看看有什么共性之处。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入 org.lanqiao.test 包中的 Student 类</span></span><br><span class="line"><span class="keyword">import</span> org.lanqiao.test.Student;</span><br><span class="line"><span class="comment">// 导入 org.lanqiao.test 包中的 TestPackage 类</span></span><br><span class="line"><span class="keyword">import</span> org.lanqiao.test.TestPackage;</span><br></pre></td></tr></table></figure>

<p>上面的这段代码共性部分 <code>import org.lanqiao.test</code>，那如果还需要用到这个包下的其他类，这样我们也可以使用 Java 提供了一种批量导包的方法，通过通配符 <code>*</code> 引入包中的所有类，例如上面这段代码就可以写成：<code>import org.lanqiao.test.*</code>。注意：这种批量导入的方式并不适合在企业级项目中进行使用，会降低执行效率，要慎重哦 ~</p>
<p><strong>实验总结</strong></p>
<p>本次实验主要讲解包的使用，对于包我们总结如下：</p>
<ol>
<li><p>包的创建</p>
<ul>
<li>需要使用 package 关键字。</li>
<li>如果有包声明，那么它一定作为源代码的第一行，它前面要有内容只能是注释或空行。</li>
<li>包的名称一般为小写，而且要有意义。</li>
</ul>
</li>
<li><p>包的引用</p>
<ul>
<li>使用完整类名也就是类的全限定名引用类，即为包名 + 类名。</li>
<li>使用关键字 import 导入包。</li>
<li>导入同一个包中多个类时，可以使用通配符 <code>*</code> 来导入包中的所有类。</li>
</ul>
</li>
<li><p>包使用注意点</p>
<ul>
<li><p>包的导入只能导入当前目录中的类，而不能导入其子目录中的类。</p>
<p>例如，在导入 “ java.util.* ” 时，只会导入 “ java.util ” 包中的所有类，但不能导入 “ java.util.function ” 包中的类。</p>
</li>
<li><p>import 语句需要放在 package 语句后，在 class 类定义之前。</p>
</li>
<li><p>通常情况下，对于 “ java.lang ” 包中的所有公共类，都是由系统默认导入到程序中，不需要程序员显式的导入。</p>
</li>
</ul>
</li>
</ol>
<h5 id="6-7访问控制"><a href="#6-7访问控制" class="headerlink" title="6.7访问控制"></a>6.7访问控制</h5><p>访问修饰符介绍</p>
<p>Java 语言中的访问权限修饰符有 4 种，但却只有 3 个关键字。因为不写访问权限修饰符时，在 Java 中被称为默认权限（包权限），本课程中以 <code>Default</code> 代替。其他 3 个访问权限修饰符分别为 <code>private</code>、<code>protected</code> 和 <code>public</code>。</p>
<p>🤔️ 那访问修饰符在什么地方用呢？</p>
<p>在定义类、属性、方法时都需要指定访问修饰符，以此来限定类、属性、方法的可访问范围，是不是感觉访问修饰符很强大。</p>
<p>是的，它就是这么强大。</p>
<p>接下来我们每个来分析一下这些访问修饰符： 👇</p>
<ul>
<li><p><code>private</code>：私有的</p>
<p>可以修饰属性、方法。被 private 修饰的类成员只能在定义它们的类中使用，在其他类中都不能访问。</p>
<p>还记得我们前面介绍封装的时候，已经使用了 private 这个访问权限修饰符。对于封装良好的程序而言，一般将属性私有化，提供公有的 getter 和 setter 方法，供其他类调用。</p>
</li>
<li><p><code>Default</code>：默认权限不使用修饰符</p>
<p>不写任何权限关键字就代表使用默认权限，属性、构造方法、普通方法都能使用默认权限。默认权限也称为同包权限。同包权限的元素只能在定义它们的类中以及同包的类中被调用。</p>
</li>
<li><p><code>protected</code>：受保护的</p>
<p>可以修饰属性、方法，能在定义它们的类中以及同包的类中调用被 protected 修饰的成员。如果有不同包中的类想调用它们，那么这个类必须是这些成员所属类的子类。关于子类及相关概念，将会在后续讲解继承的时候详细介绍。</p>
</li>
<li><p><code>public</code>：公共的</p>
<p>可以修饰属性、方法和类。被 public 修饰的成员，可以在任何一个类中被调用，是权限最大的访问权限修饰符。</p>
</li>
</ul>
<p>访问权限修饰符使用范围如下表所示： 👇</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>类内部</th>
<th>同一个包中</th>
<th>子类</th>
<th>任何地方</th>
</tr>
</thead>
<tbody><tr>
<td>private</td>
<td>Yes</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Default</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
<td></td>
</tr>
<tr>
<td>protected</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>public</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody></table>
<blockquote>
<p>说明：访问修饰符在遇到反射的时候，访问权限会被突破，即在特定情况下会失效。</p>
</blockquote>
<p>接下来我们分别来看看修饰符用在类上和类中。</p>
<h5 id="6-8复习于挑战"><a href="#6-8复习于挑战" class="headerlink" title="6.8复习于挑战"></a>6.8复习于挑战</h5><p>本章主要学习面向对象的基础，总结如下：</p>
<ol>
<li><p>封装（面向对象三大特征之一）</p>
<p>将类的某些信息隐藏在类内部，不允许外部程序直接访问，而是通过该类提供的方法来实现对隐藏信息的操作和访问。</p>
<p>目的是为了简化编程和增强安全性。</p>
<p>好处：</p>
<ul>
<li>只能通过规定的方法访问数据；</li>
<li>隐藏类的实例细节，方便修改和实现。</li>
</ul>
<p>实现步骤：</p>
<ul>
<li>修改属性的可见性（使用 <code>private</code> 修饰）</li>
<li>创建 <code>getter/setter</code> 方法，用于属性的读写，一般此方法是用 <code>public</code> 修饰。</li>
<li>必要时可以在 <code>getter/setter</code> 方法添加逻辑控制语句，保证属性的合法性。</li>
</ul>
</li>
<li><p>构造方法</p>
<p>提供给系统用于创建对象的方法，同时也可以给用于给属性赋值，相当于多个 setter。</p>
<p>需要遵循：</p>
<ul>
<li>构造方法的方法名必须与类名相同。</li>
<li>构造方法没有返回类型，在方法名前不声明返回类型（包括 void）。</li>
<li>不能被 <code>static</code>、<code>final</code>、<code>abstract</code>、<code>synchronized</code>、<code>native</code> 修饰，且不能有 <code>return </code>语句返回值。</li>
</ul>
</li>
<li><p>this 关键字</p>
<p>表示指向当前对象的引用。</p>
<p>可以区分成员变量和局部变量，避免命名的烦恼。</p>
<p>可以在构造方法中调用其他重载的构造方法。</p>
</li>
<li><p>方法的重载</p>
<p>原则：</p>
<ul>
<li>方法名称相同；</li>
<li>参数列表不同（参数类型、参数个数和参数顺序不同，与参数的名称没有关系</li>
<li>修饰符和返回类型可以相同也可以不同</li>
</ul>
</li>
<li><p>包</p>
<p>包的创建使用关键字 package ，需要出现在源文件的第一行，前面可以有注释或空行。</p>
<p>包名的命名一般都是小写</p>
<p>包的导入使用关键字 import ，可以单个类引用，也可以批量类引用。</p>
</li>
<li><p>访问控制</p>
<p>主要有 private 、protected、Default、public 4 种，不过 Default 不用标识，表示不加修饰符的默认情况下。</p>
<ul>
<li>被 private 修饰的成员，只能在本类中进行访问；</li>
<li>被 protected 修饰的成员，可以在本包中或不同包的子类中进行访问；</li>
<li>被 public 修饰的成员，可以在任何地方进行访问；</li>
<li>默认情况（Default）的成员，只能在本包中进行访问。</li>
</ul>
<p>范围大小：private &lt; Default &lt; protected &lt; public</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281122524.png" alt="image-20260128112240688"></p>
<p><strong>手动实现队列</strong></p>
<p><strong>文件组成结构如下</strong></p>
<h3 id="七、String字符串"><a href="#七、String字符串" class="headerlink" title="七、String字符串"></a>七、String字符串</h3><h5 id="7-1JavaAPI及API文档"><a href="#7-1JavaAPI及API文档" class="headerlink" title="7.1JavaAPI及API文档"></a>7.1JavaAPI及API文档</h5><h5 id="7-2String类"><a href="#7-2String类" class="headerlink" title="7.2String类"></a>7.2String类</h5><ul>
<li><strong>通过字符串处理和循环操作获取火车站点的中文名称</strong></li>
</ul>
<p><strong>TrainSiteName.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrainSiteName</span> &#123; </span><br><span class="line"><span class="number">2</span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="number">3</span>	<span class="type">String</span> <span class="variable">datas</span> <span class="operator">=</span> <span class="string">&quot;@bjb|北京北|VAP|beijingbei|bjb|0@bjd|北京东|BOP|beijingdong|bjd|1@bji|北京|BJP|beijing|bj|2@bjn|北京南|VNP|beijingnan|bjn|3@bjx|北京大兴|IPP|beijingdaxing|bjdx|4@bjx|北京西|BXP|beijingxi|bjx|5@bjy|北京朝阳|IFP|beijingchaoyang|bjcy|6@cqb|重庆北|CUW|chongqingbei|cqb|7@cqb|重  庆北|WAI|chongqingbei|cqb|8@cqi|重庆|CQW|chongqing|cq|9@cqn|重庆南|CRW|chongqingnan|cqn|10@cqx|重  庆西|WWI|chongqingxi|cqx|11@cqx|重庆西|CXW|chongqingxi|cqx&quot;</span>;</span><br><span class="line"><span class="number">4</span>	<span class="comment">// Java中String.split() 切割符 | 有特殊作用，如果我们需要切割竖线(|) 必须写成&quot;\\|&quot; </span></span><br><span class="line"><span class="number">5</span>        String[] sites = datas.split(<span class="string">&quot;\\|&quot;</span>); </span><br><span class="line"><span class="number">6</span>        <span class="comment">// System.out.println(sites.length);  // 获取切割后字符串数组的长度 </span></span><br><span class="line"><span class="number">7</span>        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; sites.length; i=i+<span class="number">5</span>)&#123; </span><br><span class="line"><span class="number">8</span>            System.out.println(sites[i]); </span><br><span class="line"><span class="number">9</span>        &#125; </span><br><span class="line"><span class="number">10</span>    &#125;</span><br><span class="line"><span class="number">11</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>随机取名操作</li>
</ul>
<p><strong>RandName.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>	<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RandName</span> &#123;</span><br><span class="line"><span class="number">2</span>	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="number">3</span>	<span class="type">String</span> <span class="variable">xing</span> <span class="operator">=</span> <span class="string">&quot;赵、钱、孙、李、周、吴、郑、王、冯、陈、褚、卫、蒋、沈、韩、杨、朱、秦、尤、许、何、吕、施、张、孔、曹、严、华、金、魏、陶、姜&quot;</span>;</span><br><span class="line"><span class="number">4</span>	<span class="type">String</span> <span class="variable">ming</span> <span class="operator">=</span> <span class="string">&quot;楷瑞、晋璋、雨松、智胜、文逸、瀚辰、泽天、圣诚、彬野、风旭、韵羽、柏康、江潮、振豪、翰泰、雨棋、晋云、德闲、棋观、远畅、博亦、彬鸿、晓明、泽元、博伦、德</span></span><br><span class="line"><span class="string">明、翰辰、亦融、晓诚、俊朋、志高、智辰、钦明、光辉、智远、星瑞、桦瑜、凌高、弘晋&quot;</span>;</span><br><span class="line"><span class="number">5</span>	String[] xings = xing.split(<span class="string">&quot;、&quot;</span>);</span><br><span class="line"><span class="number">6</span>	String[] mings = ming.split(<span class="string">&quot;、&quot;</span>);</span><br><span class="line"><span class="number">7</span>	<span class="comment">// System.out.println(&quot;姓数组一共有：&quot; + xings.length); </span></span><br><span class="line"><span class="number">8</span>        <span class="comment">// System.out.println(&quot;名数组一共有：&quot; + mings.length); </span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span>	<span class="comment">// 数学类(Math)</span></span><br><span class="line"><span class="number">11</span>	<span class="comment">// Math.random() 产生0~1之间的值，但不包含末尾</span></span><br><span class="line"><span class="number">12</span>	<span class="comment">// System.out.println(Math.random());</span></span><br><span class="line"><span class="number">13</span>	<span class="type">int</span> <span class="variable">xingNum</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random() * xings.length); </span><br><span class="line"><span class="number">14</span>        <span class="type">int</span> <span class="variable">mingNum</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random() * mings.length); </span><br><span class="line"><span class="number">15</span></span><br><span class="line"><span class="number">16</span>        System.out.println(<span class="string">&quot;我们产生的随机姓名为：&quot;</span> + xings[xingNum] + mings[mingNum]);</span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="number">18</span>    &#125;</span><br><span class="line"><span class="number">19</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> MyTese01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NameGenerator</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] firstNames = &#123;<span class="string">&quot;杨&quot;</span>, <span class="string">&quot;钟&quot;</span>, <span class="string">&quot;张&quot;</span>, <span class="string">&quot;于&quot;</span>, <span class="string">&quot;祁&quot;</span>, <span class="string">&quot;宋&quot;</span>, <span class="string">&quot;陈&quot;</span>, <span class="string">&quot;李&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] lastNames = &#123;<span class="string">&quot;吉庆&quot;</span>, <span class="string">&quot;仕浪&quot;</span>, <span class="string">&quot;耀辉&quot;</span>, <span class="string">&quot;浩&quot;</span>, <span class="string">&quot;佳杰&quot;</span>, <span class="string">&quot;三&quot;</span>, <span class="string">&quot;洪&quot;</span>, <span class="string">&quot;牛&quot;</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(generateName());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">xing</span> <span class="operator">=</span> <span class="string">&quot;赵、钱、孙、李、周、吴、郑、王、冯、陈、褚、卫、蒋、沈、韩、杨、朱、秦、尤、许、何、吕、施、张、孔、曹、严、华、金、魏、陶、姜&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">ming</span> <span class="operator">=</span> <span class="string">&quot;楷瑞、晋璋、雨松、智胜、文逸、瀚辰、泽天、圣诚、彬野、风旭、韵羽、柏康、江潮、振豪、翰泰、雨棋、晋云、德闲、棋观、远畅、博亦、彬鸿、晓明、泽元、博伦、德明、翰辰、亦融、晓诚、俊朋、志高、智辰、钦明、光辉、智远、星瑞、桦瑜、凌高、弘晋&quot;</span>;</span><br><span class="line"></span><br><span class="line">        String[] xings = xing.split(<span class="string">&quot;、&quot;</span>);  </span><br><span class="line">        String[] mings = ming.split(<span class="string">&quot;、&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;姓数组一共有：&quot;</span> + xings.length);</span><br><span class="line">        System.out.println(<span class="string">&quot;名数组一共有：&quot;</span> + mings.length);</span><br><span class="line">        <span class="comment">// 数学类(Math)</span></span><br><span class="line">        System.out.println(Math.random());  <span class="comment">//Math.random()随机数 0~1之间的值，但是不包含1</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">xingName</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random() * xings.length);</span><br><span class="line">        <span class="type">int</span> <span class="variable">mingName</span> <span class="operator">=</span> (<span class="type">int</span>)(Math.random() * mings.length);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;我们产生的名字为：&quot;</span> + xings[xingName] + mings[mingName]);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">rand</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">firstName</span> <span class="operator">=</span> firstNames[rand.nextInt(firstNames.length)];</span><br><span class="line">        <span class="type">String</span> <span class="variable">lastName</span> <span class="operator">=</span> lastNames[rand.nextInt(lastNames.length)];</span><br><span class="line">        <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>字符替换</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">con</span> <span class="operator">=</span> <span class="string">&quot;小鲁班，你个傻逼，真是垃圾，一直送人头，能不能好好玩！&quot;</span>;</span><br><span class="line">        <span class="comment">// String.replace(查找需要的字符,查找到后替换内容的字符)；</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> con.replace(<span class="string">&quot;傻逼&quot;</span>, <span class="string">&quot;**&quot;</span>).replace(<span class="string">&quot;垃圾&quot;</span>, <span class="string">&quot;**&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;未被处理的内容：&quot;</span> + con);</span><br><span class="line">        System.out.println(<span class="string">&quot;处理后的内容：&quot;</span> + data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>String 对象创建的基本结构</strong></p>
<p><code>String</code> 类大家一定不陌生，前面写了那么多的 <code>Java</code> 文件，都会使用到 <code>String</code> 类对吧。</p>
<p>而接下来我们需要详细的给大家讲解一下 <code>String</code> 类。 😀</p>
<p><code>String</code> 字符串，属于引用类型，对于引用类型而言，就是以对象的形式存在的，也就是说需要申请内存空间。</p>
<p>一般我们会这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String name = &quot;小桃子&quot;;</span><br></pre></td></tr></table></figure>

<p>这种格式是 <code>String</code> 创建对象最简化的方式，刚才说了以对象的形式存在，就是需要申请内存空间。结构如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281123818.png" alt="image-20260128112302183"></p>
<p><code>String</code> 申请了一块内存空间，目前这块空间的名字为 <code>name</code> ，而在这块空间上存放的字符串是 <code>小桃子</code> 。</p>
<p>说到这里呢，老师需要考考大家之前学过的知识了，问题就是，对象是如何创建的？</p>
<p>🙋‍♂️ 老师这个我知道，对象创建就是 <code>new + 构造方法</code> 。</p>
<p>这位同学回答的很好 🌸 ，忘了的同学不应该哦，赶紧回头把之前的知识巩固一下。</p>
<p>😲 有同学可能有疑问了，老师之前的语句中并没有用到 <code>new</code> ，但是对象却是创建了呀？</p>
<p>没错，这就是 <code>String</code> 类特别的地方了，它可以省略 <code>new</code> 的书写，同样可以完成 <code>new</code> 的内存申请，所以之前说了这种格式是 <code>String</code> 创建对象最简化的格式。</p>
<p>当然了，我们也可以通过 <code>new</code> 的方式来创建 <code>String</code> 对象。首先，我们先来看一下 <code>API</code> 提供给我们的 <code>String</code> 类有哪些构造方法，<code>String</code> 类是在 <code>java.lang</code> 包中，所有无须导包，可以直接使用，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281123160.png" alt="image-20260128112313054"></p>
<p>图中显示的构造方法只是一部分，不过要注意的是已标明 <strong>Deprecated.</strong> 表示已经过时，不建议使用了。</p>
<p>接下来，我们通过代码来分析几个常用的构造方法创建字符串对象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 采用不同的构造方法创建 String 对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// public String() API 中提供的无参构造方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line">        System.out.println(s1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// public String(char[] value) API 中提供的带参构造方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>&#125;);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* public String(char[] value, int offset, int count)</span></span><br><span class="line"><span class="comment">         * offset 开始下标</span></span><br><span class="line"><span class="comment">         * count 提取长度</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>&#125;, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// public String(String original) API 中提供的带参构造方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;小桃子&quot;</span>);</span><br><span class="line">        System.out.println(s4);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestString</span> <span class="variable">ts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestString</span>();</span><br><span class="line">        ts.method1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>简单分析一下上述代码，在 <code>TestString</code> 类中添加了一个 <code>method1()</code> 的方法，在方法中我们采用了 <code>4</code> 种不同的构造方法创建 <code>String</code> 对象，无参构造方法不用多说，之前的代码中大家应该也用了很多了吧。带参的构造方法就比较多了，参数可以是数组，也可以是字符串等等。像 <code>byte</code> 类型数组， <code>char</code> 类型数组，<code>int</code> 类型数组，都可以将它们转换为字符串，代码中是以字符数组为例，将字符数组转换为字符串，也可以 <code>new String(new char[]{&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;}, 1, 3)</code> 指定从下标 <code>1</code> 开始，提取 <code>3</code> 个数组元素，将其转换为字符串。最后在 <code>main</code> 方法中调用 <code>method1()</code> 方法查看运行结果。其他的带参的构造方法可以查看 String API 。</p>
<p><strong>String 对象的比较</strong></p>
<p>明白了 <code>String</code> 对象创建的结构之后，我们需要来看看以下几种情况：</p>
<p>🍒 情况一：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String s1 = new String();</span><br><span class="line">String s2 = &quot;&quot;;</span><br></pre></td></tr></table></figure>

<p>字符串对象 <code>s1</code> 和 <code>s2</code> ，打印输出的结果是一样的，不过这只是表面现象，然而实际结构图如下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281123450.png" alt="image-20260128112327685"></p>
<p>所以说，<code>s1</code> 申请新的地址空间，原因是使用了 <code>new</code> 关键字；而 <code>s2</code> 赋值的是字符常量值，指向的是常量池，所以执行 <code>s1 == s2</code> 时，判断两个对象是否指向同一个地址空间，返回的肯定是 <code>false</code> 。</p>
<p>🍒 情况二：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<p>s2 虽然指向的是常量池，但这个常量池也是申请空间的，而 s3 还不是字符串对象，只是字符串变量，所以 s3 是不能访问 String 类中任何方法的。好了，这里又要涉及之前学过的基本知识了，类的普通方法需要如何调用？</p>
<blockquote>
<p>访问类中的成员，需要通过 对象名.成员名 的格式才能进行访问。</p>
</blockquote>
<p>😦 如果忘了同样需要回头，去复习一下之前所学的知识哦。</p>
<p>🍒 情况三：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;小桃子&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="string">&quot;小桃子&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>如果你已经理解了之前的两种情况，那么到了情况三，你可以很肯定当执行 <code>s4 == s5</code> 时，返回的结果是 <code>false</code>，很好，值得表扬！ 🌸</p>
<p>但情况三中需要强调的，也是面试中经常会问到大家的是，<code>String s4 = new String(&quot;小桃子&quot;);</code> 这条语句中<strong>创建了几个对象？</strong></p>
<p>我们通过以下的结构图来分析一下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281123895.png" alt="image-20260128112340206"></p>
<p>从语句中我们可以看到，采用的是 <code>String</code> 类中提供的 <code>public String(String original)</code> 构造方法，那么参数完成了 <code>String original = &quot;小桃子&quot;</code> ，再结合图可以看到，首先，参数 original 需要申请常量池进行字符串常量值的存放，那就是一个对象是吧；然后 s4 使用 new 申请新的地址空间，来引用常量池中的值「小桃子」，那么这是第二个对象吧，所以之前的问题的答案就是<strong>该语句创建 2 个对象</strong>。</p>
<p>但是，如果说 <code>String s5 = &quot;小桃子&quot;;</code> 语句，放在了 <code>String s4 = new String(&quot;小桃子&quot;);</code> 这个语句之前，那么刚才这个问题的答案就不一样了，为什么呢？ <code>String s5 = &quot;小桃子&quot;;</code> 和 <code>String original = &quot;小桃子&quot;</code> 传参操作，s5 和 original 指向的是同一个地址空间，因为当 s5 申请常量池之后，original 再来申请时，系统会根据字符串常量值，进行判断，如果值一致，那么只需要将已申请地址的引用返回给 original 即可，如果值不一致，那么就给一块新的地址。因此，<code>String s4 = new String(&quot;小桃子&quot;);</code> 语句执行时，参数并没有申请新的地址空间，只有 new 申请了新的地址空间，结果就是<strong>该语句创建了 1 个对象</strong>。</p>
<p>同学们自己动手先写写代码可以在之前创建的 <code>TestString</code> 类中添加一个 <code>method2()</code> 方法，好好体会一下，再看参考代码。 🤓</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 不同方式创建 String 对象进行比较</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// s1 和 s2 打印输出的结果看起来是一样的，但是指向的地址空间却是不一样的。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// s3 未申请地址空间，所以打印输出的是 null，null 不是字符串常量值。</span></span><br><span class="line">        <span class="comment">// null 也是 String 默认初始值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// s4 使用 new 申请新的地址空间</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;小桃子&quot;</span>);</span><br><span class="line">        <span class="comment">// s5 和 s6 指向的是同一个地址空间。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="string">&quot;小桃子&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;小桃子&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 标准输出查看结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;s1 = &quot;</span> + s1);</span><br><span class="line">        System.out.println(<span class="string">&quot;s2 = &quot;</span> + s2);</span><br><span class="line">        System.out.println(<span class="string">&quot;s3 = &quot;</span> + s3);</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">        System.out.println(s4 == s5);</span><br><span class="line">        System.out.println(s5 == s6);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestString</span> <span class="variable">ts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestString</span>();</span><br><span class="line">        ts.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>String 类不可变特性</strong></p>
<p><code>tring</code> 类具有不可变特性，就是 <code>String</code> 类对象保存不可修改的 <code>Unicode</code> 字符序列，简单来说就是每次给 <code>String</code> 对象重新赋值就会产生一个新的对象。</p>
<p>通过以下代码来看一下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;小桃子&quot;</span>;</span><br><span class="line">name = <span class="string">&quot;Peaches&quot;</span>;</span><br><span class="line">name = <span class="string">&quot;Pfirsiche&quot;</span>;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281123070.png" alt="image-20260128112355116"></p>
<p>从图中我们可以看到，<code>name</code> 每次重新赋值，都需要申请新的空间，这就是不可变性，所以我们也会发现字符串对象不断的重新赋值非常浪费空间，所以这也是开发人员在使用时需要注意的地方，需要合理使用字符串的赋值操作。</p>
<p>可能有同学会问了，Java 中不是有垃圾回收机制么，释放空间不就可以了！</p>
<p>这个问题问的太棒了 👍 很好的结合了之前所学的知识。</p>
<p>的确，GC 主要的工作就是释放长期不使用的空间，进行释放，但是它不是实时进行释放处理，需要 CPU 进行跟踪确定长时间不使用，并在有空闲时才进行释放工作，而且 GC 也是开发人员无法直接干预的，最多也就是建议回收。所以说，频繁的给字符串对象进行赋值，而不会马上将之前的空间释放，积累的越多越浪费。</p>
<p>接下来给大家一段代码，来看看大家是否理解了本次课程所学的内容。 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;ja&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;va&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&quot;ja&quot;</span> + <span class="string">&quot;va&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">d</span> <span class="operator">=</span> a + b;</span><br><span class="line"><span class="type">String</span> <span class="variable">e</span> <span class="operator">=</span> c;</span><br><span class="line"><span class="type">String</span> <span class="variable">f</span> <span class="operator">=</span> <span class="string">&quot;java&quot;</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(c == f);</span><br><span class="line">System.out.println(d == f);</span><br><span class="line">System.out.println(c == e);</span><br><span class="line">System.out.println(d == e);</span><br><span class="line">System.out.println(f == e);</span><br></pre></td></tr></table></figure>

<p>想一下结果应该是什么，然后在已创建的 <code>TestString</code> 类中添加一个 <code>method3()</code> 方法，先动手写一下以上代码，再运行看看结果是否和你想的一致，加油 ~ 💪</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * String 类的不可变特性体现</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 不断重新赋值之后，之前的字符串常量值，就无法访问了。</span></span><br><span class="line">        <span class="comment">// 没有名字的指向，这块申请的空间就属于游离状态，之后等到 CPU 空闲时 GC 进行释放处理。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;小桃子&quot;</span>;</span><br><span class="line">        name = <span class="string">&quot;Peaches&quot;</span>;</span><br><span class="line">        name = <span class="string">&quot;Pfirsiche&quot;</span>;</span><br><span class="line">        System.out.println(name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// String 的基本使用</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> <span class="string">&quot;ja&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">b</span> <span class="operator">=</span> <span class="string">&quot;va&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&quot;ja&quot;</span> + <span class="string">&quot;va&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">d</span> <span class="operator">=</span> a + b;</span><br><span class="line">        <span class="type">String</span> <span class="variable">e</span> <span class="operator">=</span> c;</span><br><span class="line">        <span class="type">String</span> <span class="variable">f</span> <span class="operator">=</span> <span class="string">&quot;java&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 字符串 ja 连接上 字符串 va ，然后才申请空间，赋值给 c，就等价于 f = &quot;java&quot;，所以 c == f 结果为 true</span></span><br><span class="line">        System.out.println(c == f);</span><br><span class="line">        <span class="comment">// d = a + b，a 需要申请新的空间，b需要申请新的空间，当赋值给 d 时，还是需要申请新的空间，所以 d == f 结果为 false</span></span><br><span class="line">        System.out.println(d == f);</span><br><span class="line">        <span class="comment">// e = c，把 c 赋值给 e，对于引用类型而言，那就是 c 和 e 指向同一个空间，所以 c == e 结果肯定为 true</span></span><br><span class="line">        System.out.println(c == e);</span><br><span class="line">        <span class="comment">// d 和 e 指向的空间时不一致的，所以 d == e 结果为 false</span></span><br><span class="line">        System.out.println(d == e);</span><br><span class="line">        <span class="comment">// c == f 为 true，c == e 为 true，所以 f == e 肯定为 true</span></span><br><span class="line">        System.out.println(f == e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestString</span> <span class="variable">ts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestString</span>();</span><br><span class="line">        ts.method3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本实验主要讲解的是 String 类的基本使用，包括了：</p>
<ul>
<li>String 对象创建的基本结构，不管通过提供的构造方法创建还是以最简化的方式创建都需要掌握。</li>
<li>创建的方式不同，产生的对象进行空间的比较，存在的规则需要牢记。</li>
<li>String 类存在不可变特性，所以在使用时需要合理操作。</li>
</ul>
<p><strong>返回字符串新对象的方法</strong></p>
<p>首先，和大家来讲一讲的是，调用 String 方法处理之后将会<strong>返回</strong>一个<strong>新的 String 对象</strong>的一系列方法。</p>
<p>主要包括：concat、toLowerCase、toUpperCase、replace、substring、trim。</p>
<ul>
<li><p><code>public String concat(String str)</code></p>
<p>将指定的字符串 str 连接到此字符串的最后。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.concat(&quot;World&quot;) --&gt; 调用方法后返回新的字符串对象值为「helloWorld」。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public String toUpperCase()</span><br></pre></td></tr></table></figure>

<p>将此 String 中的所有字符都转换为大写。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.toUpperCase() --&gt; 调用方法后返回新的字符串对象值为「HELLO」。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public String toLowerCase()</span><br></pre></td></tr></table></figure>

<p>将此 String 中的所有字符都转换为小写。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：&quot;World&quot;.toLowerCase() --&gt; 调用方法后返回新的字符串对象值为「world」。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public String replace(char oldChar,char newChar)</span><br></pre></td></tr></table></figure>

<p>返回一个新的字符串，它是通过用 newChar 替换此字符串中出现的所有 oldChar 得到的。这里再重申一下，String 类方法中的索引都是从 0 开始编号的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello world&quot;.replace(&#x27;l&#x27;, &#x27;k&#x27;) --&gt; 调用方法后返回新的字符串对象值为「hekko workd」。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public String substring(int beginIndex,int endIndex)</span><br></pre></td></tr></table></figure>

<p>返回一个从 beginIndex 开始到 endIndex 结尾（不含 endIndex 所指字符）的新的子字符串。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">用法：<span class="string">&quot;hello world&quot;</span>.substring(<span class="number">2</span>, <span class="number">9</span>) --&gt; 调用方法后返回新的字符串对象值为「llo wor」。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">trim</span><span class="params">()</span></span><br></pre></td></tr></table></figure>

<p>返回新的字符串，去掉原字符串中前后的空格。注意，字符串中间的空格该方法是无法去掉的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">用法：<span class="string">&quot;   hello world   &quot;</span>.trim() --&gt; 调用方法后返回新的字符串对象值为「hello world」。</span><br></pre></td></tr></table></figure>

<p>以上告诉大家这些方法该如何使用，接下来还是动手写一写代码，更好的来体会它们的用法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类中常用方法的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStringMethod</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回字符串新对象的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 声明一个字符串 s</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;    my name is Peaches    &quot;</span>;</span><br><span class="line">        <span class="comment">// 通过 concat 方法进行字符串连接操作</span></span><br><span class="line">        System.out.println(s.concat(<span class="string">&quot;I like &quot;</span>).concat(<span class="string">&quot;Java&quot;</span>));</span><br><span class="line">        <span class="comment">// 通过 + 也可以实现字符串连接操作</span></span><br><span class="line">        System.out.println(s + <span class="string">&quot;I like &quot;</span> + <span class="string">&quot;Spring&quot;</span>);</span><br><span class="line">        <span class="comment">// 将字符串 s 全部转化为大写</span></span><br><span class="line">        System.out.println(s.toUpperCase());</span><br><span class="line">        <span class="comment">// 通过 replace 方法进行替换操作，可以按字符进行替换，也可以按字符串进行替换</span></span><br><span class="line">        System.out.println(s.replace(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;J&#x27;</span>));</span><br><span class="line">        System.out.println(s.replace(<span class="string">&quot;am&quot;</span>,<span class="string">&quot;test&quot;</span>));</span><br><span class="line">        <span class="comment">// 通过 substring 方法进行截取操作，按指定的索引进行操作</span></span><br><span class="line">        System.out.println(s.substring(<span class="number">5</span>));</span><br><span class="line">        System.out.println(s.substring(<span class="number">5</span>,<span class="number">10</span>));</span><br><span class="line">        <span class="comment">// 通过 trim 方法进行取消前后空格</span></span><br><span class="line">        System.out.println(s.trim());</span><br><span class="line">        <span class="comment">// 打印输出字符串 s</span></span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestStringMethod</span> <span class="variable">tsm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStringMethod</span>();</span><br><span class="line">        tsm.method1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码中，我们可以看到，最开始声明了一个字符串 <code>s</code> ，经过一系列方法调用之后，最后打印输出的 <code>s</code> ，还是最初赋值的内容，所以说字符串是不可改变的字符序列，每次操作后都会生成一个新的 <code>String</code> 对象。</p>
<p><strong>字符串查找方法</strong></p>
<p>其次，我们来讲解的是进行<strong>查找字符串</strong>的一系列方法。</p>
<p>主要包括：endsWith、startsWith、contains、indexOf、lastIndexOf。</p>
<ul>
<li><p><code>public boolean startsWith(String prefix)</code></p>
<p>判断此字符串是否以 prefix 指定的前缀开始。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello world&quot;.startsWith(&quot;h&quot;) --&gt; 调用方法后返回「true」。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public boolean endsWith(String suffix)</span><br></pre></td></tr></table></figure>

<p>判断此字符串是否以 suffix 指定的后缀结束。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello world&quot;.endsWith(&quot;h&quot;) --&gt; 调用方法后返回「false」。</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>public boolean contains(CharSequence s)</code></p>
<p>当前字符串包含指定的字符值序列时，返回 true 。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello world&quot;.contains(&quot;h&quot;) --&gt; 调用方法后返回「true」。</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>public int indexOf(int ch)</code></p>
<p>返回此字符串中指定字符第一次出现的索引。</p>
</li>
<li><p><code>public int indexOf(int ch,int fromIndex)</code></p>
<p>返回此字符串中指定字符第一次出现的索引，从指定的索引 fromIndex 处开始搜索。</p>
</li>
<li><p><code>public int indexOf(String str)</code></p>
<p>返回指定子字符串 str 在此字符串中第一次出现处的索引。</p>
</li>
<li><p><code>public int indexOf(String str,int fromIndex)</code></p>
<p>返回指定子字符串 str 在此字符串中第一次出现处的索引，从指定的索引 fromIndex 处开始搜索。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：</span><br><span class="line">&quot;hello world&quot;.indexOf(&#x27;l&#x27;) --&gt; 调用方法后返回「2」。</span><br><span class="line">&quot;hello world&quot;.indexOf(&#x27;l&#x27;, 4) --&gt; 调用方法后返回「9」。</span><br><span class="line">&quot;hello world&quot;.indexOf(&quot;ll&quot;) --&gt; 调用方法后返回「2」。</span><br><span class="line">&quot;hello world&quot;.indexOf(&quot;ll&quot;, 4) --&gt; 调用方法后返回「-1」。</span><br></pre></td></tr></table></figure>

<ul>
<li><p>🌟 注意：使用 <code>indexOf</code> 进行查找，当没有找到指定的字符或字符串时，返回的索引为 <code>-1</code>。</p>
</li>
<li><p><code>public int lastIndexOf(int ch)</code></p>
<p>返回此字符串中指定字符最后一次出现的索引。</p>
</li>
<li><p><code>public int lastIndexOf(int ch,int fromIndex)</code></p>
<p>返回此字符串中指定字符最后一次出现的索引，从指定的索引 fromIndex 处开始搜索。</p>
</li>
<li><p><code>public int lastIndexOf(String str)</code></p>
<p>返回指定子字符串 str 在此字符串中最后一次出现处的索引。</p>
</li>
<li><p><code>public int lastIndexOf(String str,int fromIndex)</code></p>
<p>返回指定子字符串 str 在此字符串中最后一次出现处的索引，从指定的索引 fromIndex 处开始搜索。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">用法：</span><br><span class="line">&quot;hello world&quot;.lastIndexOf(&#x27;l&#x27;) --&gt; 调用方法后返回「9」。</span><br><span class="line">&quot;hello world&quot;.lastIndexOf(&#x27;l&#x27;, 4) --&gt; 调用方法后返回「3」。</span><br><span class="line">&quot;hello world&quot;.lastIndexOf(&quot;ll&quot;) --&gt; 调用方法后返回「2」。</span><br><span class="line">&quot;hello world&quot;.lastIndexOf(&quot;ll&quot;, 4) --&gt; 调用方法后返回「2」。</span><br></pre></td></tr></table></figure>

<p>同学们，通过以上用法的讲解，大家自己动手用用这些方法吧，可以在已创建的 <code>TestStringMethod</code> 类中添加 <code>method2()</code> 方法，扩展代码如下：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类中常用方法的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStringMethod</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串查找方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="comment">// 声明字符串 s</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;TestStringMethod.java&quot;</span>;</span><br><span class="line">        <span class="comment">// 在指定字符串中查找前后缀是否匹配，返回 boolean 值。</span></span><br><span class="line">        System.out.println(s.startsWith(<span class="string">&quot;Test&quot;</span>));</span><br><span class="line">        System.out.println(s.endsWith(<span class="string">&quot;.java&quot;</span>));</span><br><span class="line">        <span class="comment">// 在指定字符串中查找是否包含，返回 boolean 值。</span></span><br><span class="line">        System.out.println(s.contains(<span class="string">&quot;str&quot;</span>));</span><br><span class="line">        <span class="comment">// 在指定字符串中获取指定字符的索引值。</span></span><br><span class="line">        <span class="comment">// 查找 . 索引值第一个和最后一个的值是一样的。</span></span><br><span class="line">        System.out.println(s.indexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">        System.out.println(s.lastIndexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestStringMethod</span> <span class="variable">tsm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStringMethod</span>();</span><br><span class="line">        tsm.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>统计子串出现的次数</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Statistical</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// 创建一个控制台输入对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入第一段字符串：&quot;</span>);</span><br><span class="line"><span class="comment">// 接收控制台输入的第一段字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> sc.next();</span><br><span class="line">System.out.println(<span class="string">&quot;请输入第二段字符串：&quot;</span>);</span><br><span class="line"><span class="comment">// 接收控制台输入的第二段字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> sc.next();</span><br><span class="line"><span class="comment">// 定义一个变量保存统计的结果</span></span><br><span class="line"><span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 遍历第一段字符串，由于我们要从中截取跟 str2 等长的字符串，因此判断条件要减去</span></span><br><span class="line">str2 的长度。</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= str1.length()-str2.length(); i++) &#123;</span><br><span class="line"><span class="comment">// 从第一段字符串中依次截取长度等于第二段字符串的子串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> str1.substring(i,i+str2.length());</span><br><span class="line"><span class="comment">// 比较截取出的子串和第二段字符串是否相同，若相同则让 total 自增 1</span></span><br><span class="line"><span class="keyword">if</span>(sub.equals(str2))&#123;</span><br><span class="line">total++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;子串一共出现了&quot;</span>+total+<span class="string">&quot;次！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="7-3StringBuffer类"><a href="#7-3StringBuffer类" class="headerlink" title="7.3StringBuffer类"></a>7.3StringBuffer类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> out02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">con</span> <span class="operator">=</span> <span class="string">&quot;小鲁班，你个傻逼，真是垃圾，一直送人头，能不能好好玩！&quot;</span>;</span><br><span class="line">        <span class="comment">// String.replace(查找需要的字符,查找到后替换内容的字符)；</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> con.replace(<span class="string">&quot;傻逼&quot;</span>, <span class="string">&quot;**&quot;</span>).replace(<span class="string">&quot;垃圾&quot;</span>, <span class="string">&quot;**&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;未被处理的内容：&quot;</span> + con);</span><br><span class="line">        System.out.println(<span class="string">&quot;处理后的内容：&quot;</span> + data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuffer</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">strb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>(<span class="number">20</span>);</span><br><span class="line">        <span class="comment">// StringBuffer.append(字符串)，队列添加，就是生活中的排队</span></span><br><span class="line">        strb.append(<span class="string">&quot;lanqiao&quot;</span>);</span><br><span class="line">        System.out.println(strb);</span><br><span class="line">        strb.append(<span class="string">&quot;...!&quot;</span>);</span><br><span class="line">        System.out.println(strb); </span><br><span class="line">        <span class="comment">// StringBuffer.insert(位置，需要插入的字符串)，插队的过程，</span></span><br><span class="line">        strb.insert(<span class="number">10</span>, <span class="string">&quot;java&quot;</span>);</span><br><span class="line">        System.out.println(strb); </span><br><span class="line">        <span class="comment">// StringBuffer.delete(起始位置，结束位置)，离队的过程(删除)，</span></span><br><span class="line">        strb.delete(<span class="number">7</span>, <span class="number">9</span>);</span><br><span class="line">        System.out.println(strb);</span><br><span class="line">        <span class="comment">// StringBuffer.reverse() 队列反转的过程</span></span><br><span class="line">        strb.reverse();</span><br><span class="line">        System.out.println(strb);</span><br><span class="line">        <span class="comment">// StringBuffer.replace(起始位置，结束位置，需要替换的字符串) 替换操作</span></span><br><span class="line">        strb.reverse();</span><br><span class="line">        strb.replace(<span class="number">8</span>, <span class="number">12</span>, <span class="string">&quot;HTML&quot;</span>);</span><br><span class="line">        System.out.println(strb);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实现英文单词的翻转</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordFilp</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// 提供英文单词数组</span></span><br><span class="line">String[] strs = &#123;<span class="string">&quot;I&quot;</span>, <span class="string">&quot;Love&quot;</span>, <span class="string">&quot;You&quot;</span>, <span class="string">&quot;Daddy&quot;</span>&#125;;</span><br><span class="line"><span class="comment">// 创建字符串缓冲区</span></span><br><span class="line"><span class="type">StringBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line"><span class="comment">// 遍历该单词数组，再遍历其中的每个单词，将其翻转后拼接到新字符串中</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> strs[i].length()-<span class="number">1</span>; j &gt;= <span class="number">0</span> ; j--) &#123;</span><br><span class="line"><span class="comment">// 进行字符串遍历，将遍历出的字符拼接到新字符串中</span></span><br><span class="line">buffer.append(strs[i].charAt(j));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 当单词拼接完后在其后拼接一个空格，若循环是最后一次则不需要拼接空格</span></span><br><span class="line"><span class="keyword">if</span>(i!=strs.length-<span class="number">1</span>)&#123;</span><br><span class="line">buffer.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(buffer);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="7-4复习与挑战"><a href="#7-4复习与挑战" class="headerlink" title="7.4复习与挑战"></a>7.4复习与挑战</h5><p>本章我们主要学习的是字符串相关的知识，概括如下：</p>
<ol>
<li>学会使用 Java 提供的 API 进行 String 、StringBuffer 等这些类的查阅帮助使用。</li>
<li>String 类是不可改变的字符序列，必须合理使用。<ul>
<li>String 类创建的基本结构：<ul>
<li>String 变量名 &#x3D; 字符串常量值;</li>
<li>通过不同的构造方法进行对象创建</li>
</ul>
</li>
<li>String 类中常用的方法：<ul>
<li>concat、toLowerCase、toUpperCase、replace、substring、trim</li>
<li>endsWith、startsWith、contains、indexOf、lastIndexOf</li>
<li>equals、equalsIgnoreCase、compareTo</li>
<li>charAt、length、valueOf</li>
</ul>
</li>
<li>String 类存在的特性。</li>
</ul>
</li>
<li>StringBuffer 类是可改变的字符序列，它们的使用可以提高执行效率。<ul>
<li>StringBuffer 类的创建方式：<ul>
<li>StringBuffer buffer &#x3D; new StringBuffer();</li>
<li>StringBuffer buffer &#x3D; new StringBuffer(字符串常量值);</li>
</ul>
</li>
<li>StringBuffer 类中常用的方法：<ul>
<li>append、insert、delete、reverse</li>
<li>length、charAt、indexOf、lastIndexOf、substring</li>
</ul>
</li>
<li>String 和 StringBuffer 的区别。<ul>
<li>字符串操作较简单时，可以选择 String 类进行处理。</li>
<li>频繁进行字符串连接操作时，可以选择 StringBuffer 类进行处理。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281124904.png" alt="image-20260128112417093"></p>
<p><strong>字符串比较方法</strong></p>
<p>然后，我们需要讲解的是进行<strong>字符串比较</strong>的一系列方法。</p>
<p>主要包括：equals、equalsIgnoreCase、compareTo。</p>
<ul>
<li><p><code>public boolean equals(Object anObject)</code></p>
<p>当参数 anObject 不为 null 时，进行 String 对象字符串值的比较。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.equals(&quot;hello&quot;) --&gt; 调用方法后返回「true」。</span><br></pre></td></tr></table></figure>

<p>🌟 注意：</p>
<ol>
<li>当参数为 null 时，不作值比较操作，直接返回 false。</li>
<li>理解 &#x3D;&#x3D; 和 equals 方法的区别，对于字符串而言，&#x3D;&#x3D; 是在比较<strong>字符串对象</strong>是否指向同一个地址空间，而 equals 方法是在比较<strong>字符串值</strong>是否相等。</li>
</ol>
</li>
<li><p><code>public boolean equalsIgnoreCase(String another)</code></p>
<p>将此字符串与另一个字符串 another 值比较，比较时忽略内容的大小写。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.equalsIgnoreCase(&quot;Hello&quot;) --&gt; 调用方法后返回「true」。</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>public int compareTo(String anotherString)</code></p>
<p>按字典顺序比较两个字符串。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.compareTo(&quot;hello&quot;) --&gt; 调用方法后返回「0」。</span><br></pre></td></tr></table></figure></li>
</ul>
<p>以上是字符串比较方法的用法讲解，我们可以在已创建的 <code>TestStringMethod</code> 类中，添加一个 <code>method3()</code> 的方法，自己动手查看以上结果。</p>
<p>完成之后，可以再看以下扩展代码如下：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类中常用方法的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStringMethod</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串比较方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 声明字符串 s</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">        <span class="comment">// 当参数为 null 时，不进行值比较操作，与 null 值无须比较，直接返回 false。</span></span><br><span class="line">        System.out.println(s.equals(<span class="literal">null</span>));</span><br><span class="line">        <span class="comment">// 在字符串比较操作时，我们也会建议这样书写</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Java&quot;</span>.equals(s));</span><br><span class="line">        System.out.println(<span class="string">&quot;&quot;</span>.equals(s));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当应用程序中询问是否继续操作，会涉及提示 yes or no ?</span></span><br><span class="line">        <span class="comment">// 一般这种情况下，我们都是采用忽略大小写的方式进行比较</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;YES&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;yes&quot;</span>.equalsIgnoreCase(msg)?<span class="string">&quot;继续前进&quot;</span>:<span class="string">&quot;game over&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 按提取的字符值进行计算，当提取的字符值一致时，按照字符串长度进行计算</span></span><br><span class="line">        System.out.println(<span class="string">&quot;a&quot;</span>.compareTo(<span class="string">&quot;a&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;aa&quot;</span>.compareTo(<span class="string">&quot;ab&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;ba&quot;</span>.compareTo(<span class="string">&quot;aa&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;aa&quot;</span>.compareTo(<span class="string">&quot;aaaa&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestStringMethod</span> <span class="variable">tsm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStringMethod</span>();</span><br><span class="line">        tsm.method3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可能有的同学看了运行结果后，还是会有些疑惑，不明白这个结果是怎么出来的，我们可以打开 <code>String API</code> 仔细查看 <code>compareTo</code> 方法使用说明，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281124379.png" alt="image-20260128112436531"></p>
<p>这里涉及了 <code>charAt</code> 和 <code>length</code> 方法，进行计算操作，我们需要先明白这两个方法的用法，再来看如何计算。</p>
<p><strong>字符串其他常用方法</strong></p>
<p>最后，我们来讲解 3 个非常<strong>常用</strong>的<strong>字符串处理方法</strong>。</p>
<p>主要包括：charAt、length、valueOf。</p>
<ul>
<li><p><code>public char charAt(int index)</code></p>
<p>返回 index 指定的索引处的字符。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.charAt(1) --&gt; 调用方法后返回「e」。</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>public int length()</code></p>
<p>返回此字符串的长度。</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：&quot;hello&quot;.length() --&gt; 调用方法后返回「5」。</span><br></pre></td></tr></table></figure>

<p>🌟 注意：这里需要和获取数组长度区别开，获取数组长度是通过<code>数组名.length</code>获取的。</p>
</li>
<li><p><code>public static String valueOf(基本数据类型参数)</code></p>
<p>返回基本数据类型参数的字符串表示形式。</p>
<p>String API 中提供了多个重载的 valueOf 方法，如下图：</p>
</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281124516.png" alt="image-20260128112449405"></p>
<ul>
<li><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">用法：String.valueOf(10) --&gt; 调用方法后返回「10」，输出的 10 是字符串而不再是整型数值。</span><br></pre></td></tr></table></figure></li>
</ul>
<p>同样，我们可以在已创建的 <code>TestStringMethod</code> 类中，添加一个 <code>method4()</code> 的方法，自己动手查看以上结果。</p>
<p>完成之后，可以再看以下扩展代码如下：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * String 类中常用方法的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStringMethod</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 字符串其他方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 通过代码分析 compareTo 方法的调用过程</span></span><br><span class="line">        <span class="comment">// 首先获取需要比较的两个字符串长度，按最小长度来进行字符提取操作</span></span><br><span class="line">        <span class="comment">// 按最小长度提取的的字符都相等时，就按照字符串长度进行计算 this.length()-anotherString.length()</span></span><br><span class="line">        <span class="comment">// 否则就按照 this.charAt(k)-anotherString.charAt(k)</span></span><br><span class="line">        <span class="comment">// &quot;a&quot;.compareTo(&quot;a&quot;)，字符值相等，执行长度计算 1 - 1 = 0</span></span><br><span class="line">        System.out.println(<span class="string">&quot;a&quot;</span>.length() - <span class="string">&quot;a&quot;</span>.length());</span><br><span class="line">        <span class="comment">// &quot;aa&quot;.compareTo(&quot;ab&quot;)，第二个字符值不等，执行 &#x27;a&#x27; - &#x27;b&#x27; 就是 char 隐式转换为 int，97 - 98 = -1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;aa&quot;</span>.charAt(<span class="number">1</span>) - <span class="string">&quot;ab&quot;</span>.charAt(<span class="number">1</span>));</span><br><span class="line">        <span class="comment">// &quot;ba&quot;.compareTo(&quot;aa&quot;)，第一个字符值不等，执行 &#x27;b&#x27; - &#x27;a&#x27;, 98 - 97 = 1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ba&quot;</span>.charAt(<span class="number">0</span>) - <span class="string">&quot;aa&quot;</span>.charAt(<span class="number">0</span>));</span><br><span class="line">        <span class="comment">// &quot;aa&quot;.compareTo(&quot;aaaa&quot;)，最小长度而 2 ，索引 0 和 1 的字符值都相等，执行长度计算 2 - 4 = -2</span></span><br><span class="line">        System.out.println(<span class="string">&quot;aa&quot;</span>.length() - <span class="string">&quot;aaaa&quot;</span>.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 声明一个 int 类型 i</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="comment">// 要让整型 10 变成字符串 10，最简单的方式是 i + &quot;&quot;，那么结果就是字符串 10，而这种方式效率很低，不建议使用，特别是在企业项目中。</span></span><br><span class="line">        <span class="comment">// 建议采用 String 提供的静态方法 valueOf 进行处理。</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.valueOf(i);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        s = String.valueOf(<span class="number">45.6</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        s = String.valueOf(<span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>&#125;);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestStringMethod</span> <span class="variable">tsm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStringMethod</span>();</span><br><span class="line">        tsm.method4();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>compareTo 方法按字典顺序进行比较操作，在进行比较计算时使用了 charAt 方法通过索引获取每一个字符，当获取字符不同时，根据字符值进行计算，当获取的字符相同时，通过 length 方法获取长度进行计算，最终完成比较操作。</p>
<p><strong>计算字符串中子字符串出现的次数</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StrCount</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//用于计数的变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//标识从哪个位置开始查找</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.print(<span class="string">&quot;请输入一个字符串：&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> input.next();</span><br><span class="line">System.out.print(<span class="string">&quot;请输入要查找的字符串：&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> input.next();</span><br><span class="line"><span class="keyword">while</span> (str.indexOf(str1, start) &gt;= <span class="number">0</span> &amp;&amp; start &lt; str.length()) &#123;</span><br><span class="line">count++;</span><br><span class="line"><span class="comment">//找到子字符串后，查找位置移动到找到的这个字符串之后开始</span></span><br><span class="line">start = str.indexOf(str1, start) + str1.length();</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(str1 + <span class="string">&quot; 在 &quot;</span> + str + <span class="string">&quot;出现的次数为&quot;</span> + count);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*<em>凯撒密码加密</em></p>
<h3 id="八、面向对象进阶"><a href="#八、面向对象进阶" class="headerlink" title="八、面向对象进阶"></a>八、面向对象进阶</h3><h5 id="8-1继承"><a href="#8-1继承" class="headerlink" title="8.1继承"></a>8.1继承</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承关键字：extends</span></span><br><span class="line"><span class="comment">// 继承的概念</span></span><br><span class="line"><span class="comment">// 继承分为：父类(超类或基类)和子类(派生类)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 父类：汽车类   子类：公交车、货车、小汽车</span></span><br><span class="line"><span class="comment">// 父类：王者英雄类    子类：坦克、战士、法师、刺客、射手、辅助</span></span><br><span class="line"><span class="comment">// 父类：动物类   子类：哺乳类、家禽类、</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现继承至少2个类至N个类</span></span><br><span class="line"><span class="comment">// 语法：</span></span><br><span class="line">class  父类&#123;</span><br><span class="line">    属性的方法</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有一个子类继承(extends)了一个父类</span></span><br><span class="line">class 子类 extends 父类&#123;</span><br><span class="line">    (<span class="number">1</span>).可以调用父类的属性的方法</span><br><span class="line">    (<span class="number">2</span>).可以有自己的属性方法</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 注意：Java是单继承，不能进行多继承。</span></span><br><span class="line"><span class="comment">//我建议初学者要学习我们国内的一家企业：腾讯</span></span><br><span class="line">模仿(我们要知道关键字作用) -&gt; 个性化修改(不熟练要进行多练习) -&gt; 创新创造(可以自己开始构造的体系项</span><br><span class="line">目)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>类的继承</strong></p>
<p>接下来我们来看两段代码。</p>
<p>Person 类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">      <span class="keyword">private</span> Date birthday;</span><br><span class="line">            <span class="comment">// 提供 get/set 方法</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Student 类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">      <span class="keyword">private</span> Date birthday;</span><br><span class="line">      <span class="keyword">private</span> String school;</span><br><span class="line">            <span class="comment">// 提供 get/set 方法</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同学们， 👀 看看这两个类有什么不一样？</p>
<p>别回答我，两段代码的类名不同哦 🙊 。</p>
<p>🙋 老师，Student 类中多了一个 school 属性，其他属性和方法和 Person 类都一样。</p>
<p>🙋‍♂️ 老师，我们是不是应该把两个类中相同的部分取出来。</p>
<p>两位同学的回答太棒了 🌸 ，直接切入要点，大家应该知道之前学习方法时，老师一定告诉过你们，方法的存在其中一个目的，就是可以反复调用，也就是说在大量的代码中，我们将重复部分的代码抽离出来，写入到一个方法中，然后用到的地方只要调用该方法就可以了，而无需再写重复的代码，这样就可以提高代码的复用率了。</p>
<p>那么我们现在把类中重复的内容抽离出来，放到一个类中，就可以形成类的复用，而<strong>类的复用就是类继承的核心思想</strong>。</p>
<p>在此，我们就可以简化 Student 类，让该类去复用 Person 类中的内容，而无需重复编写，看下图：👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281125579.png" alt="image-20260128112505704"></p>
<p>以上是个类图，类图主要是用符号和字符数字来对类的描述，类图中主要体现三部分内容，最上层是类名，如：Person 、Student；中间层是对属性的描述，符号 - 表示 private 修饰、+ 表示 public 修饰，然后是属性名 : 之后是属性类型，如：-name: String 就表示私有的 String 类型的 name 属性；最下层是对方法的描述，符号 + 或 -，方法名(参数名: 参数类型): 方法返回类型，如：+getInfo(): String 就表示公共的 getInfo 方法，无参数但小括号不能少，该方法返回的是 String 类型数据。这样就可以将类的结构描述清楚了。然后再加上带箭头的直线，表示 Student 类继承 Person 类，那么代码中如何实现继承关系呢？</p>
<p>这里我们就需要引申出一个继承的关键字 <strong>extends</strong>，来看一下 extends 的使用语法结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class B extends A &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从结构中我们可以看到，B 继承 A ，A 称为父类、超类或基类；B 称为子类、衍生类或导出类；叫法上都可以，我们使用的比较多的是子类和父类的说法。</p>
<p>好了，接下来我们就来写一写代码吧 ~ 😀</p>
<p>结合之前所学的知识，需要把包的结构也要用上哦。 🤗</p>
<p>当然了，你可以不使用命令，直接在 VS Code 环境下，选中资源管理器，右击创建文件夹，把目录创建好，同时可以右击创建文件，把目录下对应的 Java 源文件创建好，效果是一样的。如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281125342.png" alt="image-20260128112519454"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.inheritance;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 人的基本信息类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 性别</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="comment">// 年龄</span></span><br><span class="line">      <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取人的基本信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 姓名+性别+生日的字符串信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name+<span class="string">&quot;   &quot;</span>+sex+<span class="string">&quot;   &quot;</span>+birthday;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Person 类是父类，类中主要是声明了 3 个私有的属性，根据属性生成对应的 getter&#x2F;setter 方法，编写了一个普通方法 getInfo 可以返回属性的基本信息。</p>
<p>写到这里老师需要问一个问题，考考大家之前学过的知识是否掌握。</p>
<p>Person 类中涉及了 Java 三大特征之一的封装吗？</p>
<p>🙋 老师，有的，属性私有化，对应提供的 getter&#x2F;setter 方法就是进行了最简单的封装操作。</p>
<p>这位同学回到的很不错哦。 👏</p>
<p>那么谁又能告诉我，封装的作用是什么呢？</p>
<p>🙄 有点忘了。</p>
<p>封装的作用就是，为了保证数据的完整性和增强代码的可维护性。</p>
<blockquote>
<p>这是在第六章 面向对象基础中所学的知识，忘了的话，可以回头巩固一下哦。</p>
</blockquote>
<p>我们接着往下写代码吧。</p>
<p><code>Student.java</code> 源文件如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.inheritance;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生基本信息类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 学校</span></span><br><span class="line">    <span class="keyword">private</span> String school;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSchool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> school;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSchool</span><span class="params">(String school)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.school = school;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>继承需要使用关键字 extends，不要拼写错了呀 ~ 🧑‍💻 school 是 Student 子类中声明的私有属性，同样需要提供 getter&#x2F;setter 方法。</p>
<p><code>TestExtends.java</code> 源文件如下： 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.test;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Student;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 类继承的测试类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestExtends</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建子类对象</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="comment">// 访问父类中的成员</span></span><br><span class="line">        s.setName(<span class="string">&quot;小桃子&quot;</span>);</span><br><span class="line">        s.setSex(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">        s.setBirthday(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(s.getInfo());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 访问子类中的成员</span></span><br><span class="line">        s.setSchool(<span class="string">&quot;浙江大学&quot;</span>);</span><br><span class="line">        System.out.println(s.getInfo() + <span class="string">&quot;   &quot;</span> + s.getSchool());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 TestExtends 类中，创建了 Student 子类的对象，并访问了父类中的 setName、setSex、setBirthday 以及 getInfo 方法，这样就大大简化了 Student 类的书写。</p>
<p><strong>类继承后的访问</strong></p>
<p>类的继承效果已经实现，我们也可以看到子类可以访问父类中的成员。</p>
<p>但接下来我们必须要来讲一讲父类和子类之间的访问权限的问题。</p>
<p>大家先来看看以下这段代码：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;hi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> String <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>父类中提供 2 个属性，分别使用 private 修饰符和不加修饰符的情况，提供了 2 个方法，分别使用 protected 和 public 来修饰。</p>
<p>🍒 情况一：父类和子类在同一个包下。源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.p;</span><br><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;hi&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child1</span> <span class="keyword">extends</span> <span class="title class_">Parent</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        method1();</span><br><span class="line">        method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译源文件后可以看到，父类和子类在同一个包下，子类中只有私有成员不能访问，其他都可以。</p>
<p>🍒 情况二：父类和子类不在同一包下。源代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 父类代码同上</span><br><span class="line">package org.lanqiao.c;</span><br><span class="line"></span><br><span class="line">import org.lanqiao.p.Parent;</span><br><span class="line">// 和父类不在同一个包中的子类</span><br><span class="line">public class Child2 extends Parent&#123;</span><br><span class="line">    public void method3()&#123;</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        method1();</span><br><span class="line">        method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译源文件后可以看到，父类和子类不在同一个包下，子类中不能访问父类中私有的和不加修饰符的成员。</p>
<p>🍒 情况三：父类、子类和其他类都不在同一包中。源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.p;</span><br><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;hi&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.lanqiao.c;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.p.Parent;</span><br><span class="line"><span class="comment">// 子类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Child2</span> <span class="keyword">extends</span> <span class="title class_">Parent</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// System.out.println(s1);</span></span><br><span class="line">        <span class="comment">// System.out.println(s2);</span></span><br><span class="line">        method1();</span><br><span class="line">        method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.lanqiao.test;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.c.Child2;</span><br><span class="line"><span class="comment">// 其他类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Child2</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Child2</span>();</span><br><span class="line">        System.out.println(c.s1);</span><br><span class="line">        System.out.println(c.s2);</span><br><span class="line">        c.method1();</span><br><span class="line">        c.method2();</span><br><span class="line">        c.method3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实验总结</p>
<p>本实验我们学习了 Java 中很重要的知识，类的继承，主要总结如下：</p>
<ol>
<li>Java 中的类只支持单继承。</li>
<li>类的继承的作用：实现类的复用。</li>
<li>继承的关键字 extends，并掌握使用的结构。</li>
<li>有了继承关系之后，类和类之间的访问权限：<ul>
<li>父类中私有的成员只能父类自己可以访问，子类也不能进行访问。</li>
<li>子类和父类在同一个包下，不加修饰的成员在子类中可以访问，若不在同一包下，则不能访问。</li>
<li>父类中被 protected 修饰的成员在子类中可以访问，但是其他类中通过子类对象调用也是不能访问的。</li>
<li>只有 public 修饰的成员，在任何地方都可以访问。</li>
</ul>
</li>
</ol>
<h5 id="8-2方法重写"><a href="#8-2方法重写" class="headerlink" title="8.2方法重写"></a>8.2方法重写</h5><p><strong>方法重写介绍</strong></p>
<p>面向对象最重要的特征之一，就是可以实现对类的复用，这可以通过继承来实现。</p>
<p>通过<strong>继承</strong>一个现有的类，可以使用已经定义的类中的方法和属性。</p>
<p>也就是说当子类继承父类时，可以从父类继承它的属性和方法。不过在上一个实验中我们可以看到 private 修饰的属性和方法是不能访问的，<strong>一般来说子类主要访问父类中被 public 或 protected 修饰的属性和方法</strong>。</p>
<p>如果从父类继承的方法不能满足子类的需求，那么可以对其进行改写，这个过程叫<strong>方法覆盖</strong>（override），也可以称为<strong>方法重写</strong>。</p>
<p>我们可以续用上一个实验中的代码，Person 类、Student 类 和 TestExtends 类，如果你已经保存环境那么无需再重新编写代码。如果你没有保存环境，老师希望本次实验开始你能够保存环境，因为本章所讲的知识，代码都有一定的连续性。</p>
<p><img data-src="C:\Users\14949\AppData\Roaming\Typora\typora-user-images\image-20230327093842846.png" alt="image-20230327093842846"></p>
<p><code>Person类代码</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.inheritance;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 人的基本信息类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 性别</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="comment">// 年龄</span></span><br><span class="line">      <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取人的基本信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 姓名+性别+生日的字符串信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name+<span class="string">&quot;   &quot;</span>+sex+<span class="string">&quot;   &quot;</span>+birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Student</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.inheritance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 学校</span></span><br><span class="line">    <span class="keyword">private</span> String school;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSchool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> school;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSchool</span><span class="params">(String school)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.school = school;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span> </span><br><span class="line">        <span class="comment">// 将父类的方法进行重写</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> school;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>TestExtends</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package org.lanqiao.test;</span><br><span class="line">import org.lanqiao.inheritance.Student;</span><br><span class="line"></span><br><span class="line">public class TestExtends &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 创建子类对象</span><br><span class="line">        Student s = new Student();</span><br><span class="line">        // 访问父类中的成员</span><br><span class="line">        // 通过子类继承父类的关系，我们可以进行访问父类共有的(受保护的)属性和方法</span><br><span class="line">        s.setName(&quot;小桃子&quot;);</span><br><span class="line">        s.setSex(&quot;女&quot;);</span><br><span class="line">        // public表示共有的，proteced表示受保护的</span><br><span class="line">        s.setBirthday(null);</span><br><span class="line">        System.out.println(s.getInfo());</span><br><span class="line"></span><br><span class="line">        // 访问子类中的成员</span><br><span class="line">        s.setSchool(&quot;重庆科创职业学院&quot;);</span><br><span class="line">        System.out.println(s.getInfo() + &quot;   &quot; + s.getSchool());</span><br><span class="line">        // 重写的注释(#Override)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 TestExtends 类中，我们创建了一个子类的 Student 对象，访问了父类中可访问的方法，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">s.setName(<span class="string">&quot;小桃子&quot;</span>);</span><br><span class="line">s.setSex(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">s.setBirthday(<span class="literal">null</span>);</span><br><span class="line">System.out.println(s.getInfo());</span><br></pre></td></tr></table></figure>

<p>调用 getInfo() 方法后，打印输出的结果是「小桃子 女 null」，对于这个结果应该是我们预料之中的吧 ~ 😀</p>
<p>之后我们访问子类中新增的方法，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">s.setSchool(<span class="string">&quot;浙江大学&quot;</span>);</span><br><span class="line">System.out.println(s.getInfo());</span><br></pre></td></tr></table></figure>

<p>再次调用 getInfo() 方法后，打印输出的结果还是「小桃子 女 null」，并没有输出学校信息，为啥？!</p>
<p>我们来看看 👀 ，父类 getInfo 方法代码，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取人的基本信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 姓名+性别+生日的字符串信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name+<span class="string">&quot;   &quot;</span>+sex+<span class="string">&quot;   &quot;</span>+birthday;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从代码中，我们可以看到，没有 school 信息吧，既然没有涉及那么当然不可能有相应信息的输出。</p>
<p>🤔️ 有同学可能想到，那在该方法中加上 school 信息不就可以了嘛。</p>
<p>真的可以吗？当然不行！</p>
<p>为什么不行呢？</p>
<p>首先，这个类是父类，在写父类时，我们无需考虑子类需要扩展的内容。</p>
<p>其次，父类是无法访问子类中新增的成员的。</p>
<p>所以，这样的现象是属于父类的方法不能满足子类需求了，因此需要进行方法覆盖（override）。</p>
<p>接下来，我们就来学习如何进行方法覆盖操作。</p>
<p><strong>方法重写的基本结构</strong></p>
<p>要进行方法重写操作，两个类之间必须存在继承关系，否则就没有所谓的重写，也就是说方法重写是建立在两个有继承关系的类基础上的，两个相对独立的类就不存在方法重写。</p>
<p>在继承的基础上，还需要满足以下要求，才能实现覆盖：</p>
<ul>
<li>重写的方法必须和被重写的方法具有相同的方法名、参数列表和返回值类型。</li>
<li>子类中的覆盖方法不能使用比父类中被覆盖方法更严格的访问权限。</li>
</ul>
<p>从以上要求中我们可以发现，相同的方法名、参数列表和返回值类型，那也就是方法的头部分基本不能改变，所以对于方法重写来说，主要是修改方法体中的内容。</p>
<p>好了，通过代码来看一下吧，打开 Student.java 源文件，我们可以拷贝父类 Person 中的 getInfo 方法，在该方法的基础上进行修改。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取学生的基本信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 姓名+性别+生日+学校的字符串信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> getName()+<span class="string">&quot;   &quot;</span>+getSex()+<span class="string">&quot;   &quot;</span>+getBirthday()+<span class="string">&quot;   &quot;</span>+getSchool();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子类中重写的 getInfo 方法就不能直接使用 name、sex、birthday 属性了，因为那是私有的，而对于使用 school 属性还是 getSchool() 方法都是可以的。</p>
<p>修改后的 Student 类源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.inheritance;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 学生基本信息类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 学校</span></span><br><span class="line">    <span class="keyword">private</span> String school;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSchool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> school;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSchool</span><span class="params">(String school)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.school = school;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取学生的基本信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 姓名+性别+生日+学校的字符串信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getName()+<span class="string">&quot;   &quot;</span>+getSex()+<span class="string">&quot;   &quot;</span>+getBirthday()+<span class="string">&quot;   &quot;</span>+getSchool();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在此需要强调几种情况，同学们一定要搞清楚。 👇</p>
<p>父类中的方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> name+<span class="string">&quot;   &quot;</span>+sex+<span class="string">&quot;   &quot;</span>+birthday;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 情况一：子类中重写的方法修饰符比被重写的方法返回更小。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello Override&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译 Student 类错误，无法完成覆盖操作，方法修饰符不正确。</p>
<p>🍒 情况二：子类中重写的方法返回类型修改为 void 。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译 Student 类错误，无法完成覆盖操作，返回类型不一致。</p>
<p>🍒 情况三：子类中重写的方法参数列表修改。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">(String name)</span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译不会有任何提示错误，是系统认为你不是在做方法重写操作，只是子类中新增的方法而已。</p>
<p>说到这里需要考考大家，之前学习的内容了。</p>
<p>方法的重载需要遵循的原则是什么？</p>
<blockquote>
<p>重载方法：方法名必须相同，参数列表必须是不同，返回值类型可以相同，也可以不同。</p>
</blockquote>
<p>那么在 String 类常用的方法中哪些是重载的方法？</p>
<blockquote>
<p>如：indexOf、lastIndexOf、substring、valueOf 等等，有好多，可以好好看看 String API 哦。</p>
</blockquote>
<p>好了，动手把代码都写一下吧 ~</p>
<p>实验主要和大家讲的是在什么情况下需要进行方法重写操作，以及重写方法的基本结构。</p>
<p>方法的重写满足的条件：</p>
<ol>
<li>相同的方法名，参数列表，返回值类型。</li>
<li>访问权限不能够更加严格。</li>
</ol>
<p>企业面试中经常会问到，方法的重载（overload）和重写（override）的区别？</p>
<ul>
<li>方法重载是一个类中的行为，而方法重写必须是有继承关系的类才有的行为。</li>
<li>重载的方法在类中至少有 2 个，最多没有数量上的限制，可根据需求而定，但必须满足重载的原则即可。</li>
<li>重写的方法在子类中最多一个，不允许存在多个，遵循了重写的条件，也就不可能存在多个了。</li>
<li>面试中也需要你来说说重载的原则是什么，重写的条件是什么，之前都已经讲到了，这里就重复了。</li>
</ul>
<p><strong>Object 类中的方法重写</strong></p>
<p>Object 最高父类</p>
<p>Object 类大家可能觉得比较陌生，因为之前没有和大家强调这个类，但是实际上大家很早就已经使得到这个类了。为什么这么说呢？</p>
<p>我们可以来看一下，在第二章中我们讲注释的时候，使用 javadoc 命令生成的 API 文档已经涉及到了，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281125263.png" alt="image-20260128112544320"></p>
<p>Object 类是 Java 中所有类的最高父类，也可以称为根父类。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281126410.png" alt="image-20260128112601375"></p>
<p>如果在类的声明中未使用 extends 关键字指明其父类，则默认父类为 Object 类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>等价于：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_">Object</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也就是说 Object 类不管你写不写，它都存在。一般情况下，继承 Object 类我们都是省略书写的。</p>
<p>接下来，我们需要来重写几个 Object 中常用的方法。</p>
<h5 id="8-3super关键字"><a href="#8-3super关键字" class="headerlink" title="8.3super关键字"></a>8.3super关键字</h5><p><code>Animal</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;动物可以移动&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Cat</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">catMove</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// super在子类中可以调用父类的方法</span></span><br><span class="line">        <span class="built_in">super</span>.move();</span><br><span class="line">        System.out.println(<span class="string">&quot;猫可以跑和走&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>Test</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Cat</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        c.catMove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>窗体事件基本运用</strong></p>
<p><strong>MyWin05.java</strong> 未添加任何事件</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyWin05</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">JFrame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JFrame</span>(<span class="string">&quot;事件监听&quot;</span>);</span><br><span class="line"><span class="type">Container</span> <span class="variable">c</span> <span class="operator">=</span> frame.getContentPane();<span class="comment">//创建视图</span></span><br><span class="line">frame.setSize(<span class="number">400</span>, <span class="number">230</span>); <span class="comment">//窗口大小</span></span><br><span class="line">frame.setLocationRelativeTo(<span class="literal">null</span>); <span class="comment">// 窗口居中</span></span><br><span class="line">frame.setResizable(<span class="literal">false</span>); <span class="comment">// 禁用窗口最大化</span></span><br><span class="line">c.setLayout(<span class="keyword">new</span> <span class="title class_">BorderLayout</span>());<span class="comment">//设置视图的布局</span></span><br><span class="line">frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line"><span class="comment">//上方</span></span><br><span class="line"><span class="type">JPanel</span> <span class="variable">topPanel</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">JPanel</span>();<span class="comment">//创建一个放置标题的面板</span></span><br><span class="line">topPanel.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line"><span class="type">JLabel</span> <span class="variable">titleLabel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JLabel</span>(<span class="string">&quot;点击事件&quot;</span>);</span><br><span class="line">titleLabel.setForeground(Color.black); <span class="comment">// 设置标签文字前景色</span></span><br><span class="line">titleLabel.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;微软雅黑&quot;</span>, Font.BOLD, <span class="number">22</span>));<span class="comment">// 设置字体样式</span></span><br><span class="line">和大小</span><br><span class="line">topPanel.add(titleLabel);</span><br><span class="line">c.add(topPanel, <span class="string">&quot;North&quot;</span>);<span class="comment">//加入视图中</span></span><br><span class="line"><span class="comment">//中间</span></span><br><span class="line"><span class="type">JPanel</span> <span class="variable">centerPanel</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">JPanel</span>();</span><br><span class="line">centerPanel.setLayout(<span class="literal">null</span>);</span><br><span class="line"><span class="type">JLabel</span> <span class="variable">content</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JLabel</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">content.setBounds(<span class="number">110</span>, <span class="number">40</span>, <span class="number">120</span>, <span class="number">30</span>);</span><br><span class="line">centerPanel.add(content);</span><br><span class="line">c.add(centerPanel, <span class="string">&quot;Center&quot;</span>);</span><br><span class="line"><span class="comment">// 下方</span></span><br><span class="line"><span class="type">JPanel</span> <span class="variable">bottomPanel</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">JPanel</span>();</span><br><span class="line">bottomPanel.setLayout(<span class="keyword">new</span> <span class="title class_">FlowLayout</span>());</span><br><span class="line"><span class="type">JButton</span> <span class="variable">ok</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;确定(Y)&quot;</span>);</span><br><span class="line"><span class="type">JButton</span> <span class="variable">cancel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;取消(N)&quot;</span>);</span><br><span class="line">bottomPanel.add(ok);</span><br><span class="line">bottomPanel.add(cancel);</span><br><span class="line">c.add(bottomPanel, <span class="string">&quot;South&quot;</span>);</span><br><span class="line">frame.setVisible(<span class="literal">true</span>);<span class="comment">//设置窗体可见</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>super 关键字的使用</strong></p>
<p>super 关键字的作用就是用来引用父类的成员，像属性、方法、构造方法。</p>
<p>语法结构如下：</p>
<ul>
<li><code>super.field</code></li>
<li><code>super.method(参数列表)</code></li>
<li><code>super(参数列表)</code></li>
</ul>
<p>使用比较多的是，通过 super 关键字调用方法。</p>
<p>🌟 注意：</p>
<ol>
<li>父类的属性和方法必须是 protected 或 public 修饰的，子类才可以访问。</li>
<li>类的方法可以被继承，但是类的构造方法不能被继承，不过可以被子类调用。</li>
</ol>
<p>接下来，我们主要来看一下的是使用 super 关键字调用父类构造方法。</p>
<p>首先，我们需要在已存在的 Person 父类中添加重载的构造方法，以便于我们在 Student 子类中进行使用。</p>
<p>Person 类中无参构造方法：</p>
<h5 id="8-4static关键字"><a href="#8-4static关键字" class="headerlink" title="8.4static关键字"></a>8.4static关键字</h5><p><strong>static 关键字修饰属性</strong></p>
<p>static 关键字可以用来修饰属性，也就是用来修饰变量。</p>
<p>在类中被 static 关键字修饰的变量，我们称之为 ”类变量“ 或是 ”静态变量“。</p>
<p>🍒 语法格式：在数据类型之前加上 static 关键字。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[private|public|protected] static 数据类型 变量名;</span><br></pre></td></tr></table></figure>

<p>通过代码具体来看一下吧 ~ 😀</p>
<p>在全局中，也就是类体中声明两个变量，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//成员变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">//静态变量、类变量</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>然后，在主入口 main 方法中进行变量打印：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(j);</span><br><span class="line">System.out.println(i);</span><br></pre></td></tr></table></figure>

<p>程序在编译的时候出错了，告诉我们 “无法从静态上下文中引用非静态变量 i” ，从错误的提示信息中我们可以看到，i 在 main 方法中是无法直接访问的，需要和对象绑定才可以使用；但是 j 没有问题，可以在 main 方法中直接使用。</p>
<p>🤔 那么要如何修改，才能使用呢？</p>
<p>变量 i 需要和对象绑定才能访问。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">System.out.println(j);</span><br><span class="line">TestStatic ts = new TestStatic();</span><br><span class="line">System.out.println(ts.i);</span><br></pre></td></tr></table></figure>

<p>这样编译就能通过了，打印输出「20」 「10」。</p>
<p>接着，我们再来看一段代码，声明的 i 和 j 变量不变。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">TestStatic</span> <span class="variable">ts1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStatic</span>();</span><br><span class="line"><span class="type">TestStatic</span> <span class="variable">ts2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStatic</span>();</span><br><span class="line">System.out.println(ts1.i);</span><br><span class="line">System.out.println(ts1.j);</span><br><span class="line">System.out.println(ts2.i);</span><br><span class="line">System.out.println(ts2.j);</span><br></pre></td></tr></table></figure>

<p>创建两个 TestStatic 对象 ts1 和 ts2 ，分别调用 i 和 j ，运行结果如下：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281126873.png" alt="image-20260128112615957"></p>
<p>对于这个结果我想大家应该没有问题吧。</p>
<p>接着，我们使用 ts1 对象调用 i 赋值 100，使用 ts2 对象调用 j 赋值 200，再来打印分别调用的 i 和 j 。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ts1.i = <span class="number">100</span>;</span><br><span class="line">ts2.j = <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(ts1.i);</span><br><span class="line">System.out.println(ts1.j);</span><br><span class="line">System.out.println(ts2.i);</span><br><span class="line">System.out.println(ts2.j);</span><br></pre></td></tr></table></figure>

<p>运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281126501.png" alt="image-20260128112627596"></p>
<p><code>ts1.i</code> 的值为 100，而 <code>ts2.i</code> 的值为 10，因为两个不同的对象，成员变量各自有一份；然而，<code>ts1.j</code> 和<code>ts2.j</code> 的值都是 200，因为静态变量 j 全局只有一份。</p>
<p>然后，我们在打印之前的变量 ts.i 和 j，看看结果如何？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(j);</span><br><span class="line">System.out.println(ts.i);</span><br></pre></td></tr></table></figure>

<p>运行结果图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281126402.png" alt="image-20260128112642572"></p>
<p>从以上一系列的结果，我们可以总结出：</p>
<ul>
<li>成员变量，每个对象各自有一份。</li>
<li>静态变量或类变量，全局只有一份。</li>
</ul>
<p>好了，同学们在 <code>/home/project</code> 目录下，创建 <code>TestStatic.java</code> 源文件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * static 关键字修饰变量的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStatic</span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//静态变量、类变量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(j);</span><br><span class="line">        <span class="type">TestStatic</span> <span class="variable">ts</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStatic</span>();</span><br><span class="line">        System.out.println(ts.i);</span><br><span class="line">                <span class="comment">// 创建不同的 TestStatic 对象进行变量访问</span></span><br><span class="line">        <span class="type">TestStatic</span> <span class="variable">ts1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStatic</span>();</span><br><span class="line">        <span class="type">TestStatic</span> <span class="variable">ts2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestStatic</span>();</span><br><span class="line">        System.out.println(ts1.i);</span><br><span class="line">        System.out.println(ts1.j);</span><br><span class="line">        System.out.println(ts2.i);</span><br><span class="line">        System.out.println(ts2.j);</span><br><span class="line">                <span class="comment">// 不同的对象对 i 和 j 进行赋值</span></span><br><span class="line">        ts1.i = <span class="number">100</span>;</span><br><span class="line">        ts2.j = <span class="number">200</span>;</span><br><span class="line">                <span class="comment">// 打印不同对象的 i 和 j 变量</span></span><br><span class="line">        System.out.println(ts1.i);</span><br><span class="line">        System.out.println(ts1.j);</span><br><span class="line">        System.out.println(ts2.i);</span><br><span class="line">        System.out.println(ts2.j);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;----&quot;</span>);</span><br><span class="line">        System.out.println(j);</span><br><span class="line">        System.out.println(ts.i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>static 关键字修饰方法</strong></p>
<p>static 关键字修饰方法，我们称之为 “静态方法”。</p>
<p>其实我们一直到使用的 main 方法就是一个被 static 修饰的静态方法。</p>
<p>成员变量 i 不能直接在 main 方法中使用，就说明<strong>非静态成员不能在静态方法中使用</strong>。</p>
<p>🍒 语法格式：在方法返回类型之前加上 static 关键字。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[public|protected|private] static 返回值类型 方法名(参数列表)&#123;</span><br><span class="line">    方法体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类全局中还是声明成员变量 i 和静态变量 j ，进行使用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">  i = <span class="number">1000</span>;</span><br><span class="line">  j = <span class="number">2000</span>;</span><br><span class="line">  method2();</span><br><span class="line">  <span class="keyword">static</span> <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line">  <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">  i = <span class="number">150</span>;</span><br><span class="line">  j = <span class="number">231</span>;</span><br><span class="line">  method1();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态方法 method1() 中，非静态的成员都不能再静态方法中进行访问；在方法中都不能再声明静态的变量。</p>
<p>method2() 是非静态方法，它可以访问外部的静态和非静态的成员。</p>
<p>我们声明静态方法，其中一个目的是，它的调用不在需要和对象进行绑定，直接可以通过类名访问。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TestStatic2.method1();</span><br><span class="line">new TestStatic2().method2();</span><br></pre></td></tr></table></figure>

<p><code>TestStatic2.java</code> 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * static 关键字修饰方法的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStatic2</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 静态方法中不能访问外部非静态的成员</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="comment">// i = 1000;</span></span><br><span class="line">      j = <span class="number">2000</span>;</span><br><span class="line">      <span class="comment">// method2();</span></span><br><span class="line">      <span class="comment">// static int k = 40;</span></span><br><span class="line">      <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 非静态方法中可以访问外部静态和非静态的成员</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">      i = <span class="number">150</span>;</span><br><span class="line">      j = <span class="number">231</span>;</span><br><span class="line">      method1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        TestStatic2.method1();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">TestStatic2</span>().method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>静态的方法，其实之前的用过的 String 类中的 valueOf()，包装类中有好多静态方法，如：parseInt() 等等。</p>
<p><strong>static 关键字修饰语句块</strong></p>
<p>static 关键字还可以修饰语句块，被 static 关键字修饰的语句块我们称之为静态块，否则称之为初始化块。</p>
<p>🍒 语法格式：在语句块之前加上 static 关键字。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">  <span class="comment">// 静态区域中不能访问外部非静态的成员</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>/home/project</code> 目录下，创建 <code>TestStatic3.java</code> 源文件，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * static 关键字修饰语句块的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStatic3</span> &#123;</span><br><span class="line">    <span class="comment">// 类加载时只执行一次</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;静态块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 每次创建对象时都会被加载</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">TestStatic3</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">TestStatic3</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🌟 注意：</p>
<ul>
<li>对静态块而言，只要加载该类，就会执行静态块的内容，但只会执行一次。</li>
<li>对初始化块而言，只有创建对象时，会去执行的部分，创建 n 个对象，就执行初始化块 n 次。</li>
</ul>
<p>运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281127066.png" alt="image-20260128112702136"></p>
<p>实验总结</p>
<p>本实验主要和大家讲解的是 static 关键字如何进行使用：</p>
<ol>
<li>static 修饰变量，该变量称为类变量或静态变量，全局只有一份。</li>
<li>static 修饰方法，该方法称为静态方法，可以无须和对象绑定，通过类名加点直接访问。</li>
<li>注意，static 不可以修饰构造方法。</li>
<li>static 修改语句块，该块称为静态块，加载类时只执行一次。</li>
<li>不管是静态方法还是静态块，在静态的区域中外部非静态的成员不能进行访问。</li>
</ol>
<h5 id="8-5final关键字"><a href="#8-5final关键字" class="headerlink" title="8.5final关键字"></a>8.5final关键字</h5><p><strong>final 关键字修饰类</strong></p>
<p>被 final 关键字修饰的类，该类不能被继承。</p>
<p>我们之前使用过的 String 等类都是 final 修饰的类，它们类中的方法只能被调用，不能被重写。</p>
<p>🍒 语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[public] final class 类名 [extends 类名]&#123;</span><br><span class="line">  // 类体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以来写一个被 final 修饰的类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassD</span> <span class="keyword">extends</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ClassD 不能继承被 final 修饰的 ClassC 类，也就是说，当一个类中所有的方法都不希望被其他类重写时，那么你就把这个类加上 final 来修饰即可。</p>
<p>实验总结</p>
<p>本实验主要学习的就是 final 关键字可以在哪些地方使用：</p>
<ol>
<li>final 可以修饰变量，简单类型变量修饰后则是常量，引用类型变量修饰后则是不可改变地址空间的对象。</li>
<li>final 可以修饰方法，当父类中的方法不希望被子类重写时，可以在方法上加上 final 关键字。</li>
<li>final 可以修饰类，当父类中所有的方法都不希望被子类重写时，可以在类上加上 final 关键字。</li>
</ol>
<h5 id="8-6多态"><a href="#8-6多态" class="headerlink" title="8.6多态"></a>8.6多态</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 打印机类 d1 = new 黑白打印机</span></span><br><span class="line">        <span class="type">DaYinJi</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HeiBaiDYJ</span>();</span><br><span class="line">        <span class="type">DaYinJi</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CaiSeDYJ</span>();</span><br><span class="line">        show(d1);</span><br><span class="line">        show(d2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(DaYinJi d)</span>&#123;</span><br><span class="line">        <span class="comment">// 判断进来的对象是不是黑白打印机</span></span><br><span class="line">        <span class="keyword">if</span>(d <span class="keyword">instanceof</span> HeiBaiDYJ)&#123;</span><br><span class="line">            <span class="type">HeiBaiDYJ</span> <span class="variable">h</span> <span class="operator">=</span> (HeiBaiDYJ)d;</span><br><span class="line">            h.daYin();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d <span class="keyword">instanceof</span> CaiSeDYJ)&#123;</span><br><span class="line">            <span class="type">CaiSeDYJ</span> <span class="variable">c</span> <span class="operator">=</span> (CaiSeDYJ)d;</span><br><span class="line">            c.daYin();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印机类</span></span><br><span class="line"><span class="comment">// abstract 抽象的关键字</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">DaYinJi</span>&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">daYin</span><span class="params">()</span>;  <span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HeiBaiDYJ</span> <span class="keyword">extends</span> <span class="title class_">DaYinJi</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">daYin</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;打印黑白内容&quot;</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CaiSeDYJ</span> <span class="keyword">extends</span> <span class="title class_">DaYinJi</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">daYin</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;打印彩色内容&quot;</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * 1、什么是多态？</span></span><br><span class="line"><span class="comment"> *    生活中的描述：同一个行具备多个不同表现形式或形态能力，列如：打印机(打印黑白或打印彩色)</span></span><br><span class="line"><span class="comment"> *    专业描述：使用不同的实列而执行不同的操作</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 2、多态同学现今需要学习程度？理解多态原则、优势、必要条件</span></span><br><span class="line"><span class="comment"> *    优势：消除类型之间的耦合关系；可替代性；可扩充性；接口性；灵活性；将发性。</span></span><br><span class="line"><span class="comment"> *    必要条件：继承；重写；父类引用指向子类对象(打印机父类 d1 = new 黑白打印机(); 打印机父类 d2 = new 彩色打印机(); )</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><strong>什么是多态</strong></p>
<p>多态可以理解为多种形态，是指子类的对象可以替代父类的对象进行使用。</p>
<p>在 Java 中，引用类型变量可以是多态的。如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ClassA</span> <span class="variable">ca</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassA</span>();</span><br><span class="line">ca = <span class="keyword">new</span> <span class="title class_">ClassB</span>();</span><br><span class="line">ca = <span class="keyword">new</span> <span class="title class_">ClassC</span>();</span><br></pre></td></tr></table></figure>

<p>一个类型为 ClassA 的变量 ca 既可以指向类型为 ClassA 的对象，又可以指向 ClassA 的任何子类的对象。</p>
<p>⭐ 前提条件： ClassB 和 ClassC 必须是 ClassA 的子类，所以说多态是建立在继承基础上的，没有继承关系就没有所谓的多态。</p>
<p>那么引入多态好处是：只要某些类型都从同一个父类派生而来，就能在方法内部把它们当作同一种类型来处理，而无需区分具体的类型。</p>
<p><strong>多态的基本使用</strong></p>
<p>我们说，<strong>一个引用类型变量可能指向多种不同类型的对象</strong> 。</p>
<p>来看看最高父类 Object ，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj = <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line">obj = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">obj = <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br></pre></td></tr></table></figure>

<p>obj 变量可以赋值 Object 对象，也可以赋值 String 对象，还可以赋值 Person 对象 和 Student 对象，这就是 obj 具有的多种形态。</p>
<p>那么这种的转型我们可以分为：向上转型和向下转型。</p>
<ul>
<li><strong>向上转型</strong>，也可以称为隐式转换，这是一个子类到父类的过程。</li>
</ul>
<p>还是需要使用之前继承实验中的 Person 和 Student 类，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">p.setName(<span class="string">&quot;小李子&quot;</span>);</span><br><span class="line">p.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">p.setSchool(<span class="string">&quot;北京大学&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>将 Student 对象赋值给 Person 变量 p，那就是子类赋值给父类。</p>
<p>不过编译上面的代码，会出错哦 😮</p>
<p>从提示的信息中我们可以看到，告诉我们找不到 setSchool() 方法。</p>
<p>你想，程序在编译的时候变量 p 的类型是什么？ 🤔</p>
<p>🙋 Student 类型，等号后面 new Student() 呀 ~</p>
<p>👩‍🏫 no no no ！编译时 p 的类型是 Person ，这是在声明是告诉系统的 Person p 。这也是多态中非常容易搞错的地方，很多同学认为 new Student() 那么类型就是 Student ，而实际上，在声明时给的类型是 Person 。</p>
<p>这里需要提到一个很重要的知识点，<strong>在多态情况下，引用类型变量类型分编译时类型和运行时类型。</strong> 👆 上面的代码中，变量 p 在编译时的类型是 Person，父类 Person 中并没有 setSchool() 方法，所以系统提示找不到；而变量 p 在运行时的类型是 Student 。</p>
<p>🙋‍♂️ 那么如何确定运行时是 Student 类型呢？</p>
<p>👩‍🏫 这位同学的问题提的很好！ 🌸</p>
<p>我们需改一下上述代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">p.setName(<span class="string">&quot;小李子&quot;</span>);</span><br><span class="line">p.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line"><span class="comment">// p1.setSchool(&quot;北京大学&quot;);</span></span><br><span class="line">System.out.println(p.getInfo());</span><br></pre></td></tr></table></figure>

<p>把编译不能通过的代码注释起来，现在来调用 getInfo() 方法，getInfo() 方法父类 Person 中有这个方法，我们还在子类 Student 中重写了这个方法，记得吗？ 👇</p>
<p>Person 类中的 getInfo() 方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name+<span class="string">&quot;   &quot;</span>+sex+<span class="string">&quot;   &quot;</span>+birthday;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Student 类中的 getInfo() 方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">super</span>.getInfo() + <span class="string">&quot;   &quot;</span> + getSchool();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>来看一下编译运行的结果吧，如下图：</p>
<p>所以啊，程序编译是查找的是 Person 类中的 getInfo() 方法，而实际运行时调用的是 Student 类中的 getInfo() 方法，打印输出的是 4 部分内容信息。</p>
<p>📣 记住：</p>
<ol>
<li>在操作的两个类之间必须存在继承关系。</li>
<li>一个声明的类型是父类的变量，而实际引用的是子类的对象时候，不能访问子类中新增的属性和方法。</li>
</ol>
<p>好了，大家动手写一写代码吧 ~ 💪</p>
<p>需要在 <code>/home/project/</code> 目录下，创建 <code>TestPolymorphic.java</code> 源文件，在类中添加 <code>method1()</code> 方法，完成向上转型操作。</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Person;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Student;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多态的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPolymorphic</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向上转型（隐式转换）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 子类到父类</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        p.setName(<span class="string">&quot;小李子&quot;</span>);</span><br><span class="line">        p.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        <span class="comment">// p.setSchool(&quot;北京大学&quot;);</span></span><br><span class="line">        System.out.println(p.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestPolymorphic</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPolymorphic</span>();</span><br><span class="line">        tp.method1();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>向下转型</strong>，也可以称为显式转换、强类型转换，还有一种说法叫造型，这是一个父类到子类的过程。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Person p = new Person();</span><br><span class="line">Student s = (Student) p;</span><br></pre></td></tr></table></figure>

<p>创建一个父类 Person 对象赋值为 Person 类型的变量 p，然后将 p 赋值给子类 Student 类型变量 s，这时需要使用 “ () ” 造型符，进行强类型转换才能通过编译。上述的代码编译没有问题，但是运行时会有无法造型的异常。</p>
<p>看一下编译运行结果图：</p>
<p>🤔 你可能会觉得，为啥编译没有问题，而运行的时候出错了呢？</p>
<p>对于引用类型而言，只要操作的两个类之间存在继承关系，那么它们就可以进行造型操作。然而在运行时发现，你要把一个 Person 对象完全转换为 Student 对象，系统干不了这事了，这是不可能的完成的。所以抛出异常，对于异常我们会在后续的章节中和大家详细讲解。</p>
<p>🌟 注意：多态指的是多种形态，而非真正的地址空间的改变。</p>
<p>我们需要修改上述代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p;</span><br><span class="line">s.setSchool(<span class="string">&quot;清华大学&quot;</span>);</span><br><span class="line">System.out.println(s.getInfo());</span><br></pre></td></tr></table></figure>

<p>以上代码中，变量 p 编译时的类型是 Person ，而运行时变量 p 的类型是 Student ，这时运行时才能把变量 p 赋值给 变量 s 。</p>
<p>🌟 注意：对象在运行时，只有一种确切的类型。</p>
<p>好了，大家动手写一下吧 ~ 💪</p>
<p>可以在已创建 <code>TestPolymorphic.java</code> 源文件中，添加 <code>method2()</code> 方法，完成向下转型操作。</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Person;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Student;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多态的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPolymorphic</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向下转型（显式转换）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 父类到子类</span></span><br><span class="line">        <span class="comment">// Person p = new Person();</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p;</span><br><span class="line">        s.setSchool(<span class="string">&quot;清华大学&quot;</span>);</span><br><span class="line">        System.out.println(s.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestPolymorphic</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPolymorphic</span>();</span><br><span class="line">        tp.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>instanceof 运算符的使用</strong></p>
<p>写完了向下转型代码后，可能你有些迷糊了，这到底在干嘛，直接创建 Student 对象进行方法调用不就可以了吗，干嘛还是转来转去的。好麻烦 ~ 🙄</p>
<p>看着的确有点哈，之前所讲的内容是告诉你向上和向下转型的基本结构，应该如何书写。</p>
<p>这里我们要来讲讲以多态的形式来传递参数，增强参数类型的灵活性。</p>
<p>🤔 这句话如何来理解呢？</p>
<p>比如，Person 和 Student 是相对独立的类，那么我现在需要写一个 method3() 方法，传递 Person 或者 Student 对象信息进行操作，要怎么写呢。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Person p)</span>&#123;</span><br><span class="line">  System.out.println(p.getInfo());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Student s)</span>&#123;</span><br><span class="line">  System.out.println(s.getInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们从代码中可以看到，method3 中调用的都是 getInfo() 方法，只是传递的参数不同，这一类方法我们叫重载的方法，对吧！</p>
<p>然而，我们现在 Student 是 Person 的子类，两个类之间的存在继承关系，那么我们就可以使用多态方式来写该方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Person p)</span>&#123;</span><br><span class="line">  System.out.println(p.getInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当传递的参数为 Person 对象时，调用的是 Person 类中的 getInfo() 方法；当传递的参数为 Student 对象时，调用的是 Student 类中的 getInfo() 方法。此时的参数就非常灵活，不用写多个重载的方法了。</p>
<p>接下来，要做的是当参数传入 Person 对象时，需要调用 setName() 方法传值；当参数传入的是 Student 对象时，需要调用 setSchool() 方法传值。</p>
<p>判断类型是否匹配，这里我们需要提到的是 instanceof 运算符，这也是关键字。</p>
<p>通过 instanceof 来进行类型的判断，类型匹配我们可以造型，这样可以避免造型异常。</p>
<p>🍒 语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;引用类型对象&gt; instanceof &lt;引用类型&gt;</span><br></pre></td></tr></table></figure>

<p>引用类型对象指得是对象变量名，引用类型指得是类名。</p>
<p>然后，我们修改上述代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">    p.setName(<span class="string">&quot;小凳子&quot;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Student)&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p;</span><br><span class="line">    s.setSchool(<span class="string">&quot;浙江工业大学&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(p.getInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看了结果之后，是不是有一种似乎和我想要的效果不太一样。设置的学校怎么没有显示，还是个 null 值。</p>
<p>对于上述代码的执行过程，我们分析一下，当参数传入 Person 对象，p instanceof Person ，判断能通过吧，调用 setName() 方法后调用 getInfo() 方法任务完成；当参数传入 Student 对象，p instanceof Person，这个判断能通过吗？当然可以，Student 是 Person 的子类，这个判断上，可以隐式完成转换，所以根本不会去判断 p instanceof Student，这样就不会去设置学校信息了。</p>
<p>🌟 注意：使用 instanceof 来判断类型的 if 条件判断语句的顺序很讲究，先判断子类，再判断父类，如果是相对独立的类就没有前后顺序关系了。</p>
<p>修改代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Student)&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p;</span><br><span class="line">    s.setSchool(<span class="string">&quot;浙江工业大学&quot;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">    p.setName(<span class="string">&quot;小凳子&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(p.getInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，自己动手把代码写一下吧 ~ 💪</p>
<p>可以在已创建 <code>TestPolymorphic.java</code> 源文件中，添加 <code>method3()</code> 方法，完成 instanceof 运算符的使用。</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Person;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.inheritance.Student;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多态的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPolymorphic</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 多态情况下，参数灵活性体现</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p Person或子类对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Student)&#123;</span><br><span class="line">            <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p;</span><br><span class="line">            s.setSchool(<span class="string">&quot;浙江工业大学&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">            p.setName(<span class="string">&quot;小凳子&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(p.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestPolymorphic</span> <span class="variable">tp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestPolymorphic</span>();</span><br><span class="line">        tp.method3(<span class="keyword">new</span> <span class="title class_">Person</span>());</span><br><span class="line">        tp.method3(<span class="keyword">new</span> <span class="title class_">Student</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>学了 instanceof 关键字如何使用之后，同学们可以修改一下之前在 Person 类中重写的 equals() 方法，里面的造型之前先进行判断，可以避免造型异常。</p>
<p>好了，好好理解多态的方式，掌握基本的书写格式。在后续的实验中我们会大量的使用继承和多态进行编码处理。</p>
<h5 id="8-7复习与挑战"><a href="#8-7复习与挑战" class="headerlink" title="8.7复习与挑战"></a>8.7复习与挑战</h5><p><strong>本章总结</strong></p>
<p>本章主要学习了面向对象进阶内容，总结如下：</p>
<ol>
<li><p>Java 三大特征：封装、继承、多态，本章中主要强调继承和多态。</p>
<p>封装：为了保证数据的完整性和增强代码的可维护性。</p>
<p>继承：实现类的复用。</p>
<ul>
<li>Java 中类的继承只支持单继承，使用关键字 extends 实现继承。</li>
<li>每一个类在没有显式继承操作时，继承的是 Object 类，它是 Java 中最高父类。</li>
<li>类与类显式继承之后，子类可以访问父类中可访问的成员，但是父类不能访问子类新增的成员。</li>
<li>父类中的可访问的属性和方法都可以被继承，但是构造方法不能继承。</li>
</ul>
<p>有继承才有多态，没有继承关系，就没有所谓的多态。</p>
<p>多态：实现参数、返回类型的灵活性。</p>
<ul>
<li>多态指的是以多种形态存在的对象类型。</li>
<li>在多态情况下，分为向上转型和向下转型。</li>
<li>在多态情况下，存在编译时类型和运行时类型。</li>
</ul>
</li>
<li><p>方法重写 Override</p>
<p>类之间存在显式继承之后，当父类中的方法不能满足子类需求时，需要将方法进行重写也可以叫覆盖。</p>
<p>方法重写需要满足：</p>
<ul>
<li>相同的方法名，参数列表，返回值类型。</li>
<li>访问权限不能够更加严格。</li>
</ul>
<p>在实际应用中，往往我们会重写 Object 类中的方法：</p>
<ul>
<li>toString() 方法，打印对象可以按照项目需求进行输出。</li>
<li>equals() 和 hashCode() 方法，对象值进行比较操作，需要重写 equals() 方法后才能达到效果。</li>
</ul>
</li>
<li><p>super 关键字：主要用来调用父类可访问的属性和方法。</p>
<ul>
<li>由于构造方法不被继承，但可以通过 super 关键字被子类调用。</li>
<li>在构造方法中不能同时采用 super 和 this 关键字访问父类或本类的构造方法，因为它们必须出现在构造方法体中的第一行。</li>
<li>如果子类的构造器中没有显式地调用父类构造器，也没有使用 this 关键字调用重载的其它构造器，则系统默认调用父类无参数的构造器。</li>
<li>如果子类构造器中既未显式调用父类构造器，而父类中又没有无参的构造器，则编译出错。</li>
</ul>
</li>
<li><p>static 关键字：主要用来修饰变量、方法、语句块。</p>
<ul>
<li>static 修饰变量，该变量称为类变量或静态变量，全局只有一份。</li>
<li>static 修饰方法，该方法称为静态方法，可以无须和对象绑定，通过类名加点直接访问。注意，static 不可以修饰构造方法。</li>
<li>static 修饰语句块，该块称为静态块，加载类时只执行一次。</li>
<li>不管是静态方法还是静态块，在静态的区域中外部非静态的成员不能进行访问。</li>
</ul>
</li>
<li><p>final 关键字：主要用来修饰变量、方法、类。</p>
<ul>
<li>final 可以修饰变量，简单类型变量修饰后则是常量，引用类型变量修饰后则是不可改变地址空间的对象。</li>
<li>final 可以修饰方法，当父类中的方法不希望被子类重写时，可以在方法上加上 final 关键字。</li>
<li>final 可以修饰类，当父类中所有的方法都不希望被子类重写时，可以在类上加上 final 关键字。</li>
</ul>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281127258.png" alt="image-20260128112725911"></p>
<h3 id="九、抽象类与接口"><a href="#九、抽象类与接口" class="headerlink" title="九、抽象类与接口"></a>九、抽象类与接口</h3><h5 id="9-1抽象类"><a href="#9-1抽象类" class="headerlink" title="9.1抽象类"></a>9.1抽象类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建一个抽象类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Test</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抽象类不能被实列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Test</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>(<span class="string">&quot;傻子&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抽象类的关键字：abstract</span></span><br><span class="line"><span class="comment">// 抽象类除了不能实列化对象之外，其它的功能都能拥有</span></span><br><span class="line"><span class="comment">// 如果我们要实现抽象类的运用，通过继承的方法实现去实现的抽象类</span></span><br><span class="line"><span class="comment">// 现实生活中：论文 --&gt;  实际运用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shixian</span> <span class="keyword">extends</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Shixian</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>抽象类的应用</strong></p>
<p>以下几种情况在使用抽象类时需要注意。</p>
<p>🍒 情况一：包含抽象方法的类，必须声明为抽象类。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class ClassA&#123;</span><br><span class="line">    public abstract void methodA();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281127087.png" alt="image-20260128112747125"></p>
<p>🍒 情况二：抽象类中不一定需要包含抽象方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassB</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;methodB()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译不会有任何错误。</p>
<p>🍒 情况三：抽象类中可以有构造方法，但不能被外部使用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassC</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">ClassC</span><span class="params">(String _name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = _name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">methodC</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281128967.png" alt="image-20260128112801979"></p>
<p>🍒 情况四：子类不重写父类中的抽象方法，那么子类可以声明为抽象类，否则编译会有错误。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassD</span> <span class="keyword">extends</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassD</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;Rose&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ClassD 声明为抽象类后，编译是不会有错误的。</p>
<p>🍒 情况五：有一些抽象类不希望你去关注它的子类，那么会在抽象类中提供一个静态的方法，返回该抽象类的实例。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassD</span> <span class="keyword">extends</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassD</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;Rose&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态方法，返回抽象类ClassD实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ClassD <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ClassE</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassE</span> <span class="keyword">extends</span> <span class="title class_">ClassD</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodC</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;重写了 methodC 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>访问语句：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ClassD</span> <span class="variable">cd</span> <span class="operator">=</span> ClassD.getInstance();</span><br><span class="line">cd.methodC();</span><br></pre></td></tr></table></figure>

<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽象类的基本使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAbstract2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 抽象类不能实例化</span></span><br><span class="line">        <span class="comment">// ClassC cc1 = new ClassC();</span></span><br><span class="line">        <span class="comment">// ClassC cc2 = new ClassC(&quot;Tom&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">ClassD</span> <span class="variable">cd</span> <span class="operator">=</span> ClassD.getInstance();</span><br><span class="line">        cd.methodC();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 包含抽象方法的类，必须声明为抽象类。</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassA</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 抽象类中不一定需要包含抽象方法。</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassB</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;methodB()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 抽象类中可以有构造方法，但不能被外部使用。</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassC</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">ClassC</span><span class="params">(String _name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = _name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">methodC</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类不重写父类中的抽象方法，那么子类可以声明为抽象类，否则编译会有错误。</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassD</span> <span class="keyword">extends</span> <span class="title class_">ClassC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClassD</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;Rose&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态方法，返回抽象类ClassD实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ClassD <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ClassE</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 有一些抽象类不希望你去关注它的子类，那么会在抽象类中提供一个静态的方法，返回该抽象类的实例。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassE</span> <span class="keyword">extends</span> <span class="title class_">ClassD</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodC</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;重写了 methodC 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实验总结</p>
<p>本实验主要学习了抽象类的基本使用：</p>
<ol>
<li>关键字 abstract 只能用来修饰抽象方法和抽象类，不可用于修饰成员属性。</li>
<li>虽然抽象类可以拥有构造方法，但它的构造方法并不能被外部直接调用，因为外部不允许通过构造方法来创建抽象类的实例，抽象类的构造方法只能提供给它的子类调用。</li>
<li>子类如果没重写抽象方法，则该子类仍需要声明为抽象类；只有重写了抽象方法的子类，才能创建对象。</li>
</ol>
<h5 id="9-2接口"><a href="#9-2接口" class="headerlink" title="9.2接口"></a>9.2接口</h5><p><strong>实验介绍</strong></p>
<p>本节课你将学习 Java 中的<strong>接口</strong>，它是一种特殊的抽象类，面向接口的开发也是目前企业项目的标配，相信你一定能学会！</p>
<p>我们开始吧～</p>
<p>知识点</p>
<ul>
<li>interface</li>
<li>implements</li>
</ul>
<p><strong>接口的基本结构</strong></p>
<p>👉 Java 中类是支持单继承还是多继承？</p>
<p>🙋 Java 类只支持单继承。</p>
<p>很好，在 Java 中由于类只能继承一个类，为了改进就有了接口，所以接口模拟的实现了多继承。</p>
<p>我们来看一下接口声明的格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">public</span>] interface 接口名&#123;</span><br><span class="line">    <span class="comment">// 声明常量</span></span><br><span class="line">      <span class="comment">// 声明抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于接口的修饰符，只有 public，用 public 修饰的接口称为公共接口。被修饰为 public 的接口，接口名必须和文件名一致。</p>
<p>类通过关键字 class 标识，而接口通过<strong>关键字 interface</strong> 来标识。</p>
<p>🌟 注意：在接口中声明的属性，系统会默认给它加上 public static final，而声明的方法系统会给加上 public abstract，也就是说接口里面只有常量和抽象方法。</p>
<p>从结构上来看，接口就是特殊的抽象类。看一下具体的代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ID</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>等价于：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ID</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以看到在接口里面只有常量和方法的声明，所以说接口是由常量和抽象方法组成的。</p>
<p>一般我们建议，在接口中常量前的修饰符全部省略书写，而抽象方法省略 abstract 关键字的书写。如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceB</span>&#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">SELECT_PERSON_ALL</span> <span class="operator">=</span> <span class="string">&quot;SELECT id,name,sex,birthday FROM persons&quot;</span>;</span><br><span class="line">      <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">method2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，可以在 main() 方法中，通过接口名直接来访问常量。 👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(InterfaceA.ID);</span><br><span class="line">System.out.println(InterfaceB.SELECT_PERSON_ALL);</span><br></pre></td></tr></table></figure>

<p>同样也需要注意以下的写法都是不允许存在的，在接口中不能存在构造方法和方法的方法体。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">InterfaceC</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接口的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInterface</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(InterfaceA.ID);</span><br><span class="line">        System.out.println(InterfaceB.SELECT_PERSON_ALL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 声明接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ID</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceB</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">SELECT_PERSON_ALL</span> <span class="operator">=</span> <span class="string">&quot;SELECT id,name,sex,birthday FROM persons&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">method2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceC</span>&#123;</span><br><span class="line">    <span class="comment">// 接口中不能构造方法</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      public InterfaceC()&#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">// 接口中只有方法的声明，不能有方法体</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      public void method3()&#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>接口的继承</strong></p>
<p>和类一样，接口也具有继承性，它将继承父接口的所有属性和方法。</p>
<p>不过接口可以继承多个父接口，<strong>实现了多继承</strong>。</p>
<p>🍀 语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">public</span>] interface 接口名 extends 父接口名<span class="number">1</span>[, 父接口名<span class="number">2</span>,... 父接口名n]&#123;</span><br><span class="line">        <span class="comment">// 可以继承父接口中所有的属性和方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以使用之前已经声明好的 InterfaceA、InterfaceB 和 InterfaceC 接口，进行继承操作：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceD</span> <span class="keyword">extends</span> <span class="title class_">InterfaceA</span>, InterfaceB&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceE</span> <span class="keyword">extends</span> <span class="title class_">InterfaceC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method5</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口的继承可以继承一个接口，也可以继承多个接口。</p>
<p>我们可以采用 InterfaceD 接口访问常量 ID 和 SELECT_PERSON_ALL，运行的效果图如下：</p>
<p>其实接口就是用来<strong>实现类之间多重继承功能</strong>的一种结构，是相对独立的完成特定功能的属性集合。</p>
<p>源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接口的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInterface</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(InterfaceA.ID);</span><br><span class="line">        System.out.println(InterfaceB.SELECT_PERSON_ALL);</span><br><span class="line">        System.out.println(<span class="string">&quot;---InterfaceD 进行访问---&quot;</span>);</span><br><span class="line">        System.out.println(InterfaceD.ID);</span><br><span class="line">        System.out.println(InterfaceD.SELECT_PERSON_ALL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 声明接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ID</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceB</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">SELECT_PERSON_ALL</span> <span class="operator">=</span> <span class="string">&quot;SELECT id,name,sex,birthday FROM persons&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">method2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceC</span>&#123;</span><br><span class="line">    <span class="comment">// 接口中不能构造方法</span></span><br><span class="line">    <span class="comment">// public InterfaceC()&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// 接口中只有方法的声明，不能有方法体</span></span><br><span class="line">    <span class="comment">// public void method3()&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 接口的继承</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceD</span> <span class="keyword">extends</span> <span class="title class_">InterfaceA</span>, InterfaceB&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceE</span> <span class="keyword">extends</span> <span class="title class_">InterfaceC</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method5</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>接口的实现</strong></p>
<p>在接口中不能编写构造方法，所以接口同样不能实例化。</p>
<p>对于接口的使用，我们也需要给它提供相应的子类，实现接口中所有的抽象方法才行。</p>
<p>实现接口需要<strong>使用关键字 implements</strong> 。</p>
<p>🍀 语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">public</span>] class 类名 implments 接口名<span class="number">1</span>[, 接口名<span class="number">2</span>, ...接口名n]&#123;</span><br><span class="line">  <span class="comment">// 可以调用接口中所有属性</span></span><br><span class="line">  <span class="comment">// 实现接口中所有的抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每个类最多只能继承一个父类，不能同时继承多个类，也就是不允许多重继承。而接口不存在这方面的限制，可以只实现一个接口，也可以同时实现两个接口、三个接口等等。</p>
<ul>
<li>一个类实现不同的接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassA</span> <span class="keyword">implements</span> <span class="title class_">InterfaceD</span>, InterfaceE&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么就需要实现接口中所有的方法，实现所有的方法是指 InterfaceD 和 InterfaceE 接口中的方法，以及它们的父接口中的所有方法，若没有实现方法，则编译时会有提示错误信息。如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281128970.png" alt="image-20260128112818970"></p>
<p>参考代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 一个类实现不同的接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassA</span> <span class="keyword">implements</span> <span class="title class_">InterfaceD</span>, InterfaceE&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现了 method4 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现了 method1 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">method2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现了 method2 方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">method5</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现了 method5 方法&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现了 method3 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然，也可以将该类设置为抽象类，可以不需要实现所有的方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassB</span> <span class="keyword">implements</span> <span class="title class_">InterfaceD</span>, InterfaceE&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不同的类可以实现相同的接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClaassC</span> <span class="keyword">implements</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在 ClassC 中实现 method1 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassD</span> <span class="keyword">implements</span> <span class="title class_">InterfaceA</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在 ClassD 中实现 method1 方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，我们可以在 main 方法中获取 InterfaceA 接口实例，调用 method1() 方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">InterfaceA</span> <span class="variable">ia</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassC</span>();</span><br><span class="line">ia.method1();</span><br><span class="line">ia = <span class="keyword">new</span> <span class="title class_">ClassD</span>();</span><br><span class="line">ia.method1();</span><br></pre></td></tr></table></figure>

<p>接下来，我们来看看以下代码：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceX</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">InterfaceY</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassZ</span> <span class="keyword">implements</span> <span class="title class_">InterfaceX</span>,InterfaceY&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>大家看看 👀 ，编译会出错吗？</p>
<p>🤔 相同的方法名 method1() ，会冲突吧 ~</p>
<p>这个程序没有任何问题，在 ClassZ 中所写的 method1() 方法既实现了 InterfaceX 接口中的 method1() 方法，也实现了 InterfaceY 接口中的 method1() 方法。</p>
<p><strong>实验总结</strong></p>
<p>本实验我们主要学习了接口的基本结构和使用：</p>
<ol>
<li>声明接口采用 interface 关键字来标识的，在接口中只有常量和方法的声明。</li>
<li>接口可以采用 extends 关键字完成多继承，也就是说接口可以继承一个接口，也可以继承多个接口。</li>
<li>接口不能实例化，必须通过子类才能获取实例，那么子类需要通过 implements 关键字实现该接口。</li>
</ol>
<p>接口与类的不同之处：</p>
<ul>
<li>凡是类都有构造方法，即便是抽象类也支持定义构造方法，但接口不允许定义构造方法。</li>
<li>在 JDK8 以前，接口内部的所有方法都必须是抽象方法，但可以省略 abstract 关键字的修饰。</li>
<li>接口里声明的属性默认是 public final static 修饰，就是一个常量值。</li>
</ul>
<p><strong>如何给电子邮件设计接口</strong></p>
<p>电子邮件是人们广泛使用的一种信息沟通形式，要创建一封电子邮件，至少需要发信者邮箱、收信者邮箱、邮件主题和邮件内容 4 个部分。可以采用接口定义电子邮件的这些约定，让电子邮件类（实现类）必须实现这个接口，从而达到让电子邮件必须满足这些约定的要求。根据每个 Java 文件的提示，完成代码编写。另外本实验的内容理解起来略微复杂，需要你仔细分析理解。</p>
<p>在终端输入以下命令新建包结构，并创建相关文件，如下图所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"># 创建包</span><br><span class="line">mkdir -p org/lanqiao/email</span><br><span class="line"># 创建文件</span><br><span class="line">touch org/lanqiao/email/Email.java</span><br><span class="line">touch org/lanqiao/email/EmailInterface.java</span><br><span class="line">touch org/lanqiao/email/EmailWriter.java</span><br><span class="line">touch org/lanqiao/email/TestInterface2.java</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281128516.png" alt="image-20260128112836553"></p>
<p>🍒 定义电子邮件接口，在 <code>EmailInterface.java</code> 文件里面输入以下代码。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义电子邮件接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmailInterface</span> &#123;</span><br><span class="line">    <span class="comment">//设置发信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendAdd</span><span class="params">(String add)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置收信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceiveAdd</span><span class="params">(String add)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置邮件主题</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmailTitle</span><span class="params">(String title)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置邮件内容</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeEmail</span><span class="params">(String email)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 定义电子邮件类，实现 <code>EmailInterface</code> 接口，在 <code>Email.java</code> 中输入以下代码。</p>
<p>🌟 注意：在实现接口中抽象方法的同时，邮箱类本身还有一个 <code>showEmail()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义Email，实现Email接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> <span class="keyword">implements</span> <span class="title class_">EmailInterface</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sendAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;               <span class="comment">//发信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">receiveAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;            <span class="comment">//收信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">emailTitle</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;            <span class="comment">//邮件主题</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;                 <span class="comment">//邮件内容</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置发信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendAdd</span><span class="params">(String add)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sendAdd = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置收信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceiveAdd</span><span class="params">(String add)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.receiveAdd = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置邮件主题</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmailTitle</span><span class="params">(String title)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.emailTitle = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置邮件内容</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//显示邮件全部信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;***显示电子邮件内容***&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;发信者邮箱：&quot;</span> + sendAdd);</span><br><span class="line">        System.out.println(<span class="string">&quot;收信者邮箱：&quot;</span> + receiveAdd);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮件主题：&quot;</span> + emailTitle);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮件内容：&quot;</span> + email);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>🍒 定义一个邮件作者类。邮件作者类中含静态方法 <code>writeEmail(EmailInterface email)</code>，用于写邮件，在 <code>EmailWriter.java</code> 中输入以下代码。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义一个邮件作者类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailWriter</span> &#123;</span><br><span class="line">    <span class="comment">//定义写邮件的静态方法，形参是EmailInterface接口</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeEmail</span><span class="params">(EmailInterface email)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入发信者邮箱：&quot;</span>);</span><br><span class="line">        email.setSendAdd(input.next());</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入收信者邮箱：&quot;</span>);</span><br><span class="line">        email.setReceiveAdd(input.next());</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入邮件主题：&quot;</span>);</span><br><span class="line">        email.setEmailTitle(input.next());</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入邮件内容：&quot;</span>);</span><br><span class="line">        email.writeEmail(input.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编写测试类，在 <code>TestInterface2.java</code> 中输入以下代码。</p>
<p>测试类代码首先创建并实例化出一个实现了电子邮件接口的对象 <code>email</code>，然后调用 <code>EmailWriter</code> 类的静态方法 <code>writeEmail</code> 写邮件，最后将 <code>email</code> 对象强制类型转换成 <code>Email</code> 对象（不提倡此做法），调用 <code>Email</code> 类的 <code>showEmail()</code>方法。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 测试类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInterface2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建并实例化一个实现了电子邮件接口的对象email</span></span><br><span class="line">        <span class="type">EmailInterface</span> <span class="variable">email</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Email</span>();</span><br><span class="line">        <span class="comment">//调用EmailWriter类的静态方法writeEmail写邮件</span></span><br><span class="line">        EmailWriter.writeEmail(email);</span><br><span class="line">        <span class="comment">//强制类型转换，调用Email类的showEmail()方法（不是接口方法）</span></span><br><span class="line">        ((Email) email).showEmail();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件 <code>TestInterface2.java</code> 中，也用到了多态的内容，需要注意理解。其中 <code>EmailInterface email = new Email();</code> 是向上转型，<code>((Email) email).showEmail();</code> 是向下转型之后再调用的方法。</p>
<p><strong>一个类实现多个接口</strong></p>
<p>假设一个邮件，不仅需要符合 EmailInterface 接口对电子邮件规范的要求，而且需要符合对发送端和接收端端口号接口规范的要求，才允许成为一个合格的电子邮件。在这种情况下我们就需要用到一个类实现多个接口。现在要求邮件，不仅需要符合 EmailInterface 接口对电子邮件规范的要求，而且需要符合对发送端和接收端端口号接口规范的要求，我们将端口接口定义为 <strong>PortInterface</strong>，所有的代码还是在 <code>/home/project/org/lanqiao/email</code> 目录下。</p>
<p>在 <code>/home/project/org/lanqiao/email</code> 文件夹里面新建 <code>PortInterface.java</code> 源文件，并输入以下代码。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*   定义设置发送端和接收端端口号的接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PortInterface</span> &#123;</span><br><span class="line">    <span class="comment">//设置发送端端口号</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendPort</span><span class="params">(<span class="type">int</span> port)</span>;</span><br><span class="line">    <span class="comment">//设置接收端端口号</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceivePort</span><span class="params">(<span class="type">int</span> port)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Email</code> 类不仅要实现 <code>EmailInterface</code> 接口，还要实现 <code>PortInterface</code> 接口，同时类方法中必须实现 <code>PortInterface</code> 接口的抽象方法。将 <code>Email.java</code> 替换成如下代码：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义 Email，实现 EmailInterface 接口和PortInterface接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> <span class="keyword">implements</span> <span class="title class_">EmailInterface</span>,PortInterface &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sendAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">//发信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">receiveAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">//收信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">emailTitle</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">//邮件主题</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">//邮件内容</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加端口属性</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">sendPort</span> <span class="operator">=</span> <span class="number">25</span>;        <span class="comment">//发送端端口号</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">receivePort</span> <span class="operator">=</span> <span class="number">110</span>;     <span class="comment">//接收端端口号</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置发送端端口号</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendPort</span><span class="params">(<span class="type">int</span> port)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sendPort = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置接收端端口号</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceivePort</span><span class="params">(<span class="type">int</span> port)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.receivePort = port;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置发信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendAdd</span><span class="params">(String add)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sendAdd = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置收信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceiveAdd</span><span class="params">(String add)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.receiveAdd = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置邮件主题</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmailTitle</span><span class="params">(String title)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.emailTitle = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现设置邮件内容</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//显示邮件全部信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;***显示电子邮件内容***&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;发送端端口号：&quot;</span> + sendPort);</span><br><span class="line">        System.out.println(<span class="string">&quot;接收端端口号：&quot;</span> + receivePort);</span><br><span class="line">        System.out.println(<span class="string">&quot;发信者邮箱：&quot;</span> + sendAdd);</span><br><span class="line">        System.out.println(<span class="string">&quot;收信者邮箱：&quot;</span> + receiveAdd);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮件主题：&quot;</span> + emailTitle);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮件内容：&quot;</span> + email);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其他代码不做修改。注意上面程序中的 <code>public class Email implements EmailInterface,PortInterface</code> 这段代码，<code>Email</code> 类同时实现了 <code>EmailInterface</code> 和 <code>PortInterface</code> 两个接口，而且也重写了接口中的抽象方法。这样我们就实现了一个类实现多个接口。编译、运行程序会发现，程序可以正常编译和运行。</p>
<p><strong>实现接口继承和合并优化处理</strong></p>
<p>在编写代码之前，大家先自己思考一下：让一个类（Email）实现了多个接口（EmailInterface 和 PortInterface 接口），但是之后在 EmailWriter 类的 writeEmail() 方法中传入对象时，形参就必须是这个类（Email），而不能是该类实现的某个接口。 对吧 ~ 🙂</p>
<p>因为根据多态的知识，多态对象只能调用定义该对象的类和其父接口中的方法，因此如果给 writeEmail() 方法设置的形参只是某一个接口（如 EmailInterface 接口）类型，那么该形参将无法调用其他接口（PortInterface 接口）中的方法。但如果将方法的参数类型设置为一个类而不是一个接口，这样做就不是我们推荐的面向接口编程了。所以我们就需要解决这个问题。</p>
<p>那么这里可以用接口继承的方式解决这个问题，其实就是采用了适配器设计模式。</p>
<p>将 <code>EmailInterface.java</code> 替换成如下代码。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义电子邮件接口</span></span><br><span class="line"><span class="comment">* 让邮件接口继承 PortInterface 接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmailInterface</span> <span class="keyword">extends</span> <span class="title class_">PortInterface</span> &#123;</span><br><span class="line">    <span class="comment">//设置发信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSendAdd</span><span class="params">(String add)</span>;</span><br><span class="line">    <span class="comment">//设置收信者邮箱</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setReceiveAdd</span><span class="params">(String add)</span>;</span><br><span class="line">    <span class="comment">//设置邮件主题</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmailTitle</span><span class="params">(String title)</span>;</span><br><span class="line">    <span class="comment">//设置邮件内容</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeEmail</span><span class="params">(String email)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>PortInterface</code> 接口、<code>EmailWriter</code> 类和测试类 <code>TestInterface2</code> 的代码不用调整，这样的程序就体现了面向接口编程的特性，可以实现多态性。<code>Email</code> 类中 <code>class Email implements EmailInterface,PortInterface</code> 的定义出去掉实现 <code>PortInterface</code> 接口即可。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.email;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 定义Email，实现Email接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Email</span> <span class="keyword">implements</span> <span class="title class_">EmailInterface</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sendAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;               <span class="comment">//发信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">receiveAdd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;            <span class="comment">//收信者邮箱</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">emailTitle</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;            <span class="comment">//邮件主题</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;                 <span class="comment">//邮件内容</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加端口属性</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">sendPort</span> <span class="operator">=</span> <span class="number">25</span>;        <span class="comment">//发送端端口号</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">receivePort</span> <span class="operator">=</span> <span class="number">110</span>;     <span class="comment">//接收端端口号</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 后面代码没有改变在此省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="9-3复习与挑战"><a href="#9-3复习与挑战" class="headerlink" title="9.3复习与挑战"></a>9.3复习与挑战</h5><p><strong>本章总结</strong></p>
<p>本章主要讲的是 Java 语言中的核心：抽象类和接口，总结如下：</p>
<ol>
<li>抽象类<ul>
<li>一个类中包含抽象方法，该类必须声明为抽象类。</li>
<li>abstract 关键字可以修饰类、可以修饰方法，但不能修饰属性；被 abstract 关键字修饰的方法只有声明部分，没有方法体。</li>
<li>抽象类中可以包含抽象方法，也可以包含普通方法，也可以没有抽象方法。</li>
<li>虽然抽象类中存在构造方法，但是不能被其他类使用，所以抽象类不能实例化，必须通过子类获取实例，子类需要重写抽象方法，否则该子类也需要声明为抽象类。</li>
</ul>
</li>
<li>接口<ul>
<li>接口是一种特殊的抽象类，在接口中只有常量和方法的声明；声明接口是 interface 关键字。</li>
<li>接口之间同样存在继承关系，而且实现了多继承，也就是一个接口可以继承多个接口；继承当然还是使用 extends 关键字完成。</li>
<li>接口中声明的变量，默认会加上 public final static 修饰；声明的方法，默认会加上 public abstract 修饰。</li>
<li>接口中没有构造方法，因此也不能实例化，要获取接口的实例，必须通过子类，类和接口之间的关系，我们称之为实现，一个类实现一个接口，就需要实现该接口中所有方法；当然一个类也可以实现多个接口，模拟实现了多继承；多个类实现同一个接口也是可以的，那么这个实现的关键字是 implements 。</li>
<li>面向接口的应用开发，是目前企业级应用的方向，所以接口的书写与使用必须要掌握。</li>
</ul>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281129764.png" alt="image-20260128112859514"></p>
<p><strong>图形接口的设计与实现</strong></p>
<p>在 Java 中类用于定义一个实体，包括实体的属性，实体的行为。而接口定义了抽象方法，没有具体的行为。因此接口通常作为一系列类的标准存在。本次挑战我们将设计一个“图形”接口，并且在其中定义周长和面积的方法，然后再由它衍生出的实现类去实现具体需求。</p>
<ul>
<li>Java 接口</li>
<li>面向对象编程</li>
</ul>
<p>挑战准备</p>
<p>新建一个 Java 包 <code>org.lanqiao.entity</code>。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p org/lanqiao/entity</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.entity</code> 下新建一个 <code>Figure</code> 接口。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/entity/Figure.java</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.entity</code> 包下新建 <code>Figure</code> 接口的实现类 <code>Rectangle</code>、<code>Triangle</code> 类。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/entity/Rectangle.java</span><br><span class="line"><span class="built_in">touch</span> org/lanqiao/entity/Triangle.java</span><br></pre></td></tr></table></figure>

<p>新建一个 Java 包 <code>org.lanqiao.test</code>。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p org/lanqiao/test</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.test</code> 包下新建 <code>Test</code> 类。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/test/Test.java</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281129610.png" alt="image-20260128112912501"></p>
<p>挑战内容</p>
<p>1.设计一个能细分为矩形、三角形等平面图形的“图形”接口，该接口具有计算周长和面积的抽象方法。</p>
<p>2.设计该接口的两个实现类—三角形和矩形，重写其中计算周长和面积的方法。</p>
<p>挑战要求</p>
<ol>
<li>创建 <code>Figure</code> 接口，其中包含一个求周长的抽象方法 <code>getPerimeter()</code> ，和一个求面积的抽象方法 <code>getArea()</code>。</li>
<li>创建一个 <code>Rectangle</code> 类，该类具有两个变量 <code>width</code> 和 <code>height</code>，分别表示矩形的宽和高。使其实现 <code>Figure</code> 接口并重写其中的抽象方法。</li>
<li>创建一个 <code>Triangle</code> 类，该类具有两个变量 <code>side1</code>、 <code>side2</code>和 <code>side3</code>，分别表示三角形的三条边。使其实现 <code>Figure</code> 接口并重写其中的抽象方法。</li>
<li>创建测试类 <code>Test</code> 并在该类的 <code>main</code> 方法中创建 <code>Rectangle</code> 类和 <code>Triangle</code> 类的对象，并分别调用并输出 <code>getPerimeter()</code> 和 <code>getArea()</code> 的结果。</li>
</ol>
<p>挑战提示</p>
<ol>
<li><p>已知三边求三角形的面积可以参照海伦公式，公式如下。</p>
<p>P &#x3D; (a+b+c)&#x2F;2<em>P</em>&#x3D;(<em>a</em>+<em>b</em>+<em>c</em>)&#x2F;2</p>
<p>\sqrt{p(p-a)(p-b)(p-c)}<em>p</em>(<em>p</em>−<em>a</em>)(<em>p</em>−<em>b</em>)(<em>p</em>−<em>c</em>)</p>
</li>
<li><p>开平方可以使用数学类 <code>Math</code> 中的 <code>sqrt()</code> 方法。</p>
</li>
</ol>
<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281129860.png" alt="image-20260128112926722"></p>
<p>以上截图仅供格式参考，不代表最终答案。</p>
<p><strong>实现代码：</strong></p>
<p><strong>org&#x2F;lanqiao&#x2F;entity&#x2F;Figure.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.entity;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Figure</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 计算周长</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> 周长</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 计算面积</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> 面积</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>org&#x2F;lanqiao&#x2F;entity&#x2F;Rectangle.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.entity;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">implements</span> <span class="title class_">Figure</span>&#123;</span><br><span class="line"><span class="comment">// 宽</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> width;</span><br><span class="line"><span class="comment">// 高</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> height;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> the height</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getHeight</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> height the height to set</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHeight</span><span class="params">(<span class="type">double</span> height)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.height = height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> the width</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getWidth</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> width;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> width the width to set</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWidth</span><span class="params">(<span class="type">double</span> width)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.width = width;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">()</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> width,<span class="type">double</span> height)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.width = width;</span><br><span class="line"><span class="built_in">this</span>.height = height;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> width*<span class="number">2</span>+height*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> width*height;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>org&#x2F;lanqiao&#x2F;entity&#x2F;Triangle.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.entity;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">implements</span> <span class="title class_">Figure</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> side1;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> side2;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> side3;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Triangle</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Triangle</span><span class="params">(<span class="type">double</span> side1,<span class="type">double</span> side2,<span class="type">double</span> side3)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.side1 = side1;</span><br><span class="line"><span class="built_in">this</span>.side2 = side2;</span><br><span class="line"><span class="built_in">this</span>.side3 = side3;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="keyword">return</span> side1+side2+side3;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">double</span> <span class="variable">p</span> <span class="operator">=</span> (side1+side2+side3)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">return</span> Math.sqrt(p*(p-side1)*(p-side2)*(p-side3));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>org&#x2F;lanqiao&#x2F;test&#x2F;Test.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.test;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.entity.Figure;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.entity.Rectangle;</span><br><span class="line"><span class="keyword">import</span> org.lanqiao.entity.Triangle;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="type">Figure</span> <span class="variable">rec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line"><span class="type">Figure</span> <span class="variable">tri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Triangle</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"><span class="comment">// 调用并输出方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;矩形的周长为：&quot;</span>+rec.getPerimeter());</span><br><span class="line">System.out.println(<span class="string">&quot;矩形的面积为：&quot;</span>+rec.getArea());</span><br><span class="line">System.out.println(<span class="string">&quot;三角形的周长为：&quot;</span>+tri.getPerimeter());</span><br><span class="line">System.out.println(<span class="string">&quot;三角形的面积为：&quot;</span>+tri.getArea());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>多接口的设计与实现</strong></p>
<p>挑战介绍</p>
<p>在 Java 中，类只允许单继承一个类，但一个类可以实现多个接口，从而达到多重继承的目的。本次挑战我们将设计三个接口，定义一个类来实现这三个接口，并实现这些接口中声明的所有抽象方法。</p>
<p>知识点</p>
<ul>
<li>接口</li>
<li>面向对象编程</li>
</ul>
<p>挑战内容</p>
<p>定义 <code>Biology</code>（生物）、<code>Animal</code> （动物）、<code>Man</code>（人）三个接口，其中 <code>Biology</code> 接口声明了 <code>breath()</code> 抽象方法， <code>Animal</code> 接口声明了 <code>hasSex()</code> 和 <code>eat()</code> 抽象方法，<code>Man</code> 接口声明了 <code>think()</code> 和 <code>Study()</code> 抽象方法，定义 <code>NormalMan</code> 类实现上述 3 个接口，并实现他们声明的抽象方法（仅显示相应的功能信息）。</p>
<ol>
<li>在 <code>/home/project</code> 路径下新建 <code>multi</code> 文件夹。</li>
<li>在 <code>multi</code> 文件夹中新建 3 个接口文件： <code>Biology.java</code>、<code>Animal.java</code> 、<code>Man.java</code> 。其中 <code>Biology</code> 接口声明 <code>breath()</code> 抽象方法， <code>Animal</code> 接口声明 <code>hasSex()</code> 和 <code>eat()</code> 抽象方法，<code>Man</code> 接口声明 <code>think()</code> 和 <code>Study()</code> 抽象方法。</li>
<li>在 <code>multi</code> 文件夹中新建类文件：<code>NormalMan.java</code> ，类中声明 String 类型属性 name，需要提供 getter 方法，和带参的构造方法传递 name 信息。</li>
<li>以上源文件必须按要求创建，不能修改文件名。</li>
<li>在 <code>NormalMan</code> 类的 <code>main()</code> 方法中，调用实现的抽象方法打印相应的功能信息。</li>
<li>具体信息必需参照挑战准备中代码里面的注释或者「挑战运行效果图」。</li>
</ol>
<p>挑战准备</p>
<ol>
<li>在 <code>/home/project/multi</code> 目录下新建 4 个源文件，如下图。</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281129570.png" alt="image-20260128112950531"></p>
<ol>
<li>提供给你基础代码，你可以在以下代码提示上完成多接口的设计与实现操作。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> multi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NormalMan</span> ### &#123;</span><br><span class="line">    <span class="comment">//定义 name 属性 私有,并提供 getter 方法以及有参构造函数</span></span><br><span class="line">    ### 补充代码 ###</span><br><span class="line">    <span class="comment">/*实现三个接口的所有抽象方法 直接打印输出如下相关功能信息</span></span><br><span class="line"><span class="comment">     * 某某某 breathes with lungs</span></span><br><span class="line"><span class="comment">     * 某某某 has sex</span></span><br><span class="line"><span class="comment">     * 某某某 eats food</span></span><br><span class="line"><span class="comment">     * 某某某 think with brain</span></span><br><span class="line"><span class="comment">     * 某某某 read books</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ### 补充代码 ###</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String args[])</span>&#123;</span><br><span class="line">      <span class="comment">//实例化一个 NormalMan 对象，传入 name 参数，并调用实现的抽象方法打印相应的功能信息</span></span><br><span class="line">      ### 补充代码 ###</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>挑战运行效果</p>
<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281130290.png" alt="image-20260128113007181"></p>
<p><strong>实现代码：</strong></p>
<p><strong>multi&#x2F;Animal.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> multi;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 动物接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hasSex</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>multi&#x2F;Biology.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 生物接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Biology</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">breath</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>multi&#x2F;Man.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> multi;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 人类接口</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Man</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">think</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>multi&#x2F;NormalMan.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> multi;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NormalMan</span> <span class="keyword">implements</span> <span class="title class_">Man</span>,Animal,Biology&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line">NormalMan(String name)&#123;</span><br><span class="line"><span class="built_in">this</span>.name=name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">breath</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(name +<span class="string">&quot; breathes with lungs&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hasSex</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(name+<span class="string">&quot; has sex&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(name+<span class="string">&quot; eats food&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">think</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(name+<span class="string">&quot; think with brain&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(name+<span class="string">&quot; read books&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">NormalMan</span> <span class="variable">nm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NormalMan</span>(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">nm.breath();</span><br><span class="line">nm.hasSex();</span><br><span class="line">nm.eat();</span><br><span class="line">nm.think();</span><br><span class="line">nm.study();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="十、Java异常处理机制"><a href="#十、Java异常处理机制" class="headerlink" title="十、Java异常处理机制"></a>十、Java异常处理机制</h3><h5 id="10-1Java异常的概念与分类"><a href="#10-1Java异常的概念与分类" class="headerlink" title="10.1Java异常的概念与分类"></a>10.1Java异常的概念与分类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 关于异常</span></span><br><span class="line"><span class="comment">// 如何进行捕获异常</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * try&#123;</span></span><br><span class="line"><span class="comment"> *      在可能发生异常的代码块</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> * catch(ExceptionName e1,[....])&#123;</span></span><br><span class="line"><span class="comment"> *      当try代码块出现异常，就回进入catch进行处理</span></span><br><span class="line"><span class="comment"> *      处理异常的代码块</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> * catch()&#123;</span></span><br><span class="line"><span class="comment"> *      (多个异常处理)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  异常处理：如果出现异常会进入catch进行处理后退出，反之没有异常正常输入结果并退出</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">            System.out.println(<span class="string">&quot;我的数字中第三元素的值为：&quot;</span> + a[<span class="number">3</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数组异常错误&quot;</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;退出代码块！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// throws和throw 关键字也是处理异常</span></span><br><span class="line"><span class="comment">// throw   关键字用于在代码中抛出异常</span></span><br><span class="line"><span class="comment">// throws  关键字用于在方法中声明指定可能抛出异常的类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThrowTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        checkNumber(-<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkNumber</span><span class="params">(<span class="type">int</span> num)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(num &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;你输入的数字小于0，不允许这样做!请及时改正！&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readfile</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">// 处理代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>引入异常</strong></p>
<p>异常，简单来说就是程序出问题了。</p>
<p>🙋‍♂️ 老师，之前编译代码提示的错误信息，就是异常吗？</p>
<p>之前你所看到的编译错误，大部分只是代码中存在语法错误的提示信息，而不是异常。</p>
<p>慢慢的随着学习的深入，我们后面会看到，程序中有些可能会出现的异常，在编译时会给出提示信息，让你提前做好异常处理。</p>
<p>我们来看看以下这段代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    System.out.println(names[i]);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;over&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>读取数组中的信息，通过 for 循环进行信息输出，大家在学习数组时，一定写过这样的程序吧。</p>
<p>从结果中，我们可以看到，提示的错误信息是 ArrayIndexOutOfBoundsException 数组下标越界，为啥？</p>
<p>代码中 names 数组中只有 3 个数组元素，而 for 循环却要 4 个数组元素，给的了吗？给不了，所以只能提示错误信息了。</p>
<p>🤔 那么这个代码问题是在什么位置给出提示呢？</p>
<blockquote>
<p>在学习 Java 基础时，第一章讲到了 Java 程序工作原理，Java 字节码文件运行中会涉及字节码校验器。</p>
</blockquote>
<p>类加载之后，进行字节码效验，以上代码的错误信息就是从这个位置返回提示信息。</p>
<p>可能你会说，之前我们在学习数组，获取数组元素时并没有看到这个提示信息？ 🙄</p>
<p>因为当时你写的代码中 i &lt; 3 或 i &lt; names.length 而不是 i &lt; 4，这样就不会出现这个异常信息了。</p>
<p>好了，动手写一写代码吧，看看异常的提示信息。</p>
<p>在 <code>/home/project/</code> 目录下，创建 <code>TestException.java</code> 源文件，并添加 <code>method1()</code> 方法，把上述代码写入到方法中。</p>
<p>TestException.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常出现体验</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 会出现 ArrayIndexOutOfBoundsException 异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            System.out.println(names[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException</span>();</span><br><span class="line">        te.method1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>分苹果问题</strong></p>
<p>异常的最高父类是 Throwable，在 java.lang 包下。</p>
<p>🍀 Throwable 类的构造方法主要有：</p>
<ul>
<li><p>public Throwable()</p>
<p>构造一个对象，其错误信息串为 null。</p>
</li>
<li><p>public Throwable(String message)</p>
<p>构造一个对象，其错误信息串为 message。</p>
</li>
</ul>
<p>🍀 Throwable 类的方法主要有：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public String getMessage()</td>
<td>返回对象的错误信息</td>
</tr>
<tr>
<td>public void printStackTrace()</td>
<td>输出对象的跟踪信息到标准错误输出流</td>
</tr>
<tr>
<td>public void printStackTrace(PrintStream s)</td>
<td>输出对象的跟踪信息到输出流 s</td>
</tr>
<tr>
<td>public String toString()</td>
<td>返回对象的简短描述信息</td>
</tr>
</tbody></table>
<p>Throwable 类的子类有 Error 错误和 Exception 违例。</p>
<p><img data-src="https://doc.shiyanlou.com/courses/4844/1656046/f98d7b3b38b79910fb0807aec8d01e77-0" alt="图片描述"></p>
<p>Error 错误并不能通过程序代码来解决问题，而 Exception 违例基本是程序员在编写代码时所造成的问题，所以往往我们会将 Error 设为天灾，Exception 设为人祸。 😲</p>
<p>所以我们之后所书写的代码中，基本都是在处理 Exception 问题。Exception 类也有很多的子类，提供我们使用，如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281130593.png" alt="image-20260128113029141"></p>
<p>那么接下来，我们通过小孩子分苹果问题，进一步理解异常。</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">    appleNum = input.nextInt();</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">    stuNum = input.nextInt();</span><br><span class="line">    System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">    System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分两次输入数值，输出结果：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281130671.png"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281131709.png" alt="image-20260128113149495"></p>
<p>从结果图中我们可以看到，把 20 个苹果分给 10 个孩子，每个孩子得到 2 个苹果。但是如果在输入的过程中，用户不小心在输入班上孩子数时，输入值为 0，就出现异常了。</p>
<p>🤔 那么要如何解决呢？</p>
<p>可以采用 while 循环的方式进行判断，如果用户输入的孩子数为 0，则要求用户继续输入，通过这种方式，就解决了除数为 0 的异常产生的问题，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">    appleNum = input.nextInt();</span><br><span class="line">    <span class="comment">//如果输入孩子数为 0，则要求用户再次输入</span></span><br><span class="line">    <span class="keyword">while</span> (stuNum == <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入班上有几个孩子（孩子数不能为 0）：&quot;</span>);</span><br><span class="line">        stuNum = input.nextInt();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">    System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>👉 大家可以在已经存在的 <code>TestException.java</code> 源文件中，添加 <code>method2()</code> 方法，写入以上代码看看提示信息吧。</p>
<p>TestException.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常出现体验</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分苹果问题</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 苹果数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 学生数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">        appleNum = input.nextInt();</span><br><span class="line">        <span class="comment">//如果输入孩子数为 0，则要求用户再次输入</span></span><br><span class="line">        <span class="keyword">while</span> (stuNum == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入班上有几个孩子（孩子数不能为 0）：&quot;</span>);</span><br><span class="line">            stuNum = input.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">        System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException</span>();</span><br><span class="line">        te.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>采用判断语句的方式进行异常的处理，首先必须意识到哪些地方可能出现异常，在可能出现异常的地方加入判断语句和处理代码。这种处理方式对程序员的要求高，因为开发者很难列举出所有的异常发生情况，而且代码量大，程序结构相对混乱。对于此类情况，一种较好的解决方案，就是使用异常处理机制。</p>
<p>实验总结</p>
<p>本实验主要学习了 Java 异常的出现情况：</p>
<ol>
<li>正确书写代码，可以避免一些异常出现，但有时无法完全把控。</li>
<li>异常出现后，采用非异常处理机制的方式进行处理，让程序能正常运行。</li>
</ol>
<p><strong>异常处理 finally 语句使用</strong></p>
<p>引入 finally 关键字</p>
<p>是不是觉得这关键字之前好像学过了，如果你是这样认为的话，说明你看的不仔细哦 ~ 🤓</p>
<p>之前我们学过的是 final 关键字，而现在需要来学习的 finally 关键字。</p>
<p>finally 关键字主要是和捕获异常的 try-catch 语句一起使用，放在 finally 语句块中的内容表示无条件执行的部分，也就是说不管程序有异常或没有异常都需要执行的部分。</p>
<p>🤔 那么这个语句块放在哪里呢？</p>
<p>语法结构：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// 可能产生异常的代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>( ExceptionClass1 e )&#123;</span><br><span class="line">    <span class="comment">// 当产生 ExceptionName1 类型异常时的处置措施</span></span><br><span class="line">&#125;<span class="keyword">catch</span>( ExceptionClass2 e )&#123;</span><br><span class="line">    <span class="comment">// 当产生ExceptionName2型异常时的处置措施</span></span><br><span class="line">&#125;[<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">// 无条件执行的语句</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>finally 语句块不是必须部分。</p>
<p><strong>无条件执行的语句块</strong></p>
<p>上一个实验中我们处理的异常，你是否发现，编译的时候都是没有问题，但是运行时会出现异常，这些我们称之为运行时异常。</p>
<p>RuntimeException 是所有运行时异常的父类，API 如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281132503.png" alt="image-20260128113208167"></p>
<p>这些异常在编译时是没有强迫性的，然后我们在后面要讲的知识中，有许多都是<strong>在编译时会提示需要进行异常处理，否则编译将不能通过。</strong></p>
<p>在 Java 基础第七章中，我们讲到了可以通过 SimpleDateFormat 类调用 format() 方法来进行日期格式化操作，还记得吗？ 🤭 忘了的回头去巩固一下哈 ~</p>
<p>format() 方法是将日期数据转换成指定格式的字符串，其实还有一个 parse() 方法可以将字符串转换成日期类型，我们来看一下代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译程序结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281132123.png" alt="image-20260128113222965"></p>
<p>在编译时，系统要求必须进行异常处理，这种情况下，那么我们就需要先处理好，才能通过编译。</p>
<p>代码修改如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281133598.png" alt="image-20260128113322308"></p>
<p>然而，对于以上的代码，我们应该完成转换操作之后，将 SimpleDateFormat 资源进行释放。</p>
<p>SimpleDateFormat 对象释放，如果放在 System.out.println(sdf.parse(“2021-08-30”)); 语句之后，如果该语句出现异常，那么它之后的语句都不会执行。</p>
<p>老师，try 语句块中和 catch 语句块中都应该有 SimpleDateFormat 对象释放。</p>
<p>对的，的确应该，但是会存在一个问题，那就是违背了代码复用的原则了。</p>
<p>而这时，你就应该要想到的是 finally 语句，无论是否有异常存在，都应该执行的部分，因为它是无条件执行语句块。</p>
<p>我们再修改一下以上代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;SimpleDateFormat 对象资源释放&quot;</span>);</span><br><span class="line">    sdf = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281133581.png" alt="image-20260128113348444"></p>
<p>我们也可以修改一下，日期格式 “yyyy-MM-dd” 改成 “yyyy&#x2F;MM&#x2F;dd” 就会出现异常，看看效果 👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281134058.png" alt="image-20260128113403802"></p>
<p>因此，finally 语句不管有没有异常，都会被执行的部分。</p>
<p>好了，同学们，异常处理是不是很有趣呢 🤗 动手自己写一写吧 ~</p>
<p>在 <code>/home/project/</code> 目录下，创建 <code>TestException3.java</code> 源文件，并添加 <code>method()</code> 方法，使用 finally 语句块。</p>
<p>TestException3.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;SimpleDateFormat 对象资源释放&quot;</span>);</span><br><span class="line">            sdf = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException3</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException3</span>();</span><br><span class="line">        te.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="10-2Java异常捕获与处理"><a href="#10-2Java异常捕获与处理" class="headerlink" title="10.2Java异常捕获与处理"></a>10.2Java异常捕获与处理</h5><p><strong>异常处理机制</strong></p>
<p>异常处理，即程序运行出错时的应对措施，是软件开发中的一个重要方面。</p>
<p>虽然对于外行人而言，计算机程序应和精密的机械一样以运行精准见长，但业内尤其是开发人员们很清楚，程序运行难免出错，而出错后处理措施的优劣决定了软件的健壮性，进而影响到软件产品能否为用户接受和普及推广，甚至从一定程度上决定了软件产品的最终命运。</p>
<p>比如我们无法确保用户总是按照规定的格式输入数据、无法确保程序要读取的文件总是保存在预期的位置、无法确保要连接的数据库服务器永远处于就绪状态、也无法彻底杜绝运行程序的计算机内存耗尽、系统程序崩溃等问题。</p>
<p>Java 的异常处理机制中仍体现了面向对象的思想。</p>
<ul>
<li>Java 程序的执行过程中如<strong>出现异常</strong>，会自动生成一个<strong>异常类对象</strong>，该异常对象将被提交给 Java 运行时系统，这个过程称为<strong>抛出异常</strong>。</li>
<li>当 Java 运行时系统接收到异常对象时，会寻找能处理这一异常的代码并把当前异常对象交给其处理，这一过程称为<strong>捕获异常</strong>。</li>
<li>如果 Java 运行时系统找不到可以捕获异常的方法，则运行时系统将终止，相应的 Java 程序也将退出。</li>
</ul>
<p>程序员通常只能处理违例 (Exception) ，而对错误 (Error) 无能为力。</p>
<p><strong>异常处理方式 - 捕获</strong></p>
<p>捕获是异常处理方式中最常见一种方式，也是大家必须掌握的内容。</p>
<p>异常处理机制中已经明确提出需要有代码来处理该异常，而出现异常，系统会自动生成一个异常类对象，这个异常对象是系统生成的，我们无须创建。</p>
<p>🤔 那么处理异常代码需要写在哪里呢？</p>
<p>我们来看一下捕获异常的基本结构：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="comment">// 有异常出现的语句，无异常语句也可以放在这个语句块中</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(ExceptionClass e)&#123;</span><br><span class="line">  <span class="comment">// 当产生 ExceptionClass 类型异常时的处置代码</span></span><br><span class="line">&#125;[<span class="keyword">catch</span>(ExceptionClass2 e)&#123;</span><br><span class="line">  <span class="comment">// 当产生 ExceptionClass2 类型异常时的处置代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(ExceptionClassN e)&#123;</span><br><span class="line">  <span class="comment">// 当产生 ExceptionClassN 类型异常时的处置代码</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>从结构中我们可以看到，try 和 catch 是关键字，用来处理异常的。该结构中，<strong>catch 语句块中一定不要空着</strong>，啥都不写，这是一种很危险的情况，如果空着，表示捕获异常，而不做任何处理。</p>
<p>try 语句块：</p>
<ul>
<li>将可能出现异常的代码都放在 try 代码块中。</li>
<li>try 语句块中发现异常，剩下的语句将不再执行。</li>
</ul>
<p>catch 语句块：</p>
<ul>
<li>在 catch 语句块中是对异常对象进行处理的代码。</li>
<li>每个 try 语句块可以伴随一个或多个 catch 语句，用于处理可能产生的不同类型的异常对象。</li>
<li>通过 getMessage( ) 获取异常信息或 printStackTrace( ) 跟踪异常信息。</li>
</ul>
<p>接下来，我们还是通过代码来好好体会一下，捕获异常处理吧 ~</p>
<p>首先，来处理一下上一个实验中的 ArrayIndexOutOfBoundsException 数组下标越界异常，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    System.out.println(names[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">  System.out.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们将 for 循环等语句放在 try 语句块中，当执行打印 names[3] 数值元素时，读取不到下标为 3 的数据，出现异常，系统自动生成 ArrayIndexOutOfBoundsException 异常对象，交给运行时系统，系统去找处理的代码，当匹配到有 catch 的异常是 ArrayIndexOutOfBoundsException 时，就进入 catch 语句块，本次处理方式是打印异常对象，就是调用 toString() 方法返回对象的简短描述信息。</p>
<p>⭐ 注意：当执行 System.out.println(names[3]) 出现异常后，那么剩下的 System.out.println(“over”) 将不会执行。</p>
<p>编译运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281134448.png" alt="image-20260128113425272"></p>
<p>从结果上我们可以看到，并没有打印出「over」信息，一旦出现异常，后面的代码将会忽略；但是如果把 System.out.println(“over”) 语句放到 catch 语句块之后，那么处理完异常之后，程序还是继续往下走。</p>
<p>好了，同学们，在 <code>/home/project</code> 目录下，创建 <code>TestException2.java</code> 源文件，并添加 <code>method1()</code> 方法，完成捕获异常处理，并移动 System.out.println(“over”) 语句，看看结果是否不同了呢 ~</p>
<p>TestException2.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常处理捕获方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 捕获 ArrayIndexOutOfBoundsException 数组下标越界异常处理</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line">        String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                System.out.println(names[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            <span class="comment">// 打印异常类对象</span></span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException2</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException2</span>();</span><br><span class="line">        te.method1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们来看看如下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a, String b)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">method2(args[0], args[1])</span><br></pre></td></tr></table></figure>

<p>调用 method2() 方法时，传入命令行参数，当参数不同时，返回的情况也不一样 👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281134403.png" alt="image-20260128113443102"></p>
<p>当传入参数 10 和 5 时，那就正常执行，输出计算结果；当传入参数 10 和 0 时，出现 ArithmeticException 数学计算异常；当传入参数 10 和 a 时，出现 NumberFormatException 数字格式异常。</p>
<p>那么，我们就可以采用多个 catch 进行捕获异常。</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            c = Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然也可以这样写：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            c = Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是最简化的书写方式，都采用 Exception 异常类捕获。</p>
<p>⭐ 注意：当使用多个 catch 进行异常捕获时，需要考虑前后顺序，也就是说需要先捕获子类异常，再捕获父类异常，不相关的异常类没有关系。</p>
<p>如果我现在这样写：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            c = Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么 ArithmeticException 和 NumberFormatException 异常捕获的 catch 语句块将永远都不会被执行，当然程序编译时就会给出错误提示信息。</p>
<p>使用 catch 语句块，异常对象捕获到一个匹配的 catch ，将不会再考虑其他了，当发现 ArithmeticException 或 NumberFormatException 异常，它们都是 Exception 子类吧，那么就匹配 Exception 了，这也是多态参数的灵活性体现。</p>
<p>在已创建 <code>TestException2.java</code> 源文件，添加 <code>method2()</code> 和 <code>method3()</code> 方法，看看效果吧 ~</p>
<p>TestException2.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常处理捕获方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 采用多个 catch 捕获异常处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">      <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        c = Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">        System.out.println(e.getMessage());</span><br><span class="line">      &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// method3 有错误</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">      <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">        c = Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">        System.out.println(e.getMessage());</span><br><span class="line">      &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">          System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException2</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException2</span>();</span><br><span class="line">        te.method2(args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实验总结</p>
<p>本实验学习异常处理机制和异常处理捕获方式：</p>
<ol>
<li>程序在运行过程中，当发现异常，系统产生异常对象，并将该异常对象抛给执行系统，系统查找能处理异常的代码，能找到进行处理操作，不能找到处理异常的代码，程序被迫终止。</li>
<li>采用 try-catch 语句进行异常捕获处理。</li>
</ol>
<p><strong>使用异常解决分苹果问题</strong></p>
<p>使用异常处理方式之捕获异常来解决分苹果问题。</p>
<ul>
<li>Exception</li>
<li>RuntimeException</li>
<li>捕获异常</li>
</ul>
<p>之前的章节中我们学过分苹果问题的实验，在该实验的基础上我们来完成一个挑战。分苹果操作过程中需要输入两次数值，一是苹果数量，二是孩子数量。</p>
<p>那么输入这两个数值会存在的问题是：</p>
<ol>
<li>苹果数量和孩子数量<strong>必须是 int 整型数字</strong></li>
<li>孩子数量<strong>不能为 0</strong></li>
</ol>
<p>接下来需要你<strong>使用异常处理方式</strong>解决以上两个问题。</p>
<p>需要采用捕获方式进行异常处理：</p>
<ol>
<li><p>当输入苹果或孩子数量为<strong>非整型数值</strong>时，需要进行 <code>java.util.InputMismatchException</code> 异常处理，捕获后并输出字符串 <strong>“苹果数量和孩子人数必须为整数值！”</strong>；</p>
</li>
<li><p>当输入孩子数量为 <strong>0</strong> 时，需要进行 <code>java.lang.ArithmeticException</code> 异常处理，捕获异常后并输出字符串 <strong>“孩子人数不能为零！”</strong>；</p>
</li>
<li><p>异常捕获后输出的字符串必须按照以上 👆 要求的字符串进行书写，不能随意扩展。</p>
</li>
<li><p>在 <code>/home/project</code> 目录中创建 <code>DivideApples.java</code> 文件</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281135850.png" alt="image-20260128113500631"></p>
<ol>
<li>以下提供的是基础代码，你可以在 <code>divide()</code> 方法中，对原有的代码进行异常处理操作。请按照基础代码的结构，以及类中的方法名和调用方式进行书写，不然可能会影响到挑战无法通过。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApples</span> &#123;</span><br><span class="line">    <span class="comment">//苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">        appleNum = input.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">        stuNum = input.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">        System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DivideApples</span>().divide();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281135292.png" alt="image-20260128113513885"></p>
<p><strong>DivideApples.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApples</span> &#123;</span><br><span class="line"><span class="comment">//苹果数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">//学生数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">appleNum = input.nextInt();</span><br><span class="line">System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">stuNum = input.nextInt();</span><br><span class="line">System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum /</span><br><span class="line">stuNum);</span><br><span class="line">System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(InputMismatchException e)&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;苹果数量和孩子人数必须为整数值！&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;孩子人数不能为零！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">DivideApples</span>().divide();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>异常处理 finally 语句使用</strong></p>
<p>是不是觉得这关键字之前好像学过了，如果你是这样认为的话，说明你看的不仔细哦 ~ 🤓</p>
<p>之前我们学过的是 final 关键字，而现在需要来学习的 finally 关键字。</p>
<p>finally 关键字主要是和捕获异常的 try-catch 语句一起使用，放在 finally 语句块中的内容表示无条件执行的部分，也就是说不管程序有异常或没有异常都需要执行的部分。</p>
<p>🤔 那么这个语句块放在哪里呢？</p>
<p>语法结构：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// 可能产生异常的代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>( ExceptionClass1 e )&#123;</span><br><span class="line">    <span class="comment">// 当产生 ExceptionName1 类型异常时的处置措施</span></span><br><span class="line">&#125;<span class="keyword">catch</span>( ExceptionClass2 e )&#123;</span><br><span class="line">    <span class="comment">// 当产生ExceptionName2型异常时的处置措施</span></span><br><span class="line">&#125;[<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">// 无条件执行的语句</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

<p>finally 语句块不是必须部分。</p>
<p><strong>无条件执行的语句块</strong></p>
<p>上一个实验中我们处理的异常，你是否发现，编译的时候都是没有问题，但是运行时会出现异常，这些我们称之为运行时异常。</p>
<p>RuntimeException 是所有运行时异常的父类，API 如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281135400.png" alt="image-20260128113529995"></p>
<p>这些异常在编译时是没有强迫性的，然后我们在后面要讲的知识中，有许多都是<strong>在编译时会提示需要进行异常处理，否则编译将不能通过。</strong></p>
<p>在 Java 基础第七章中，我们讲到了可以通过 SimpleDateFormat 类调用 format() 方法来进行日期格式化操作，还记得吗？ 🤭 忘了的回头去巩固一下哈 ~</p>
<p>format() 方法是将日期数据转换成指定格式的字符串，其实还有一个 parse() 方法可以将字符串转换成日期类型，我们来看一下代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译程序结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281135081.png" alt="image-20260128113550856"></p>
<p>在编译时，系统要求必须进行异常处理，这种情况下，那么我们就需要先处理好，才能通过编译。</p>
<p>代码修改如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281136757.png" alt="image-20260128113604321"></p>
<p>然而，对于以上的代码，我们应该完成转换操作之后，将 SimpleDateFormat 资源进行释放。</p>
<p>SimpleDateFormat 对象释放，如果放在 System.out.println(sdf.parse(“2021-08-30”)); 语句之后，如果该语句出现异常，那么它之后的语句都不会执行。</p>
<p>老师，try 语句块中和 catch 语句块中都应该有 SimpleDateFormat 对象释放。</p>
<p>对的，的确应该，但是会存在一个问题，那就是违背了代码复用的原则了。</p>
<p>而这时，你就应该要想到的是 finally 语句，无论是否有异常存在，都应该执行的部分，因为它是无条件执行语句块。</p>
<p>我们再修改一下以上代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;SimpleDateFormat 对象资源释放&quot;</span>);</span><br><span class="line">    sdf = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行结果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281136121.png" alt="image-20260128113621811"></p>
<p>我们也可以修改一下，日期格式 “yyyy-MM-dd” 改成 “yyyy&#x2F;MM&#x2F;dd” 就会出现异常，看看效果 👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281136016.png" alt="image-20260128113636622"></p>
<p>因此，finally 语句不管有没有异常，都会被执行的部分。</p>
<p>好了，同学们，异常处理是不是很有趣呢 🤗 动手自己写一写吧 ~</p>
<p>在 <code>/home/project/</code> 目录下，创建 <code>TestException3.java</code> 源文件，并添加 <code>method()</code> 方法，使用 finally 语句块。</p>
<p>TestException3.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * finally 语句块的使用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException3</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 完成字符串转成日期，进行异常处理。</span></span><br><span class="line"><span class="comment">     * 在 finally 语句块中语句无条件执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(sdf.parse(<span class="string">&quot;2021-08-30&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;SimpleDateFormat 对象资源释放&quot;</span>);</span><br><span class="line">            sdf = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException3</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException3</span>();</span><br><span class="line">        te.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实验总结</p>
<p>本实验主要学习 finally 关键字的使用：</p>
<ol>
<li>finally 关键字主要是和 try-catch 语句配合一起使用，但不是必须的部分。</li>
<li>finally 语句块是无条件执行部分，资源释放特别适合放在 finally 语句块中。</li>
<li>finally 之后的花括号不能省略。</li>
</ol>
<p>企业面试时，经常会提到的问题：final、finally 和 finalize 的区别是什么？</p>
<ul>
<li>final 关键字，是用来修饰属性、方法、类的。</li>
<li>finally 关键字，可以配合异常处理，进行无条件执行操作。</li>
<li>finalize 不是关键字，是 Object 类中的一个方法，是 Java 垃圾回收机制中进行资源释放的方法。</li>
</ul>
<p><strong>采用 finally 释放 Scanner 资源</strong></p>
<p>使用异常捕获结构中的 finally 子句来释放 Scanner 类申请的内存空间。</p>
<p>上一个挑战完成的任务大家还记得吗？我们使用了异常捕获的方式解决了分苹果问题。</p>
<p>当时是通过 Scanner 类传入苹果数量和孩子数量，为了避免输入的数据引起 <code>RuntimeException</code> 异常，所以做了异常捕获处理。</p>
<p>那么之前类中创建的 <code>Scanner</code> 对象，存在一个问题：</p>
<ul>
<li>没有关闭，也就是 <code>Scanner</code> 对象资源没有释放；</li>
<li>然而在 <code>divide</code> 方法结束后，<code>Scanner</code> 对象虽然会进入被回收的队列中，但不是立刻回收，而这会给计算机带来一定的负担。</li>
</ul>
<p>为了避免造成大量的内存占据，我们需要将不在使用的内存空间得到及时的释放。</p>
<p>使用 <code>finally</code> 子句释放 <code>Scanner</code> 对象申请的内存空间：</p>
<ol>
<li><p>程序执行时输入<strong>正确的苹果数量和孩子人数</strong>情况下，需要<strong>关闭 <code>Scanner</code> 对象</strong>；</p>
</li>
<li><p>程序执行时输入<strong>不正确的苹果数量和孩子人数</strong>情况下，也需要<strong>关闭 <code>Scanner</code> 对象</strong>；</p>
</li>
<li><p>释放资源需要使用 <code>Scanner</code> 类中提供的 <code>close()</code> 方法。</p>
</li>
<li><p>释放后同时输出字符串 “<strong>Scanner 对象进行释放</strong>” 表示已进入 <code>finally</code> 语句块。</p>
</li>
<li><p>要求输出的字符串必须按照以上 👆 要求进行书写，不能随意扩展。</p>
</li>
<li><p>在 <code>/home/project</code> 目录中创建 <code>DivideApplesFinally.java</code> 文件</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281136717.png" alt="image-20260128113653376"></p>
<ol>
<li>以下提供的是基础代码，你可以在 <code>divide()</code> 方法中，对原有的代码进行 <code>Scanner</code> 对象申请的内存空间进行释放。请按照基础代码的结构，包括类中的方法名、方法返回类型和调用方式进行书写，不然可能会影响到挑战无法通过。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApplesFinally</span> &#123;</span><br><span class="line">    <span class="comment">//苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">            appleNum = input.nextInt();</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">            stuNum = input.nextInt();</span><br><span class="line">            System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;孩子们非常开心！&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;请输入正确的苹果数量和孩子人数&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">DivideApplesFinally</span>().divide());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281137634.png" alt="image-20260128113711339"></p>
<h5 id="10-3-Java异常抛出处理"><a href="#10-3-Java异常抛出处理" class="headerlink" title="10.3 Java异常抛出处理"></a>10.3 Java异常抛出处理</h5><p><strong>异常处理抛出方式</strong></p>
<p><strong>异常处理方式 - 抛出</strong></p>
<p>异常的另一种处理方式，便是抛出异常，需要使用关键字 <strong>throws</strong> 。</p>
<p>异常抛出处理，主要是在方法声明部分使用。</p>
<p>🍒 语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">public</span>|<span class="keyword">protected</span>|<span class="keyword">private</span>] 返回类型 方法名(参数列表) <span class="keyword">throws</span> 异常类[, 异常类<span class="number">2</span>, ..., 异常类n]&#123;</span><br><span class="line">   <span class="comment">// 方法体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>throws 抛出的异常可以是 0 或多个，也就是说声明方法时可以不抛出异常，也可以抛出 1 个，或多个。</p>
<p>在定义一个方法的时候，如果并不能确定如何处理其中可能出现的异常，可以不在方法中对异常进行处理，而是<strong>将可能发生的异常让这个方法的调用者来处理</strong>。</p>
<p>接下来，我们将之前写过的代码，采用抛出异常的方式进行处理，代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ArrayIndexOutOfBoundsException&#123;</span><br><span class="line">    String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      System.out.println(names[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在调用该方法时进行处理：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    te.method1();</span><br><span class="line">&#125;<span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">    System.out.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们也可以抛出多个异常类，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span> <span class="keyword">throws</span> ArithmeticException, NumberFormatException&#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">    System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当然你也可以采用最简化的抛出方式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(String a,String b)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">    System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>直接抛出 Exception，就不用一个个的抛出了，当然从规范的角度来说，在企业项目中，还是需要确切到具体的异常类。</p>
<p>编译运行效果如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281137425.png" alt="image-20260128113727014"></p>
<p>大家也动手写一写，以上代码，看看效果吧 ~</p>
<p>在 <code>/home/project/</code> 目录下，创建 <code>TestException4.java</code> 源文件，并添加 <code>method1()、method2()、method3()</code> 三个方法，然后在 <code>main()</code> 方法中调用并进行异常处理。</p>
<p>TestException4.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常处理抛出方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException4</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 采用异常抛出处理方式进行数组下标越界处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ArrayIndexOutOfBoundsException 数组下标越界异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ArrayIndexOutOfBoundsException&#123;</span><br><span class="line">        String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            System.out.println(names[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 采用异常抛出处理方式进行数学计算和数字格式化处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a 命令行参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b 命令行参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ArithmeticException 数学计算异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NumberFormatException 数字格式化异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span> <span class="keyword">throws</span> ArithmeticException, NumberFormatException&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 采用最简化的方法抛出异常处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a 命令行参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b 命令行参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception 包含了所有的异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(String a,String b)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> Integer.parseInt(a) / Integer.parseInt(b);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException4</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException4</span>();</span><br><span class="line">        <span class="comment">// 调用 method1 方法进行异常处理</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            te.method1();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用 method2 方法进行异常处理</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            te.method2(args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用 method3 方法进行异常处理</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            te.method3(args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>主动抛出异常</strong></p>
<p>接着，我们需要来强调的是主动抛出异常，使用关键字 throw。</p>
<p>🤔 那么什么是主动抛出异常呢？</p>
<p>之前讲到异常处理机制，当系统发现有异常，会自动产生一个异常对象，然后交给运行时系统，这叫抛出异常；主动抛出异常，那就是不需要系统生成异常对象，而是我们在编写代码时，对于可能会出现异常的部分，自己创建异常对象将它抛出，这就是主动抛出异常。</p>
<p>😲 哦，那就是我们掌握主动权了 ~</p>
<p>对的，主动抛出异常，其实是希望提供更明确的异常提示信息。</p>
<p>🍒 来看看语法格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> 异常类(message);</span><br></pre></td></tr></table></figure>

<p>⭐ 注意：这里是 throw 而不是 throws，有很多同学会搞混 throw 和 throws，你只需要记住一点，throw 关键字后只能抛出一个确切的异常类对象，而 throws 后可以抛出多个异常类，而非 new 的对象。</p>
<p>修改之前的程序代码，如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">  String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(i &gt; names.length-<span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(<span class="string">&quot;数组下标越界异常:数组元素提取下标为 &quot;</span> + i + <span class="string">&quot;，超出数组取值范围！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(names[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">  <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">a1</span> <span class="operator">=</span> Integer.parseInt(a);</span><br><span class="line">    <span class="keyword">if</span>(a1 == <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;第一个参数为 0 ，除法计算永远都是零&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">b1</span> <span class="operator">=</span> Integer.parseInt(b);</span><br><span class="line">    <span class="keyword">if</span>(b1 == <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;除数不能为零&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    c = a1 / b1;</span><br><span class="line">  &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">    System.out.println(e);</span><br><span class="line">  &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">  &#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line">    System.out.println(e.getMessage());</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上两段代码，我们分了两种形式，throw 可以和 throws 配合使用，也可以和 try-catch 配合使用。</p>
<p>⭐ 注意：throw 之后的只能是异常对象，不能是其他对象，也就是说不能这样写 throw new String(“错误信息”) 。</p>
<p>编译运行如下图：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281137694.png" alt="image-20260128113747197"></p>
<p>大家动手写一写以上代码，看看效果吧 ~</p>
<p>在 <code>/home/project/</code> 目录下，创建 <code>TestException5.java</code> 源文件，并添加 <code>method1() 和 method2()</code> 两个方法，然后在 <code>main()</code> 方法中调用。</p>
<p>TestException5.java 源代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用 throw 主动抛出异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 小桃子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException5</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * throw 和 throws 配置使用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception 异常类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        String names[] = &#123;<span class="string">&quot;小凳子&quot;</span>, <span class="string">&quot;小椅子&quot;</span>, <span class="string">&quot;小桌子&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt; names.length-<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(<span class="string">&quot;数组下标越界异常:数组元素提取下标为 &quot;</span> + i + <span class="string">&quot;，超出数组取值范围！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(names[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * throw 和 try-catch 配置使用</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a 命令行参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b 命令行参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(String a,String b)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a1</span> <span class="operator">=</span> Integer.parseInt(a);</span><br><span class="line">            <span class="keyword">if</span>(a1 == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;第一个参数为 0 ，除法计算永远都是零&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">b1</span> <span class="operator">=</span> Integer.parseInt(b);</span><br><span class="line">            <span class="keyword">if</span>(b1 == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;除数不能为零&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            c = a1 / b1;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(e);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TestException5</span> <span class="variable">te</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TestException5</span>();</span><br><span class="line">        <span class="comment">// 调用 mehtod1 方法进行异常处理</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            te.method1();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用 method2 方法</span></span><br><span class="line">        te.method2(args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>方法重写深入</strong></p>
<p>学习了异常抛出处理方式之后，我们还需要再强调一下的是方法重写。</p>
<p>👩‍🏫 还记得方法重写的要求吗？</p>
<ol>
<li>方法名、返回类型、参数列表必须相同。</li>
<li>方法的修饰符范围可以相同或更大。</li>
</ol>
<p>我们可以发现，throws 是不是在方法上声明的，对吧 ~ 🙂</p>
<p>那么方法的重写需要加上第三个要求，<strong>抛出的异常要么和父类一样，或是父类抛出异常的子类，但是不能是抛出异常的父类。</strong></p>
<p>父类 ClassA 中的 method() 方法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> ArithmeticException, NumberFormatException&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子类 ClassB 中重写父类 method() 方法：</p>
<p>可以只抛出父类中的一个异常类。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> ArithmeticException&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> NumberFormatException&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或是</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> ArithmeticException,NumberFormatException&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不抛出异常类也是可以的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是抛出的异常不能大于父类抛出的异常，则是错误的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281138646.png" alt="image-20260128113809294"></p>
<p>实验总结</p>
<p>本实验主要学习了异常抛出处理方式：</p>
<ol>
<li>学会使用 throw 和 throws 关键字进行异常操作。</li>
<li>throws 在方法声明的同时抛出异常，可以到调用方法时再进行处理。</li>
<li>throw 主动抛出异常对象，可以传递更为确切的异常信息。</li>
<li>当子类重写父类方法时，需要考虑抛出的异常类，可以相同或是子类，但是不能更大。</li>
</ol>
<p><strong>主动抛出异常继续解决分苹果问题</strong></p>
<p>使用关键字 throw 主动抛出异常继续来解决分苹果问题。</p>
<p>我们需要延续上一个挑战的内容，可以更好的来完善解决分苹果。</p>
<p>你在编写分苹果挑战的代码时，是否考虑过一个问题：</p>
<p>当输入的苹果数量为 <strong>0</strong> ，孩子人数为 5 时，程序不会报错，能正常执行结果会输出 👇</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281138200.png" alt="image-20260128113827506"></p>
<p>很显然这样的结果对于程序代码而言是合法的，但对于常理来说是不合理的，孩子们都没有分到苹果，又怎么会非常开心呢，对吧！因此本次挑战中我们需要来解决该问题。</p>
<ol>
<li>在 <code>/home/project</code> 目录中创建 <code>DivideApplesThrow.java</code> 文件</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281140861.png" alt="image-20260128114031318"></p>
<ol>
<li>以下提供的是基础代码，你可以在 <code>divide()</code> 方法中，对原有的代码进行<strong>主动抛异常处理</strong>。请按照基础代码的结构，包括类中的方法名、方法返回类型和调用方式进行书写，不然可能会影响到挑战无法通过。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApplesThrow</span> &#123;</span><br><span class="line">    <span class="comment">//苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">            appleNum = input.nextInt();</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">            stuNum = input.nextInt();</span><br><span class="line">            System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;孩子们非常开心！&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;苹果数量和孩子人数必须为整数值&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();</span><br><span class="line">            System.out.println(<span class="string">&quot;Scanner 对象进行释放&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">DivideApplesThrow</span>().divide());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>使用关键字 throw 主动抛出异常来解决以上所描述的问题：</p>
<ol>
<li>当代码中传入的 <code>appleNum</code> 为 <code>0</code> 时，需要使用 <code>throw</code> 主动抛出 <code>RuntimeException</code> 异常对象;</li>
<li>在主动抛出 <code>RuntimeException</code> 异常对象时，需要带上异常反馈信息 “<strong>苹果数量不能为零，否则孩子们要失望了</strong>”，在此可以使用构造器传递异常反馈信息；</li>
<li>异常反馈信息可以通过异常对象的方法 <code>getMessage()</code> 进行信息获取；</li>
<li>程序中可能会出现 3 种不同的异常，需要通过多个 <code>catch</code> 语句块来捕获不同的异常对象，返回不同的异常信息：<ul>
<li>当捕获 <code>InputMismatchException</code> 异常时，返回异常信息字符串为 “<strong>苹果数量和孩子人数必须为整数值</strong>” ；</li>
<li>当捕获 <code>ArithmeticException</code> 异常时，返回异常信息字符串为 “<strong>孩子人数不能为零</strong>” ；</li>
<li>当捕获 <code>RuntimeException</code> 异常时，返回异常信息字符串为 “<strong>苹果数量不能为零，否则孩子们要失望了</strong>” 。</li>
</ul>
</li>
<li>要求输出的字符串必须按照以上 👆 要求进行书写，不能随意扩展。</li>
</ol>
<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><strong>DivideApplesThrow.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> Teacher Tao</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApplesThrow</span> &#123;</span><br><span class="line"><span class="comment">//苹果数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">//学生数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">appleNum = input.nextInt();</span><br><span class="line"><span class="keyword">if</span>(appleNum == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;苹果数量不能为零，否则孩子们要失望</span></span><br><span class="line"><span class="string">了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">stuNum = input.nextInt();</span><br><span class="line">System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum /</span><br><span class="line">stuNum);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;孩子们非常开心！&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(InputMismatchException e) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;苹果数量和孩子人数必须为整数值&quot;</span> ;</span><br><span class="line">&#125;<span class="keyword">catch</span>(ArithmeticException e) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;孩子人数不能为零&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line"><span class="keyword">return</span> e.getMessage();</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">input.close();</span><br><span class="line">System.out.println(<span class="string">&quot;Scanner 对象进行释放&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="keyword">new</span> <span class="title class_">DivideApplesThrow</span>().divide());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>采用抛出异常的处理方式解决分苹果问题</strong></p>
<p>采用关键字 <code>throws</code> 抛出异常的处理方式解决分苹果问题。</p>
<p>使用异常处理方式中的另一种方式<strong>抛出异常</strong>，就是采用关键字 <code>throws</code> 来实现之前分苹果挑战中所需解决的全部问题，本次挑战只提供最初始的代码，因此所有的逻辑处理代码都需要你来书写，你需要回顾一下之前所学的知识，来完成本次挑战。</p>
<p>需要采用<strong>抛出异常方式</strong>解决分苹果的问题，需要实现的内容如下：</p>
<ol>
<li><p>基础代码中已提供 <code>divide()</code> 方法，需要采用 <code>throws</code> 关键字进行异常抛出处理。</p>
</li>
<li><p>需要处理的异常仍然包括：</p>
<ul>
<li>当 <code>appleNum</code> 获取的值为 <code>0</code> 时，需要使用 <code>throw</code> 主动抛出 <code>RuntimeException</code> 异常对象；</li>
<li>当 <code>appleNum</code> 和 <code>stuNum</code> 获取的值为非整型数值时，系统会抛出 <code>InputMismatchException </code>异常对象；</li>
<li>当 <code>stuNum</code> 获取的值为 <code>0</code> 时，系统会抛出 <code>ArithmeticException</code> 异常对象。</li>
</ul>
</li>
<li><p>通过 <code>throws</code> 抛出的异常会在最后<strong>方法调用处进行捕获处理</strong>。</p>
</li>
<li><p><code>Scanner</code> 对象完成操作后需要进行<strong>资源释放</strong>，可以在类中添加一个 <code>scannerClose()</code> 方法，用来进行对象释放操作，最后在异常捕获时在 <code>finally</code> 语句块中执行。</p>
</li>
<li><p>异常信息反馈，可以通过使用 <code>getMessage()</code> 方法进行信息输出。</p>
</li>
<li><p>输出的信息字符串必须按照以下 👇 内容要求进行书写，不能随意扩展。</p>
<ul>
<li>捕获 <code>InputMismatchException </code>异常时，输出字符串 “<strong>苹果数量和孩子人数必须为整数值</strong>”；</li>
<li>捕获 <code>ArithmeticException</code> 异常时，输出字符串 “<strong>孩子人数不能为零</strong>”；</li>
<li>捕获 <code>RuntimeException</code> 异常时，输出字符串 “<strong>苹果数量不能为零，否则孩子们要失望了</strong>”；</li>
<li><code>Scanner</code> 对象资源关闭后，输出字符串 “<strong>Scanner 对象进行释放</strong>”；</li>
<li>正常情况下，输出字符串 “<strong>孩子们非常开心！</strong>”。</li>
</ul>
</li>
<li><p>在 <code>/home/project</code> 目录中创建 <code>DivideApplesThrows.java</code> 文件。</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281141162.png" alt="image-20260128114101588"></p>
<ol>
<li>以下提供的是基础代码，你可以在此基础上进行改动，采用抛出异常方式解决分苹果所有问题。请参照基础代码的结构进行书写，不然可能会影响到挑战无法通过。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DivideApplesThrows</span> &#123;</span><br><span class="line">    <span class="comment">//苹果数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">appleNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//学生数</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;**_现在给孩子们分苹果_**&quot;</span>);</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入桌子上有几个苹果：&quot;</span>);</span><br><span class="line">        appleNum = input.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入班上有几个孩子：&quot;</span>);</span><br><span class="line">        stuNum = input.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;班上每个孩子分得多少苹果：&quot;</span> + appleNum / stuNum);</span><br><span class="line">        System.out.println(<span class="string">&quot;孩子们非常开心！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DivideApplesThrows</span>().divide();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://doc.shiyanlou.com/courses/3487/1656046/691b2776a3ef8828c4b3d78f1fa9294b-0" alt="图片描述"></p>
<h5 id="10-4复习与挑战"><a href="#10-4复习与挑战" class="headerlink" title="10.4复习与挑战"></a>10.4复习与挑战</h5><p><strong>本章总结</strong></p>
<p>本章主要学习 Java 异常处理机制，总结如下：</p>
<ol>
<li><p>异常是指由于程序的编写问题引起的错误提示信息，但不是语法错误。</p>
</li>
<li><p>异常的最高父类是 <strong>Throwable</strong>，API 中存在的异常都是该类派生出来的，都是它的子类。</p>
</li>
<li><p>Java 中的异常主要分为 Error 和 Exception，程序代码主要处理的是 Exception 。</p>
</li>
<li><p>异常处理的方式，主要分为两种：</p>
<ul>
<li>异常捕获处理</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// 需要进行异常处理的语句</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类 异常对象名)&#123;</span><br><span class="line">    <span class="comment">// 通过异常对象进行处理</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类 异常对象名)&#123;</span><br><span class="line">    <span class="comment">// 按照应用自定义处理，但不能空着什么都不做处理，是一种很不安全的情况</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">// 无条件执行部分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>异常抛出处理</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> 返回类型 方法名(参数列表) <span class="keyword">throws</span> 异常类[, 异常类<span class="number">2</span>, ... , 异常类n]&#123;</span><br><span class="line">    <span class="comment">// 方法体中需要进行异常处理的语句</span></span><br><span class="line">    <span class="comment">// 也可以保护没有异常处理的语句</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>在调用该方法时还是需要进行异常处理，不能一直抛出。</p>
</li>
<li><p>异常也可以主动抛出，通过关键字是 throw 操作；主动抛出异常也需要和两种异常处理方式配合进行使用。</p>
</li>
</ol>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281141980.png" alt="image-20260128114124954"></p>
<p><strong>实现异常处理</strong></p>
<p>使用本章所学的异常处理技术解决以下代码中的异常问题。</p>
<p>异常处理有两种方式，捕获和抛出异常，你可以采用其中一种方式或是两者结合，同时也可采用主动抛出异常配合进行异常处理。</p>
<ol>
<li><p>在 <code>/home/project</code> 目录下新建 <code>DataException.java</code> 源文件。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281141167.png" alt="image-20260128114147770"></p>
</li>
<li><p>以下提供的是基础代码，你可以在此基础上进行改动，需要采用异常方式进行异常处理。请参照基础代码的结构进行书写，不然可能会影响到挑战无法通过。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataException</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据获取</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(Object[] objs)</span>&#123;</span><br><span class="line"></span><br><span class="line">        ### 代码实现 ###</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">DataException</span> <span class="variable">de</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataException</span>();</span><br><span class="line">        de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>() , <span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>()&#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>() , <span class="keyword">new</span> <span class="title class_">String</span>(), <span class="keyword">new</span> <span class="title class_">BService</span>()&#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">        de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>()&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AService</span> <span class="keyword">implements</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AService&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AService methodA()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BService</span> <span class="keyword">implements</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BService&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BService methodB()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>基础代码中提供了 <code>IModuleService</code> 接口，以及 <code>2</code> 个接口实现类 <code>AService</code> 和 <code>BService</code> ，他们分别实现了接口中的 <code>method1()</code> 方法，<code>AService</code> 类中提供了 <code>methodA()</code> 方法，<code>BService</code> 类中提供了 <code>methodB()</code> 方法；在 <code>DataException</code> 类 <code>main()</code> 方法中提供了测试代码，分别调用 <code>getData()</code> 方法三次，传入不同的参数，请仔细查看基础代码。 👀</p>
<p>接下来，在 DataException 类中完成 getData() 方法的功能，要求如下：</p>
<ol>
<li>需要定义类型为 IModuleService 的数组，<strong>长度为 6</strong>。</li>
<li>当 getData() 方法传入的参数长度和创建的数组长度不一致时，可以主动抛出异常，显示信息为 “<strong>参数 objs 数组个数未达到 6 ！</strong>”</li>
<li>getData() 方法传入的参数需要赋值给 IModuleService 数组的数组元素，因此类型应该是 IModuleService 类型，当类型不匹配时，显示信息为 “<strong>参数传入的数据类型不正确，不是 IModuleService 接口子类！</strong>”。</li>
<li>需要通过循环将 IModuleService 类型的数组遍历数组元素进行操作，当数组元素为 null 时，可以忽略本次循环剩下的语句，执行下一轮操作。</li>
<li>不论数组元素类型为 AService 或 BService，都可以访问 method1() 方法；当数组元素对象为 AService，可以访问类中的 methodA() 方法；当数组元素对象为 BService，可以访问类中的 methodB() 方法。</li>
<li><strong>类名、方法名，以及输出的信息</strong>必须按照要求内容要求进行书写，不能随意扩展，结果可以参考「<strong>挑战运行效果图</strong>」。</li>
</ol>
<p>🌟 <strong>提示</strong>：本挑战需处理的异常主要是 <code>ArrayIndexOutOfBoundsException</code> 和 <code>ClassCastException</code> 。</p>
<p>可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281142308.png" alt="image-20260128114205676"></p>
<p><strong>DataException.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataException</span> &#123;</span><br><span class="line"><span class="comment">// 数据获取</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(Object[] objs)</span>&#123;</span><br><span class="line">IModuleService[] IModuleServices = <span class="keyword">new</span> <span class="title class_">IModuleService</span>[<span class="number">6</span>];</span><br><span class="line"><span class="keyword">if</span> (objs.length != IModuleServices.length) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(<span class="string">&quot;参数 objs 数组个数未达到</span></span><br><span class="line"><span class="string">6 ！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (; i &lt; objs.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (objs[i] <span class="keyword">instanceof</span> AService) &#123;</span><br><span class="line">((AService) objs[i]).method1();</span><br><span class="line">((AService) objs[i]).methodA();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">((BService) objs[i]).method1();</span><br><span class="line">((BService) objs[i]).methodB();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassCastException exception) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;参数传入的数据类型不正确，不是 IModuleService 接口</span></span><br><span class="line"><span class="string">子类！&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i++; i &lt; objs.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (objs[i] <span class="keyword">instanceof</span> AService) &#123;</span><br><span class="line">((AService) objs[i]).method1();</span><br><span class="line">((AService) objs[i]).methodA();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">((BService) objs[i]).method1();</span><br><span class="line">((BService) objs[i]).methodB();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"><span class="type">DataException</span> <span class="variable">de</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataException</span>();</span><br><span class="line">de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span></span><br><span class="line"><span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>() , <span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>()&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span></span><br><span class="line"><span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>() , <span class="keyword">new</span> <span class="title class_">String</span>(), <span class="keyword">new</span> <span class="title class_">BService</span>()&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">de.getData(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="keyword">new</span> <span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>(), <span class="keyword">new</span></span><br><span class="line"><span class="title class_">BService</span>(), <span class="keyword">new</span> <span class="title class_">AService</span>()&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AService</span> <span class="keyword">implements</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;AService&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;AService methodA()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BService</span> <span class="keyword">implements</span> <span class="title class_">IModuleService</span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;BService&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;BService methodB()&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="十一、集合和泛型"><a href="#十一、集合和泛型" class="headerlink" title="十一、集合和泛型"></a>十一、集合和泛型</h3><h5 id="11-1-集合框架"><a href="#11-1-集合框架" class="headerlink" title="11.1 集合框架"></a>11.1 集合框架</h5><p><strong>为什么要使用集合框</strong></p>
<p>之前我们学习过数组，知道了数组可以存储多个数据类型相同的元素，但面对频繁增加、删除、修改元素的要求以及动态扩容要求时显得捉襟见肘。为此，JDK 提供了一套 “集合” 框架，这套框架是对常见数据结构的实现，不仅可存储数据，还提供了丰富的访问和处理数据的操作。在面向对象思想里，数据结构也被认为是一个容器，所以集合、容器等词汇经常被交替使用。</p>
<p>Java 集合框架支持两种类型的容器：一种是为了存储一个元素集合，简称为集合（collection）；另一种是为了存储键&#x2F;值对，称为映射（map，或称图）。</p>
<p>比如现在需要存放多个 Student 对象数据，该如何实现呢？以大家现有的知识储备，使用数组解决这个问题是最合理的方式。但是使用数组存放多个 Student 对象的信息，也会存在很多问题。</p>
<p>首先，Java 语言中的数组长度是固定的，一旦创建出指定长度的数组以后，就给内存分配了相应的存储空间。但数组的长度应该设置为多少合适呢？如果数组长度设置小了，不能满足程序需求，并且容易造成数组越界等异常的发生；如果数组长度设置大了，又会造成空间浪费。</p>
<p>其次，如果使用长度为 20 的 Student 对象数组来存放学生的信息，但是实际上只存放了 8 个学生的信息，不但会造成内存空间的浪费，也无法通过数组对象直接的获取真实存放学生的数量。因为数组提供的 length 属性是获取数组的长度，而不是数组中实际存放有用信息的个数。</p>
<p>最后，数组元素在内存空间中是连续存放的，这样如果在数组中删除一个元素，为了保持数组内数据元素的连续性，被删除之后的数组元素全部要前移一位，但这种元素的移动是比较消耗系统资源的。</p>
<p>通过上面的分析可以看出，使用数组虽然可以实现存储多个 Student 对象的功能，但会有诸多的麻烦。为了解决这个问题，Java 语言提供了集合这种类型。</p>
<p>集合是一种逻辑结构，提供了若干的实用方法，方便使用者对一组数据进行操作。针对不同的需求，Java 也提供了不同的集合。</p>
<p><strong>单值集合的顶层接口：Collection 家族</strong></p>
<p>集合框架可以分为 Collection 和 Map 两类，现在开始学习 Collection。Collection 是一个顶层接口，一些 Collection 接口的实现类允许有重复的元素，而另一些则不允许；一些 Collection 是有序的，而另一些则是无序的。</p>
<p>JDK 不提供 Collection 接口的任何直接实现类，而是提供了更具体的子接口，如 Set 接口和 List 接口。这些子接口继承 Collection 接口的方法，然后再对 Collection 接口从不同角度进行重写或扩充。Collection 接口框架如图所示。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281142992.png" alt="image-20260128114223095"></p>
<p>从图中可以看出，Collection 接口主要有三个子接口，分别是 Set 接口、List 接口和 Queue 接口，下面简要介绍这三个接口。</p>
<ul>
<li><p>Set 接口</p>
<p>Set 实例用于存储一组不重复的，无序的元素。</p>
</li>
<li><p>List 接口</p>
<p>List 实例是一个有序集合。程序员可对 List 中每个元素的位置进行精确控制，可以根据索引来访问元素，此外 List 中的元素是可以重复的。</p>
</li>
<li><p>Queue 接口</p>
<p>Queue 中的元素遵循先进先出的规则，是对数据结构 “队列” 的实现。</p>
<p><strong>键值映射集合的顶层接口：Map 家族</strong></p>
</li>
</ul>
<p>Map 接口定义了存储和操作一组 “键（key）值（value）” 映射对的方法。</p>
<p>Map 接口和 Collection 接口的本质区别在于，Collection 接口里存放的是一系列单值对象，而 Map 接口里存放的是一系列 key-value 对象。Map 中的 key 不能重复，每个 key 最多只能映射到一个值。Map 接口框架如图所示。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281142765.png" alt="image-20260128114247110"></p>
<p>从图中可以看出，HashMap 和 Hashtable 是 Map 接口的实现类。</p>
<p>以上，我们对单值集合的顶层接口 Collection 和键值对集合的顶层接口 Map 做了简要的介绍，接下来的小节会逐步介绍它们的一些重要实现类。</p>
<h5 id="11-2-Set接口"><a href="#11-2-Set接口" class="headerlink" title="11.2 Set接口"></a>11.2 Set接口</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入HashSet的包</span></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 第一个集合类型(HasfSet)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] strs = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">3</span>];</span><br><span class="line">        strs[<span class="number">0</span>] = <span class="string">&quot;小蓝&quot;</span>;</span><br><span class="line">        strs[<span class="number">1</span>] = <span class="string">&quot;小白&quot;</span>;</span><br><span class="line">        strs[<span class="number">2</span>] = <span class="string">&quot;小路&quot;</span>;</span><br><span class="line">        System.out.println(strs[<span class="number">0</span>] + <span class="string">&quot;,&quot;</span> + strs[<span class="number">1</span>] + <span class="string">&quot;,&quot;</span> + strs[<span class="number">2</span>]);</span><br><span class="line">        <span class="comment">//strs[3] = &quot;小红&quot;;  //错误的，无法放入数组中。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// HashSet是一个不允许有重复元素的集合，而且允许有null值，它是无序的</span></span><br><span class="line">        <span class="comment">// HashSet可以存放哪些类型？ 布尔值、整数、浮点型 、字符型、字符串类型等...</span></span><br><span class="line">        <span class="comment">// 语法：HashSet&lt;数据类型&gt; 变量名 = new HashSet&lt;数据类型&gt;();</span></span><br><span class="line">        </span><br><span class="line">        HashSet&lt;String&gt; names = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;String&gt;();</span><br><span class="line">        names.add(<span class="string">&quot;小蓝&quot;</span>);  <span class="comment">//add()方法表示向集合添加数据</span></span><br><span class="line">        names.add(<span class="string">&quot;小白&quot;</span>);</span><br><span class="line">        names.add(<span class="string">&quot;小路&quot;</span>);</span><br><span class="line">        System.out.println(names.size());  <span class="comment">//.size()方法表示获取集合的大小(长度)</span></span><br><span class="line">        names.add(<span class="string">&quot;小强&quot;</span>);</span><br><span class="line">        names.add(<span class="string">&quot;小飞&quot;</span>);</span><br><span class="line">        System.out.println(names.size());</span><br><span class="line">        names.add(<span class="string">&quot;小蓝&quot;</span>);  <span class="comment">//重复数据无法进行加入到集合中</span></span><br><span class="line">        System.out.println(names.size());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 移除HashSet中的数据</span></span><br><span class="line">        names.remove(<span class="string">&quot;小路&quot;</span>);  <span class="comment">//.remove()方法表示移除HashSet中的数据</span></span><br><span class="line">        System.out.println(names.size());</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">temp</span> <span class="operator">=</span> names.contains(<span class="string">&quot;小蓝&quot;</span>); <span class="comment">//.contains()方法表示判断集合中是否存在指定元素，有返回true，没有返回false</span></span><br><span class="line">        System.out.println(temp);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 新的元素迭代操作(循环操作)</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * for遍历循环(for-each)，其语法如下：</span></span><br><span class="line"><span class="comment">         * for(变量 ：可迭代对象)&#123;</span></span><br><span class="line"><span class="comment">         *      语句处理</span></span><br><span class="line"><span class="comment">         * &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span>(String name : names)&#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 集合与数组的区别</span></span><br><span class="line"><span class="comment"> * 如果定义一个字符串的空数组：String[] strs = new String[10]</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 数组的劣势：(1).一旦定义必须要指定长度，超出长度无法进行放入数据。(2).数组定义时，一次性开辟N个空间。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 集合：就可以改变数组扩展的问题，以及集合一种可伸缩的动态数组类型</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>



<p>Set 接口是 Collection 的子接口。</p>
<p>Set 接口中的元素是不能重复的、无序的，这里的 “无序” 是指向 Set 中输入的元素，与从 Set 中输出元素的顺序是不一致的。</p>
<p>例如，向 Set 接口中依次增加 “北京”、“深圳” 和 “西安” 三个元素，但输出顺序却是 “西安”、“北京” 和 “深圳” 。对于开发者而言，只需要了解这一 “无序” 的特性即可，不必深究其原因。</p>
<p>Set 接口主要有两个实现类 HashSet 和 TreeSet。</p>
<p>下面列出了 Set 接口继承自 Collection 接口的主要方法。</p>
<ul>
<li><p><code>boolean add(Object obj)</code></p>
<p>向集合中添加一个 obj 元素，并且 obj 不能和集合中现有数据元素重复，添加成功后返回 true。如果添加的是重复元素，则添加操作无效，并返回 false。</p>
</li>
<li><p><code>void clear()</code></p>
<p>移除此集合中的所有数据元素，即将集合清空。</p>
</li>
<li><p><code>boolean contains(Object obj)</code></p>
<p>判断此集合中是否包含 obj，如果包含，则返回 true。</p>
</li>
<li><p><code>boolean isEmpty()</code></p>
<p>判断集合是否为空，为空则返回 true。</p>
</li>
<li><p><code>Iterator iterator()</code></p>
<p>返回一个 Iterator 对象，可用它来遍历集合中的数据元素。</p>
</li>
<li><p><code>boolean remove(Object obj)</code></p>
<p>如果此集合中包含 obj，则将其删除，并返回 true。</p>
</li>
<li><p><code>int size()</code></p>
<p>返回集合中真实存放数据元素的个数，注意与数组、字符串获取长度的方法的区别。</p>
</li>
<li><p><code>Object[] toArray()</code></p>
<p>返回一个数组，该数组包含集合中的所有数据元素。</p>
</li>
</ul>
<p><strong>HashSet 类的使用</strong></p>
<p>我们还是通过代码来讲解 HashSet 类的使用，代码如下：👇</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashSet 类的使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建一个HashSet对象，存放学生姓名信息</span></span><br><span class="line">        <span class="type">Set</span> <span class="variable">nameSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        nameSet.add(<span class="string">&quot;王云&quot;</span>);</span><br><span class="line">        nameSet.add(<span class="string">&quot;刘静涛&quot;</span>);</span><br><span class="line">        nameSet.add(<span class="string">&quot;南天华&quot;</span>);</span><br><span class="line">        nameSet.add(<span class="string">&quot;雷静&quot;</span>);</span><br><span class="line">        nameSet.add(<span class="string">&quot;王云&quot;</span>);        <span class="comment">//增加已有的数据元素</span></span><br><span class="line">        System.out.println(<span class="string">&quot;再次添加王云是否成功：&quot;</span> + nameSet.add(<span class="string">&quot;王云&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;显示集合内容：&quot;</span> + nameSet);</span><br><span class="line">        System.out.println(<span class="string">&quot;集合里是否包含南天华：&quot;</span> + nameSet.contains(<span class="string">&quot;南天华&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;从集合中删除\&quot;南天华\&quot;...&quot;</span>);</span><br><span class="line">        nameSet.remove(<span class="string">&quot;南天华&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;集合里是否包含南天华：&quot;</span> + nameSet.contains(<span class="string">&quot;南天华&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;集合中的元素个数为：&quot;</span> + nameSet.size());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 add() 方法添加集合元素，contains() 方法判断集合元素是否存在，remove() 方法也可以指定集合元素进行删除，size() 获取集合元素个数。需要多写才能熟练使用这些方法。</p>
<p>本实验主要学习了 Set 接口和 HashSet 类的使用：</p>
<ol>
<li>Set 接口的特性：无重复，无序。</li>
<li>Set 接口下继承父接口的方法。</li>
<li>Set 接口的实现类 HashSet 的使用：<ul>
<li>通过 HashSet 无参构造器创建 Set 对象。</li>
<li>使用了 add()、contains()、remove()、size() 等常用的方法对集合元素进行操作。</li>
</ul>
</li>
</ol>
<p><strong>HashSet 类无重复特性</strong></p>
<p>HashSet 实现类的使用还是挺简单的，上一个实验中我们提到了 Set 接口的特性是无序无重复。对吧！</p>
<p>那么需要思考一个问题：**HashSet 是如何判断元素重复的？**如果逐个比较 HashSet 中的全部元素，显然是一种效率低下的做法。因此 HashSet 的底层引入了 hashcode。</p>
<p>hashcode 最初定义在 Object 类中，如果两个对象相等，那么这两个对象的 hashcode 值相同，因此根据逆否定理可知如果两个对象的 hashcode 值不同，那么这两个对象不相等。但反之，如果两个对象的 hashcode 值相同，则这两个对象可能相等，也可能不等，需要再通过 equals() 方法进一步比较这两个对象的内容是否相同。</p>
<p>当向 HashSet 中增加元素时，HashSet 会先计算此元素的 hashcode，如果 hashcode 值与 HashSet 集合中的其他元素的 hashcode 值都不相同，那么就能断定此元素是唯一的。否则，如果 hashcode 值与 HashSet 集合中的某个元素的 hashcode 值相同，HashSet 就会继续调用 equals() 方法进一步判断它们的内容是否相同，如果相同就忽略这个新增的元素，如果不同就把它增加到 HashSet 中。</p>
<p>因此，在实际开发中，当使用 HashSet 存放某个自定义对象时，就得先在这个对象的定义类中重写 hashCode() 和 equals() 方法。hashcode 值是对象的映射地址，而 equals() 用于比较两个对象。在重写时，hashCode() 方法需要自定义 “映射地址” 的映射规则，equals() 方法需要自定义对象的 “比较” 规则。一般而言，映射规则和比较规则都需要借助于对象的所有属性进行计算。</p>
<p><strong>自定义对象存储在 HashSet 集合中</strong></p>
<p>首先，需要在 <code>/home/project/</code> 目录下新建 <code>Vehicle.java</code> 源文件，并输入以下代码，这个程序中对 <code>hashCode()</code> 和 <code>equals()</code> 方法进行了重写，请大家仔细阅读其中的注释。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义车辆信息类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> oil;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vehicle</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vehicle</span><span class="params">(String name, <span class="type">int</span> oil)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.oil = oil;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOil</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> oil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOil</span><span class="params">(<span class="type">int</span> oil)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.oil = oil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="comment">// 如果 obj 参数为 null 时，无须比较，直接返回 false 即可。</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">          <span class="comment">// 如果当前对象和 obj 的内存地址相同，则二者必然指向同一个对象，因此返回 true 即可。</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span> == obj)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">          <span class="comment">// 如果当前对象和 obj 参数对象的类型不一致，也无须比较，直接返回 false 即可。</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.getClass() != obj.getClass())&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果当前对象和 obj 的所有属性（这里值 name 和 oil ）都相同，也认为二者的比较结果为 true</span></span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Vehicle) &#123;</span><br><span class="line">            <span class="type">Vehicle</span> <span class="variable">vehicle</span> <span class="operator">=</span> (Vehicle) obj;</span><br><span class="line">            <span class="comment">//用传入的obj，和当前对象this比较</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.name.equals(vehicle.getName()) &amp;&amp; <span class="built_in">this</span>.oil == vehicle.getOil()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 用对象的所有属性值作为 hashcode 的计算因子</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        result = result * <span class="number">31</span> + name.hashCode();</span><br><span class="line">        result = result * <span class="number">31</span> + oil;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在重写 <code>hashCode()</code> 方法时，其中的 <code>result=0</code> 及常量 31 的设置是参考了 JDK 中 <code>String</code> 中 <code>hashCode()</code> 的源码，如下所示。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// String 类对 hashCode()的重写</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> hash;</span><br><span class="line">        <span class="keyword">if</span> (h == <span class="number">0</span> &amp;&amp; value.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">char</span> val[] = value;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; value.length; i++) &#123;</span><br><span class="line">                h = <span class="number">31</span> * h + val[i];</span><br><span class="line">            &#125;</span><br><span class="line">            hash = h;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> h;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际上，如何在 hashCode() 方法中设计计算公式是一个数学问题，我们不必深究。计算公式的目的是为了 “尽可能的避免不同对象计算出的 hash 值相同” ，普通开发者通常只需在 hashCode() 方法中使用全部的属性值进行计算即可。例如，也可以将上面程序中的 hashCode() 方法重写为以下的简易形式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line">public int hashCode() &#123;</span><br><span class="line">    return name.hashCode() &amp; oil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面向 HashSet 中增加多个 Vehicle 对象，需在 <code>/home/project/</code> 目录下，创建 <code>TestVehicle.java</code> 源文件，最后添加测试代码，并导入两个包。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestVehicle</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Set</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        System.out.println(set.add(<span class="keyword">new</span> <span class="title class_">Vehicle</span>(<span class="string">&quot;a&quot;</span>, <span class="number">70</span>)));</span><br><span class="line">        System.out.println(set.add(<span class="keyword">new</span> <span class="title class_">Vehicle</span>(<span class="string">&quot;b&quot;</span>, <span class="number">80</span>)));</span><br><span class="line">        System.out.println(set.add(<span class="keyword">new</span> <span class="title class_">Vehicle</span>(<span class="string">&quot;a&quot;</span>, <span class="number">70</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果分别是：<code>true、true 和 false</code>。这是因为第一个 <code>new Vehicle(&quot;a&quot;, 70)</code> 对象和 <code>new Vehicle(&quot;b&quot;, 80)</code> 对象是不同的对象，它们的内存地址、属性值都不同，因此二者在第一次加入 HashSet 时都会增加成功；之后，如果再次向 HashSet 中增加 <code>new Vehicle(&quot;a&quot;, 70)</code> 对象，因为该对象与第一个 <code>new Vehicle(&quot;a&quot;, 70)</code> 对象的 <code>hashCode()</code> 和 <code>equals()</code> 的运算结果都相同，会被 HashSet 判定为重复的对象，因此这次增加的返回值是 false。</p>
<h5 id="11-3-List接口"><a href="#11-3-List接口" class="headerlink" title="11.3 List接口"></a>11.3 List接口</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;  <span class="comment">//导入ArrayList</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayListTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 添加元素与HashSet 使用一样的方法</span></span><br><span class="line">        ArrayList&lt;String&gt; names = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        names.add(<span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        names.add(<span class="string">&quot;小白&quot;</span>);</span><br><span class="line">        names.add(<span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// ArrayList与HashSet区别(1):可以添加重复数据</span></span><br><span class="line">        names.add(<span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// 如何获取ArrayList中的某个元素，.get(索引)方法获取集合中每个元素</span></span><br><span class="line">        System.out.println(names.get(<span class="number">2</span>));  <span class="comment">//get 获取 set 设置</span></span><br><span class="line">        <span class="comment">// ArrayList修改某个元素时，使用.set(索引,修改的具体内容)方法进行修改某个元素的值</span></span><br><span class="line">        names.set(<span class="number">2</span>, <span class="string">&quot;小红&quot;</span>);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// ArrayList移除元素与HashSet使用一样的方法</span></span><br><span class="line">        names.remove(<span class="number">1</span>);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// 当有多个相同要移除的值时，默认移除第一个被找到的</span></span><br><span class="line">        names.remove(<span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        System.out.println(names);</span><br><span class="line">        <span class="comment">// for循环来获取每个元素</span></span><br><span class="line">        System.out.println(<span class="string">&quot;下列时使用for循环输出元素：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;names.size();i++)&#123;</span><br><span class="line">            System.out.println(names.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// for-each遍历来获取每个元素</span></span><br><span class="line">        System.out.println(<span class="string">&quot;下列是使用for-each遍历输出元素：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(String name : names)&#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayList 是一个数组队列，它提供了添加、删除、修改、遍历等功能</span></span><br><span class="line"><span class="comment"> * ArrayList 类是一个可以动态修改的数组</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><strong>List 接口</strong></p>
<p>List 是 Collection 接口的子接口，List 中的元素是有序的，而且可以重复。List 集合中的数据元素都对应一个整数形式的序号索引，记录其在集合中的位置，可以根据此序号存取元素。JDK 中常用的 List 实现类是 ArrayList 和 LinkedList。</p>
<p>List 接口继承自 Collection 接口，除了拥有 Collection 接口所拥有的方法外，还拥有下列方法：</p>
<ul>
<li><p><code>void add(int index,Object o)</code></p>
<p>在集合的指定 index 位置处，插入指定的 o 元素。</p>
</li>
<li><p><code>Object get(int index)</code></p>
<p>返回集合中 index 位置的数据元素。</p>
</li>
<li><p><code>int indexOf(Object o)</code></p>
<p>返回此集合中第一次出现的指定 o 元素的索引，如果此集合不包含 o 元素，则返回 -1。</p>
</li>
<li><p><code>int lastIndexOf(Object o)</code></p>
<p>返回此集合中最后出现的指定 <code>o</code> 元素的索引，如果此集合不包含 <code>o</code> 元素，则返回 -1。</p>
</li>
<li><p><code>Object remove(int index)</code></p>
<p>移除集合中 index 位置的数据元素。</p>
</li>
<li><p><code>Object set(int index,Object o)</code></p>
<p>用指定的 o 元素替换集合中 index 位置的数据元素。</p>
</li>
</ul>
<p>ArrayList 实现了 List 接口，其底层采用的数据结构是数组。另一个 List 接口的实现类是 LinkedList，它在存储方式上采用链表进行链式存储。</p>
<p><strong>ArrayList 类的基本使用</strong></p>
<p>根据数据结构的知识可知，数组（顺序表）在插入或删除数据元素时，需要批量移动数据元素，故性能较差；但在根据索引获取数据元素时，因为数组是连续存储的，所以在遍历元素或随机访问元素时效率高。</p>
<p>那么本实验需要学习的 ArrayList 实现类的底层就是数组，因此 ArrayList 实现类更加适合根据索引访问元素的操作。</p>
<p>假设车辆管理有如下需求：</p>
<ol>
<li>用户可以按照车辆入库的顺序查阅车辆信息。</li>
<li>所有车辆有连续的编号，当用户输入车辆的编号后系统显示车辆完整信息。</li>
</ol>
<p>根据需求编写程序，在 <code>/home/project/</code> 目录下新建 <code>TestArrayList.java</code> 源文件，并写入以下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayList 类的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArrayList</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="comment">// 创建 ArrayList 集合，用于存放车辆</span></span><br><span class="line">        <span class="type">List</span> <span class="variable">vehAL</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;战神&quot;</span>,<span class="string">&quot;长城&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;跑得快&quot;</span>,<span class="string">&quot;红旗&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Truck</span>(<span class="string">&quot;大力士&quot;</span>,<span class="string">&quot;5吨&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Truck</span>(<span class="string">&quot;大力士二代&quot;</span>,<span class="string">&quot;10吨&quot;</span>);</span><br><span class="line">        <span class="comment">// 将 c1 添加到 vehAL 集合的末尾</span></span><br><span class="line">        vehAL.add(c1);</span><br><span class="line">        vehAL.add(c2);</span><br><span class="line">        vehAL.add(t1);</span><br><span class="line">        vehAL.add(t2);</span><br><span class="line">        System.out.println(<span class="string">&quot;*** 显示全部车辆 ***&quot;</span>);</span><br><span class="line">        <span class="comment">// 用于显示序号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 增强for循环遍历</span></span><br><span class="line">        <span class="keyword">for</span>(Object obj:vehAL)&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> Car) &#123;</span><br><span class="line">                <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car)obj;</span><br><span class="line">                System.out.println(num + <span class="string">&quot; 该车是轿车，其车名为：&quot;</span> + car.getName());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="type">Truck</span> <span class="variable">truck</span> <span class="operator">=</span> (Truck)obj;</span><br><span class="line">                System.out.println(num + <span class="string">&quot; 该车是卡车，其车名为：&quot;</span> + truck.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            num++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入要显示车名的车辆编号：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> ((Vehicle)vehAL.get(input.nextInt()-<span class="number">1</span>)).getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;车辆名称为：&quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//轿车类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span>&#123;</span><br><span class="line">    <span class="comment">//品牌</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">brand</span> <span class="operator">=</span> <span class="string">&quot;红旗&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造方法，指定车名和品牌</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String name, String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, <span class="number">20</span>);</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取品牌</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//卡车类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Truck</span> <span class="keyword">extends</span> <span class="title class_">Vehicle</span>&#123;</span><br><span class="line">    <span class="comment">// 吨位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">load</span> <span class="operator">=</span> <span class="string">&quot;10吨&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造方法，指定车名和品牌</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Truck</span><span class="params">(String name, String load)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, <span class="number">20</span>);</span><br><span class="line">        <span class="built_in">this</span>.load = load;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取吨位</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLoad</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> load;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>课堂笔记</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String sex)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stuInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot;,&quot;</span> + age + <span class="string">&quot;,&quot;</span> + sex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Student&gt;(); <span class="comment">// 当前集合方法学生的对象</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">21</span>, <span class="string">&quot;女&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">18</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line">        students.add(s1);</span><br><span class="line">        students.add(s2);</span><br><span class="line">        students.add(s3);</span><br><span class="line">        <span class="comment">// System.out.println(students);</span></span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            student.stuInfo();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ArrayList&lt;数据类型&gt;：(1). E 泛型数据类型 (2). objectName 对象名</span></span><br></pre></td></tr></table></figure>

<p><strong>去掉重复的号码</strong></p>
<p>已知有一批 QQ 号码，QQ 号码最长为 11 位最短为 5 位，其中有很多重复的 QQ 号码，请将这些 QQ 号中重复的去掉。</p>
<p>新建一个 Java 包 <code>org.lanqiao.main</code>。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p org/lanqiao/main</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.main</code> 下新建一个 <code>RemoveQQ</code> 类。命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/main/RemoveQQ.java</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.main;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RemoveQQ</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 将文档中准备的 QQ 号创建成数组</span></span><br><span class="line">    String[] nums =&#123;<span class="string">&quot;1231561&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;151235&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;121311&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;13211&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;12344&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;12344&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;112345&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="string">&quot;1123344&quot;</span>,<span class="string">&quot;7677471&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;1475639&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;1805385443&quot;</span>,<span class="string">&quot;18117197&quot;</span>,<span class="string">&quot;774768204&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;89571806&quot;</span>,<span class="string">&quot;76824338&quot;</span>,<span class="string">&quot;10172214&quot;</span>,<span class="string">&quot;1345759&quot;</span>,<span class="string">&quot;75776909&quot;</span>,<span class="string">&quot;757747069&quot;</span>&#125;;</span><br><span class="line">    <span class="comment">// 创建集合</span></span><br><span class="line">    ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    <span class="comment">// 复制数组内的元素到集合中</span></span><br><span class="line">    <span class="keyword">for</span>(String i : nums)&#123;</span><br><span class="line">        list.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 调用 repeat 方法进行去重并获取去重后的集合</span></span><br><span class="line">    ArrayList&lt;String&gt; newList = repeat(list);</span><br><span class="line">    <span class="comment">// 输出去重后的集合</span></span><br><span class="line">        System.out.println(newList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;String&gt; <span class="title function_">repeat</span><span class="params">(ArrayList&lt;String&gt; list)</span>&#123;</span><br><span class="line">        <span class="comment">// 使用循环遍历集合</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;list.size();i++)&#123;</span><br><span class="line">            <span class="comment">// 使用循环遍历集合中下标 i 之后的元素</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i+<span class="number">1</span>;j&lt;list.size();j++)&#123;</span><br><span class="line">                <span class="comment">// 如果找到和下标 i 元素相同的字符串，则将其移除</span></span><br><span class="line">                <span class="keyword">if</span>(list.get(i).equals(list.get(j)))&#123;</span><br><span class="line">                    list.remove(j);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="11-4-泛型"><a href="#11-4-泛型" class="headerlink" title="11.4 泛型"></a>11.4 泛型</h5><p>课堂笔记</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 调用js方法时需要的步骤分别为2个</span></span><br><span class="line">        <span class="type">Test</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>();  <span class="comment">//1.实列化对象</span></span><br><span class="line">        t.js(<span class="number">3</span>, <span class="number">5</span>);  <span class="comment">//2.通过对象去调用方法</span></span><br><span class="line"></span><br><span class="line">        sf(<span class="number">7</span>,<span class="number">8</span>);  <span class="comment">//直接调用静态方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 非静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">js</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">        System.out.println(x*y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sf</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">        System.out.println(x*y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// static是静态，什么是静态？</span></span><br><span class="line">    <span class="comment">// 程序以运行它就存在了</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericsTest</span> &#123;</span><br><span class="line">    <span class="comment">// 定义泛型</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * E:在集合中使用，因为集合中存放的是元素</span></span><br><span class="line"><span class="comment">     * T(type):表示类型，Java的类</span></span><br><span class="line"><span class="comment">     * K(key):键</span></span><br><span class="line"><span class="comment">     * V(value):值</span></span><br><span class="line"><span class="comment">     * N(number):数值类型</span></span><br><span class="line"><span class="comment">     * ?:不确定的Java类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(E[] inputArray)</span>&#123;</span><br><span class="line">        <span class="comment">// 输出数组元素</span></span><br><span class="line">        <span class="keyword">for</span>(E element : inputArray)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%s &quot;</span>, element);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 程序入口</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Integer[] intArray = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;整型数组元素为：&quot;</span>);</span><br><span class="line">        printArray(intArray);</span><br><span class="line">        Double[] doubleArray = &#123;<span class="number">123.57</span>,<span class="number">1.8</span>,<span class="number">98.0</span>,<span class="number">87.6</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;双精度浮点型数组元素为：&quot;</span>);</span><br><span class="line">        printArray(doubleArray);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Java泛型的gain：</span></span><br><span class="line"><span class="comment"> * 1. JDK引入的一个新特征，泛型提供了编译时“类型安全检测”机制，该机制允许开发者在编译时检测到非法的类型</span></span><br><span class="line"><span class="comment"> * 2. 泛型的本质是参数化类型</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>泛型的基本使用</strong></p>
<p>泛型介绍</p>
<p>首先说明，在初级阶段，为了快速的掌握泛型的用法，本节只讲解 “使用泛型限制集合元素类型” 这一个核心内容，其余较为深入的泛型知识暂不做介绍。</p>
<p>在之前使用集合的时候，装入集合的各种类型的元素都被当作 Object 对待，而非元素自身的类型。因此从集合中取出某个元素时，就需要进行类型转换，这种做法效率低下且容易出错。</p>
<p>🤔 那么如何解决这个问题呢？可以使用泛型。</p>
<p>泛型是指在定义集合的同时也定义集合中元素的类型，需要 “&lt; &gt;” 进行指定，其语法格式如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">集合&lt;数据类型&gt; 引用名 = <span class="keyword">new</span> 集合实现类&lt;数据类型&gt; ();</span><br></pre></td></tr></table></figure>

<p>⭐ 注意：使用泛型约束的数据类型必须是对象类型，而不能是基本数据类型。</p>
<p>以下代码就限制了 List 集合中只能存放 String 类型的元素。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br></pre></td></tr></table></figure>

<p>在 JDK1.7 之后，<code>=</code> 右边 <code>&lt; &gt;</code> 中的的 String 等类型也可以省略，也可以写成以下的等价形式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>泛型应用</p>
<p>在没有设置存放集合元素的类型时，编译程序都会有如下提示：</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281143796.png" alt="image-20260128114321336"></p>
<p>这个提示之前的编译程序时，大家应该都见到过，系统也是建议大家采用泛型进行类型一致的统一管理。</p>
<p>我们从 Java API 中也可以看到，需要对存储的集合元素设置类型：</p>
<p><img data-src="C:/Users/14949/AppData/Roaming/Typora/typora-user-images/image-20260128114413160.png" alt="image-20260128114413160"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281143498.png" alt="image-20260128114349723"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 泛型的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGeneric</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用泛型保证集合里的数据元素都是 Vehicle 类及其子类</span></span><br><span class="line">        List&lt;Vehicle&gt; vehAL = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Vehicle&gt;();</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;战神&quot;</span>, <span class="string">&quot;长城&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;跑得快&quot;</span>, <span class="string">&quot;红旗&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Truck</span>(<span class="string">&quot;大力士&quot;</span>, <span class="string">&quot;5吨&quot;</span>);</span><br><span class="line">        <span class="type">Vehicle</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Truck</span>(<span class="string">&quot;大力士二代&quot;</span>, <span class="string">&quot;10吨&quot;</span>);</span><br><span class="line">        vehAL.add(c1);</span><br><span class="line">        vehAL.add(c2);</span><br><span class="line">        vehAL.add(t1);</span><br><span class="line">        <span class="comment">// 在集合索引为 1 处添加 t2</span></span><br><span class="line">        vehAL.add(<span class="number">1</span>, t2);</span><br><span class="line">        <span class="comment">// vehAL.add(&quot;大力士三代&quot;);            //编译错误，添加的是 Vehicle 类，而不是字符串</span></span><br><span class="line">        System.out.println(<span class="string">&quot;*** 显示全部车辆 ***&quot;</span>);</span><br><span class="line">        <span class="comment">// 使用增强 for 循环遍历时，获取的已经是 Vehicle 对象</span></span><br><span class="line">        <span class="keyword">for</span> (Vehicle obj : vehAL) &#123;</span><br><span class="line">            <span class="comment">// Vehicle中定义 oil 的默认值是 20</span></span><br><span class="line">            System.out.println(obj.getName() + <span class="string">&quot;,&quot;</span> + obj.getOil());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分析一下以上代码，<code>List&lt;Vehicle&gt; vehAL = new ArrayList&lt;Vehicle&gt;();</code> 的作用是使用泛型创建 ArrayList 集合 vehAL，且集合中元素必须是 Vehicle 类及其子类。如果向这个集合中添加其他的类型，编译器会报错。当从集合中获取对象时，也是直接获取了 Vehicle 类的对象，不需要再进行强制类型转换。</p>
<p><strong>录入学生信息</strong></p>
<p>需要将多个学生信息存储到 <code>HashSet</code> 集合中，存储的元素不能出现重复信息，存储到集合中后将其录入的学生信息打印出来。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">    // 两个属性</span><br><span class="line">    // 学生姓名</span><br><span class="line">    private String name;</span><br><span class="line">    // 学生年级</span><br><span class="line">    private String grade;</span><br><span class="line">    // 提供构造方法</span><br><span class="line">    public Student() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public Student(String name, String grade) &#123;</span><br><span class="line">        super();</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line">    // 提供 get/set 方法</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getGrade() &#123;</span><br><span class="line">        return grade;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setGrade(String grade) &#123;</span><br><span class="line">        this.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line">    // 重写 toString、hashCode、equals 方法</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student:name=&quot; + name + &quot;,grade=&quot; + grade;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public int hashCode() &#123;</span><br><span class="line">        final int prime = 31;</span><br><span class="line">        int result = 1;</span><br><span class="line">        result = prime * result + ((grade == null) ? 0 : grade.hashCode());</span><br><span class="line">        result = prime * result + ((name == null) ? 0 : name.hashCode());</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object obj) &#123;</span><br><span class="line">        if (this == obj) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    if (obj == null) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    if (getClass() != obj.getClass()) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    if(obj instanceof Student) &#123;</span><br><span class="line">        Student s = (Student) obj;</span><br><span class="line">            if (grade == null) &#123;</span><br><span class="line">                if (s.grade != null) &#123;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else if (!grade.equals(s.grade)) &#123;</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line">        if (name == null) &#123;</span><br><span class="line">            if (s.name != null) &#123;</span><br><span class="line">                return false;</span><br><span class="line">        &#125;</span><br><span class="line">        &#125; else if (!name.equals(s.name)) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">   <span class="comment">// 创建集合对象</span></span><br><span class="line"><span class="keyword">private</span> Set&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 录入学生信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addStudent</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;一年级&quot;</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;二年级&quot;</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小桃子&quot;</span>,<span class="string">&quot;三年级&quot;</span>));</span><br><span class="line">        students.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;一年级&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 显示学生信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showStudent</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">StudentService</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentService</span>();</span><br><span class="line">        System.out.println(ss.addStudent()?<span class="string">&quot;学生信息录入成功&quot;</span>:<span class="string">&quot;学生信息录入失败&quot;</span>);</span><br><span class="line">        ss.showStudent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>







<h5 id="11-5-Map接口"><a href="#11-5-Map接口" class="headerlink" title="11.5 Map接口"></a>11.5 Map接口</h5><p>课堂笔记</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;  <span class="comment">//1. 导入HashMap的包，才能使用HashMap类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestHashMap</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 创建HashMAp的对象</span></span><br><span class="line">        <span class="comment">// HashMap的语法结构：HashMap&lt;键的数据类型，值得数据类型&gt; 对象名 = new HashMap&lt;键的数据类型，值得数据类型&gt;();</span></span><br><span class="line">        HashMap&lt;Integer, String&gt; stus = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, String&gt;();</span><br><span class="line">        <span class="comment">// 添加键值对得数据，.put(键，值)方法进行添加键值对</span></span><br><span class="line">        stus.put(<span class="number">2022005</span>, <span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022002</span>, <span class="string">&quot;小鹿&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022007</span>, <span class="string">&quot;小红&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022004</span>, <span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        System.out.println(stus);</span><br><span class="line">        <span class="comment">// 如何访问键值对得数据呢？.get(键)方法获取值</span></span><br><span class="line">        System.out.println(stus.get(<span class="number">2022002</span>));</span><br><span class="line">        <span class="comment">// 如何删除键值对中的数据呢? .remove(键)方法删除数据</span></span><br><span class="line">        stus.remove(<span class="number">2022004</span>);</span><br><span class="line">        System.out.println(stus);</span><br><span class="line">        <span class="comment">// 如果清空全部的数据呢？ .clear()方法清空全部数据</span></span><br><span class="line">        stus.clear();</span><br><span class="line">        System.out.println(stus);</span><br><span class="line">        <span class="comment">// 如何获取键值对中的键和值？</span></span><br><span class="line">        stus.put(<span class="number">2022005</span>, <span class="string">&quot;小蓝&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022002</span>, <span class="string">&quot;小鹿&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022007</span>, <span class="string">&quot;小红&quot;</span>);</span><br><span class="line">        stus.put(<span class="number">2022004</span>, <span class="string">&quot;小王&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> stuId : stus.keySet())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;学号：&quot;</span> + stuId + <span class="string">&quot;，姓名：&quot;</span> + stus.get(stuId));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(String name : stus.values())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;姓名：&quot;</span> + name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashMap的概念与作用</span></span><br><span class="line"><span class="comment"> * 1. HashMap是一个散列表</span></span><br><span class="line"><span class="comment"> * 2. HasMap存储的内容是键值对(key-value)</span></span><br><span class="line"><span class="comment"> * 3. 最多允许一条记录的键为null(空)</span></span><br><span class="line"><span class="comment"> * 4. HasMap是无序的，即不会记录插入的顺序</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><strong>Map 接口介绍</strong></p>
<p>Map 接口，用于保存具有映射关系的键值对数据。</p>
<p>Map&lt;K,V&gt; 接口中的 key 和 value 可以是任何引用类型的数据，key 不允许重复原因和 HashSet 一样，value 可以重复，key 和 value 都可以是 null 值，但需要注意的是，key 为 null 只能有一个，value 为 null 可以多个，它们之间存在单向一对一关系，也就是说通过指定存在的 key 一定找到对应的 value 值。</p>
<p>🍀 Map 接口的常用方法如下：</p>
<ul>
<li><p><code>Object put(Object key,Object value)</code></p>
<p>将指定键值对（key 和 value）添加到 Map 集合中，如果此 Map 集合以前包含一个该键 key 的键值对，则用参数 key 和 value 替换旧值。</p>
</li>
<li><p><code>Object get(Object key)</code></p>
<p>返回指定键 key 所对应的值，如果此 Map 集合中不包含该键 key，则返回 null。</p>
</li>
<li><p><code>Object remove(Object key)</code></p>
<p>如果存在指定键 key 的键值对，则将该键值对从此 Map 集合中移除。</p>
</li>
<li><p><code>Set keySet()</code></p>
<p>返回此 Map 集合中包含的键的 Set 集合。在上面的程序最后添加下面的语句：<code>System.out. println(domains.keySet());</code>，则会输出<code>[com, edu, org, net]</code>。</p>
</li>
<li><p><code>Collection values()</code></p>
<p>返回此 Map 集合中包含的值的 Collection 集合。在上面的程序最后添加下面的语句：<code>System.out.println(domains.values());</code>，则会输出<code>[工商企业，教研机构，非营利组织，网络服务商]</code>。</p>
</li>
<li><p><code>boolean containsKey(Object key)</code></p>
<p>如果此 Map 集合包含指定键 key 的键值对，则返回 true。</p>
</li>
<li><p><code>boolean containsValue(Object value)</code></p>
<p>如果此 Map 集合将一个或多个键映射到指定值，则返回 true。</p>
</li>
<li><p><code>int size()</code></p>
<p>返回此 Map 集合的键值对的个数。</p>
</li>
</ul>
<p>Map 接口常用的实现类有 HashMap 和 Hashtable，本实验主要讲 HashMap 类的使用。</p>
<p><strong>HashMap 类的使用</strong></p>
<p>已经知道 Map 接口定义了存取 “键值对” 的方法，接下来学习 HashMap 这个实现类的用法。</p>
<p>我们知道，国际域名是使用最早也是使用最广泛的域名，如表示工商企业的 <code>.com</code>，表示网络提供商的 <code>.net</code>，表示非营利组织的 <code>.org</code> 等。现在需要建立域名和含义之间的键值映射，例如 com 映射工商企业，org 映射非营利组织，可以根据 com 查到工商企业，可以通过删除 org 删除对应的非营利组织，这种一一对应的需求就可以通过 HashMap 来实现。</p>
<p>在 <code>/home/project/</code> 目录下新建 <code>TestHashMap.java</code> 源文件，并写入以下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * HashMap 类的基本使用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestHashMap</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用 HashMap 存储域名和含义键值对的集合</span></span><br><span class="line">        Map&lt;String, String&gt; domains = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        domains.put(<span class="string">&quot;com&quot;</span>, <span class="string">&quot;工商企业&quot;</span>);</span><br><span class="line">        domains.put(<span class="string">&quot;net&quot;</span>, <span class="string">&quot;网络服务商&quot;</span>);</span><br><span class="line">        domains.put(<span class="string">&quot;org&quot;</span>, <span class="string">&quot;非营利组织&quot;</span>);</span><br><span class="line">        domains.put(<span class="string">&quot;edu&quot;</span>, <span class="string">&quot;教研机构&quot;</span>);</span><br><span class="line">        domains.put(<span class="string">&quot;gov&quot;</span>, <span class="string">&quot;政府部门&quot;</span>);</span><br><span class="line">        <span class="comment">// 通过键获取值</span></span><br><span class="line">        System.out.println(<span class="string">&quot;edu国际域名对应的含义为：&quot;</span> + domains.get(<span class="string">&quot;edu&quot;</span>));</span><br><span class="line">        <span class="comment">// 判断是否包含某个键</span></span><br><span class="line">        System.out.println(<span class="string">&quot;domains键值对集合中是否包含gov：&quot;</span> + domains.containsKey(<span class="string">&quot;gov&quot;</span>));</span><br><span class="line">        <span class="comment">// 删除键值对</span></span><br><span class="line">        domains.remove(<span class="string">&quot;gov&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;删除后集合中是否包含gov：&quot;</span> + domains.containsKey(<span class="string">&quot;gov&quot;</span>));</span><br><span class="line">        <span class="comment">// 输出全部键值对</span></span><br><span class="line">        System.out.println(domains);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译、运行程序，运行结果如图所示。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac TestHashMap.java</span><br><span class="line">java TestHashMap</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281144912.png" alt="image-20260128114456090"></p>
<p>😀 同学们，动动手写一写吧 ~</p>
<p><strong>Map 映射数据的遍历</strong></p>
<p>我们已经掌握了遍历 Collection 的通用方法—使用增强 for 或者迭代器 Iterator，并且知道 Collection 是单值形式元素的集合，而 Map 是键值对形式的元素集合。</p>
<p>因此就能推测出，遍历 Map 的方法就是：先将 Map 集合或 Map 集合的部分元素转换成单值集合的形式，然后使用增强 for 或者迭代器 Iterator 遍历即可。</p>
<p>🍀 简单来说就是：Map –&gt; 转换为单值集合 –&gt; 使用增强 for 或者迭代器 Iterator 遍历。</p>
<p>我们可以将 Map 中的 key 全部提取出来，遍历 key，然后再根据 key 获取 value，如以下程序所示。</p>
<p>在 <code>/home/project/</code> 目录下新建 <code>TestMap.java</code> 源文件，并写入以下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 采用 Iterator 方式遍历 Map 数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMap</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;k1&quot;</span>, <span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k2&quot;</span>, <span class="string">&quot;v2&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k3&quot;</span>, <span class="string">&quot;v3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将Map中的key全部提取出来</span></span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        System.out.println(<span class="string">&quot;使用迭代器遍历&quot;</span>);</span><br><span class="line">        Iterator&lt;String&gt; keyIter = keys.iterator();</span><br><span class="line">        <span class="keyword">while</span> (keyIter.hasNext()) &#123;</span><br><span class="line">            <span class="comment">//获取map的每个key</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keyIter.next();</span><br><span class="line">            <span class="comment">//根据key获取对应的value</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;使用增强for遍历&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="comment">//根据key获取对应的value</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译、运行此程序，结果如图所示。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">javac TestMap</span><br><span class="line">java TestMap</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281145984.png" alt="image-20260128114525317"></p>
<p>🍀 另一种方式遍历：</p>
<p>Map 中的每一组 key-value 对称为一个 entry 对象，即 entry &#x3D; key + value。Map 接口提供了获取 Map 中全部 entry 对象的方法，因此就可以先获取全部的 entry 对象，然后再提取 entry 对象中的 key 和 value。</p>
<p>在 <code>/home/project/</code> 目录下新建 <code>TestMap2.java</code> 源文件，并写入以下代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 采用 Map.Entry 方式遍历 Map 数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMap2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;k1&quot;</span>, <span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k2&quot;</span>, <span class="string">&quot;v2&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k3&quot;</span>, <span class="string">&quot;v3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取 Map 的全部 entry 对象</span></span><br><span class="line">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span><br><span class="line">        <span class="comment">//遍历 entry 集合</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译、运行此程序，结果如下图所示。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">javac TestMap2.java</span><br><span class="line">java TestMap2</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281145511.png" alt="image-20260128114543651"></p>
<p><strong>统计字符出现次数</strong></p>
<p>Map 接口和 Set 是我们开发中必须掌握的接口，其实现类 HashMap 和 HashSet 也是集合中最常用的集合。目前我们已经学习了上述知识，本次挑战我们将使用这些知识进行字符串字母统计。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.Map.Entry;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Statistics</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;Character,Integer&gt; <span class="title function_">statis</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="comment">// 创建 HashMap 用于储存统计后的数据</span></span><br><span class="line">        HashMap&lt;Character,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 将非字母的字符去掉</span></span><br><span class="line">        str = str.replaceAll(<span class="string">&quot;[^a-zA-Z]&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">// 将字符串转为字符数组</span></span><br><span class="line">        <span class="type">char</span>[] arr = str.toCharArray();</span><br><span class="line">        <span class="comment">// 循环统计字母出现次数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(arr[i]))&#123;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> map.get(arr[i]);</span><br><span class="line">                map.put(arr[i], count+<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                map.put(arr[i], <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建控制台录入对象</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="comment">// 接收控制台录入的字符串对象</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入一个字符串：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> sc.next();</span><br><span class="line">        <span class="comment">// 接收方法返回的集合</span></span><br><span class="line">        HashMap&lt;Character,Integer&gt; map = statis(str);</span><br><span class="line">        <span class="comment">// 遍历集合</span></span><br><span class="line">        Set&lt;Entry&lt;Character,Integer&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object obj : entrySet)&#123;</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281146593.png" alt="image-20260128114600837"></p>
<h5 id="11-6-复习挑战"><a href="#11-6-复习挑战" class="headerlink" title="11.6 复习挑战"></a>11.6 复习挑战</h5><p><strong>本章总结</strong></p>
<p>本章讲解集合和泛型的相关知识，其中泛型仅做了初步的理解，具体如下：</p>
<ul>
<li><p>JDK 中的集合可以分为 Collection 家族和 Map 家族两大类：</p>
<p>Collection 集合中存放的是单值元素组成的集合；</p>
<p>Map 集合中存放的由键值对元素组成的集合。</p>
</li>
<li><p>Collection 集合分类</p>
<ul>
<li>List 集合中的元素是有序的、可重复的。</li>
<li>Set 集合中的元素无序的、不可重复。</li>
</ul>
</li>
<li><p>集合与映射遍历</p>
<ul>
<li>可以使用增强 for 循环和迭代器对 Collection 集合进行遍历；</li>
<li>在遍历 Map 集合时，需要先将 Map 转为单值集合（key 集合、value 集合或者 entry 集合），然后再遍历。</li>
</ul>
</li>
<li><p>使用泛型可以限制集合中元素的类型，避免了在集合中进行强制类型转换等繁琐操作。</p>
</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281146812.png" alt="image-20260128114625723"></p>
<p><strong>模拟图书管理系统</strong></p>
<p>HashSet 是 Set 接口的典型实现，大多数时候使用 Set 集合时就是使用这个实现类。HashSet 按 Hash 算法来存储集合中的元素，因此具有很好的存取和查找性能。本次挑战将模拟一个图书管理系统，对图书对象进行增加、删除、查询。</p>
<p><code>Book</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> price;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAuthor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> author;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAuthor</span><span class="params">(String author)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(<span class="type">int</span> id, String name, String author, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123; id=&quot;</span> + id +<span class="string">&quot;, name=&quot;</span> + name +<span class="string">&quot;, author=&quot;</span> + author +<span class="string">&quot;,price=&quot;</span> + price +<span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.lanqiao.entity.Book;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Library</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> HashSet&lt;Book&gt; books = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;------欢迎来到蓝桥图书馆------&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.添加图书&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.查询图书&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.删除图书&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.退出程序&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入选项：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="keyword">switch</span> (i)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span> :</span><br><span class="line">                    addBook();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    selectBook();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    deleteBook();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;退出成功&quot;</span>);</span><br><span class="line">                    System.exit(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteBook</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 通过图书id删除图书</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入要删除的图书id：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="comment">// 循环遍历所有图书</span></span><br><span class="line">        <span class="keyword">for</span>(Book b : books)&#123;</span><br><span class="line">            <span class="comment">// 比较图书 id 和输入的id，若一致则从容器中删除该图书</span></span><br><span class="line">            <span class="keyword">if</span>(b.getId()==id)&#123;</span><br><span class="line">                books.remove(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;删除成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">selectBook</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(books.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有图书！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 使用增强 for 循环输出所有图书信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;以下为所有图书信息！&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Book b : books)&#123;</span><br><span class="line">            System.out.println(b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addBook</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 输入图书信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请输入图书id：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入书名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> sc.next();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入作者名&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">author</span> <span class="operator">=</span> sc.next();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入价格&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> sc.nextDouble();</span><br><span class="line">        <span class="comment">// 创建对象</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(id,name,author,price);</span><br><span class="line">        <span class="comment">// 添加图书</span></span><br><span class="line">        books.add(book);</span><br><span class="line">        System.out.println(<span class="string">&quot;添加成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>你可以参考下面的步骤验证挑战结果，最终点击「提交检测」。</p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281146857.png" alt="image-20260128114647978"></p>
<h3 id="十二、IO流"><a href="#十二、IO流" class="headerlink" title="十二、IO流"></a>十二、IO流</h3><h5 id="12-1-File类"><a href="#12-1-File类" class="headerlink" title="12.1 File类"></a>12.1 File类</h5><p>查找指定目录下的文本文件</p>
<p>通过所学的 File 类来查找指定目录下的文本文件，并将文本文件名打印输出。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SelectTxtFile</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入读取路径：&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">path</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(input.next());</span><br><span class="line">        <span class="keyword">if</span>(!path.exists() || !path.isDirectory())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;该目录不存在，或者它不是个目录&quot;</span>);</span><br><span class="line">            input.close();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        File[] txts = path.listFiles(<span class="keyword">new</span> <span class="title class_">FilenameFilter</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">accept</span><span class="params">(File dir, String name)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> name.toLowerCase().endsWith(<span class="string">&quot;.txt&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(txts != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(File file : txts)&#123;</span><br><span class="line">                System.out.println(file.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="12-2-IO流"><a href="#12-2-IO流" class="headerlink" title="12.2 IO流"></a>12.2 IO流</h5><p>课堂笔记</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;   <span class="comment">//1.导入IO流的包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">FileTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 设置文件存储的路径，请问用什么数据类型？下面运用绝对路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">dirname</span> <span class="operator">=</span> <span class="string">&quot;/home/project/lanqiao/test&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dirnames</span> <span class="operator">=</span> <span class="string">&quot;/home/project/yunnan/test&quot;</span>;</span><br><span class="line">        <span class="comment">// 3. 创建File对象并将路径放置到构造方法中</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dirname);</span><br><span class="line">        <span class="type">File</span> <span class="variable">fs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dirnames);</span><br><span class="line">        <span class="comment">// 4. 创建文件夹(目录)</span></span><br><span class="line">        f.mkdir();</span><br><span class="line">        <span class="comment">// .mkdirs()方法表示创建一个文件夹(目录)和它的所有父类文件夹(目录)；使用的递归方法进行创建的       </span></span><br><span class="line">        fs.mkdirs();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * File类主要作用：关于一些文件和I/O的类</span></span><br><span class="line"><span class="comment"> * 1. File Class 类用的最多两个方法分别是：创建文件夹(目录) mkdir() 和 mkdirs()</span></span><br><span class="line"><span class="comment"> *      如何通过相关方法在/home/project/lanqiao 文件夹(目录)</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>课堂笔记</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 绝对路径</span></span><br><span class="line">        <span class="comment">// String dirname = &quot;/home/project/lanqiao&quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 相对路径</span></span><br><span class="line">        <span class="comment">// ./表示当前目录。  ../表示上一级目录</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">dirname</span> <span class="operator">=</span> <span class="string">&quot;./lanqiao&quot;</span>;</span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dirname);</span><br><span class="line">        <span class="comment">// 请问创建单层目录使用那个方法?(.dirname())   多层目录使用那个方法？(.mkdirs())</span></span><br><span class="line">        System.out.println(f.mkdir()); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 练习任务，请分别在project目录中创建alibaba,tenxun,wangyi等三个目录</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方法一</span></span><br><span class="line">    <span class="comment">//     String dirnames = &quot;./alibaba&quot;;</span></span><br><span class="line">    <span class="comment">//     String dirname2 = &quot;./tenxun&quot;;</span></span><br><span class="line">    <span class="comment">//     String dirname3 = &quot;./wangyi&quot;;</span></span><br><span class="line">    <span class="comment">//     File f1 = new File(dirnames);</span></span><br><span class="line">    <span class="comment">//     File f2 = new File(dirname2);</span></span><br><span class="line">    <span class="comment">//     File f3 = new File(dirname3);</span></span><br><span class="line">    <span class="comment">//     System.out.println(f1.mkdirs()); </span></span><br><span class="line">    <span class="comment">//     System.out.println(f2.mkdirs()); </span></span><br><span class="line">    <span class="comment">//     System.out.println(f3.mkdirs()); </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方法二(1)</span></span><br><span class="line">        String[] name = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;./alibaba&quot;</span>,<span class="string">&quot;./tenxun&quot;</span>,<span class="string">&quot;./wangyi&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;name.length;i++)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">dirname5</span> <span class="operator">=</span> name[i];</span><br><span class="line">            <span class="type">File</span> <span class="variable">f5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(dirname5);</span><br><span class="line">            f5.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 方法二(2)</span></span><br><span class="line">        <span class="comment">// 这里用到我们学习的哪些知识点？数组定义、字符串切割方法</span></span><br><span class="line">        String[] dirnames6 = <span class="string">&quot;lanqiao,alibaba,tenxun,wangyi&quot;</span>.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="comment">// for循环、获取数组的长度、算数运算符</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dirnames6.length;i++)&#123;</span><br><span class="line">            <span class="comment">// 实例化对象、数组元素的获取、字符串拼接</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">f6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;./&quot;</span> + dirnames6[i]);</span><br><span class="line">            f6.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件读写操作</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 回顾文件夹(目录)创建操作流程：</span></span><br><span class="line"><span class="comment"> *     1、导入包(import java.io.File)</span></span><br><span class="line"><span class="comment"> *     2、文件夹(目录)它的路径(相对路径、绝对路径)</span></span><br><span class="line"><span class="comment"> *     3、实列化File对象，构造方法(文件夹(目录)的路径)</span></span><br><span class="line"><span class="comment"> *     4、调用创建文件夹(目录)的方法，方法有几种：.mkdir()创建一个文件夹(目录)、</span></span><br><span class="line"><span class="comment"> *     .mkdirs()创建一个文件夹(目录)和它的所有父文件夹【白话说：一次性创建多次文件夹(目录)】。</span></span><br><span class="line"><span class="comment"> *     请问返回类型是什么？返回类型是boolean,true表示创建成功，false表示创建失败 </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  读取文件操作</span></span><br><span class="line"><span class="comment">  *    如果我们要读写文件操作，需要使用两个类来进行操作：</span></span><br><span class="line"><span class="comment">  *    FileInputStream类：用于从文件读取数据</span></span><br><span class="line"><span class="comment">  *       方法一：</span></span><br><span class="line"><span class="comment">  *         import java.io.*;   *:表示所有</span></span><br><span class="line"><span class="comment">  *         InputStream input = new FileInputStream(文件路径);</span></span><br><span class="line"><span class="comment">  *       方法二</span></span><br><span class="line"><span class="comment">  *          File f = new File(文件路径);</span></span><br><span class="line"><span class="comment">  *          InputStream input = new FileInputStream(f);</span></span><br><span class="line"><span class="comment">  *      </span></span><br><span class="line"><span class="comment">  *    FileOutputStream类：用于创建一个文件并向文件中写入数据</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="comment">// throws FileNotFoundException 异常处理</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> input.available(); <span class="comment">//获取当前文件内容的长度</span></span><br><span class="line">        <span class="comment">// 通过循环方式进行读取</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">            <span class="comment">// input.read() 读取的是二进制数据</span></span><br><span class="line">            <span class="comment">// (char)input.read() 表示读取的二进制数据转换成字符</span></span><br><span class="line">            System.out.print((<span class="type">char</span>)input.read());</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outputtest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException,IOException &#123;</span><br><span class="line">        <span class="type">byte</span>[] nums = &#123;<span class="number">1</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">77</span>,<span class="number">77</span>&#125;;  <span class="comment">//需要写入数据</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;b.txt&quot;</span>);  <span class="comment">//实列写入对象，需要添加文件路径(如果文件存在覆盖，不存在新建)</span></span><br><span class="line">        <span class="comment">// 通过循环将nums里面的数据依次进行写入</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)&#123;</span><br><span class="line">            output.write(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        output.close();  <span class="comment">//关闭写入流</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 读取b.txt中的数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;b.txt&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> input.available();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">            System.out.print(input.read() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();   <span class="comment">//关闭读取流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>课堂笔记图片的读写操作</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="comment">//图片的读写操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageIOTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="comment">// 通过绝对路径取得图片数据</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;/home/shiyanlou/Code/1681096736054.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">// System.out.print(input.available());  //测试用</span></span><br><span class="line">        <span class="type">byte</span>[] imgByte = input.readAllBytes();  <span class="comment">//.readAllBytes()表示读取数据的所有字节流，返回byte[] 数组</span></span><br><span class="line">        input.close();  <span class="comment">//关闭读取流</span></span><br><span class="line"></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;12306.jpg&quot;</span>); <span class="comment">//创建写入的文件</span></span><br><span class="line">        <span class="comment">// 通过循环依次将图片字节流中数据进行输入操作</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;imgByte.length;i++)&#123;</span><br><span class="line">            output.write(imgByte[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        output.close();  <span class="comment">//关闭写入流</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>单词归类</strong></p>
<p>小蓝最近准备考研，但他的英语成绩十分不理想，于是他想从背单词开始学习。在咨询了许多一起考研的同学后，他得到一个背单词的小技巧，那就是将单词按照词性分类去背。但是小蓝的单词本并没有按照词性分类，请你编写一个程序帮他把单词本中的单词分类到各个文件中。</p>
<p>新建一个 Java 包 <code>org.lanqiao.main</code> 命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p org/lanqiao/main</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.main</code> 包下新建一个 <code>Word</code> 类，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/main/Word.java</span><br></pre></td></tr></table></figure>

<p>在控制台使用命令下载文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/4944/word.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.main;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Word</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">verb</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">noun</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">adjective</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 读取源文件</span></span><br><span class="line">        fis = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;word.txt&quot;</span>);</span><br><span class="line">        <span class="type">byte</span>[] content = <span class="keyword">new</span> <span class="title class_">byte</span>[fis.available()];</span><br><span class="line">        fis.read(content);</span><br><span class="line">        <span class="comment">// 将内容转为字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contentStr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(content);</span><br><span class="line">        <span class="comment">// 用逗号将字符串分割为一维数组</span></span><br><span class="line">        String[] contentArray = contentStr.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建二维数组，将前一步分割的一维数组内每个字符串再次用冒号分割，并存入一个二维数组。</span></span><br><span class="line">            String[][] srcArray = <span class="keyword">new</span> <span class="title class_">String</span>[contentArray.length][];</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; contentArray.length; i++) &#123;</span><br><span class="line">                    String[] split = contentArray[i].split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">                    srcArray[i] = split;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 创建文件夹 file</span></span><br><span class="line">                <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;file&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(!dir.exists())&#123;</span><br><span class="line">                    Files.createDirectory(dir.toPath());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 创建不同词性文件对象以及对应的输出流</span></span><br><span class="line">                <span class="type">File</span> <span class="variable">verbFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;file/verb.txt&quot;</span>);</span><br><span class="line">                <span class="type">File</span> <span class="variable">nounFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;file/noun.txt&quot;</span>);</span><br><span class="line">                <span class="type">File</span> <span class="variable">adjectiveFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;file/adjective.txt&quot;</span>);</span><br><span class="line">                verb = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(verbFile);</span><br><span class="line">                noun = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(nounFile);</span><br><span class="line">                adjective = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(adjectiveFile);</span><br><span class="line">                <span class="comment">// 判断当前单词属于哪个词性，写入对应的文件</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; srcArray.length; i++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(srcArray[i][<span class="number">0</span>].equalsIgnoreCase(<span class="string">&quot;verb&quot;</span>))&#123;</span><br><span class="line">                        verb.write((srcArray[i][<span class="number">1</span>]+<span class="string">&quot; &quot;</span>).getBytes());</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(srcArray[i][<span class="number">0</span>].equalsIgnoreCase(<span class="string">&quot;noun&quot;</span>))&#123;</span><br><span class="line">                        noun.write((srcArray[i][<span class="number">1</span>]+<span class="string">&quot; &quot;</span>).getBytes());</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(srcArray[i][<span class="number">0</span>].equalsIgnoreCase(<span class="string">&quot;adjective&quot;</span>))&#123;</span><br><span class="line">                        adjective.write((srcArray[i][<span class="number">1</span>]+<span class="string">&quot; &quot;</span>).getBytes());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭流</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">                verb.close();</span><br><span class="line">                noun.close();</span><br><span class="line">                adjective.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>文件内容过滤</strong></p>
<p>目前为止我们已经学习了字节流和字符流的相关知识，在这些知识的基础上我们就可以对文件内容进行一些修改操作了。本次挑战我们将设计一个程序，该程序可以对文件内容进行过滤。</p>
<p>新建一个 Java 包 <code>org.lanqiao.main</code> 命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p org/lanqiao/main</span><br></pre></td></tr></table></figure>

<p>在 <code>org.lanqiao.main</code> 包下新建一个 <code>Filter</code> 类，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">touch</span> org/lanqiao/main/Filter.java</span><br></pre></td></tr></table></figure>

<p>在控制台使用命令下载文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/4944/text.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.lanqiao.main;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建文件对象</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;text.txt&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;出师表.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建文件流</span></span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 赋值</span></span><br><span class="line">            fr = <span class="keyword">new</span> <span class="title class_">FileReader</span>(f1);</span><br><span class="line">            fw = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(f2);</span><br><span class="line">            <span class="comment">// 创建字符数组</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">int</span> c;</span><br><span class="line">            <span class="comment">// 读取</span></span><br><span class="line">            <span class="keyword">while</span> ((c = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                str+=(<span class="type">char</span>)c;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将读取到的字符串转为字符数组</span></span><br><span class="line">            <span class="type">char</span>[] chars = str.toCharArray();</span><br><span class="line">            <span class="type">String</span> <span class="variable">newStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="comment">// 使用增强 for 遍历数组。</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">char</span> cs : chars)&#123;</span><br><span class="line">                <span class="comment">// 判断字符是否为字母</span></span><br><span class="line">                <span class="keyword">if</span>(cs&lt;<span class="string">&#x27;A&#x27;</span>||cs&gt;<span class="string">&#x27;Z&#x27;</span>&amp;&amp;cs&lt;<span class="string">&#x27;a&#x27;</span>||cs&gt;<span class="string">&#x27;z&#x27;</span>)&#123;</span><br><span class="line">                newStr+=cs;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            fw.write(newStr);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fw.close();</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p>4.11课堂笔记</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">写入文件</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">public class test &#123;</span><br><span class="line">    public static void main(String[] args) throws FileNotFoundException, IOException &#123;</span><br><span class="line">        File f = new File(&quot;TangShi.txt&quot;); //创建文件对象</span><br><span class="line">        FileOutputStream fos = new FileOutputStream(f);  //如果文件存在就覆盖，反之就新建</span><br><span class="line">        //创建写入对象,参数分别表示：1.需要写入对象 2.文件的编码方式(蓝桥运课用UTF-8，本机win用GBK)</span><br><span class="line">        OutputStreamWriter weiter = new OutputStreamWriter(fos, &quot;UTF-8&quot;);  </span><br><span class="line">        // 写入缓冲流</span><br><span class="line">        weiter.append(&quot;《早发白帝城》&quot;);</span><br><span class="line">        weiter.append(&quot;\n\n&quot;);</span><br><span class="line">        weiter.append(&quot;朝辞白帝彩云间，千里江陵一日还。&quot;);</span><br><span class="line">        weiter.append(&quot;\n\n&quot;);</span><br><span class="line">        weiter.append(&quot;两岸猿声啼不住，轻舟已过万重山。&quot;);</span><br><span class="line">        // 关闭缓冲流</span><br><span class="line">        weiter.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">读取文件</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FilelnputTest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="comment">// 步骤一：下列代码是找到文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;a.txt&quot;</span>);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(f);</span><br><span class="line">        <span class="comment">// 步骤 二：下列代码是打开文件</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fis, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 步骤三：进行一行一行的阅读</span></span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">while</span>(reader.ready())&#123;</span><br><span class="line">            sb.append((<span class="type">char</span>)reader.read());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">        <span class="comment">// 步骤四：关闭文件读取流</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h5 id="12-3-复习挑战"><a href="#12-3-复习挑战" class="headerlink" title="12.3 复习挑战"></a>12.3 复习挑战</h5><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">访问控制</span><br><span class="line"><span class="keyword">private</span>    <span class="keyword">protected</span>    <span class="keyword">public</span></span><br><span class="line"></span><br><span class="line">类,方法和变量修饰符</span><br><span class="line"><span class="keyword">abstract</span>    <span class="keyword">class</span>    <span class="title class_">extends</span>    <span class="keyword">final</span>    <span class="keyword">implements</span>    <span class="title class_">interface</span>    <span class="keyword">native</span>    <span class="keyword">new</span></span><br><span class="line"><span class="title class_">static</span>    <span class="keyword">strictfp</span>    <span class="keyword">synchronized</span>    <span class="keyword">transient</span>    <span class="keyword">volatile</span></span><br><span class="line"></span><br><span class="line">程序控制</span><br><span class="line"><span class="keyword">break</span>    <span class="keyword">continue</span>    <span class="keyword">return</span>    <span class="keyword">do</span>    <span class="keyword">while</span>    <span class="keyword">if</span>    <span class="keyword">else</span>    <span class="keyword">for</span>    <span class="keyword">instanceof</span>    <span class="keyword">switch</span></span><br><span class="line"><span class="keyword">case</span>    <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line">异常处理</span><br><span class="line"><span class="keyword">try</span>    cathc    <span class="keyword">throw</span>    <span class="keyword">throws</span></span><br><span class="line"></span><br><span class="line">包相关</span><br><span class="line"><span class="keyword">import</span>    <span class="keyword">package</span></span><br><span class="line"></span><br><span class="line">基本类型</span><br><span class="line"><span class="type">boolean</span>    <span class="type">byte</span>    <span class="type">char</span>    <span class="type">double</span>    <span class="type">float</span>    <span class="type">int</span>    <span class="type">long</span>    <span class="type">short</span>    <span class="literal">null</span>    <span class="literal">true</span>    <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">变量引用</span><br><span class="line"><span class="built_in">super</span>    <span class="built_in">this</span>    <span class="keyword">void</span></span><br><span class="line"></span><br><span class="line">保留字</span><br><span class="line"><span class="keyword">goto</span>    const    </span><br><span class="line">-----------------------------------</span><br><span class="line">JAVA关键字及作用</span><br><span class="line">https:<span class="comment">//blog.51cto.com/doudio/3881798</span></span><br></pre></td></tr></table></figure>

<h5 id="以下是Java中的所有关键字及其意义："><a href="#以下是Java中的所有关键字及其意义：" class="headerlink" title="以下是Java中的所有关键字及其意义："></a>以下是Java中的所有关键字及其意义：</h5><ol>
<li>abstract：抽象类和抽象方法的修饰符。</li>
<li>assert：断言条件是否为真，如果不为真则抛出异常。</li>
<li>boolean：布尔数据类型。</li>
<li>break：跳出循环或者switch语句。</li>
<li>byte：字节数据类型。</li>
<li>case：switch语句中的一个分支。</li>
<li>catch：捕获异常。</li>
<li>char：字符数据类型。</li>
<li>class：定义类。</li>
<li>const：不再使用，保留关键字。</li>
<li>continue：结束本次循环并进入下一次循环。</li>
<li>default：switch语句中的默认分支。</li>
<li>do：循环语句的开始。</li>
<li>double：双精度浮点数数据类型。</li>
<li>else：if语句的分支。</li>
<li>enum：枚举类型。</li>
<li>extends：继承一个类或者实现一个接口。</li>
<li>final：表示不可变的、不能被继承的或者不能被重写的。</li>
<li>finally：无论是否抛出异常，都会执行的代码块。</li>
<li>float：单精度浮点数数据类型。</li>
<li>for：循环语句。</li>
<li>goto：不再使用，保留关键字。</li>
<li>if：条件语句。</li>
<li>implements：实现一个接口。</li>
<li>import：导入一个包或者类。</li>
<li>instanceof：测试一个对象是否是一个类的实例。</li>
<li>int：整数数据类型。</li>
<li>interface：接口定义。</li>
<li>long：长整数数据类型。</li>
<li>native：表示方法是用非Java语言实现的。</li>
<li>new：创建一个新对象。</li>
<li>package：定义包。</li>
<li>private：私有属性或方法修饰符。</li>
<li>protected：受保护的属性或方法修饰符。</li>
<li>public：公共属性或方法修饰符。</li>
<li>return：返回一个值。</li>
<li>short：短整数数据类型。</li>
<li>static：静态属性或方法修饰符。</li>
<li>strictfp：浮点计算严格符合IEEE 754规范。</li>
<li>super：访问父类的属性或方法。</li>
<li>switch：多路分支语句。</li>
<li>synchronized：同步方法或块。</li>
<li>this：当前对象的引用。</li>
<li>throw：抛出异常。</li>
<li>throws：定义方法可能抛出的异常。</li>
<li>transient：表示属性不被序列化。</li>
<li>try：try-catch-finally语句块。</li>
<li>void：表示方法没有返回值。</li>
<li>volatile：表示属性可以同时被多个线程访问。</li>
<li>while：循环语句。</li>
</ol>
<h5 id="Java所有关键字及含义："><a href="#Java所有关键字及含义：" class="headerlink" title="Java所有关键字及含义："></a>Java所有关键字及含义：</h5><p>abstract：抽象的<br>assert：断言<br>boolean：布尔型<br>break：跳出循环<br>byte：字节型<br>case：分支语句<br>catch：捕获异常<br>char：字符型<br>class：类<br>const：常量（已废弃）<br>continue：继续循环<br>default：默认分支<br>do：循环语句<br>double：双精度浮点型<br>else：否则分支<br>enum：枚举类型<br>extends：继承<br>final：不可变的<br>finally：异常处理的最后一步<br>float：单精度浮点型<br>for：循环语句<br>goto：跳转（已废弃）<br>if：条件语句<br>implements：实现接口<br>import：导入<br>instanceof：判断对象类型<br>int：整型<br>interface：接口<br>long：长整型<br>native：本地方法<br>new：创建新对象<br>package：包<br>private：私有的<br>protected：受保护的<br>public：公共的<br>return：返回值<br>short：短整型<br>static：静态的<br>strictfp：精确浮点计算<br>super：父类<br>switch：分支语句<br>synchronized：同步<br>this：当前对象<br>throw：抛出异常<br>throws：声明异常<br>transient：瞬态的<br>try：异常处理<br>void：无返回值<br>volatile：易失性的<br>while：循环语句</p>
<h3 id="Java复习笔记"><a href="#Java复习笔记" class="headerlink" title="Java复习笔记"></a>Java复习笔记</h3><h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5><p>在前面几个章节中我们经常使用到 <strong>System.out.println()</strong>，那么它是什么呢？</p>
<ul>
<li>println() 是一个方法。</li>
<li>System 是系统类。</li>
<li>out 是标准输出对象。</li>
</ul>
<p>这句话的用法是调用系统类 System 中的标准输出对象 out 中的方法 println()。</p>
<h6 id="什么是方法？"><a href="#什么是方法？" class="headerlink" title="什么是方法？"></a>什么是方法？</h6><p>Java方法是语句的集合，它们在一起执行一个功能。</p>
<ul>
<li>方法是解决一类问题的步骤的有序组合</li>
<li>方法包含于类或对象中</li>
<li>方法在程序中被创建，在其他地方被引用</li>
</ul>
<p><strong>方法的优点</strong></p>
<ul>
<li><ol>
<li>使程序变得更简短而清晰。</li>
</ol>
</li>
<li><ol start="2">
<li>有利于程序维护。</li>
</ol>
</li>
<li><ol start="3">
<li>可以提高程序开发的效率。</li>
</ol>
</li>
<li><ol start="4">
<li>提高了代码的重用性。</li>
</ol>
</li>
</ul>
<p> <strong>方法的命名规则</strong></p>
<ul>
<li>1.方法的名字的第一个单词应以小写字母作为开头，后面的单词则用大写字母开头写，不使用连接符。例如：<strong>addPerson</strong>。</li>
<li>2.下划线可能出现在 JUnit 测试方法名称中用以分隔名称的逻辑组件。一个典型的模式是：<strong>test<MethodUnderTest>_<state></strong>，例如 <strong>testPop_emptyStack</strong>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa</span> &#123;</span><br><span class="line">        <span class="comment">// main方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(sum);</span><br><span class="line"></span><br><span class="line">        test();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 加法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">1000</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">5</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.print(i+<span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i%(<span class="number">5</span>*<span class="number">3</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="方法的定义"><a href="#方法的定义" class="headerlink" title="方法的定义"></a>方法的定义</h6><p>一般情况下，定义一个方法包含以下语法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">修饰符  返回值类型  方法名 （参数类型  参数名）&#123;</span><br><span class="line"></span><br><span class="line">​		·······</span><br><span class="line"></span><br><span class="line">​		方法体</span><br><span class="line"></span><br><span class="line">​		·········</span><br><span class="line"></span><br><span class="line">​		<span class="keyword">return</span>   返回值；</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法包含一个方法头和一个方法体。下面是一个方法的所有部分：</p>
<ul>
<li><p>**修饰符：**修饰符，这是可选的，告诉编译器如何调用该方法。定义了该方法的访问类型。</p>
</li>
<li><p><strong>返回值类型 ：<strong>方法可能会返回值。returnValueType 是方法返回值的数据类型。有些方法执行所需的操作，但没有返回值。在这种情况下，returnValueType 是关键字</strong>void</strong>。</p>
</li>
<li><p>**方法名：**是方法的实际名称。方法名和参数表共同构成方法签名。</p>
</li>
<li><p>**参数类型：**参数像是一个占位符。当方法被调用时，传递值给参数。这个值被称为实参或变量。参数列表是指方法的参数类型、顺序和参数的个数。参数是可选的，方法可以不包含任何参数。</p>
</li>
<li><p>**方法体：**方法体包含具体的语句，定义该方法的功能。</p>
</li>
</ul>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281147150.png" alt="image-20260128114729027"></p>
<p>如：</p>
<p><code>public static int age(int birthday){...}</code></p>
<p>参数可以有多个：</p>
<p><code>static float interest(float principal, int year){...}</code></p>
<p><strong>注意：</strong> 在一些其它语言中方法指过程和函数。一个返回非void类型返回值的方法称为函数；一个返回void类型返回值的方法叫做过程。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> max(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比大小</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            abc = num1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            abc = num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1==num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//终止方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> abc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>更简略的写法（三元运算符）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 &gt; num2 ? num1 : num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="方法的调用"><a href="#方法的调用" class="headerlink" title="方法的调用"></a>方法的调用</h6><p>调用方法：对象名.方法名 (参数列表)</p>
<p>Java支持两种调用方法的方式，根据方法是否返回值来选择</p>
<p>当方法返回一个值的时候，方法调用通常被当做一个值。例如：</p>
<p><code>int larger = max(30,  40);</code></p>
<p>如果方法返回值是void，方法调用一定是一条语句</p>
<p><code>System.out.println(&quot;Hello,Kuangshen!&quot;);</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> max(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比大小</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            abc = num1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            abc = num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1==num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//终止方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> abc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="方法的重载"><a href="#方法的重载" class="headerlink" title="方法的重载"></a>方法的重载</h6><p>上面使用的max方法仅仅适用于int型数据。但如果你想得到两个浮点类型数据的最大值呢？</p>
<p>解决方法是创建另一个有相同名字但参数不同的方法，如下面代码所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (num1 &gt; num2)</span><br><span class="line">    <span class="keyword">return</span> num1;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你调用max方法时传递的是int型参数，则 int型参数的max方法就会被调用；</p>
<p>如果传递的是double型参数，则double类型的max方法体会被调用，这叫做方法重载；</p>
<p>就是说一个类的两个方法拥有相同的名字，但是有不同的参数列表。</p>
<p>Java编译器根据方法签名判断哪个方法应该被调用。</p>
<p>方法重载可以让程序更清晰易读。执行密切相关任务的方法应该使用相同的名字。</p>
<p>重载的方法必须拥有不同的参数列表。你不能仅仅依据修饰符或者返回类型的不同来重载方法。</p>
<p><strong>方法重载的规则：</strong></p>
<ul>
<li>方法名必须相同</li>
<li>参数列表必须不同（个数不同、或类型不同、参数排列顺序不同）</li>
<li>方法的发回类型可以相同也可以不同</li>
<li>仅仅返回类型不同不足以成为方法的重载</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        int max = max(10, 20);</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> max(<span class="number">10.0</span>, <span class="number">20.0</span>);</span><br><span class="line">        System.out.println(max);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比大小</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            abc = num1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            abc = num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1==num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//终止方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> abc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">            abc = num1;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            abc = num2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num1==num2)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;num1==num2&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//终止方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> abc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h6><p>DK 1.5 开始，Java支持传递同类型的可变参数给一个方法。</p>
<p>方法的可变参数的声明如下所示：</p>
<p><code>typeName... parameterName</code></p>
<p>在方法声明中，在指定参数类型后加一个省略号(…) 。</p>
<p>一个方法中只能指定一个可变参数，它必须是方法的最后一个参数。任何普通的参数必须在它之前声明。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ffa3</span> <span class="variable">ffa</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ffa3</span>();</span><br><span class="line">        ffa.test(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> ...i)</span>&#123;</span><br><span class="line">        System.out.println(i[<span class="number">0</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">2</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">3</span>]);</span><br><span class="line">        System.out.println(i[<span class="number">4</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>实例</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarargsDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 调用可变参数的方法</span></span><br><span class="line">        printMax(<span class="number">34</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">56.5</span>);</span><br><span class="line">        printMax(<span class="keyword">new</span> <span class="title class_">double</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printMax</span><span class="params">( <span class="type">double</span>... numbers)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (numbers.length == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;No argument passed&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> numbers[<span class="number">0</span>];</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;  numbers.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (numbers[i] &gt;  result) &#123;</span><br><span class="line">                result = numbers[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;The max value is &quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h6><p>A方法调用B方法，我们很容易理解 ！</p>
<p>递归就是：A方法调用A方法！就是直接自己调用自己</p>
<p>利用递归可以用简单的程序来解决一些复杂的问题。它通常把一个 大型的问题层层转化为一个与原问题相似的规模较小的问题来 求解，递归策略只3需要少量的程序就可描述出解题过程所需要的多次重复计算，大大地减少了程序的代码量。递归的你离在于用有限的语句来定义对象的无限集合 。</p>
<p>递归的构造包括量部分：</p>
<ul>
<li>递归头：什么时候不调用自身方法，如果没有头，将陷入死循环。</li>
<li>递归体：什么时候需要调用自身方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(ff(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阶乘</span></span><br><span class="line">    <span class="comment">// 1    1</span></span><br><span class="line">    <span class="comment">// 2    2*1</span></span><br><span class="line">    <span class="comment">// 3    3*2*1</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="comment">// 5    5*4*3*2*1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">ff</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> n*ff(n-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h5><h6 id="数组的定义"><a href="#数组的定义" class="headerlink" title="数组的定义"></a>数组的定义</h6><p>数组对于每一门编程语言来说都是重要的数据结构之一，当然不同语言对数组的实现及处理也不尽相同。</p>
<p>Java 语言中提供的数组是用来存储固定大小的同类型元素。</p>
<p>你可以声明一个数组变量，如 numbers[100] 来代替直接声明 100 个独立变量 number0，number1，….，number99。</p>
<p>本教程将为大家介绍 Java 数组的声明、创建和初始化，并给出其对应的代码。</p>
<h6 id="数组声明和创建"><a href="#数组声明和创建" class="headerlink" title="数组声明和创建"></a>数组声明和创建</h6><p>首先必须声明数组变量，才能在程序中使用数组。下面是声明数组变量的语法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">dataType[] arrayRefVar;   <span class="comment">// 首选的方法</span></span><br><span class="line"> </span><br><span class="line">或</span><br><span class="line"> </span><br><span class="line">dataType arrayRefVar[];  <span class="comment">// 效果相同，但不是首选方法</span></span><br></pre></td></tr></table></figure>

<p>Java语言使用new操作符来创建数组，语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dataType[] 	arrayRefVar = new dataType[arraySize]</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa5</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 变量类型  变量的名字   =    变量的值</span></span><br><span class="line">    <span class="comment">// 数组类型</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums;   <span class="comment">// 1.声明一个数组</span></span><br><span class="line">        nums = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];  <span class="comment">// 2.创建一个数组</span></span><br><span class="line">        <span class="comment">// int[] nums = new int[10];</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.给数组元素中赋值</span></span><br><span class="line">        nums[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        nums[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">        nums[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">        nums[<span class="number">3</span>] = <span class="number">4</span>;</span><br><span class="line">        nums[<span class="number">4</span>] = <span class="number">5</span>;</span><br><span class="line">        nums[<span class="number">5</span>] = <span class="number">6</span>;</span><br><span class="line">        nums[<span class="number">6</span>] = <span class="number">7</span>;</span><br><span class="line">        nums[<span class="number">7</span>] = <span class="number">8</span>;</span><br><span class="line">        nums[<span class="number">8</span>] = <span class="number">9</span>;</span><br><span class="line">        nums[<span class="number">9</span>] = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(nums[<span class="number">9</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 计算所有数组的和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  获取数组长度：arrays.length</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            sum = sum + nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;总和为：&quot;</span> + sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="处理数组"><a href="#处理数组" class="headerlink" title="处理数组"></a><strong>处理数组</strong></h6><p>数组的元素类型和数组的大小都是确定的，所以当处理数组元素时候，我们通常使用基本循环或者 For-Each 循环。</p>
<p><strong>示例</strong></p>
<p>该实例完整地展示了如何创建、初始化和操纵数组：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">double</span>[] nums = &#123;<span class="number">1.9</span>, <span class="number">2.9</span>, <span class="number">3.4</span>, <span class="number">3.5</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 打印所有数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            System.out.print(nums[i] + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 计算所有数组总和</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;总和为：&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找最大值</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; max) max = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;最大值为：&quot;</span> + max);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="内存分析"><a href="#内存分析" class="headerlink" title="内存分析"></a><strong>内存分析</strong></h6><p>Java内存分析：堆  、栈  、 方法区</p>
<h6 id="三种初始化"><a href="#三种初始化" class="headerlink" title="三种初始化"></a><strong>三种初始化</strong></h6><ul>
<li><p>静态初始化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">Max[] mans = &#123;<span class="keyword">new</span> <span class="title class_">Man</span>(<span class="number">1</span>,<span class="number">1</span>), <span class="keyword">new</span> <span class="title class_">Man</span>(<span class="number">2</span>,<span class="number">2</span>)&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>动态初始化</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">a[<span class="number">1</span>] = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组默认的初始化</p>
<p>数组是引用类型，它的元元素相当于类实例变量，因此数组一经分配空间，其中的每个元素也被按照实例变量的方式被隐式初始化。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 静态初始化: 创建 + 赋值</span></span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 动态初始化: 包含默认初始化</span></span><br><span class="line">        <span class="type">int</span>[] b = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">        b[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">        b[<span class="number">1</span>] = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(a[<span class="number">0</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">0</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">2</span>]);</span><br><span class="line">        System.out.println(b[<span class="number">3</span>]);   <span class="comment">// 包含默认初始化</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="数组的四个基本特点"><a href="#数组的四个基本特点" class="headerlink" title="数组的四个基本特点"></a><strong>数组的四个基本特点</strong></h6><ul>
<li>其长度式确定的，数组一旦被创建，它的大小就式不可以改变的</li>
<li>其元素必须是相同类型，不允许出现混合类型</li>
<li>数组变量属于引用类型，数组也可以看成是对象，数组中的每个元素相当于该对象的成员变量。数组本身就是对象，Java中对象是在堆中的，因此数组无论保存原始类型还是其它对象类型，数组 对象实在堆中的。</li>
</ul>
<h6 id="数组边界"><a href="#数组边界" class="headerlink" title="数组边界"></a><strong>数组边界</strong></h6><ul>
<li><p>下标的合法区域 ：[0, length-1], 如果越界就会报错</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        System.out.println(a[<span class="number">2</span>]);  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ArrayIndexOutOfBoundsException： 数组下标越界异常！</p>
</li>
<li><h5 id="小结："><a href="#小结：" class="headerlink" title="小结："></a><strong>小结：</strong></h5><ul>
<li>​    数组是相同数据类型（数据类型可以为 任意类型）的有序集合</li>
<li>数组也是对象，数组元素相当于对象的成员变量</li>
<li>数组的长度是确定的，不可变的。如果越界，则报：ArrayIndexOutOfBounds</li>
</ul>
</li>
</ul>
<h6 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h6><ul>
<li>普通 的for循环</li>
<li>for-each循环</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arrays = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 打印数组的元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            System.out.print(arrays[i] + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//计算所有数组的和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            sum +=arrays[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;数组和为：&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找数组最大值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arrays[i] &gt; max) max = arrays[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;最大值为：&quot;</span> + max);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 查找最小值</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arrays[i] &lt; min) min = arrays[i];</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;最小值为：&quot;</span> + min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arrays = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// JDK1.5  没有下标</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> array : arrays)&#123;</span><br><span class="line">            System.out.print(array + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>数组作方法如参</li>
<li>数组作返回值</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arrays = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// JDK1.5  没有下标</span></span><br><span class="line">        <span class="comment">// for(int array : arrays)&#123;</span></span><br><span class="line">        <span class="comment">//     System.out.print(array + &quot;  &quot;);</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        abc(arrays);</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="type">int</span>[] abcd = abcd(arrays);</span><br><span class="line">        dayin(abcd);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 打印数组</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">abc</span><span class="params">(<span class="type">int</span>[] arrays)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;arrays.length;i++)&#123;</span><br><span class="line">        System.out.print(arrays[i] + <span class="string">&quot;  &quot;</span>);        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 反转数组</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] abcd(<span class="type">int</span>[] arrays)&#123;</span><br><span class="line">        <span class="type">int</span> [] ab = <span class="keyword">new</span> <span class="title class_">int</span>[arrays.length];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 反转操作</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j=ab.length-<span class="number">1</span>; i &lt; ab.length; i++, j--)&#123;</span><br><span class="line">            ab[j] = arrays[i];</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ab;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dayin</span><span class="params">(<span class="type">int</span>[] arrays)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrays.length; i++) &#123;</span><br><span class="line">            System.out.print(arrays[i] + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h6><p>多维数组可以看成是数组的数组，比如二维数组就是一个特殊的一维数组，其每一个元素都是一个一维数组</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String[][] str = new String[3][4];</span><br></pre></td></tr></table></figure>

<p>二维数组</p>
<p><code>int a[][] = new int[2][5];</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//4行2列</span></span><br><span class="line">            <span class="comment">// 1，2</span></span><br><span class="line">            <span class="comment">// 3，4</span></span><br><span class="line">            <span class="comment">// 5，6</span></span><br><span class="line">        <span class="type">int</span>[][] array = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;, &#123;<span class="number">3</span>,<span class="number">4</span>&#125;, &#123;<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;array[i].length;j++)&#123;</span><br><span class="line">                System.out.print(array[i][j] + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="Arrays类"><a href="#Arrays类" class="headerlink" title="Arrays类"></a>Arrays类</h6><p>java.util.Arrays 类能方便地操作数组，它提供的所有方法都是静态的。</p>
<p>具有以下功能：</p>
<ul>
<li>给数组赋值：通过 fill 方法。</li>
<li>对数组排序：通过 sort 方法,按升序。</li>
<li>比较数组：通过 equals 方法比较数组中元素值是否相等。</li>
<li>查找数组元素：通过 binarySearch 方法能对排序好的数组进行二分查找法操作。</li>
</ul>
<p>具体说明请查看下表：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法和说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public static int binarySearch(Object[] a, Object key)</strong> 用二分查找算法在给定数组中搜索给定值的对象(Byte,Int,double等)。数组在调用前必须排序好的。如果查找值包含在数组中，则返回搜索键的索引；否则返回 (-(<em>插入点</em>) - 1)。</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public static boolean equals(long[] a, long[] a2)</strong> 如果两个指定的 long 型数组彼此<em>相等</em>，则返回 true。如果两个数组包含相同数量的元素，并且两个数组中的所有相应元素对都是相等的，则认为这两个数组是相等的。换句话说，如果两个数组以相同顺序包含相同的元素，则两个数组是相等的。同样的方法适用于所有的其他基本数据类型（Byte，short，Int等）。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public static void fill(int[] a, int val)</strong> 将指定的 int 值分配给指定 int 型数组指定范围中的每个元素。同样的方法适用于所有的其他基本数据类型（Byte，short，Int等）。</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public static void sort(Object[] a)</strong> 对指定对象数组根据其元素的自然顺序进行升序排列。同样的方法适用于所有的其他基本数据类型（Byte，short，Int等）。</td>
</tr>
</tbody></table>
<blockquote>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa8</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span>[] a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9090</span>,<span class="number">32145</span>,<span class="number">23</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">56</span>&#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(a);  <span class="comment">// [I@15db9742</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 打印数组元素Arrays.toString</span></span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line"></span><br><span class="line">        www(a);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//排序</span></span><br><span class="line">        Arrays.sort(a); <span class="comment">// 数组进行排序； 升序</span></span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 填充</span></span><br><span class="line">        Arrays.fill(a, <span class="number">2</span>,<span class="number">4</span>, <span class="number">0</span>);  <span class="comment">// 数组填充  2到4填充为0</span></span><br><span class="line">        System.out.println(Arrays.toString(a));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">www</span><span class="params">(<span class="type">int</span>[] a)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>) System.out.print(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(i==a.length-<span class="number">1</span>) System.out.print(a[i] + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> System.out.print(a[i]+<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h6><ul>
<li>冒泡排序无疑是最出名的排序算法之一，总共有八大类排序！</li>
<li>冒泡的代码还是相当简单的，两层循环，外层冒泡轮数，里层依次比较，江湖中人尽皆知。</li>
<li>我们看到嵌套循环，应该立马就可以得出这个算法的时候复杂度为O（n2)。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa9</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] a =&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">99</span>,<span class="number">3</span>,<span class="number">56</span>,<span class="number">90</span>,<span class="number">87</span>,<span class="number">6</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] abc = abc(a);  <span class="comment">// 调用完我们自己写的排序方法后，返回一个排序后的数组</span></span><br><span class="line">        System.out.println(Arrays.toString(abc));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 冒泡排序</span></span><br><span class="line">    <span class="comment">// 1.比较数组 中，两个相邻的元素，如果有一个比地二个数大，我们就交换他们的位置</span></span><br><span class="line">    <span class="comment">// 2.每次比较，都会产生出一个最大，或者最小的数字</span></span><br><span class="line">    <span class="comment">// 3.下一轮则就可以少一次排序</span></span><br><span class="line">    <span class="comment">// 4.依次循环，直到结束！</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] abc(<span class="type">int</span>[] shu)&#123;</span><br><span class="line">        <span class="comment">// 临时变量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// 外层循环，判断我们这个循环要走多少次</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; shu.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;  <span class="comment">// 通过flag标识位减少没有意义的比较</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 内层循环，比较判断两个数，如果第一个数比第二个数大，则交换位置</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span><span class="number">0</span>; j &lt; shu.length-<span class="number">1</span>-i; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(shu[j+<span class="number">1</span>] &lt; shu[j])&#123;</span><br><span class="line">                    temp = shu[j];</span><br><span class="line">                    shu[j] = shu[j+<span class="number">1</span>];</span><br><span class="line">                    shu[j+<span class="number">1</span>] = temp;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag == <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> shu;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h6><ul>
<li><p>需求：编写五子棋游戏中，有存盘退出和继上盘的功能。</p>
</li>
<li><p>分析问题：因为该二维数组的很多值是默认值0， 因此记录了很多没有意义的数据。</p>
</li>
<li><p>解决：稀疏数组</p>
</li>
<li><p>当一个数组中大部分位元素位0，或者位同一个值的数组时，可以使用稀疏数组来 保存该数组。</p>
</li>
<li><p>稀疏数组的处理方式是：</p>
<ul>
<li>记录数组一共有几行几列，有多少个不同值</li>
<li>把具有不同的值的元素和行列及值记录在一个小规模的数组中，从而缩小程序的规模</li>
</ul>
</li>
<li><p>如 下图：左边是原始数组，右边是稀疏数组</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa10</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个而位数组，11*11  0：没有棋子，  1：黑棋  2：白棋</span></span><br><span class="line">        <span class="type">int</span>[][] array1 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line">        array1[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        array1[<span class="number">2</span>][<span class="number">3</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出元素数组</span></span><br><span class="line">        System.out.println(<span class="string">&quot;输出原始的数组：&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] ab : array1)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> abc : ab)&#123;</span><br><span class="line">                System.out.print(abc + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;================================================================================&quot;</span>);</span><br><span class="line">        <span class="comment">// 转换位稀疏数组保存</span></span><br><span class="line">        <span class="comment">// 获取有效值的个数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array1.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; array1.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array1[i][j] != <span class="number">0</span>)&#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;有效值的个数：&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.创建一个稀疏数组的数组</span></span><br><span class="line">        <span class="type">int</span>[][] array2 = <span class="keyword">new</span> <span class="title class_">int</span>[sum+<span class="number">1</span>][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">        array2[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">11</span>;</span><br><span class="line">        array2[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">11</span>;</span><br><span class="line">        array2[<span class="number">0</span>][<span class="number">2</span>] = sum;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 变量二维数组，将非零的值，存放在稀疏数组中</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array1.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; array1[i].length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(array1[i][j] != <span class="number">0</span>)&#123;</span><br><span class="line">                    count++;</span><br><span class="line">                    array2[count][<span class="number">0</span>] = i;</span><br><span class="line">                    array2[count][<span class="number">1</span>] = j;</span><br><span class="line">                    array2[count][<span class="number">2</span>] = array1[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出稀疏数组</span></span><br><span class="line">        System.out.println(<span class="string">&quot;稀疏数组：&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; array2.length; i++) &#123;</span><br><span class="line">            System.out.println(array2[i][<span class="number">0</span>] + <span class="string">&quot;\t&quot;</span></span><br><span class="line">                             + array2[i][<span class="number">1</span>] + <span class="string">&quot;\t&quot;</span></span><br><span class="line">                             + array2[i][<span class="number">2</span>] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;==============================================================================&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;还原：&quot;</span>);</span><br><span class="line">        <span class="comment">// 1.读取稀疏数组</span></span><br><span class="line">        <span class="type">int</span>[][] array3 = <span class="keyword">new</span> <span class="title class_">int</span>[array2[<span class="number">0</span>][<span class="number">0</span>]][array2[<span class="number">0</span>][<span class="number">1</span>]];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.给其中的元素还原它的值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; array2.length; i++) &#123;</span><br><span class="line">            array3[array2[i][<span class="number">0</span>]][array2[i][<span class="number">1</span>]] = array2[i][<span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.打印</span></span><br><span class="line">        System.out.println(<span class="string">&quot;输出还原的数组：&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span>[] ab : array1)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> abc : ab)&#123;</span><br><span class="line">                System.out.print(abc + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h5 id="面向对象-OOP"><a href="#面向对象-OOP" class="headerlink" title="面向对象(OOP)"></a>面向对象(OOP)</h5><h6 id="什么是面向对象："><a href="#什么是面向对象：" class="headerlink" title="什么是面向对象："></a><strong>什么是面向对象</strong>：</h6><p><strong>面向对象编程的本质就是：以类的方式组织代码，以对象的组织（封装）数据</strong></p>
<p><strong>三大特征：</strong></p>
<ul>
<li><p>封装</p>
</li>
<li><p>继承</p>
</li>
<li><p>多态</p>
</li>
<li><p>从认识的角度考虑是先有对象后有类。对象，是具体的事物。类，是抽象的，是对对象的抽象</p>
</li>
<li><p>从代码运行角度考虑是先有类后有对象。类是对象的模板。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa14</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 使用OOP面向对象解决</span></span><br><span class="line">        <span class="comment">// 实列化一只猫[创建一只猫对象]</span></span><br><span class="line">        <span class="comment">// 解读：</span></span><br><span class="line">        <span class="comment">// 1.new Cat()  创建一只猫</span></span><br><span class="line">        <span class="comment">// 2.Cat cat1 = new Cat();  把创建的猫赋值给cat1</span></span><br><span class="line">        <span class="comment">// 3.cat1就是一个对象</span></span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        cat1.name = <span class="string">&quot;小白&quot;</span>;</span><br><span class="line">        cat1.age = <span class="number">3</span>;</span><br><span class="line">        cat1.color = <span class="string">&quot;花色&quot;</span>;</span><br><span class="line">        <span class="comment">// 创建了第二只猫， 并赋值cat2</span></span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        cat2.name = <span class="string">&quot;小花&quot;</span>;</span><br><span class="line">        cat2.age = <span class="number">5</span>;</span><br><span class="line">        cat2.color = <span class="string">&quot;白色&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 怎么访问对象的属性</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;第一只猫的信息：&quot;</span> + cat1.name + <span class="string">&quot; &quot;</span> + cat1.age + <span class="string">&quot; &quot;</span> + cat1.color);</span><br><span class="line">        System.out.println(<span class="string">&quot;第二只猫的信息：&quot;</span> + cat2.name + <span class="string">&quot; &quot;</span> + cat2.age + <span class="string">&quot; &quot;</span> + cat2.color);</span><br><span class="line"></span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>&#123;</span><br><span class="line">    <span class="comment">// 属性 </span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    String color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="对象在内存中的存在形式"><a href="#对象在内存中的存在形式" class="headerlink" title="对象在内存中的存在形式"></a><strong>对象在内存中的存在形式</strong></h6><h6 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa13</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.提供程序的安全性，保护数据</span></span><br><span class="line">    <span class="comment">// 2.隐藏代码实现细节</span></span><br><span class="line">    <span class="comment">// 3.统一接口</span></span><br><span class="line">    <span class="comment">// 4.系统可维护性</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        s1.setName(<span class="string">&quot;云龙&quot;</span>);</span><br><span class="line">        System.out.println(s1.getName());</span><br><span class="line">        s1.setAge(<span class="number">999</span>);  <span class="comment">// 不合法的</span></span><br><span class="line">        System.out.println(s1.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">// 类  private</span></span><br><span class="line">    <span class="comment">// 属性私有</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供一些可以操作这个属性的方法</span></span><br><span class="line">    <span class="comment">// 提供一些public 的get 、set方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// get 获得这个数据</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set 给这个数据设置值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(<span class="type">int</span> sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(age&gt;<span class="number">120</span> || age&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.age =<span class="number">3</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h6><p>继承是java面向对象编程技术的一块基石，因为它允许创建分等级层次的类。</p>
<p>继承就是子类继承父类的特征和行为，使得子类对象（实例）具有父类的实例域和方法，或子类从父类继承方法，使得子类具有父类相同的行为。</p>
<p><strong>类的继承格式</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">class 父类 &#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">class 子类 extends 父类 &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><strong>Person 父类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person  人 ： 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Person 父类无参构造执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;kuanshen&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Person&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//public void print()&#123; &#125;  私有的无法被继承</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>Student 子类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 学生 is  人 ： 派生类， 子类</span></span><br><span class="line"><span class="comment">// 子类继承了父类，就会拥有父类的全部方法！</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 隐藏代码：调用了父类的无参构造</span></span><br><span class="line">    <span class="built_in">this</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">super</span>();  <span class="comment">// 调用父类的构造器，必须要在子类构造器的第一行</span></span><br><span class="line">    </span><br><span class="line">        System.out.println(<span class="string">&quot;Student 子类无参构造执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;qinjiang&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name);</span><br><span class="line">        System.out.println(<span class="built_in">super</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        print();     <span class="comment">// Studnt</span></span><br><span class="line">        <span class="built_in">this</span>.print();  <span class="comment">// Student</span></span><br><span class="line">        <span class="built_in">super</span>.print();  <span class="comment">// Person</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>测试类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa15</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="comment">// student.test(&quot;秦疆&quot;);</span></span><br><span class="line">        <span class="comment">// student.test1(null);</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>super 注意：</strong></p>
<ol>
<li>super调用父类的构造方法，必须在构造方法的第一个!</li>
<li>super必须只能出现在子类的方法或构造方法中！</li>
<li>super和this不能同时调用构造方法</li>
</ol>
<p><strong>Vs this:</strong></p>
<p>​	代表的对象不同：</p>
<p>​			this： 本身调用这个对象</p>
<p>​			super： 代表父类对象的应用</p>
<p>​	前提</p>
<p>​			this： 没有继承也可以使用</p>
<p>​			super： 只能者继承条件下是使用</p>
<p>​	构造方法</p>
<p>​			this();  本类的构造</p>
<p>​			supe人();  父类的构造	</p>
<h6 id="方法的重写"><a href="#方法的重写" class="headerlink" title="方法的重写"></a>方法的重写</h6><p><strong>B类 父类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="comment">// 重写都是方法的重写，和属性无关</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// public static void test()&#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;B==&gt;test()&quot;);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B==&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>A类 子类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// public static void test()&#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;A==&gt;tets()&quot;);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// public void test()&#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;A==&gt;tets()&quot;);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Override 重写</span></span><br><span class="line">    <span class="meta">@Override</span>  <span class="comment">// 注解:有功能的注解</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tets</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A==&gt;test()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>测试类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa16</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态的方法和非静态的方法区别很大！</span></span><br><span class="line">        <span class="comment">// 静态方法： 方法的调用只左边定义的数据类型有关</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 非静态：重写</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        a.test();  <span class="comment">//A</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//父类引用指向了子类</span></span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();  <span class="comment">//子类重回写父类的方法</span></span><br><span class="line">        b.test();  <span class="comment">//B</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>总结</strong></p>
<p>重写：需要有继承关系，子类重写父类的方法</p>
<ol>
<li>​	方法名必须相同</li>
<li>参数列表必须相同</li>
<li>修饰符：范围可以扩大但不能缩小：		public &gt; Protected &gt; Default &gt; private</li>
<li>抛出的异常：范围，可以被缩小，但不能扩大；  ClassNotFoundException –&gt; Exception(大)</li>
</ol>
<p><strong>重写：子类的方法和父类的发放必须一致，方法体不同！</strong></p>
<p><strong>为什么需要重写：</strong></p>
<ol>
<li>父类的功能，子类不一定需要，或不一定满足！</li>
</ol>
<p>​	<strong>Alt + Insert : Overrid  重写</strong></p>
<h6 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h6><p>多态是同一个行为具有多个不同表现形式或形态的能力。</p>
<p>多态就是同一个接口，使用不同的实例而执行不同操作，如图所示：</p>
<p>多态性是对象多种表现形式的体现。</p>
<p><strong>Person 父类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person  人 ： 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>Student 子类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>测试类</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa16</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 一个对象的实际类型是确定的</span></span><br><span class="line">        <span class="comment">// new Steudent();</span></span><br><span class="line">        <span class="comment">// new Person();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可以指向的引用类型就不确定了</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Student 能调用的方法都是自己的或者继承父类的!</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="comment">// Person 父类型可以指向子类,但是不能调用子类独有的方法</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"></span><br><span class="line">        s2.run();  <span class="comment">//子类重写父类方法,执行子类的方法</span></span><br><span class="line">        s1.run();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对象能执行哪些方法，主要看对象左边的类型，和右边关系不大！</span></span><br><span class="line">        <span class="comment">// ((Student)s2).eat();  //</span></span><br><span class="line">        s1.eat();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>多态的注意事项：</strong></p>
<ol>
<li><p>​	多态是方法的多态</p>
</li>
<li><p>父类和子类有联系，  类型转换有异常！ ClassCastException!</p>
</li>
<li><p>存在条件：继承关系  发放需要重写，父类引用指向子类对象！<code>Father  f1 = new Son();</code></p>
</li>
<li><p>static 方法，属于类， 它不属于实列；</p>
</li>
<li><p>final 常量；</p>
</li>
<li><p>private 方法；</p>
</li>
</ol>
<p><strong>instanceof  关键字</strong> </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa16</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Object &gt; Perosn &gt; Student </span></span><br><span class="line">        <span class="comment">// Object &gt; Perosn &gt; Teacher</span></span><br><span class="line">        <span class="comment">// Object &gt; String</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// System.out.println(x instanceof y); //能不能编译通过! 接口</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"></span><br><span class="line">        System.out.println(object <span class="keyword">instanceof</span> Student);   <span class="comment">//true</span></span><br><span class="line">        System.out.println(object <span class="keyword">instanceof</span> Person);   <span class="comment">//true </span></span><br><span class="line">        System.out.println(object <span class="keyword">instanceof</span> Object);  <span class="comment">// true</span></span><br><span class="line">        System.out.println(object <span class="keyword">instanceof</span> Teacher);  <span class="comment">// false</span></span><br><span class="line">        System.out.println(object <span class="keyword">instanceof</span> String);   <span class="comment">//false</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;========================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        System.out.println(person <span class="keyword">instanceof</span> Student);   <span class="comment">//true</span></span><br><span class="line">        System.out.println(person <span class="keyword">instanceof</span> Person);   <span class="comment">//true </span></span><br><span class="line">        System.out.println(person <span class="keyword">instanceof</span> Object);  <span class="comment">// true</span></span><br><span class="line">        System.out.println(person <span class="keyword">instanceof</span> Teacher);  <span class="comment">// false</span></span><br><span class="line">        <span class="comment">// System.out.println(person instance6f String);   //编译错误</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;========================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        System.out.println(student <span class="keyword">instanceof</span> Student);   <span class="comment">//true</span></span><br><span class="line">        System.out.println(student <span class="keyword">instanceof</span> Person);   <span class="comment">//true </span></span><br><span class="line">        System.out.println(student <span class="keyword">instanceof</span> Object);  <span class="comment">// true</span></span><br><span class="line">        <span class="comment">// System.out.println(student instanceof Teacher);  //编译错误</span></span><br><span class="line">        <span class="comment">// System.out.println(student instanceof String);   //编译错误</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>类型转换</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ffa16</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 类型之间的转换： 基本类型转换  高--&gt;低  64 32 16 8</span></span><br><span class="line">                        <span class="comment">// 父  --&gt;  子</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">//子类转换为父类。可以丢失自己本来的一些方法</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.go();</span><br><span class="line">        Person.Person = student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.父类引用子类的对象</span></span><br><span class="line">        <span class="comment">// 2.把子类转换为父类，向上转型</span></span><br><span class="line">        <span class="comment">// 3.把父类转换为子类，向下转型，强制转换</span></span><br><span class="line">        <span class="comment">// 4. 方便方法的调用，减少代码的重复，简介</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person  人 ： 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">go</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;go&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>static 关键字</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>  &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> age; <span class="comment">// 静态变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;  <span class="comment">// 非静态变量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">go</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Student s1 = new Student();</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// System.out.println(Student.age);</span></span><br><span class="line">        <span class="comment">// System.out.println(s1.score);</span></span><br><span class="line">        <span class="comment">// System.out.println(s1.age);</span></span><br><span class="line"></span><br><span class="line">       go();;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person  人 ： 父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.赋初始值</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 代码块（匿名代码块）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;匿名代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.只执行一次</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 静态代码块</span></span><br><span class="line">        System.out.println(<span class="string">&quot;静态代码块&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;构造方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;===============&quot;</span>);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="comment">// 静态代码只执行一次</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">Action</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// abstract 抽象类： 类 extends: 单继承  （接口可以多继承）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Action</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//约束~ 有人帮我们实现</span></span><br><span class="line">    <span class="comment">// abstract , 抽象方法，只有方法名字，没有方法的实现</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.不能new 这个抽象类，只能靠子类去实现它：约束！</span></span><br><span class="line">        <span class="comment">// 2.抽象类可以写普通的方法</span></span><br><span class="line">        <span class="comment">// 抽象方法必须在抽象类中</span></span><br><span class="line">        <span class="comment">// 抽象的抽象：约束</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h6><p>接口（英文：Interface），在JAVA编程语言中是一个抽象类型，是抽象方法的集合，接口通常以interface来声明。一个类通过继承接口的方式，从而来继承接口的抽象方法。</p>
<p>接口并不是类，编写接口的方式和类很相似，但是它们属于不同的概念。类描述对象的属性和方法。接口则包含类要实现的方法。</p>
<p>除非实现接口的类是抽象类，否则该类要定义接口中的所有方法。</p>
<p>接口无法被实例化，但是可以被实现。一个实现接口的类，必须实现接口内所描述的所有方法，否则就必须声明为抽象类。另外，在 Java 中，接口类型可用来声明一个变量，他们可以成为一个空指针，或是被绑定在一个以此接口实现的对象。</p>
<p><strong>接口与类相似点：</strong></p>
<ul>
<li>一个接口可以有多个方法。</li>
<li>接口文件保存在 .java 结尾的文件中，文件名使用接口名。</li>
<li>接口的字节码文件保存在 .class 结尾的文件中。</li>
<li>接口相应的字节码文件必须在与包名称相匹配的目录结构中。</li>
</ul>
<p><strong>接口与类的区别：</strong></p>
<ul>
<li>接口不能用于实例化对象。</li>
<li>接口没有构造方法。</li>
<li>接口中所有的方法必须是抽象方法，Java 8 之后 接口中可以使用 default 关键字修饰的非抽象方法。</li>
<li>接口不能包含成员变量，除了 static 和 final 变量。</li>
<li>接口不是被类继承了，而是要被类实现。</li>
<li>接口支持多继承。</li>
</ul>
<p><strong>接口特性</strong></p>
<ul>
<li>接口中每一个方法也是隐式抽象的,接口中的方法会被隐式的指定为 <strong>public abstract</strong>（只能是 public abstract，其他修饰符都会报错）。</li>
<li>接口中可以含有变量，但是接口中的变量会被隐式的指定为 <strong>public static final</strong> 变量（并且只能是 public，用 private 修饰会报编译错误）。</li>
<li>接口中的方法是不能在接口中实现的，只能由实现接口的类来实现接口中的方法。</li>
</ul>
<p><strong>抽象类和接口的区别</strong></p>
<ul>
<li>\1. 抽象类中的方法可以有方法体，就是能实现方法的具体功能，但是接口中的方法不行。</li>
<li>\2. 抽象类中的成员变量可以是各种类型的，而接口中的成员变量只能是 <strong>public static final</strong> 类型的。</li>
<li>\3. 接口中不能含有静态代码块以及静态方法(用 static 修饰的方法)，而抽象类是可以有静态代码块和静态方法。</li>
<li>\4. 一个类只能继承一个抽象类，而一个类却可以实现多个接口。</li>
</ul>
<p><strong>接口的声明</strong></p>
<p>接口的声明语法格式如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[可见度] interface 接口名称 [extends 其他的接口名] &#123;        	<span class="comment">// 声明变量    </span></span><br><span class="line">	<span class="comment">// 抽象方法 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Interface关键字用来声明一个接口。下面是接口声明的一个简单例子。</p>
<p><code>NameOfInterface.java 文件代码：</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文件名 : NameOfInterface.java */</span> </span><br><span class="line">	<span class="keyword">import</span> java.lang.*;</span><br><span class="line">	<span class="comment">//引入包 </span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NameOfInterface</span> &#123;   </span><br><span class="line">	<span class="comment">//任何类型 final, static 字段   //抽象方法 </span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<p>接口有以下特性：</p>
<ul>
<li>接口是隐式抽象的，当声明一个接口的时候，不必使用<strong>abstract</strong>关键字。</li>
<li>接口中每一个方法也是隐式抽象的，声明时同样不需要<strong>abstract</strong>关键字。</li>
<li>接口中的方法都是公有的。</li>
</ul>
<p>接口的实现</p>
<p>当类实现接口的时候，类要实现接口中所有的方法。否则，类必须声明为抽象的类。</p>
<p>类使用implements关键字实现接口。在类声明中，Implements关键字放在class声明后面。</p>
<p>实现一个接口的语法，可以使用这个公式：</p>
<p>接口语法：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">...implements 接口名称[, 其他接口名称, 其他接口名称..., ...] ...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>实例</p>
<p>MammalInt.java 文件代码：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 文件名 : MammalInt.java */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MammalInt</span> <span class="keyword">implements</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Mammal eats&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">travel</span><span class="params">()</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Mammal travels&quot;</span>);</span><br><span class="line">   &#125; </span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">noOfLegs</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span>&#123;</span><br><span class="line">      <span class="type">MammalInt</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MammalInt</span>();</span><br><span class="line">      m.eat();</span><br><span class="line">      m.travel();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上实例编译运行结果如下:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Mammal eats</span><br><span class="line">Mammal travels</span><br></pre></td></tr></table></figure>

<p>重写接口中声明的方法时，需要注意以下规则：</p>
<ul>
<li>类在实现接口的方法时，不能抛出强制性异常，只能在接口中，或者继承接口的抽象类中抛出该强制性异常。</li>
<li>类在重写方法时要保持一致的方法名，并且应该保持相同或者相兼容的返回值类型。</li>
<li>如果实现接口的类是抽象类，那么就没必要实现该接口的方法。</li>
</ul>
<p>在实现接口的时候，也要注意一些规则：</p>
<ul>
<li>一个类可以同时实现多个接口。</li>
<li>一个类只能继承一个类，但是能实现多个接口。</li>
<li>一个接口能继承另一个接口，这和类之间的继承比较相似。</li>
</ul>
<p><strong>接口的继承</strong></p>
<p>一个接口能继承另一个接口，和类之间的继承方式比较相似。接口的继承使用extends关键字，子接口继承父接口的方法。</p>
<p>下面的Sports接口被Hockey和Football接口继承：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件名: Sports.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Sports</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHomeTeam</span><span class="params">(String name)</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVisitingTeam</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 文件名: Football.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Football</span> <span class="keyword">extends</span> <span class="title class_">Sports</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">homeTeamScored</span><span class="params">(<span class="type">int</span> points)</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visitingTeamScored</span><span class="params">(<span class="type">int</span> points)</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endOfQuarter</span><span class="params">(<span class="type">int</span> quarter)</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 文件名: Hockey.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Hockey</span> <span class="keyword">extends</span> <span class="title class_">Sports</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">homeGoalScored</span><span class="params">()</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visitingGoalScored</span><span class="params">()</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endOfPeriod</span><span class="params">(<span class="type">int</span> period)</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">overtimePeriod</span><span class="params">(<span class="type">int</span> ot)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Hockey接口自己声明了四个方法，从Sports接口继承了两个方法，这样，实现Hockey接口的类需要实现六个方法。</p>
<p>相似的，实现Football接口的类需要实现五个方法，其中两个来自于Sports接口。</p>
<p><strong>接口的多继承</strong></p>
<p>在Java中，类的多继承是不合法，但接口允许多继承。</p>
<p>在接口的多继承中extends关键字只需要使用一次，在其后跟着继承接口。 如下所示：</p>
<p><code>public interface Hockey extends Sports, Event</code></p>
<p>以上的程序片段是合法定义的子接口，与类不同的是，接口允许多继承，而 Sports及 Event 可以定义或是继承相同的方法</p>
<p><strong>标记接口</strong></p>
<p>最常用的继承接口是没有包含任何方法的接口。</p>
<p>标记接口是没有任何方法和属性的接口.它仅仅表明它的类属于一个特定的类型,供其他代码来测试允许做一些事情。</p>
<p>标记接口作用：简单形象的说就是给某个对象打个标（盖个戳），使对象拥有某个或某些特权。</p>
<p>例如：java.awt.event 包中的 MouseListener 接口继承的 java.util.EventListener 接口定义如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EventListener</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没有任何方法的接口被称为标记接口。标记接口主要用于以下两种目的：</p>
<ul>
<li><p>建立一个公共的父接口：</p>
<p>正如EventListener接口，这是由几十个其他接口扩展的Java API，你可以使用一个标记接口来建立一组接口的父接口。例如：当一个接口继承了EventListener接口，Java虚拟机(JVM)就知道该接口将要被用于一个事件的代理方案。</p>
</li>
<li><p>向一个类添加数据类型：</p>
<p>这种情况是标记接口最初的目的，实现标记接口的类不需要定义任何接口方法(因为标记接口根本就没有方法)，但是该类通过多态性变成一个接口类型。</p>
</li>
</ul>
<h5 id="异常机制"><a href="#异常机制" class="headerlink" title="异常机制"></a>异常机制</h5><h6 id="File、IO流"><a href="#File、IO流" class="headerlink" title="File、IO流"></a>File、IO流</h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个File对象，指代某个具体的文件</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 路径分隔符</span></span><br><span class="line">        <span class="comment">//  File f1 = new File(&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\test.txt&quot;);</span></span><br><span class="line">        <span class="comment">// File f1 = new File(&quot;E:/daima/编程资料&amp;笔记/JavaTop/test.txt&quot;);</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:&quot;</span> + File.separator + <span class="string">&quot;daima&quot;</span> + File.separator + <span class="string">&quot;编程资料&amp;笔记&quot;</span> + File.separator + <span class="string">&quot;JavaTop&quot;</span> + File.separator + <span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line">        System.out.println(f1.length());   <span class="comment">//文件大小</span></span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/daima&quot;</span>);</span><br><span class="line">        System.out.println(f2.length());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 注意File对象可以指代一个不存在的文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/daima/编程资料&amp;笔记/JavaTop/aaaaa.txt&quot;</span>);</span><br><span class="line">        System.out.println(f3.length());</span><br><span class="line">        System.out.println(f3.exists());  <span class="comment">//文件路径  返回：false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 我现在要定位的文件在模块中，应该怎么定位？</span></span><br><span class="line">        <span class="comment">// 绝对定位 ：带盘符的</span></span><br><span class="line">        <span class="comment">// File f4 = new File(&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\test.txt&quot;);</span></span><br><span class="line">        <span class="comment">// 相对定位（重点）： 不带盘符，默认是直接去工程下寻找文件的</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line">        System.out.println(f4.length());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 目标：掌握File提供的判断文件类型，获取文件信息功能</span></span><br><span class="line">        <span class="comment">// 1.创建文件对象指代某个文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">ff1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.public boolean exists():  判断当前文件对象，对应的文件是否存在，存在返回true</span></span><br><span class="line">        System.out.println(ff1.exists());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.public boolean isFile():  判断当前文件对象是否指代的是文件，是文件返回true</span></span><br><span class="line">        System.out.println(ff1.isFile());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.public boolean isDirectory(）： 判断当前文件对象是否指代的是文件夹，是文件返回true</span></span><br><span class="line">        System.out.println(ff1.isDirectory());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. public String getName():  获取文件名称（包含后缀）</span></span><br><span class="line">        System.out.println(ff1.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6.public long length():   获取文件大小，返回字节</span></span><br><span class="line">        System.out.println(ff1.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7.public long lastModified():  获取文件最后修改的时候</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> ff1.lastModified();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd HH:mm:ss&quot;</span>);</span><br><span class="line">        System.out.println(sdf.format(time));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 8.public String getPath():  获取创建文件对象时，使用的路径</span></span><br><span class="line">        System.out.println(ff1.getPath());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 9.public String getAbsolutePath():  获取绝对路径</span></span><br><span class="line">        System.out.println(ff1.getAbsolutePath());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<p><strong>File创建和删除文件的相关操作</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：掌握File创建和删除文件的相关操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.public boolean createNewFile(), 创建一个新文件（文件内容为空），创建成功返回true</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;bbb.txt&quot;</span>);</span><br><span class="line">        System.out.println(f1.createNewFile());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.public boolean mkdir(), 用于创建文件夹，注意：只能创建一级文件夹</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/daima/编程资料&amp;笔记/JavaTop/demo/ccc.txt&quot;</span>);</span><br><span class="line">        System.out.println(f2.mkdir());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.public boolean mkdirs(), 用于创建文件夹，注意：可以创建多级文件夹</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/daima/编程资料&amp;笔记/JavaTop/demo/111/222/333/444.txt&quot;</span>);</span><br><span class="line">        System.out.println(f3.mkdirs());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.public boolean delete(), 删除文件或者空文件，注意：不能删除非空文件夹</span></span><br><span class="line">        System.out.println(f1.delete());</span><br><span class="line">        System.out.println(f2.delete());</span><br><span class="line">        <span class="comment">// File f4 = new File(&quot;E:/daime&quot;);</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>掌握File提供的遍历文件夹的方法</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：掌握File提供的遍历文件夹的方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.public String[] list(),  获取当前目录下的所有的“一级文件夹名称”到一个字符串数组中去返回</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;E:/daima/编程资料&amp;笔记/JavaTop&quot;</span>);</span><br><span class="line">        String[] names = f1.list();</span><br><span class="line">        <span class="keyword">for</span>(String name : names)&#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.public File[] listFiles()， （重点）获取当前目录下的所有的“一级文件对象”到一个文件对象数组中去返回（重点）</span></span><br><span class="line">        File[] files = f1.listFiles();</span><br><span class="line">        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">            System.out.println(file.getAbsolutePath());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281031271.png" alt="image-20260128103120116"></p>
<p><strong>方法递归形式</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：认识一下递归的形式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo06</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        test();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 直接方法递归</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;------test1-----------&quot;</span>);</span><br><span class="line">        test();  <span class="comment">// 直接方法递归  会进入死循环</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 间接方法递归</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----test2------&quot;</span>);</span><br><span class="line">        test3();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        test2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：掌握递归的应用，执行流程和算法思想</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;5的阶乘：&quot;</span> + f(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">f</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="comment">// 终结点</span></span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  f(n - <span class="number">1</span>) * n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281031517.png" alt="image-20260128103110368"></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281031246.png" alt="image-20260128103059990"></p>
<h6 id="文件字节输入流"><a href="#文件字节输入流" class="headerlink" title="文件字节输入流"></a><strong>文件字节输入流</strong></h6><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">//目录：掌握文件字节输入流，每次读取一个字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span>  Exception &#123;</span><br><span class="line">        <span class="comment">// 1.创建文件字节流管道，与源文件接通</span></span><br><span class="line">        <span class="comment">// InputStream is  = new FileInputStream(new File(&quot;JavaTop\\demo\\test.txt&quot;));</span></span><br><span class="line">        <span class="comment">// 简化写法：推荐使用</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>((<span class="string">&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\test.txt&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.开始读取文件的字节数据</span></span><br><span class="line">        <span class="comment">// public int read(): 每次读取一个字节返回，如果没有数据了，返回-1</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">b1</span> <span class="operator">=</span> is.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>)b1);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">b2</span> <span class="operator">=</span> is.read();</span><br><span class="line">        System.out.println((<span class="type">char</span>)b2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>掌握使用<strong>FileInputStream</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：掌握使用FileInputStream每次读取多个字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个字节输入流对象代表字节输入流管道于源文件接通。</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.开始读取文件中的字节数据，每次读取多个字节</span></span><br><span class="line">        <span class="comment">// public int read(byte b[]) throws IOException</span></span><br><span class="line">        <span class="comment">// 每次读取多个字节流到字节字节数组中去，返回读取的字节数据，返回读取的字节数量，读取完毕会返回-1</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> is.read(buffer);</span><br><span class="line">        <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer);</span><br><span class="line">        System.out.println(rs);</span><br><span class="line">        System.out.println(<span class="string">&quot;当次读取字节的数量：&quot;</span> + len);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">len2</span> <span class="operator">=</span> is.read(buffer);</span><br><span class="line">        <span class="type">String</span> <span class="variable">rs2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len2);</span><br><span class="line">        System.out.println(rs2);</span><br><span class="line">        System.out.println(<span class="string">&quot;当前读取字符的数量：&quot;</span> + len2);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">len3</span> <span class="operator">=</span> is.read(buffer);</span><br><span class="line">        System.out.println(len3);  <span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标：掌握使用FileInputStream每次读取多个字节</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo11</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.创建一个字节输入流对象代表字节输入流管道于源文件接通。</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\test.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.开始读取文件中的字节数据，每次读取多个字节</span></span><br><span class="line">        <span class="comment">// public int read(byte b[]) throws IOException</span></span><br><span class="line">        <span class="comment">// 每次读取多个字节流到字节字节数组中去，返回读取的字节数据，返回读取的字节数量，读取完毕会返回-1</span></span><br><span class="line"><span class="comment">//        byte[] buffer = new byte[3];</span></span><br><span class="line"><span class="comment">//        int len = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        String rs = new String(buffer);</span></span><br><span class="line"><span class="comment">//        System.out.println(rs);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;当次读取字节的数量：&quot; + len);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int len2 = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        String rs2 = new String(buffer, 0, len2);</span></span><br><span class="line"><span class="comment">//        System.out.println(rs2);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;当前读取字符的数量：&quot; + len2);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        int len3 = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        System.out.println(len3);  // -1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.使用循环改造</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="type">int</span> len;  <span class="comment">// 记住每次读取了多少个字节</span></span><br><span class="line">        <span class="keyword">while</span> ((len = is.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// 注意：读了多少，倒出多少</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer, <span class="number">0</span>, len);</span><br><span class="line">            System.out.println(rs);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 性能得到了明显的提升</span></span><br><span class="line">        <span class="comment">// 这种方案也不能避免读取汉字输出乱码的问题</span></span><br><span class="line"></span><br><span class="line">        is.close();  <span class="comment">// 关闭流</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//import com.sun.org.apache.xpath.internal.operations.String;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">dem012</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1.一次性读取完文件的全部字节到一个字节数组中去</span></span><br><span class="line">        <span class="comment">// 创建一个字节输入流管道与源文件接通</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\word.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.准备一个字节数组，大小与文件的大小正好一样大</span></span><br><span class="line"><span class="comment">//        File f = new File(&quot;E:\\daima\\编程资料&amp;笔记\\JavaTop\\demo\\word.txt&quot;);</span></span><br><span class="line"><span class="comment">//        long size = f.length();</span></span><br><span class="line"><span class="comment">//        byte[] buffer = new byte[(int)size];</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        long len = is.read(buffer);</span></span><br><span class="line"><span class="comment">//        System.out.println(new String(buffer));</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        System.out.println(size);</span></span><br><span class="line"><span class="comment">//        System.out.println(len);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] buffer = is.readAllBytes();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buffer));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="文件字节输出流"><a href="#文件字节输出流" class="headerlink" title="文件字节输出流"></a><strong>文件字节输出流</strong></h6><h3 id="Java巩固与提升"><a href="#Java巩固与提升" class="headerlink" title="Java巩固与提升"></a>Java巩固与提升</h3><h5 id="1-1-二维数组的基本运用"><a href="#1-1-二维数组的基本运用" class="headerlink" title="1.1 二维数组的基本运用"></a>1.1 二维数组的基本运用</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo001</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 变量(类似数学：标量)，重点</span></span><br><span class="line"><span class="comment">     * 一维数组(类似数学：向量) ，重点</span></span><br><span class="line"><span class="comment">     * 二维数组(类似数学：矩阵)， 会使用</span></span><br><span class="line"><span class="comment">     * 三维数组(类似数学：立体空间)，了解。N维数组(类似数学：平行空间)</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">// 变量(它只有一个值)</span></span><br><span class="line">        <span class="type">int</span>[] nums = &#123;<span class="number">30</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">600</span>, <span class="number">40</span>&#125;; <span class="comment">// 一维数组(它有多个值)</span></span><br><span class="line">        <span class="comment">// 定义方法一：</span></span><br><span class="line">        <span class="type">int</span>[][] num2d_a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][<span class="number">3</span>]; <span class="comment">// 二维数组(它有 m * n个值)</span></span><br><span class="line">        <span class="comment">// 分配数据</span></span><br><span class="line">        num2d_a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">30</span>;</span><br><span class="line">        num2d_a[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">40</span>;</span><br><span class="line">        num2d_a[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//        num2d_a[0][3] = 700; 错误</span></span><br><span class="line">        num2d_a[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">50</span>;</span><br><span class="line"><span class="comment">//        ...</span></span><br><span class="line">        num2d_a[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//        num2d_a[4][3] = 100; 错误</span></span><br><span class="line">        <span class="comment">// 定义方法二, 每行元素的长度不确定，比较少</span></span><br><span class="line">        <span class="type">int</span>[][] num2d_b = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义方法三</span></span><br><span class="line">        <span class="type">int</span>[][] num2d_c = &#123;</span><br><span class="line">                &#123;<span class="number">100</span>, <span class="number">200</span>, <span class="number">70</span>&#125;,</span><br><span class="line">                &#123;<span class="number">720</span>, <span class="number">300</span>, <span class="number">400</span>&#125;,</span><br><span class="line">                &#123;<span class="number">1200</span>, <span class="number">456</span>, <span class="number">778</span>&#125;,</span><br><span class="line">                &#123;<span class="number">134</span>, <span class="number">431</span>, <span class="number">224</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        System.out.println(num2d_c[0][2]);</span></span><br><span class="line">        <span class="comment">// 如何将num2d_c的每个值输出，每行数据每个值逗号分隔，另外一行进行换行</span></span><br><span class="line">        System.out.println(num2d_c.length);  <span class="comment">// 结果：4，说明获取是二维数组的行数</span></span><br><span class="line">        System.out.println(num2d_c[<span class="number">0</span>].length); <span class="comment">// 结果：3， 说明获取是二维数组第一行的列数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num2d_c.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; num2d_c[i].length; j++) &#123;</span><br><span class="line">                System.out.print(num2d_c[i][j] + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>动手实践</strong></p>
<p><img data-src="https://raw.githubusercontent.com/cisgu/typora-picture/master/img/202601281030154.png" alt="image-20260128103028942"></p>
<h5 id="1-2-静态的基本概念"><a href="#1-2-静态的基本概念" class="headerlink" title="1.2 静态的基本概念"></a>1.2 静态的基本概念</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo002_1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 没有设置static</span></span><br><span class="line">        <span class="type">demo002_2</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">demo002_2</span>();</span><br><span class="line">        d2.stu_id = <span class="number">10001</span>;</span><br><span class="line">        demo002_2.stu_name = <span class="string">&quot;谭小乖&quot;</span>;</span><br><span class="line">        d2.getInfo();</span><br><span class="line">        <span class="comment">// 在demo002_2，变量(字段)设置了 static 表示程序运行之前就已经存在</span></span><br><span class="line"><span class="comment">//        demo002_2.stu_name = &quot;张三&quot;;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo002_2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> stu_id;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String stu_name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(stu_id + <span class="string">&quot;,&quot;</span> + stu_name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">myGetInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我的个人介绍&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="1-3-方法重载"><a href="#1-3-方法重载" class="headerlink" title="1.3 方法重载"></a>1.3 方法重载</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo002</span> &#123;</span><br><span class="line">    <span class="comment">// 方法重载要求：与返回值无关，与参数个数不同、类型不同、顺序不同有关系</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        max(<span class="number">30</span>, <span class="number">37.6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Math.max()  Math这个类中的字段和方法都是静态的</span></span><br><span class="line"><span class="comment">//        ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        arrayList.add();  // ArrayList的方法需要实例化才能使用，它的方法都是非静态的</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> x)</span>&#123;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> x)</span>&#123;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> x, <span class="type">double</span> y)</span>&#123;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= y)&#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 上面的max方法智能用于int类型数据，如果需要两个数为浮点类型数据的最大值？</span></span><br><span class="line">    <span class="comment">// 解决方案是创建一个有相同名字不同参数的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= y)&#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比如要比较字符串的大小</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">max</span><span class="params">(String x, String y)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x.length() &gt;= y.length()) &#123;</span><br><span class="line">            System.out.println(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>面向对象类</tag>
        <tag>抽象类</tag>
        <tag>集合和泛型</tag>
      </tags>
  </entry>
</search>
